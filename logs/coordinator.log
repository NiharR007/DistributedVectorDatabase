2025-03-23 19:39:51,085 - root - INFO - Initialized LSH sharding with 3 tables and 4 hash functions
2025-03-23 19:39:51,085 - __main__ - INFO - Initialized coordinator with config: config/coordinator.yaml
2025-03-23 19:39:51,086 - __main__ - INFO - Starting coordinator server on localhost:6000
 * Serving Flask app 'coordinator_server'
 * Debug mode: off
2025-03-23 19:39:51,090 - werkzeug - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://localhost:6000
2025-03-23 19:39:51,090 - werkzeug - INFO - [33mPress CTRL+C to quit[0m
2025-03-23 19:40:39,324 - werkzeug - INFO - 127.0.0.1 - - [23/Mar/2025 19:40:39] "GET /health HTTP/1.1" 200 -
2025-03-23 19:40:39,419 - __main__ - INFO - Received request to add 100 vectors
2025-03-23 19:40:39,419 - __main__ - DEBUG - Vectors shape: (100, 512)
2025-03-23 19:40:39,419 - __main__ - DEBUG - IDs shape: (100,)
2025-03-23 19:40:39,420 - __main__ - DEBUG - Sample IDs: [182611 335177 278705 463618 568981]...
2025-03-23 19:40:39,420 - __main__ - DEBUG - Calling coordinator.distribute_vectors
2025-03-23 19:40:39,420 - coordinator - INFO - Starting vector distribution for 100 vectors
2025-03-23 19:40:39,420 - root - INFO - LSH: Processing 100 vectors with shape (100, 512)
2025-03-23 19:40:39,422 - root - DEBUG - Table 0 hash value shape: (100, 4)
2025-03-23 19:40:39,422 - root - DEBUG - Table 1 hash value shape: (100, 4)
2025-03-23 19:40:39,423 - root - DEBUG - Table 2 hash value shape: (100, 4)
2025-03-23 19:40:39,423 - root - INFO - LSH: Combined hash shape: (100, 12)
2025-03-23 19:40:39,423 - root - INFO - LSH: Assigned vectors to shards: [(0, 35), (1, 39), (2, 26)]
2025-03-23 19:40:39,423 - coordinator - INFO - Shard assignments: (array([0, 1, 2]), array([35, 39, 26]))
2025-03-23 19:40:39,424 - coordinator - INFO - Grouped vectors by shard: ['shard_1: 39 vectors', 'shard_2: 26 vectors', 'shard_0: 35 vectors']
2025-03-23 19:40:39,424 - coordinator - INFO - Sending 39 vectors to node localhost:6002
2025-03-23 19:40:39,425 - coordinator - INFO - Sending 26 vectors to node localhost:6003
2025-03-23 19:40:39,426 - coordinator - INFO - Sending 35 vectors to node localhost:6001
2025-03-23 19:40:39,450 - urllib3.connectionpool - DEBUG - Starting new HTTP connection (1): localhost:6003
2025-03-23 19:40:39,450 - urllib3.connectionpool - DEBUG - Starting new HTTP connection (1): localhost:6002
2025-03-23 19:40:39,450 - urllib3.connectionpool - DEBUG - Starting new HTTP connection (1): localhost:6001
2025-03-23 19:40:39,476 - urllib3.connectionpool - DEBUG - http://localhost:6003 "POST /add_vectors HTTP/1.1" 200 51
2025-03-23 19:40:39,477 - coordinator - INFO - Successfully sent 26 vectors to node localhost:6003
2025-03-23 19:40:39,477 - urllib3.connectionpool - DEBUG - http://localhost:6002 "POST /add_vectors HTTP/1.1" 200 51
2025-03-23 19:40:39,477 - urllib3.connectionpool - DEBUG - http://localhost:6001 "POST /add_vectors HTTP/1.1" 200 51
2025-03-23 19:40:39,477 - coordinator - INFO - Successfully sent 39 vectors to node localhost:6002
2025-03-23 19:40:39,477 - coordinator - INFO - Successfully sent 35 vectors to node localhost:6001
2025-03-23 19:40:39,478 - coordinator - INFO - Completed vector distribution
2025-03-23 19:40:39,479 - urllib3.connectionpool - DEBUG - Starting new HTTP connection (1): localhost:6001
2025-03-23 19:40:39,480 - urllib3.connectionpool - DEBUG - http://localhost:6001 "GET /stats HTTP/1.1" 200 217
2025-03-23 19:40:39,481 - urllib3.connectionpool - DEBUG - Starting new HTTP connection (1): localhost:6002
2025-03-23 19:40:39,482 - urllib3.connectionpool - DEBUG - http://localhost:6002 "GET /stats HTTP/1.1" 200 218
2025-03-23 19:40:39,483 - urllib3.connectionpool - DEBUG - Starting new HTTP connection (1): localhost:6003
2025-03-23 19:40:39,485 - urllib3.connectionpool - DEBUG - http://localhost:6003 "GET /stats HTTP/1.1" 200 218
2025-03-23 19:40:39,485 - __main__ - INFO - System stats after adding vectors: {'total_nodes': 3, 'sharding_strategy': 'lsh', 'replication_factor': 1, 'nodes': {'localhost:6001': {'dimension': 512, 'index_type': 'FlatL2', 'memory_usage_mb': 0.07, 'metric': 'L2', 'next_id': 0, 'sample_ids': [35326, 377393, 231339, 124798, 32887], 'storage_path': 'data/shard_0', 'timestamp': 1742773239.4800441, 'total_vectors': 35}, 'localhost:6002': {'dimension': 512, 'index_type': 'FlatL2', 'memory_usage_mb': 0.08, 'metric': 'L2', 'next_id': 0, 'sample_ids': [523957, 11051, 137727, 237984, 196843], 'storage_path': 'data/shard_1', 'timestamp': 1742773239.4825191, 'total_vectors': 39}, 'localhost:6003': {'dimension': 512, 'index_type': 'FlatL2', 'memory_usage_mb': 0.05, 'metric': 'L2', 'next_id': 0, 'sample_ids': [335177, 148508, 206218, 304180, 361730], 'storage_path': 'data/shard_2', 'timestamp': 1742773239.485481, 'total_vectors': 26}}}
2025-03-23 19:40:39,486 - __main__ - INFO - Total vectors in system: 0
2025-03-23 19:40:39,486 - werkzeug - INFO - 127.0.0.1 - - [23/Mar/2025 19:40:39] "POST /add_vectors HTTP/1.1" 200 -
2025-03-23 19:40:39,488 - __main__ - INFO - Getting system statistics
2025-03-23 19:40:39,490 - urllib3.connectionpool - DEBUG - Starting new HTTP connection (1): localhost:6001
2025-03-23 19:40:39,491 - urllib3.connectionpool - DEBUG - http://localhost:6001 "GET /stats HTTP/1.1" 200 217
2025-03-23 19:40:39,492 - urllib3.connectionpool - DEBUG - Starting new HTTP connection (1): localhost:6002
2025-03-23 19:40:39,493 - urllib3.connectionpool - DEBUG - http://localhost:6002 "GET /stats HTTP/1.1" 200 217
2025-03-23 19:40:39,494 - urllib3.connectionpool - DEBUG - Starting new HTTP connection (1): localhost:6003
2025-03-23 19:40:39,495 - urllib3.connectionpool - DEBUG - http://localhost:6003 "GET /stats HTTP/1.1" 200 218
2025-03-23 19:40:39,496 - werkzeug - INFO - 127.0.0.1 - - [23/Mar/2025 19:40:39] "GET /stats HTTP/1.1" 200 -
2025-03-23 19:40:40,583 - __main__ - INFO - Received request to add 100 vectors
2025-03-23 19:40:40,583 - __main__ - DEBUG - Vectors shape: (100, 512)
2025-03-23 19:40:40,583 - __main__ - DEBUG - IDs shape: (100,)
2025-03-23 19:40:40,583 - __main__ - DEBUG - Sample IDs: [261888 177934  25096 376310 329614]...
2025-03-23 19:40:40,583 - __main__ - DEBUG - Calling coordinator.distribute_vectors
2025-03-23 19:40:40,583 - coordinator - INFO - Starting vector distribution for 100 vectors
2025-03-23 19:40:40,583 - root - INFO - LSH: Processing 100 vectors with shape (100, 512)
2025-03-23 19:40:40,584 - root - DEBUG - Table 0 hash value shape: (100, 4)
2025-03-23 19:40:40,584 - root - DEBUG - Table 1 hash value shape: (100, 4)
2025-03-23 19:40:40,584 - root - DEBUG - Table 2 hash value shape: (100, 4)
2025-03-23 19:40:40,584 - root - INFO - LSH: Combined hash shape: (100, 12)
2025-03-23 19:40:40,584 - root - INFO - LSH: Assigned vectors to shards: [(0, 46), (1, 30), (2, 24)]
2025-03-23 19:40:40,584 - coordinator - INFO - Shard assignments: (array([0, 1, 2]), array([46, 30, 24]))
2025-03-23 19:40:40,584 - coordinator - INFO - Grouped vectors by shard: ['shard_0: 46 vectors', 'shard_1: 30 vectors', 'shard_2: 24 vectors']
2025-03-23 19:40:40,584 - coordinator - INFO - Sending 46 vectors to node localhost:6001
2025-03-23 19:40:40,595 - coordinator - INFO - Sending 30 vectors to node localhost:6002
2025-03-23 19:40:40,601 - coordinator - INFO - Sending 24 vectors to node localhost:6003
2025-03-23 19:40:40,607 - urllib3.connectionpool - DEBUG - Starting new HTTP connection (1): localhost:6001
2025-03-23 19:40:40,607 - urllib3.connectionpool - DEBUG - Starting new HTTP connection (1): localhost:6002
2025-03-23 19:40:40,608 - urllib3.connectionpool - DEBUG - Starting new HTTP connection (1): localhost:6003
2025-03-23 19:40:40,612 - urllib3.connectionpool - DEBUG - http://localhost:6003 "POST /add_vectors HTTP/1.1" 200 51
2025-03-23 19:40:40,612 - urllib3.connectionpool - DEBUG - http://localhost:6002 "POST /add_vectors HTTP/1.1" 200 51
2025-03-23 19:40:40,613 - coordinator - INFO - Successfully sent 30 vectors to node localhost:6002
2025-03-23 19:40:40,613 - coordinator - INFO - Successfully sent 24 vectors to node localhost:6003
2025-03-23 19:40:40,614 - urllib3.connectionpool - DEBUG - http://localhost:6001 "POST /add_vectors HTTP/1.1" 200 51
2025-03-23 19:40:40,614 - coordinator - INFO - Successfully sent 46 vectors to node localhost:6001
2025-03-23 19:40:40,614 - coordinator - INFO - Completed vector distribution
2025-03-23 19:40:40,615 - urllib3.connectionpool - DEBUG - Starting new HTTP connection (1): localhost:6001
2025-03-23 19:40:40,616 - urllib3.connectionpool - DEBUG - http://localhost:6001 "GET /stats HTTP/1.1" 200 217
2025-03-23 19:40:40,617 - urllib3.connectionpool - DEBUG - Starting new HTTP connection (1): localhost:6002
2025-03-23 19:40:40,619 - urllib3.connectionpool - DEBUG - http://localhost:6002 "GET /stats HTTP/1.1" 200 218
2025-03-23 19:40:40,619 - urllib3.connectionpool - DEBUG - Starting new HTTP connection (1): localhost:6003
2025-03-23 19:40:40,621 - urllib3.connectionpool - DEBUG - http://localhost:6003 "GET /stats HTTP/1.1" 200 216
2025-03-23 19:40:40,621 - __main__ - INFO - System stats after adding vectors: {'total_nodes': 3, 'sharding_strategy': 'lsh', 'replication_factor': 1, 'nodes': {'localhost:6001': {'dimension': 512, 'index_type': 'FlatL2', 'memory_usage_mb': 0.16, 'metric': 'L2', 'next_id': 0, 'sample_ids': [214224, 255536, 261888, 35326, 259640], 'storage_path': 'data/shard_0', 'timestamp': 1742773240.616645, 'total_vectors': 81}, 'localhost:6002': {'dimension': 512, 'index_type': 'FlatL2', 'memory_usage_mb': 0.14, 'metric': 'L2', 'next_id': 0, 'sample_ids': [177934, 523957, 11051, 137727, 483667], 'storage_path': 'data/shard_1', 'timestamp': 1742773240.6188002, 'total_vectors': 69}, 'localhost:6003': {'dimension': 512, 'index_type': 'FlatL2', 'memory_usage_mb': 0.1, 'metric': 'L2', 'next_id': 0, 'sample_ids': [329614, 132703, 463037, 78420, 335177], 'storage_path': 'data/shard_2', 'timestamp': 1742773240.620899, 'total_vectors': 50}}}
2025-03-23 19:40:40,621 - __main__ - INFO - Total vectors in system: 0
2025-03-23 19:40:40,621 - werkzeug - INFO - 127.0.0.1 - - [23/Mar/2025 19:40:40] "POST /add_vectors HTTP/1.1" 200 -
2025-03-23 19:40:40,623 - __main__ - INFO - Getting system statistics
2025-03-23 19:40:40,624 - urllib3.connectionpool - DEBUG - Starting new HTTP connection (1): localhost:6001
2025-03-23 19:40:40,625 - urllib3.connectionpool - DEBUG - http://localhost:6001 "GET /stats HTTP/1.1" 200 217
2025-03-23 19:40:40,626 - urllib3.connectionpool - DEBUG - Starting new HTTP connection (1): localhost:6002
2025-03-23 19:40:40,627 - urllib3.connectionpool - DEBUG - http://localhost:6002 "GET /stats HTTP/1.1" 200 217
2025-03-23 19:40:40,628 - urllib3.connectionpool - DEBUG - Starting new HTTP connection (1): localhost:6003
2025-03-23 19:40:40,629 - urllib3.connectionpool - DEBUG - http://localhost:6003 "GET /stats HTTP/1.1" 200 216
2025-03-23 19:40:40,629 - werkzeug - INFO - 127.0.0.1 - - [23/Mar/2025 19:40:40] "GET /stats HTTP/1.1" 200 -
2025-03-23 19:40:41,712 - __main__ - INFO - Received request to add 100 vectors
2025-03-23 19:40:41,712 - __main__ - DEBUG - Vectors shape: (100, 512)
2025-03-23 19:40:41,712 - __main__ - DEBUG - IDs shape: (100,)
2025-03-23 19:40:41,713 - __main__ - DEBUG - Sample IDs: [328286 545219 349678   8844 398237]...
2025-03-23 19:40:41,713 - __main__ - DEBUG - Calling coordinator.distribute_vectors
2025-03-23 19:40:41,713 - coordinator - INFO - Starting vector distribution for 100 vectors
2025-03-23 19:40:41,713 - root - INFO - LSH: Processing 100 vectors with shape (100, 512)
2025-03-23 19:40:41,713 - root - DEBUG - Table 0 hash value shape: (100, 4)
2025-03-23 19:40:41,713 - root - DEBUG - Table 1 hash value shape: (100, 4)
2025-03-23 19:40:41,713 - root - DEBUG - Table 2 hash value shape: (100, 4)
2025-03-23 19:40:41,713 - root - INFO - LSH: Combined hash shape: (100, 12)
2025-03-23 19:40:41,713 - root - INFO - LSH: Assigned vectors to shards: [(0, 39), (1, 31), (2, 30)]
2025-03-23 19:40:41,713 - coordinator - INFO - Shard assignments: (array([0, 1, 2]), array([39, 31, 30]))
2025-03-23 19:40:41,713 - coordinator - INFO - Grouped vectors by shard: ['shard_0: 39 vectors', 'shard_2: 30 vectors', 'shard_1: 31 vectors']
2025-03-23 19:40:41,713 - coordinator - INFO - Sending 39 vectors to node localhost:6001
2025-03-23 19:40:41,714 - coordinator - INFO - Sending 30 vectors to node localhost:6003
2025-03-23 19:40:41,728 - coordinator - INFO - Sending 31 vectors to node localhost:6002
2025-03-23 19:40:41,735 - urllib3.connectionpool - DEBUG - Starting new HTTP connection (1): localhost:6003
2025-03-23 19:40:41,735 - urllib3.connectionpool - DEBUG - Starting new HTTP connection (1): localhost:6001
2025-03-23 19:40:41,736 - urllib3.connectionpool - DEBUG - Starting new HTTP connection (1): localhost:6002
2025-03-23 19:40:41,740 - urllib3.connectionpool - DEBUG - http://localhost:6003 "POST /add_vectors HTTP/1.1" 200 51
2025-03-23 19:40:41,740 - coordinator - INFO - Successfully sent 30 vectors to node localhost:6003
2025-03-23 19:40:41,741 - urllib3.connectionpool - DEBUG - http://localhost:6002 "POST /add_vectors HTTP/1.1" 200 52
2025-03-23 19:40:41,741 - coordinator - INFO - Successfully sent 31 vectors to node localhost:6002
2025-03-23 19:40:41,741 - urllib3.connectionpool - DEBUG - http://localhost:6001 "POST /add_vectors HTTP/1.1" 200 52
2025-03-23 19:40:41,741 - coordinator - INFO - Successfully sent 39 vectors to node localhost:6001
2025-03-23 19:40:41,742 - coordinator - INFO - Completed vector distribution
2025-03-23 19:40:41,742 - urllib3.connectionpool - DEBUG - Starting new HTTP connection (1): localhost:6001
2025-03-23 19:40:41,743 - urllib3.connectionpool - DEBUG - http://localhost:6001 "GET /stats HTTP/1.1" 200 219
2025-03-23 19:40:41,744 - urllib3.connectionpool - DEBUG - Starting new HTTP connection (1): localhost:6002
2025-03-23 19:40:41,745 - urllib3.connectionpool - DEBUG - http://localhost:6002 "GET /stats HTTP/1.1" 200 217
2025-03-23 19:40:41,746 - urllib3.connectionpool - DEBUG - Starting new HTTP connection (1): localhost:6003
2025-03-23 19:40:41,747 - urllib3.connectionpool - DEBUG - http://localhost:6003 "GET /stats HTTP/1.1" 200 219
2025-03-23 19:40:41,747 - __main__ - INFO - System stats after adding vectors: {'total_nodes': 3, 'sharding_strategy': 'lsh', 'replication_factor': 1, 'nodes': {'localhost:6001': {'dimension': 512, 'index_type': 'FlatL2', 'memory_usage_mb': 0.24, 'metric': 'L2', 'next_id': 0, 'sample_ids': [214224, 215259, 255536, 565877, 261888], 'storage_path': 'data/shard_0', 'timestamp': 1742773241.743674, 'total_vectors': 120}, 'localhost:6002': {'dimension': 512, 'index_type': 'FlatL2', 'memory_usage_mb': 0.2, 'metric': 'L2', 'next_id': 0, 'sample_ids': [177934, 523957, 439715, 11051, 137727], 'storage_path': 'data/shard_1', 'timestamp': 1742773241.745355, 'total_vectors': 100}, 'localhost:6003': {'dimension': 512, 'index_type': 'FlatL2', 'memory_usage_mb': 0.16, 'metric': 'L2', 'next_id': 0, 'sample_ids': [329614, 132703, 463037, 537506, 182162], 'storage_path': 'data/shard_2', 'timestamp': 1742773241.7470348, 'total_vectors': 80}}}
2025-03-23 19:40:41,747 - __main__ - INFO - Total vectors in system: 0
2025-03-23 19:40:41,747 - werkzeug - INFO - 127.0.0.1 - - [23/Mar/2025 19:40:41] "POST /add_vectors HTTP/1.1" 200 -
2025-03-23 19:40:41,749 - __main__ - INFO - Getting system statistics
2025-03-23 19:40:41,750 - urllib3.connectionpool - DEBUG - Starting new HTTP connection (1): localhost:6001
2025-03-23 19:40:41,751 - urllib3.connectionpool - DEBUG - http://localhost:6001 "GET /stats HTTP/1.1" 200 220
2025-03-23 19:40:41,752 - urllib3.connectionpool - DEBUG - Starting new HTTP connection (1): localhost:6002
2025-03-23 19:40:41,753 - urllib3.connectionpool - DEBUG - http://localhost:6002 "GET /stats HTTP/1.1" 200 217
2025-03-23 19:40:41,753 - urllib3.connectionpool - DEBUG - Starting new HTTP connection (1): localhost:6003
2025-03-23 19:40:41,754 - urllib3.connectionpool - DEBUG - http://localhost:6003 "GET /stats HTTP/1.1" 200 218
2025-03-23 19:40:41,754 - werkzeug - INFO - 127.0.0.1 - - [23/Mar/2025 19:40:41] "GET /stats HTTP/1.1" 200 -
2025-03-23 19:40:42,850 - __main__ - INFO - Received request to add 100 vectors
2025-03-23 19:40:42,850 - __main__ - DEBUG - Vectors shape: (100, 512)
2025-03-23 19:40:42,850 - __main__ - DEBUG - IDs shape: (100,)
2025-03-23 19:40:42,850 - __main__ - DEBUG - Sample IDs: [288391 423229 517832 522889 523229]...
2025-03-23 19:40:42,850 - __main__ - DEBUG - Calling coordinator.distribute_vectors
2025-03-23 19:40:42,850 - coordinator - INFO - Starting vector distribution for 100 vectors
2025-03-23 19:40:42,850 - root - INFO - LSH: Processing 100 vectors with shape (100, 512)
2025-03-23 19:40:42,850 - root - DEBUG - Table 0 hash value shape: (100, 4)
2025-03-23 19:40:42,850 - root - DEBUG - Table 1 hash value shape: (100, 4)
2025-03-23 19:40:42,850 - root - DEBUG - Table 2 hash value shape: (100, 4)
2025-03-23 19:40:42,850 - root - INFO - LSH: Combined hash shape: (100, 12)
2025-03-23 19:40:42,851 - root - INFO - LSH: Assigned vectors to shards: [(0, 33), (1, 36), (2, 31)]
2025-03-23 19:40:42,851 - coordinator - INFO - Shard assignments: (array([0, 1, 2]), array([33, 36, 31]))
2025-03-23 19:40:42,851 - coordinator - INFO - Grouped vectors by shard: ['shard_0: 33 vectors', 'shard_2: 31 vectors', 'shard_1: 36 vectors']
2025-03-23 19:40:42,851 - coordinator - INFO - Sending 33 vectors to node localhost:6001
2025-03-23 19:40:42,851 - coordinator - INFO - Sending 31 vectors to node localhost:6003
2025-03-23 19:40:42,865 - coordinator - INFO - Sending 36 vectors to node localhost:6002
2025-03-23 19:40:42,872 - urllib3.connectionpool - DEBUG - Starting new HTTP connection (1): localhost:6001
2025-03-23 19:40:42,873 - urllib3.connectionpool - DEBUG - Starting new HTTP connection (1): localhost:6003
2025-03-23 19:40:42,873 - urllib3.connectionpool - DEBUG - Starting new HTTP connection (1): localhost:6002
2025-03-23 19:40:42,878 - urllib3.connectionpool - DEBUG - http://localhost:6001 "POST /add_vectors HTTP/1.1" 200 52
2025-03-23 19:40:42,879 - coordinator - INFO - Successfully sent 33 vectors to node localhost:6001
2025-03-23 19:40:42,879 - urllib3.connectionpool - DEBUG - http://localhost:6003 "POST /add_vectors HTTP/1.1" 200 52
2025-03-23 19:40:42,879 - coordinator - INFO - Successfully sent 31 vectors to node localhost:6003
2025-03-23 19:40:42,879 - urllib3.connectionpool - DEBUG - http://localhost:6002 "POST /add_vectors HTTP/1.1" 200 52
2025-03-23 19:40:42,879 - coordinator - INFO - Successfully sent 36 vectors to node localhost:6002
2025-03-23 19:40:42,879 - coordinator - INFO - Completed vector distribution
2025-03-23 19:40:42,880 - urllib3.connectionpool - DEBUG - Starting new HTTP connection (1): localhost:6001
2025-03-23 19:40:42,881 - urllib3.connectionpool - DEBUG - http://localhost:6001 "GET /stats HTTP/1.1" 200 217
2025-03-23 19:40:42,882 - urllib3.connectionpool - DEBUG - Starting new HTTP connection (1): localhost:6002
2025-03-23 19:40:42,883 - urllib3.connectionpool - DEBUG - http://localhost:6002 "GET /stats HTTP/1.1" 200 218
2025-03-23 19:40:42,884 - urllib3.connectionpool - DEBUG - Starting new HTTP connection (1): localhost:6003
2025-03-23 19:40:42,885 - urllib3.connectionpool - DEBUG - http://localhost:6003 "GET /stats HTTP/1.1" 200 219
2025-03-23 19:40:42,885 - __main__ - INFO - System stats after adding vectors: {'total_nodes': 3, 'sharding_strategy': 'lsh', 'replication_factor': 1, 'nodes': {'localhost:6001': {'dimension': 512, 'index_type': 'FlatL2', 'memory_usage_mb': 0.3, 'metric': 'L2', 'next_id': 0, 'sample_ids': [214224, 215259, 255536, 560312, 565877], 'storage_path': 'data/shard_0', 'timestamp': 1742773242.88157, 'total_vectors': 153}, 'localhost:6002': {'dimension': 512, 'index_type': 'FlatL2', 'memory_usage_mb': 0.27, 'metric': 'L2', 'next_id': 0, 'sample_ids': [177934, 523957, 439715, 11051, 137727], 'storage_path': 'data/shard_1', 'timestamp': 1742773242.883193, 'total_vectors': 136}, 'localhost:6003': {'dimension': 512, 'index_type': 'FlatL2', 'memory_usage_mb': 0.22, 'metric': 'L2', 'next_id': 0, 'sample_ids': [329614, 132703, 463037, 253742, 537506], 'storage_path': 'data/shard_2', 'timestamp': 1742773242.884817, 'total_vectors': 111}}}
2025-03-23 19:40:42,885 - __main__ - INFO - Total vectors in system: 0
2025-03-23 19:40:42,885 - werkzeug - INFO - 127.0.0.1 - - [23/Mar/2025 19:40:42] "POST /add_vectors HTTP/1.1" 200 -
2025-03-23 19:40:42,887 - __main__ - INFO - Getting system statistics
2025-03-23 19:40:42,887 - urllib3.connectionpool - DEBUG - Starting new HTTP connection (1): localhost:6001
2025-03-23 19:40:42,889 - urllib3.connectionpool - DEBUG - http://localhost:6001 "GET /stats HTTP/1.1" 200 218
2025-03-23 19:40:42,890 - urllib3.connectionpool - DEBUG - Starting new HTTP connection (1): localhost:6002
2025-03-23 19:40:42,892 - urllib3.connectionpool - DEBUG - http://localhost:6002 "GET /stats HTTP/1.1" 200 217
2025-03-23 19:40:42,893 - urllib3.connectionpool - DEBUG - Starting new HTTP connection (1): localhost:6003
2025-03-23 19:40:42,895 - urllib3.connectionpool - DEBUG - http://localhost:6003 "GET /stats HTTP/1.1" 200 219
2025-03-23 19:40:42,895 - werkzeug - INFO - 127.0.0.1 - - [23/Mar/2025 19:40:42] "GET /stats HTTP/1.1" 200 -
2025-03-23 19:40:43,991 - __main__ - INFO - Received request to add 100 vectors
2025-03-23 19:40:43,991 - __main__ - DEBUG - Vectors shape: (100, 512)
2025-03-23 19:40:43,991 - __main__ - DEBUG - IDs shape: (100,)
2025-03-23 19:40:43,991 - __main__ - DEBUG - Sample IDs: [174231  22705  35279 541055 314541]...
2025-03-23 19:40:43,991 - __main__ - DEBUG - Calling coordinator.distribute_vectors
2025-03-23 19:40:43,991 - coordinator - INFO - Starting vector distribution for 100 vectors
2025-03-23 19:40:43,991 - root - INFO - LSH: Processing 100 vectors with shape (100, 512)
2025-03-23 19:40:43,991 - root - DEBUG - Table 0 hash value shape: (100, 4)
2025-03-23 19:40:43,991 - root - DEBUG - Table 1 hash value shape: (100, 4)
2025-03-23 19:40:43,991 - root - DEBUG - Table 2 hash value shape: (100, 4)
2025-03-23 19:40:43,991 - root - INFO - LSH: Combined hash shape: (100, 12)
2025-03-23 19:40:43,991 - root - INFO - LSH: Assigned vectors to shards: [(0, 29), (1, 28), (2, 43)]
2025-03-23 19:40:43,991 - coordinator - INFO - Shard assignments: (array([0, 1, 2]), array([29, 28, 43]))
2025-03-23 19:40:43,992 - coordinator - INFO - Grouped vectors by shard: ['shard_0: 29 vectors', 'shard_2: 43 vectors', 'shard_1: 28 vectors']
2025-03-23 19:40:43,992 - coordinator - INFO - Sending 29 vectors to node localhost:6001
2025-03-23 19:40:43,992 - coordinator - INFO - Sending 43 vectors to node localhost:6003
2025-03-23 19:40:44,007 - coordinator - INFO - Sending 28 vectors to node localhost:6002
2025-03-23 19:40:44,014 - urllib3.connectionpool - DEBUG - Starting new HTTP connection (1): localhost:6001
2025-03-23 19:40:44,014 - urllib3.connectionpool - DEBUG - Starting new HTTP connection (1): localhost:6003
2025-03-23 19:40:44,015 - urllib3.connectionpool - DEBUG - Starting new HTTP connection (1): localhost:6002
2025-03-23 19:40:44,020 - urllib3.connectionpool - DEBUG - http://localhost:6002 "POST /add_vectors HTTP/1.1" 200 52
2025-03-23 19:40:44,021 - coordinator - INFO - Successfully sent 28 vectors to node localhost:6002
2025-03-23 19:40:44,021 - urllib3.connectionpool - DEBUG - http://localhost:6001 "POST /add_vectors HTTP/1.1" 200 52
2025-03-23 19:40:44,021 - coordinator - INFO - Successfully sent 29 vectors to node localhost:6001
2025-03-23 19:40:44,022 - urllib3.connectionpool - DEBUG - http://localhost:6003 "POST /add_vectors HTTP/1.1" 200 52
2025-03-23 19:40:44,022 - coordinator - INFO - Successfully sent 43 vectors to node localhost:6003
2025-03-23 19:40:44,022 - coordinator - INFO - Completed vector distribution
2025-03-23 19:40:44,023 - urllib3.connectionpool - DEBUG - Starting new HTTP connection (1): localhost:6001
2025-03-23 19:40:44,024 - urllib3.connectionpool - DEBUG - http://localhost:6001 "GET /stats HTTP/1.1" 200 219
2025-03-23 19:40:44,025 - urllib3.connectionpool - DEBUG - Starting new HTTP connection (1): localhost:6002
2025-03-23 19:40:44,026 - urllib3.connectionpool - DEBUG - http://localhost:6002 "GET /stats HTTP/1.1" 200 219
2025-03-23 19:40:44,026 - urllib3.connectionpool - DEBUG - Starting new HTTP connection (1): localhost:6003
2025-03-23 19:40:44,027 - urllib3.connectionpool - DEBUG - http://localhost:6003 "GET /stats HTTP/1.1" 200 218
2025-03-23 19:40:44,027 - __main__ - INFO - System stats after adding vectors: {'total_nodes': 3, 'sharding_strategy': 'lsh', 'replication_factor': 1, 'nodes': {'localhost:6001': {'dimension': 512, 'index_type': 'FlatL2', 'memory_usage_mb': 0.36, 'metric': 'L2', 'next_id': 0, 'sample_ids': [214224, 215259, 255536, 560312, 565877], 'storage_path': 'data/shard_0', 'timestamp': 1742773244.024253, 'total_vectors': 182}, 'localhost:6002': {'dimension': 512, 'index_type': 'FlatL2', 'memory_usage_mb': 0.32, 'metric': 'L2', 'next_id': 0, 'sample_ids': [177934, 523957, 439715, 11051, 137727], 'storage_path': 'data/shard_1', 'timestamp': 1742773244.0259788, 'total_vectors': 164}, 'localhost:6003': {'dimension': 512, 'index_type': 'FlatL2', 'memory_usage_mb': 0.3, 'metric': 'L2', 'next_id': 0, 'sample_ids': [329614, 187144, 132703, 404534, 282912], 'storage_path': 'data/shard_2', 'timestamp': 1742773244.027601, 'total_vectors': 154}}}
2025-03-23 19:40:44,028 - __main__ - INFO - Total vectors in system: 0
2025-03-23 19:40:44,028 - werkzeug - INFO - 127.0.0.1 - - [23/Mar/2025 19:40:44] "POST /add_vectors HTTP/1.1" 200 -
2025-03-23 19:40:44,029 - __main__ - INFO - Getting system statistics
2025-03-23 19:40:44,030 - urllib3.connectionpool - DEBUG - Starting new HTTP connection (1): localhost:6001
2025-03-23 19:40:44,031 - urllib3.connectionpool - DEBUG - http://localhost:6001 "GET /stats HTTP/1.1" 200 220
2025-03-23 19:40:44,032 - urllib3.connectionpool - DEBUG - Starting new HTTP connection (1): localhost:6002
2025-03-23 19:40:44,033 - urllib3.connectionpool - DEBUG - http://localhost:6002 "GET /stats HTTP/1.1" 200 218
2025-03-23 19:40:44,034 - urllib3.connectionpool - DEBUG - Starting new HTTP connection (1): localhost:6003
2025-03-23 19:40:44,034 - urllib3.connectionpool - DEBUG - http://localhost:6003 "GET /stats HTTP/1.1" 200 217
2025-03-23 19:40:44,035 - werkzeug - INFO - 127.0.0.1 - - [23/Mar/2025 19:40:44] "GET /stats HTTP/1.1" 200 -
2025-03-23 19:40:45,104 - __main__ - INFO - Received request to add 100 vectors
2025-03-23 19:40:45,104 - __main__ - DEBUG - Vectors shape: (100, 512)
2025-03-23 19:40:45,104 - __main__ - DEBUG - IDs shape: (100,)
2025-03-23 19:40:45,104 - __main__ - DEBUG - Sample IDs: [106881 320632 514914 356968 360564]...
2025-03-23 19:40:45,104 - __main__ - DEBUG - Calling coordinator.distribute_vectors
2025-03-23 19:40:45,104 - coordinator - INFO - Starting vector distribution for 100 vectors
2025-03-23 19:40:45,104 - root - INFO - LSH: Processing 100 vectors with shape (100, 512)
2025-03-23 19:40:45,104 - root - DEBUG - Table 0 hash value shape: (100, 4)
2025-03-23 19:40:45,104 - root - DEBUG - Table 1 hash value shape: (100, 4)
2025-03-23 19:40:45,105 - root - DEBUG - Table 2 hash value shape: (100, 4)
2025-03-23 19:40:45,105 - root - INFO - LSH: Combined hash shape: (100, 12)
2025-03-23 19:40:45,105 - root - INFO - LSH: Assigned vectors to shards: [(0, 33), (1, 40), (2, 27)]
2025-03-23 19:40:45,105 - coordinator - INFO - Shard assignments: (array([0, 1, 2]), array([33, 40, 27]))
2025-03-23 19:40:45,105 - coordinator - INFO - Grouped vectors by shard: ['shard_2: 27 vectors', 'shard_0: 33 vectors', 'shard_1: 40 vectors']
2025-03-23 19:40:45,105 - coordinator - INFO - Sending 27 vectors to node localhost:6003
2025-03-23 19:40:45,105 - coordinator - INFO - Sending 33 vectors to node localhost:6001
2025-03-23 19:40:45,117 - coordinator - INFO - Sending 40 vectors to node localhost:6002
2025-03-23 19:40:45,126 - urllib3.connectionpool - DEBUG - Starting new HTTP connection (1): localhost:6003
2025-03-23 19:40:45,126 - urllib3.connectionpool - DEBUG - Starting new HTTP connection (1): localhost:6001
2025-03-23 19:40:45,127 - urllib3.connectionpool - DEBUG - Starting new HTTP connection (1): localhost:6002
2025-03-23 19:40:45,131 - urllib3.connectionpool - DEBUG - http://localhost:6003 "POST /add_vectors HTTP/1.1" 200 52
2025-03-23 19:40:45,131 - coordinator - INFO - Successfully sent 27 vectors to node localhost:6003
2025-03-23 19:40:45,132 - urllib3.connectionpool - DEBUG - http://localhost:6001 "POST /add_vectors HTTP/1.1" 200 52
2025-03-23 19:40:45,132 - coordinator - INFO - Successfully sent 33 vectors to node localhost:6001
2025-03-23 19:40:45,133 - urllib3.connectionpool - DEBUG - http://localhost:6002 "POST /add_vectors HTTP/1.1" 200 52
2025-03-23 19:40:45,133 - coordinator - INFO - Successfully sent 40 vectors to node localhost:6002
2025-03-23 19:40:45,133 - coordinator - INFO - Completed vector distribution
2025-03-23 19:40:45,134 - urllib3.connectionpool - DEBUG - Starting new HTTP connection (1): localhost:6001
2025-03-23 19:40:45,135 - urllib3.connectionpool - DEBUG - http://localhost:6001 "GET /stats HTTP/1.1" 200 219
2025-03-23 19:40:45,135 - urllib3.connectionpool - DEBUG - Starting new HTTP connection (1): localhost:6002
2025-03-23 19:40:45,136 - urllib3.connectionpool - DEBUG - http://localhost:6002 "GET /stats HTTP/1.1" 200 217
2025-03-23 19:40:45,137 - urllib3.connectionpool - DEBUG - Starting new HTTP connection (1): localhost:6003
2025-03-23 19:40:45,138 - urllib3.connectionpool - DEBUG - http://localhost:6003 "GET /stats HTTP/1.1" 200 219
2025-03-23 19:40:45,138 - __main__ - INFO - System stats after adding vectors: {'total_nodes': 3, 'sharding_strategy': 'lsh', 'replication_factor': 1, 'nodes': {'localhost:6001': {'dimension': 512, 'index_type': 'FlatL2', 'memory_usage_mb': 0.42, 'metric': 'L2', 'next_id': 0, 'sample_ids': [214224, 76547, 215259, 255536, 560312], 'storage_path': 'data/shard_0', 'timestamp': 1742773245.1350038, 'total_vectors': 215}, 'localhost:6002': {'dimension': 512, 'index_type': 'FlatL2', 'memory_usage_mb': 0.4, 'metric': 'L2', 'next_id': 0, 'sample_ids': [177934, 523957, 439715, 349860, 11051], 'storage_path': 'data/shard_1', 'timestamp': 1742773245.136703, 'total_vectors': 204}, 'localhost:6003': {'dimension': 512, 'index_type': 'FlatL2', 'memory_usage_mb': 0.35, 'metric': 'L2', 'next_id': 0, 'sample_ids': [329614, 187144, 132703, 468954, 404534], 'storage_path': 'data/shard_2', 'timestamp': 1742773245.138397, 'total_vectors': 181}}}
2025-03-23 19:40:45,138 - __main__ - INFO - Total vectors in system: 0
2025-03-23 19:40:45,139 - werkzeug - INFO - 127.0.0.1 - - [23/Mar/2025 19:40:45] "POST /add_vectors HTTP/1.1" 200 -
2025-03-23 19:40:45,140 - __main__ - INFO - Getting system statistics
2025-03-23 19:40:45,141 - urllib3.connectionpool - DEBUG - Starting new HTTP connection (1): localhost:6001
2025-03-23 19:40:45,142 - urllib3.connectionpool - DEBUG - http://localhost:6001 "GET /stats HTTP/1.1" 200 218
2025-03-23 19:40:45,143 - urllib3.connectionpool - DEBUG - Starting new HTTP connection (1): localhost:6002
2025-03-23 19:40:45,144 - urllib3.connectionpool - DEBUG - http://localhost:6002 "GET /stats HTTP/1.1" 200 216
2025-03-23 19:40:45,144 - urllib3.connectionpool - DEBUG - Starting new HTTP connection (1): localhost:6003
2025-03-23 19:40:45,145 - urllib3.connectionpool - DEBUG - http://localhost:6003 "GET /stats HTTP/1.1" 200 219
2025-03-23 19:40:45,146 - werkzeug - INFO - 127.0.0.1 - - [23/Mar/2025 19:40:45] "GET /stats HTTP/1.1" 200 -
2025-03-23 19:40:46,226 - __main__ - INFO - Received request to add 100 vectors
2025-03-23 19:40:46,226 - __main__ - DEBUG - Vectors shape: (100, 512)
2025-03-23 19:40:46,226 - __main__ - DEBUG - IDs shape: (100,)
2025-03-23 19:40:46,226 - __main__ - DEBUG - Sample IDs: [320232 294783 229216 269632  55167]...
2025-03-23 19:40:46,226 - __main__ - DEBUG - Calling coordinator.distribute_vectors
2025-03-23 19:40:46,226 - coordinator - INFO - Starting vector distribution for 100 vectors
2025-03-23 19:40:46,226 - root - INFO - LSH: Processing 100 vectors with shape (100, 512)
2025-03-23 19:40:46,227 - root - DEBUG - Table 0 hash value shape: (100, 4)
2025-03-23 19:40:46,227 - root - DEBUG - Table 1 hash value shape: (100, 4)
2025-03-23 19:40:46,227 - root - DEBUG - Table 2 hash value shape: (100, 4)
2025-03-23 19:40:46,227 - root - INFO - LSH: Combined hash shape: (100, 12)
2025-03-23 19:40:46,227 - root - INFO - LSH: Assigned vectors to shards: [(0, 29), (1, 30), (2, 41)]
2025-03-23 19:40:46,227 - coordinator - INFO - Shard assignments: (array([0, 1, 2]), array([29, 30, 41]))
2025-03-23 19:40:46,227 - coordinator - INFO - Grouped vectors by shard: ['shard_0: 29 vectors', 'shard_1: 30 vectors', 'shard_2: 41 vectors']
2025-03-23 19:40:46,227 - coordinator - INFO - Sending 29 vectors to node localhost:6001
2025-03-23 19:40:46,227 - coordinator - INFO - Sending 30 vectors to node localhost:6002
2025-03-23 19:40:46,234 - coordinator - INFO - Sending 41 vectors to node localhost:6003
2025-03-23 19:40:46,249 - urllib3.connectionpool - DEBUG - Starting new HTTP connection (1): localhost:6001
2025-03-23 19:40:46,249 - urllib3.connectionpool - DEBUG - Starting new HTTP connection (1): localhost:6003
2025-03-23 19:40:46,250 - urllib3.connectionpool - DEBUG - Starting new HTTP connection (1): localhost:6002
2025-03-23 19:40:46,254 - urllib3.connectionpool - DEBUG - http://localhost:6001 "POST /add_vectors HTTP/1.1" 200 52
2025-03-23 19:40:46,254 - coordinator - INFO - Successfully sent 29 vectors to node localhost:6001
2025-03-23 19:40:46,255 - urllib3.connectionpool - DEBUG - http://localhost:6002 "POST /add_vectors HTTP/1.1" 200 52
2025-03-23 19:40:46,255 - coordinator - INFO - Successfully sent 30 vectors to node localhost:6002
2025-03-23 19:40:46,256 - urllib3.connectionpool - DEBUG - http://localhost:6003 "POST /add_vectors HTTP/1.1" 200 52
2025-03-23 19:40:46,256 - coordinator - INFO - Successfully sent 41 vectors to node localhost:6003
2025-03-23 19:40:46,256 - coordinator - INFO - Completed vector distribution
2025-03-23 19:40:46,257 - urllib3.connectionpool - DEBUG - Starting new HTTP connection (1): localhost:6001
2025-03-23 19:40:46,258 - urllib3.connectionpool - DEBUG - http://localhost:6001 "GET /stats HTTP/1.1" 200 218
2025-03-23 19:40:46,259 - urllib3.connectionpool - DEBUG - Starting new HTTP connection (1): localhost:6002
2025-03-23 19:40:46,260 - urllib3.connectionpool - DEBUG - http://localhost:6002 "GET /stats HTTP/1.1" 200 219
2025-03-23 19:40:46,261 - urllib3.connectionpool - DEBUG - Starting new HTTP connection (1): localhost:6003
2025-03-23 19:40:46,262 - urllib3.connectionpool - DEBUG - http://localhost:6003 "GET /stats HTTP/1.1" 200 219
2025-03-23 19:40:46,262 - __main__ - INFO - System stats after adding vectors: {'total_nodes': 3, 'sharding_strategy': 'lsh', 'replication_factor': 1, 'nodes': {'localhost:6001': {'dimension': 512, 'index_type': 'FlatL2', 'memory_usage_mb': 0.48, 'metric': 'L2', 'next_id': 0, 'sample_ids': [357737, 214224, 76547, 215259, 294350], 'storage_path': 'data/shard_0', 'timestamp': 1742773246.258625, 'total_vectors': 244}, 'localhost:6002': {'dimension': 512, 'index_type': 'FlatL2', 'memory_usage_mb': 0.46, 'metric': 'L2', 'next_id': 0, 'sample_ids': [177934, 523957, 439715, 349860, 11051], 'storage_path': 'data/shard_1', 'timestamp': 1742773246.2603478, 'total_vectors': 234}, 'localhost:6003': {'dimension': 512, 'index_type': 'FlatL2', 'memory_usage_mb': 0.44, 'metric': 'L2', 'next_id': 0, 'sample_ids': [329614, 187144, 132703, 389315, 468954], 'storage_path': 'data/shard_2', 'timestamp': 1742773246.261991, 'total_vectors': 222}}}
2025-03-23 19:40:46,262 - __main__ - INFO - Total vectors in system: 0
2025-03-23 19:40:46,262 - werkzeug - INFO - 127.0.0.1 - - [23/Mar/2025 19:40:46] "POST /add_vectors HTTP/1.1" 200 -
2025-03-23 19:40:46,264 - __main__ - INFO - Getting system statistics
2025-03-23 19:40:46,264 - urllib3.connectionpool - DEBUG - Starting new HTTP connection (1): localhost:6001
2025-03-23 19:40:46,266 - urllib3.connectionpool - DEBUG - http://localhost:6001 "GET /stats HTTP/1.1" 200 218
2025-03-23 19:40:46,266 - urllib3.connectionpool - DEBUG - Starting new HTTP connection (1): localhost:6002
2025-03-23 19:40:46,267 - urllib3.connectionpool - DEBUG - http://localhost:6002 "GET /stats HTTP/1.1" 200 218
2025-03-23 19:40:46,268 - urllib3.connectionpool - DEBUG - Starting new HTTP connection (1): localhost:6003
2025-03-23 19:40:46,269 - urllib3.connectionpool - DEBUG - http://localhost:6003 "GET /stats HTTP/1.1" 200 220
2025-03-23 19:40:46,269 - werkzeug - INFO - 127.0.0.1 - - [23/Mar/2025 19:40:46] "GET /stats HTTP/1.1" 200 -
2025-03-23 19:40:47,365 - __main__ - INFO - Received request to add 100 vectors
2025-03-23 19:40:47,365 - __main__ - DEBUG - Vectors shape: (100, 512)
2025-03-23 19:40:47,366 - __main__ - DEBUG - IDs shape: (100,)
2025-03-23 19:40:47,366 - __main__ - DEBUG - Sample IDs: [446703 541291 473237 562448 279541]...
2025-03-23 19:40:47,366 - __main__ - DEBUG - Calling coordinator.distribute_vectors
2025-03-23 19:40:47,366 - coordinator - INFO - Starting vector distribution for 100 vectors
2025-03-23 19:40:47,366 - root - INFO - LSH: Processing 100 vectors with shape (100, 512)
2025-03-23 19:40:47,366 - root - DEBUG - Table 0 hash value shape: (100, 4)
2025-03-23 19:40:47,366 - root - DEBUG - Table 1 hash value shape: (100, 4)
2025-03-23 19:40:47,366 - root - DEBUG - Table 2 hash value shape: (100, 4)
2025-03-23 19:40:47,366 - root - INFO - LSH: Combined hash shape: (100, 12)
2025-03-23 19:40:47,366 - root - INFO - LSH: Assigned vectors to shards: [(0, 38), (1, 29), (2, 33)]
2025-03-23 19:40:47,366 - coordinator - INFO - Shard assignments: (array([0, 1, 2]), array([38, 29, 33]))
2025-03-23 19:40:47,366 - coordinator - INFO - Grouped vectors by shard: ['shard_1: 29 vectors', 'shard_0: 38 vectors', 'shard_2: 33 vectors']
2025-03-23 19:40:47,367 - coordinator - INFO - Sending 29 vectors to node localhost:6002
2025-03-23 19:40:47,367 - coordinator - INFO - Sending 38 vectors to node localhost:6001
2025-03-23 19:40:47,381 - coordinator - INFO - Sending 33 vectors to node localhost:6003
2025-03-23 19:40:47,388 - urllib3.connectionpool - DEBUG - Starting new HTTP connection (1): localhost:6002
2025-03-23 19:40:47,388 - urllib3.connectionpool - DEBUG - Starting new HTTP connection (1): localhost:6001
2025-03-23 19:40:47,389 - urllib3.connectionpool - DEBUG - Starting new HTTP connection (1): localhost:6003
2025-03-23 19:40:47,393 - urllib3.connectionpool - DEBUG - http://localhost:6002 "POST /add_vectors HTTP/1.1" 200 52
2025-03-23 19:40:47,394 - coordinator - INFO - Successfully sent 29 vectors to node localhost:6002
2025-03-23 19:40:47,394 - urllib3.connectionpool - DEBUG - http://localhost:6003 "POST /add_vectors HTTP/1.1" 200 52
2025-03-23 19:40:47,394 - coordinator - INFO - Successfully sent 33 vectors to node localhost:6003
2025-03-23 19:40:47,395 - urllib3.connectionpool - DEBUG - http://localhost:6001 "POST /add_vectors HTTP/1.1" 200 52
2025-03-23 19:40:47,395 - coordinator - INFO - Successfully sent 38 vectors to node localhost:6001
2025-03-23 19:40:47,395 - coordinator - INFO - Completed vector distribution
2025-03-23 19:40:47,396 - urllib3.connectionpool - DEBUG - Starting new HTTP connection (1): localhost:6001
2025-03-23 19:40:47,397 - urllib3.connectionpool - DEBUG - http://localhost:6001 "GET /stats HTTP/1.1" 200 218
2025-03-23 19:40:47,397 - urllib3.connectionpool - DEBUG - Starting new HTTP connection (1): localhost:6002
2025-03-23 19:40:47,398 - urllib3.connectionpool - DEBUG - http://localhost:6002 "GET /stats HTTP/1.1" 200 219
2025-03-23 19:40:47,399 - urllib3.connectionpool - DEBUG - Starting new HTTP connection (1): localhost:6003
2025-03-23 19:40:47,400 - urllib3.connectionpool - DEBUG - http://localhost:6003 "GET /stats HTTP/1.1" 200 219
2025-03-23 19:40:47,400 - __main__ - INFO - System stats after adding vectors: {'total_nodes': 3, 'sharding_strategy': 'lsh', 'replication_factor': 1, 'nodes': {'localhost:6001': {'dimension': 512, 'index_type': 'FlatL2', 'memory_usage_mb': 0.55, 'metric': 'L2', 'next_id': 0, 'sample_ids': [357737, 214224, 76547, 215259, 294350], 'storage_path': 'data/shard_0', 'timestamp': 1742773247.397015, 'total_vectors': 282}, 'localhost:6002': {'dimension': 512, 'index_type': 'FlatL2', 'memory_usage_mb': 0.52, 'metric': 'L2', 'next_id': 0, 'sample_ids': [177934, 523957, 439715, 349860, 425925], 'storage_path': 'data/shard_1', 'timestamp': 1742773247.398726, 'total_vectors': 263}, 'localhost:6003': {'dimension': 512, 'index_type': 'FlatL2', 'memory_usage_mb': 0.5, 'metric': 'L2', 'next_id': 0, 'sample_ids': [329614, 187144, 132703, 389315, 468954], 'storage_path': 'data/shard_2', 'timestamp': 1742773247.4004412, 'total_vectors': 255}}}
2025-03-23 19:40:47,400 - __main__ - INFO - Total vectors in system: 0
2025-03-23 19:40:47,401 - werkzeug - INFO - 127.0.0.1 - - [23/Mar/2025 19:40:47] "POST /add_vectors HTTP/1.1" 200 -
2025-03-23 19:40:47,402 - __main__ - INFO - Getting system statistics
2025-03-23 19:40:47,403 - urllib3.connectionpool - DEBUG - Starting new HTTP connection (1): localhost:6001
2025-03-23 19:40:47,404 - urllib3.connectionpool - DEBUG - http://localhost:6001 "GET /stats HTTP/1.1" 200 219
2025-03-23 19:40:47,405 - urllib3.connectionpool - DEBUG - Starting new HTTP connection (1): localhost:6002
2025-03-23 19:40:47,406 - urllib3.connectionpool - DEBUG - http://localhost:6002 "GET /stats HTTP/1.1" 200 219
2025-03-23 19:40:47,407 - urllib3.connectionpool - DEBUG - Starting new HTTP connection (1): localhost:6003
2025-03-23 19:40:47,408 - urllib3.connectionpool - DEBUG - http://localhost:6003 "GET /stats HTTP/1.1" 200 219
2025-03-23 19:40:47,408 - werkzeug - INFO - 127.0.0.1 - - [23/Mar/2025 19:40:47] "GET /stats HTTP/1.1" 200 -
2025-03-23 19:40:48,499 - __main__ - INFO - Received request to add 100 vectors
2025-03-23 19:40:48,499 - __main__ - DEBUG - Vectors shape: (100, 512)
2025-03-23 19:40:48,499 - __main__ - DEBUG - IDs shape: (100,)
2025-03-23 19:40:48,499 - __main__ - DEBUG - Sample IDs: [488251  74209 532901 177714  39484]...
2025-03-23 19:40:48,499 - __main__ - DEBUG - Calling coordinator.distribute_vectors
2025-03-23 19:40:48,500 - coordinator - INFO - Starting vector distribution for 100 vectors
2025-03-23 19:40:48,500 - root - INFO - LSH: Processing 100 vectors with shape (100, 512)
2025-03-23 19:40:48,500 - root - DEBUG - Table 0 hash value shape: (100, 4)
2025-03-23 19:40:48,500 - root - DEBUG - Table 1 hash value shape: (100, 4)
2025-03-23 19:40:48,500 - root - DEBUG - Table 2 hash value shape: (100, 4)
2025-03-23 19:40:48,500 - root - INFO - LSH: Combined hash shape: (100, 12)
2025-03-23 19:40:48,500 - root - INFO - LSH: Assigned vectors to shards: [(0, 43), (1, 31), (2, 26)]
2025-03-23 19:40:48,500 - coordinator - INFO - Shard assignments: (array([0, 1, 2]), array([43, 31, 26]))
2025-03-23 19:40:48,500 - coordinator - INFO - Grouped vectors by shard: ['shard_0: 43 vectors', 'shard_1: 31 vectors', 'shard_2: 26 vectors']
2025-03-23 19:40:48,500 - coordinator - INFO - Sending 43 vectors to node localhost:6001
2025-03-23 19:40:48,510 - coordinator - INFO - Sending 31 vectors to node localhost:6002
2025-03-23 19:40:48,517 - coordinator - INFO - Sending 26 vectors to node localhost:6003
2025-03-23 19:40:48,523 - urllib3.connectionpool - DEBUG - Starting new HTTP connection (1): localhost:6001
2025-03-23 19:40:48,524 - urllib3.connectionpool - DEBUG - Starting new HTTP connection (1): localhost:6003
2025-03-23 19:40:48,524 - urllib3.connectionpool - DEBUG - Starting new HTTP connection (1): localhost:6002
2025-03-23 19:40:48,529 - urllib3.connectionpool - DEBUG - http://localhost:6003 "POST /add_vectors HTTP/1.1" 200 52
2025-03-23 19:40:48,529 - coordinator - INFO - Successfully sent 26 vectors to node localhost:6003
2025-03-23 19:40:48,530 - urllib3.connectionpool - DEBUG - http://localhost:6002 "POST /add_vectors HTTP/1.1" 200 52
2025-03-23 19:40:48,530 - coordinator - INFO - Successfully sent 31 vectors to node localhost:6002
2025-03-23 19:40:48,530 - urllib3.connectionpool - DEBUG - http://localhost:6001 "POST /add_vectors HTTP/1.1" 200 52
2025-03-23 19:40:48,530 - coordinator - INFO - Successfully sent 43 vectors to node localhost:6001
2025-03-23 19:40:48,531 - coordinator - INFO - Completed vector distribution
2025-03-23 19:40:48,532 - urllib3.connectionpool - DEBUG - Starting new HTTP connection (1): localhost:6001
2025-03-23 19:40:48,532 - urllib3.connectionpool - DEBUG - http://localhost:6001 "GET /stats HTTP/1.1" 200 218
2025-03-23 19:40:48,533 - urllib3.connectionpool - DEBUG - Starting new HTTP connection (1): localhost:6002
2025-03-23 19:40:48,534 - urllib3.connectionpool - DEBUG - http://localhost:6002 "GET /stats HTTP/1.1" 200 219
2025-03-23 19:40:48,535 - urllib3.connectionpool - DEBUG - Starting new HTTP connection (1): localhost:6003
2025-03-23 19:40:48,536 - urllib3.connectionpool - DEBUG - http://localhost:6003 "GET /stats HTTP/1.1" 200 218
2025-03-23 19:40:48,536 - __main__ - INFO - System stats after adding vectors: {'total_nodes': 3, 'sharding_strategy': 'lsh', 'replication_factor': 1, 'nodes': {'localhost:6001': {'dimension': 512, 'index_type': 'FlatL2', 'memory_usage_mb': 0.64, 'metric': 'L2', 'next_id': 0, 'sample_ids': [357737, 214224, 76547, 215259, 294350], 'storage_path': 'data/shard_0', 'timestamp': 1742773248.532774, 'total_vectors': 325}, 'localhost:6002': {'dimension': 512, 'index_type': 'FlatL2', 'memory_usage_mb': 0.58, 'metric': 'L2', 'next_id': 0, 'sample_ids': [177934, 523957, 439715, 349860, 425925], 'storage_path': 'data/shard_1', 'timestamp': 1742773248.534555, 'total_vectors': 294}, 'localhost:6003': {'dimension': 512, 'index_type': 'FlatL2', 'memory_usage_mb': 0.55, 'metric': 'L2', 'next_id': 0, 'sample_ids': [329614, 187144, 505565, 16249, 132703], 'storage_path': 'data/shard_2', 'timestamp': 1742773248.536161, 'total_vectors': 281}}}
2025-03-23 19:40:48,536 - __main__ - INFO - Total vectors in system: 0
2025-03-23 19:40:48,536 - werkzeug - INFO - 127.0.0.1 - - [23/Mar/2025 19:40:48] "POST /add_vectors HTTP/1.1" 200 -
2025-03-23 19:40:48,538 - __main__ - INFO - Getting system statistics
2025-03-23 19:40:48,539 - urllib3.connectionpool - DEBUG - Starting new HTTP connection (1): localhost:6001
2025-03-23 19:40:48,540 - urllib3.connectionpool - DEBUG - http://localhost:6001 "GET /stats HTTP/1.1" 200 218
2025-03-23 19:40:48,541 - urllib3.connectionpool - DEBUG - Starting new HTTP connection (1): localhost:6002
2025-03-23 19:40:48,542 - urllib3.connectionpool - DEBUG - http://localhost:6002 "GET /stats HTTP/1.1" 200 218
2025-03-23 19:40:48,542 - urllib3.connectionpool - DEBUG - Starting new HTTP connection (1): localhost:6003
2025-03-23 19:40:48,543 - urllib3.connectionpool - DEBUG - http://localhost:6003 "GET /stats HTTP/1.1" 200 218
2025-03-23 19:40:48,543 - werkzeug - INFO - 127.0.0.1 - - [23/Mar/2025 19:40:48] "GET /stats HTTP/1.1" 200 -
2025-03-23 19:40:49,607 - __main__ - INFO - Received request to add 100 vectors
2025-03-23 19:40:49,607 - __main__ - DEBUG - Vectors shape: (100, 512)
2025-03-23 19:40:49,607 - __main__ - DEBUG - IDs shape: (100,)
2025-03-23 19:40:49,607 - __main__ - DEBUG - Sample IDs: [437514 311950 183246 114884 276707]...
2025-03-23 19:40:49,607 - __main__ - DEBUG - Calling coordinator.distribute_vectors
2025-03-23 19:40:49,607 - coordinator - INFO - Starting vector distribution for 100 vectors
2025-03-23 19:40:49,607 - root - INFO - LSH: Processing 100 vectors with shape (100, 512)
2025-03-23 19:40:49,607 - root - DEBUG - Table 0 hash value shape: (100, 4)
2025-03-23 19:40:49,607 - root - DEBUG - Table 1 hash value shape: (100, 4)
2025-03-23 19:40:49,607 - root - DEBUG - Table 2 hash value shape: (100, 4)
2025-03-23 19:40:49,608 - root - INFO - LSH: Combined hash shape: (100, 12)
2025-03-23 19:40:49,608 - root - INFO - LSH: Assigned vectors to shards: [(0, 33), (1, 31), (2, 36)]
2025-03-23 19:40:49,608 - coordinator - INFO - Shard assignments: (array([0, 1, 2]), array([33, 31, 36]))
2025-03-23 19:40:49,608 - coordinator - INFO - Grouped vectors by shard: ['shard_2: 36 vectors', 'shard_0: 33 vectors', 'shard_1: 31 vectors']
2025-03-23 19:40:49,608 - coordinator - INFO - Sending 36 vectors to node localhost:6003
2025-03-23 19:40:49,615 - coordinator - INFO - Sending 33 vectors to node localhost:6001
2025-03-23 19:40:49,622 - coordinator - INFO - Sending 31 vectors to node localhost:6002
2025-03-23 19:40:49,628 - urllib3.connectionpool - DEBUG - Starting new HTTP connection (1): localhost:6003
2025-03-23 19:40:49,629 - urllib3.connectionpool - DEBUG - Starting new HTTP connection (1): localhost:6001
2025-03-23 19:40:49,629 - urllib3.connectionpool - DEBUG - Starting new HTTP connection (1): localhost:6002
2025-03-23 19:40:49,634 - urllib3.connectionpool - DEBUG - http://localhost:6002 "POST /add_vectors HTTP/1.1" 200 52
2025-03-23 19:40:49,635 - coordinator - INFO - Successfully sent 31 vectors to node localhost:6002
2025-03-23 19:40:49,635 - urllib3.connectionpool - DEBUG - http://localhost:6001 "POST /add_vectors HTTP/1.1" 200 52
2025-03-23 19:40:49,635 - coordinator - INFO - Successfully sent 33 vectors to node localhost:6001
2025-03-23 19:40:49,635 - urllib3.connectionpool - DEBUG - http://localhost:6003 "POST /add_vectors HTTP/1.1" 200 52
2025-03-23 19:40:49,635 - coordinator - INFO - Successfully sent 36 vectors to node localhost:6003
2025-03-23 19:40:49,635 - coordinator - INFO - Completed vector distribution
2025-03-23 19:40:49,636 - urllib3.connectionpool - DEBUG - Starting new HTTP connection (1): localhost:6001
2025-03-23 19:40:49,637 - urllib3.connectionpool - DEBUG - http://localhost:6001 "GET /stats HTTP/1.1" 200 218
2025-03-23 19:40:49,638 - urllib3.connectionpool - DEBUG - Starting new HTTP connection (1): localhost:6002
2025-03-23 19:40:49,639 - urllib3.connectionpool - DEBUG - http://localhost:6002 "GET /stats HTTP/1.1" 200 220
2025-03-23 19:40:49,639 - urllib3.connectionpool - DEBUG - Starting new HTTP connection (1): localhost:6003
2025-03-23 19:40:49,640 - urllib3.connectionpool - DEBUG - http://localhost:6003 "GET /stats HTTP/1.1" 200 219
2025-03-23 19:40:49,641 - __main__ - INFO - System stats after adding vectors: {'total_nodes': 3, 'sharding_strategy': 'lsh', 'replication_factor': 1, 'nodes': {'localhost:6001': {'dimension': 512, 'index_type': 'FlatL2', 'memory_usage_mb': 0.7, 'metric': 'L2', 'next_id': 0, 'sample_ids': [357737, 214224, 76547, 215259, 294350], 'storage_path': 'data/shard_0', 'timestamp': 1742773249.6373749, 'total_vectors': 358}, 'localhost:6002': {'dimension': 512, 'index_type': 'FlatL2', 'memory_usage_mb': 0.64, 'metric': 'L2', 'next_id': 0, 'sample_ids': [177934, 523957, 439715, 349860, 425925], 'storage_path': 'data/shard_1', 'timestamp': 1742773249.6389592, 'total_vectors': 325}, 'localhost:6003': {'dimension': 512, 'index_type': 'FlatL2', 'memory_usage_mb': 0.62, 'metric': 'L2', 'next_id': 0, 'sample_ids': [329614, 187144, 128372, 505565, 16249], 'storage_path': 'data/shard_2', 'timestamp': 1742773249.6406348, 'total_vectors': 317}}}
2025-03-23 19:40:49,641 - __main__ - INFO - Total vectors in system: 0
2025-03-23 19:40:49,641 - werkzeug - INFO - 127.0.0.1 - - [23/Mar/2025 19:40:49] "POST /add_vectors HTTP/1.1" 200 -
2025-03-23 19:40:49,642 - __main__ - INFO - Getting system statistics
2025-03-23 19:40:49,643 - urllib3.connectionpool - DEBUG - Starting new HTTP connection (1): localhost:6001
2025-03-23 19:40:49,644 - urllib3.connectionpool - DEBUG - http://localhost:6001 "GET /stats HTTP/1.1" 200 218
2025-03-23 19:40:49,645 - urllib3.connectionpool - DEBUG - Starting new HTTP connection (1): localhost:6002
2025-03-23 19:40:49,646 - urllib3.connectionpool - DEBUG - http://localhost:6002 "GET /stats HTTP/1.1" 200 220
2025-03-23 19:40:49,646 - urllib3.connectionpool - DEBUG - Starting new HTTP connection (1): localhost:6003
2025-03-23 19:40:49,647 - urllib3.connectionpool - DEBUG - http://localhost:6003 "GET /stats HTTP/1.1" 200 218
2025-03-23 19:40:49,647 - werkzeug - INFO - 127.0.0.1 - - [23/Mar/2025 19:40:49] "GET /stats HTTP/1.1" 200 -
2025-03-23 19:40:50,733 - __main__ - INFO - Received request to add 100 vectors
2025-03-23 19:40:50,733 - __main__ - DEBUG - Vectors shape: (100, 512)
2025-03-23 19:40:50,733 - __main__ - DEBUG - IDs shape: (100,)
2025-03-23 19:40:50,733 - __main__ - DEBUG - Sample IDs: [389316 296222  47819 299887 552775]...
2025-03-23 19:40:50,733 - __main__ - DEBUG - Calling coordinator.distribute_vectors
2025-03-23 19:40:50,733 - coordinator - INFO - Starting vector distribution for 100 vectors
2025-03-23 19:40:50,733 - root - INFO - LSH: Processing 100 vectors with shape (100, 512)
2025-03-23 19:40:50,733 - root - DEBUG - Table 0 hash value shape: (100, 4)
2025-03-23 19:40:50,733 - root - DEBUG - Table 1 hash value shape: (100, 4)
2025-03-23 19:40:50,734 - root - DEBUG - Table 2 hash value shape: (100, 4)
2025-03-23 19:40:50,734 - root - INFO - LSH: Combined hash shape: (100, 12)
2025-03-23 19:40:50,734 - root - INFO - LSH: Assigned vectors to shards: [(0, 34), (1, 37), (2, 29)]
2025-03-23 19:40:50,734 - coordinator - INFO - Shard assignments: (array([0, 1, 2]), array([34, 37, 29]))
2025-03-23 19:40:50,734 - coordinator - INFO - Grouped vectors by shard: ['shard_1: 37 vectors', 'shard_2: 29 vectors', 'shard_0: 34 vectors']
2025-03-23 19:40:50,734 - coordinator - INFO - Sending 37 vectors to node localhost:6002
2025-03-23 19:40:50,742 - coordinator - INFO - Sending 29 vectors to node localhost:6003
2025-03-23 19:40:50,748 - coordinator - INFO - Sending 34 vectors to node localhost:6001
2025-03-23 19:40:50,748 - urllib3.connectionpool - DEBUG - Starting new HTTP connection (1): localhost:6002
2025-03-23 19:40:50,756 - urllib3.connectionpool - DEBUG - Starting new HTTP connection (1): localhost:6003
2025-03-23 19:40:50,756 - urllib3.connectionpool - DEBUG - Starting new HTTP connection (1): localhost:6001
2025-03-23 19:40:50,761 - urllib3.connectionpool - DEBUG - http://localhost:6003 "POST /add_vectors HTTP/1.1" 200 52
2025-03-23 19:40:50,761 - coordinator - INFO - Successfully sent 29 vectors to node localhost:6003
2025-03-23 19:40:50,762 - urllib3.connectionpool - DEBUG - http://localhost:6002 "POST /add_vectors HTTP/1.1" 200 52
2025-03-23 19:40:50,762 - coordinator - INFO - Successfully sent 37 vectors to node localhost:6002
2025-03-23 19:40:50,762 - urllib3.connectionpool - DEBUG - http://localhost:6001 "POST /add_vectors HTTP/1.1" 200 52
2025-03-23 19:40:50,762 - coordinator - INFO - Successfully sent 34 vectors to node localhost:6001
2025-03-23 19:40:50,762 - coordinator - INFO - Completed vector distribution
2025-03-23 19:40:50,763 - urllib3.connectionpool - DEBUG - Starting new HTTP connection (1): localhost:6001
2025-03-23 19:40:50,764 - urllib3.connectionpool - DEBUG - http://localhost:6001 "GET /stats HTTP/1.1" 200 219
2025-03-23 19:40:50,765 - urllib3.connectionpool - DEBUG - Starting new HTTP connection (1): localhost:6002
2025-03-23 19:40:50,766 - urllib3.connectionpool - DEBUG - http://localhost:6002 "GET /stats HTTP/1.1" 200 219
2025-03-23 19:40:50,767 - urllib3.connectionpool - DEBUG - Starting new HTTP connection (1): localhost:6003
2025-03-23 19:40:50,768 - urllib3.connectionpool - DEBUG - http://localhost:6003 "GET /stats HTTP/1.1" 200 218
2025-03-23 19:40:50,768 - __main__ - INFO - System stats after adding vectors: {'total_nodes': 3, 'sharding_strategy': 'lsh', 'replication_factor': 1, 'nodes': {'localhost:6001': {'dimension': 512, 'index_type': 'FlatL2', 'memory_usage_mb': 0.77, 'metric': 'L2', 'next_id': 0, 'sample_ids': [357737, 214224, 76547, 215259, 294350], 'storage_path': 'data/shard_0', 'timestamp': 1742773250.7643242, 'total_vectors': 392}, 'localhost:6002': {'dimension': 512, 'index_type': 'FlatL2', 'memory_usage_mb': 0.71, 'metric': 'L2', 'next_id': 0, 'sample_ids': [177934, 523957, 439715, 349860, 425925], 'storage_path': 'data/shard_1', 'timestamp': 1742773250.766069, 'total_vectors': 362}, 'localhost:6003': {'dimension': 512, 'index_type': 'FlatL2', 'memory_usage_mb': 0.68, 'metric': 'L2', 'next_id': 0, 'sample_ids': [329614, 187144, 128372, 505565, 16249], 'storage_path': 'data/shard_2', 'timestamp': 1742773250.768026, 'total_vectors': 346}}}
2025-03-23 19:40:50,768 - __main__ - INFO - Total vectors in system: 0
2025-03-23 19:40:50,768 - werkzeug - INFO - 127.0.0.1 - - [23/Mar/2025 19:40:50] "POST /add_vectors HTTP/1.1" 200 -
2025-03-23 19:40:50,770 - __main__ - INFO - Getting system statistics
2025-03-23 19:40:50,771 - urllib3.connectionpool - DEBUG - Starting new HTTP connection (1): localhost:6001
2025-03-23 19:40:50,772 - urllib3.connectionpool - DEBUG - http://localhost:6001 "GET /stats HTTP/1.1" 200 218
2025-03-23 19:40:50,773 - urllib3.connectionpool - DEBUG - Starting new HTTP connection (1): localhost:6002
2025-03-23 19:40:50,774 - urllib3.connectionpool - DEBUG - http://localhost:6002 "GET /stats HTTP/1.1" 200 220
2025-03-23 19:40:50,775 - urllib3.connectionpool - DEBUG - Starting new HTTP connection (1): localhost:6003
2025-03-23 19:40:50,776 - urllib3.connectionpool - DEBUG - http://localhost:6003 "GET /stats HTTP/1.1" 200 218
2025-03-23 19:40:50,776 - werkzeug - INFO - 127.0.0.1 - - [23/Mar/2025 19:40:50] "GET /stats HTTP/1.1" 200 -
2025-03-23 19:40:51,871 - __main__ - INFO - Received request to add 100 vectors
2025-03-23 19:40:51,871 - __main__ - DEBUG - Vectors shape: (100, 512)
2025-03-23 19:40:51,872 - __main__ - DEBUG - IDs shape: (100,)
2025-03-23 19:40:51,872 - __main__ - DEBUG - Sample IDs: [448076 102411  84674 278463 330369]...
2025-03-23 19:40:51,872 - __main__ - DEBUG - Calling coordinator.distribute_vectors
2025-03-23 19:40:51,872 - coordinator - INFO - Starting vector distribution for 100 vectors
2025-03-23 19:40:51,872 - root - INFO - LSH: Processing 100 vectors with shape (100, 512)
2025-03-23 19:40:51,872 - root - DEBUG - Table 0 hash value shape: (100, 4)
2025-03-23 19:40:51,872 - root - DEBUG - Table 1 hash value shape: (100, 4)
2025-03-23 19:40:51,872 - root - DEBUG - Table 2 hash value shape: (100, 4)
2025-03-23 19:40:51,872 - root - INFO - LSH: Combined hash shape: (100, 12)
2025-03-23 19:40:51,872 - root - INFO - LSH: Assigned vectors to shards: [(0, 34), (1, 30), (2, 36)]
2025-03-23 19:40:51,872 - coordinator - INFO - Shard assignments: (array([0, 1, 2]), array([34, 30, 36]))
2025-03-23 19:40:51,872 - coordinator - INFO - Grouped vectors by shard: ['shard_2: 36 vectors', 'shard_0: 34 vectors', 'shard_1: 30 vectors']
2025-03-23 19:40:51,872 - coordinator - INFO - Sending 36 vectors to node localhost:6003
2025-03-23 19:40:51,873 - coordinator - INFO - Sending 34 vectors to node localhost:6001
2025-03-23 19:40:51,887 - coordinator - INFO - Sending 30 vectors to node localhost:6002
2025-03-23 19:40:51,894 - urllib3.connectionpool - DEBUG - Starting new HTTP connection (1): localhost:6003
2025-03-23 19:40:51,894 - urllib3.connectionpool - DEBUG - Starting new HTTP connection (1): localhost:6001
2025-03-23 19:40:51,895 - urllib3.connectionpool - DEBUG - Starting new HTTP connection (1): localhost:6002
2025-03-23 19:40:51,900 - urllib3.connectionpool - DEBUG - http://localhost:6002 "POST /add_vectors HTTP/1.1" 200 52
2025-03-23 19:40:51,900 - coordinator - INFO - Successfully sent 30 vectors to node localhost:6002
2025-03-23 19:40:51,900 - urllib3.connectionpool - DEBUG - http://localhost:6001 "POST /add_vectors HTTP/1.1" 200 52
2025-03-23 19:40:51,900 - urllib3.connectionpool - DEBUG - http://localhost:6003 "POST /add_vectors HTTP/1.1" 200 52
2025-03-23 19:40:51,901 - coordinator - INFO - Successfully sent 34 vectors to node localhost:6001
2025-03-23 19:40:51,901 - coordinator - INFO - Successfully sent 36 vectors to node localhost:6003
2025-03-23 19:40:51,901 - coordinator - INFO - Completed vector distribution
2025-03-23 19:40:51,902 - urllib3.connectionpool - DEBUG - Starting new HTTP connection (1): localhost:6001
2025-03-23 19:40:51,903 - urllib3.connectionpool - DEBUG - http://localhost:6001 "GET /stats HTTP/1.1" 200 219
2025-03-23 19:40:51,904 - urllib3.connectionpool - DEBUG - Starting new HTTP connection (1): localhost:6002
2025-03-23 19:40:51,905 - urllib3.connectionpool - DEBUG - http://localhost:6002 "GET /stats HTTP/1.1" 200 217
2025-03-23 19:40:51,906 - urllib3.connectionpool - DEBUG - Starting new HTTP connection (1): localhost:6003
2025-03-23 19:40:51,907 - urllib3.connectionpool - DEBUG - http://localhost:6003 "GET /stats HTTP/1.1" 200 219
2025-03-23 19:40:51,907 - __main__ - INFO - System stats after adding vectors: {'total_nodes': 3, 'sharding_strategy': 'lsh', 'replication_factor': 1, 'nodes': {'localhost:6001': {'dimension': 512, 'index_type': 'FlatL2', 'memory_usage_mb': 0.84, 'metric': 'L2', 'next_id': 0, 'sample_ids': [357737, 543043, 214224, 76547, 215259], 'storage_path': 'data/shard_0', 'timestamp': 1742773251.9032168, 'total_vectors': 426}, 'localhost:6002': {'dimension': 512, 'index_type': 'FlatL2', 'memory_usage_mb': 0.77, 'metric': 'L2', 'next_id': 0, 'sample_ids': [177934, 523957, 279769, 63602, 439715], 'storage_path': 'data/shard_1', 'timestamp': 1742773251.90498, 'total_vectors': 392}, 'localhost:6003': {'dimension': 512, 'index_type': 'FlatL2', 'memory_usage_mb': 0.75, 'metric': 'L2', 'next_id': 0, 'sample_ids': [329614, 187144, 454067, 128372, 505565], 'storage_path': 'data/shard_2', 'timestamp': 1742773251.906809, 'total_vectors': 382}}}
2025-03-23 19:40:51,907 - __main__ - INFO - Total vectors in system: 0
2025-03-23 19:40:51,907 - werkzeug - INFO - 127.0.0.1 - - [23/Mar/2025 19:40:51] "POST /add_vectors HTTP/1.1" 200 -
2025-03-23 19:40:51,909 - __main__ - INFO - Getting system statistics
2025-03-23 19:40:51,910 - urllib3.connectionpool - DEBUG - Starting new HTTP connection (1): localhost:6001
2025-03-23 19:40:51,911 - urllib3.connectionpool - DEBUG - http://localhost:6001 "GET /stats HTTP/1.1" 200 218
2025-03-23 19:40:51,912 - urllib3.connectionpool - DEBUG - Starting new HTTP connection (1): localhost:6002
2025-03-23 19:40:51,913 - urllib3.connectionpool - DEBUG - http://localhost:6002 "GET /stats HTTP/1.1" 200 218
2025-03-23 19:40:51,913 - urllib3.connectionpool - DEBUG - Starting new HTTP connection (1): localhost:6003
2025-03-23 19:40:51,914 - urllib3.connectionpool - DEBUG - http://localhost:6003 "GET /stats HTTP/1.1" 200 219
2025-03-23 19:40:51,915 - werkzeug - INFO - 127.0.0.1 - - [23/Mar/2025 19:40:51] "GET /stats HTTP/1.1" 200 -
2025-03-23 19:40:52,978 - __main__ - INFO - Received request to add 100 vectors
2025-03-23 19:40:52,978 - __main__ - DEBUG - Vectors shape: (100, 512)
2025-03-23 19:40:52,978 - __main__ - DEBUG - IDs shape: (100,)
2025-03-23 19:40:52,978 - __main__ - DEBUG - Sample IDs: [172595 188439 237071 119452 361551]...
2025-03-23 19:40:52,978 - __main__ - DEBUG - Calling coordinator.distribute_vectors
2025-03-23 19:40:52,978 - coordinator - INFO - Starting vector distribution for 100 vectors
2025-03-23 19:40:52,978 - root - INFO - LSH: Processing 100 vectors with shape (100, 512)
2025-03-23 19:40:52,978 - root - DEBUG - Table 0 hash value shape: (100, 4)
2025-03-23 19:40:52,978 - root - DEBUG - Table 1 hash value shape: (100, 4)
2025-03-23 19:40:52,978 - root - DEBUG - Table 2 hash value shape: (100, 4)
2025-03-23 19:40:52,979 - root - INFO - LSH: Combined hash shape: (100, 12)
2025-03-23 19:40:52,979 - root - INFO - LSH: Assigned vectors to shards: [(0, 32), (1, 31), (2, 37)]
2025-03-23 19:40:52,979 - coordinator - INFO - Shard assignments: (array([0, 1, 2]), array([32, 31, 37]))
2025-03-23 19:40:52,979 - coordinator - INFO - Grouped vectors by shard: ['shard_0: 32 vectors', 'shard_1: 31 vectors', 'shard_2: 37 vectors']
2025-03-23 19:40:52,979 - coordinator - INFO - Sending 32 vectors to node localhost:6001
2025-03-23 19:40:52,985 - coordinator - INFO - Sending 31 vectors to node localhost:6002
2025-03-23 19:40:52,992 - coordinator - INFO - Sending 37 vectors to node localhost:6003
2025-03-23 19:40:53,001 - urllib3.connectionpool - DEBUG - Starting new HTTP connection (1): localhost:6002
2025-03-23 19:40:53,001 - urllib3.connectionpool - DEBUG - Starting new HTTP connection (1): localhost:6001
2025-03-23 19:40:53,002 - urllib3.connectionpool - DEBUG - Starting new HTTP connection (1): localhost:6003
2025-03-23 19:40:53,009 - urllib3.connectionpool - DEBUG - http://localhost:6002 "POST /add_vectors HTTP/1.1" 200 52
2025-03-23 19:40:53,009 - coordinator - INFO - Successfully sent 31 vectors to node localhost:6002
2025-03-23 19:40:53,009 - urllib3.connectionpool - DEBUG - http://localhost:6001 "POST /add_vectors HTTP/1.1" 200 52
2025-03-23 19:40:53,010 - coordinator - INFO - Successfully sent 32 vectors to node localhost:6001
2025-03-23 19:40:53,010 - urllib3.connectionpool - DEBUG - http://localhost:6003 "POST /add_vectors HTTP/1.1" 200 52
2025-03-23 19:40:53,010 - coordinator - INFO - Successfully sent 37 vectors to node localhost:6003
2025-03-23 19:40:53,010 - coordinator - INFO - Completed vector distribution
2025-03-23 19:40:53,011 - urllib3.connectionpool - DEBUG - Starting new HTTP connection (1): localhost:6001
2025-03-23 19:40:53,012 - urllib3.connectionpool - DEBUG - http://localhost:6001 "GET /stats HTTP/1.1" 200 218
2025-03-23 19:40:53,013 - urllib3.connectionpool - DEBUG - Starting new HTTP connection (1): localhost:6002
2025-03-23 19:40:53,014 - urllib3.connectionpool - DEBUG - http://localhost:6002 "GET /stats HTTP/1.1" 200 216
2025-03-23 19:40:53,015 - urllib3.connectionpool - DEBUG - Starting new HTTP connection (1): localhost:6003
2025-03-23 19:40:53,016 - urllib3.connectionpool - DEBUG - http://localhost:6003 "GET /stats HTTP/1.1" 200 219
2025-03-23 19:40:53,016 - __main__ - INFO - System stats after adding vectors: {'total_nodes': 3, 'sharding_strategy': 'lsh', 'replication_factor': 1, 'nodes': {'localhost:6001': {'dimension': 512, 'index_type': 'FlatL2', 'memory_usage_mb': 0.9, 'metric': 'L2', 'next_id': 0, 'sample_ids': [357737, 158744, 543043, 214224, 76547], 'storage_path': 'data/shard_0', 'timestamp': 1742773253.0123048, 'total_vectors': 458}, 'localhost:6002': {'dimension': 512, 'index_type': 'FlatL2', 'memory_usage_mb': 0.83, 'metric': 'L2', 'next_id': 0, 'sample_ids': [177934, 523957, 279769, 8211, 63602], 'storage_path': 'data/shard_1', 'timestamp': 1742773253.014171, 'total_vectors': 423}, 'localhost:6003': {'dimension': 512, 'index_type': 'FlatL2', 'memory_usage_mb': 0.82, 'metric': 'L2', 'next_id': 0, 'sample_ids': [329614, 187144, 463647, 473118, 454067], 'storage_path': 'data/shard_2', 'timestamp': 1742773253.016062, 'total_vectors': 419}}}
2025-03-23 19:40:53,017 - __main__ - INFO - Total vectors in system: 0
2025-03-23 19:40:53,017 - werkzeug - INFO - 127.0.0.1 - - [23/Mar/2025 19:40:53] "POST /add_vectors HTTP/1.1" 200 -
2025-03-23 19:40:53,019 - __main__ - INFO - Getting system statistics
2025-03-23 19:40:53,019 - urllib3.connectionpool - DEBUG - Starting new HTTP connection (1): localhost:6001
2025-03-23 19:40:53,020 - urllib3.connectionpool - DEBUG - http://localhost:6001 "GET /stats HTTP/1.1" 200 218
2025-03-23 19:40:53,021 - urllib3.connectionpool - DEBUG - Starting new HTTP connection (1): localhost:6002
2025-03-23 19:40:53,022 - urllib3.connectionpool - DEBUG - http://localhost:6002 "GET /stats HTTP/1.1" 200 216
2025-03-23 19:40:53,023 - urllib3.connectionpool - DEBUG - Starting new HTTP connection (1): localhost:6003
2025-03-23 19:40:53,024 - urllib3.connectionpool - DEBUG - http://localhost:6003 "GET /stats HTTP/1.1" 200 220
2025-03-23 19:40:53,024 - werkzeug - INFO - 127.0.0.1 - - [23/Mar/2025 19:40:53] "GET /stats HTTP/1.1" 200 -
2025-03-23 19:40:54,085 - __main__ - INFO - Received request to add 100 vectors
2025-03-23 19:40:54,085 - __main__ - DEBUG - Vectors shape: (100, 512)
2025-03-23 19:40:54,085 - __main__ - DEBUG - IDs shape: (100,)
2025-03-23 19:40:54,085 - __main__ - DEBUG - Sample IDs: [201676 199681 479596 318455 176446]...
2025-03-23 19:40:54,085 - __main__ - DEBUG - Calling coordinator.distribute_vectors
2025-03-23 19:40:54,085 - coordinator - INFO - Starting vector distribution for 100 vectors
2025-03-23 19:40:54,085 - root - INFO - LSH: Processing 100 vectors with shape (100, 512)
2025-03-23 19:40:54,086 - root - DEBUG - Table 0 hash value shape: (100, 4)
2025-03-23 19:40:54,086 - root - DEBUG - Table 1 hash value shape: (100, 4)
2025-03-23 19:40:54,086 - root - DEBUG - Table 2 hash value shape: (100, 4)
2025-03-23 19:40:54,086 - root - INFO - LSH: Combined hash shape: (100, 12)
2025-03-23 19:40:54,086 - root - INFO - LSH: Assigned vectors to shards: [(0, 21), (1, 40), (2, 39)]
2025-03-23 19:40:54,086 - coordinator - INFO - Shard assignments: (array([0, 1, 2]), array([21, 40, 39]))
2025-03-23 19:40:54,086 - coordinator - INFO - Grouped vectors by shard: ['shard_0: 21 vectors', 'shard_2: 39 vectors', 'shard_1: 40 vectors']
2025-03-23 19:40:54,086 - coordinator - INFO - Sending 21 vectors to node localhost:6001
2025-03-23 19:40:54,087 - coordinator - INFO - Sending 39 vectors to node localhost:6003
2025-03-23 19:40:54,100 - coordinator - INFO - Sending 40 vectors to node localhost:6002
2025-03-23 19:40:54,109 - urllib3.connectionpool - DEBUG - Starting new HTTP connection (1): localhost:6001
2025-03-23 19:40:54,109 - urllib3.connectionpool - DEBUG - Starting new HTTP connection (1): localhost:6003
2025-03-23 19:40:54,110 - urllib3.connectionpool - DEBUG - Starting new HTTP connection (1): localhost:6002
2025-03-23 19:40:54,114 - urllib3.connectionpool - DEBUG - http://localhost:6001 "POST /add_vectors HTTP/1.1" 200 52
2025-03-23 19:40:54,115 - coordinator - INFO - Successfully sent 21 vectors to node localhost:6001
2025-03-23 19:40:54,117 - urllib3.connectionpool - DEBUG - http://localhost:6002 "POST /add_vectors HTTP/1.1" 200 52
2025-03-23 19:40:54,118 - urllib3.connectionpool - DEBUG - http://localhost:6003 "POST /add_vectors HTTP/1.1" 200 52
2025-03-23 19:40:54,118 - coordinator - INFO - Successfully sent 39 vectors to node localhost:6003
2025-03-23 19:40:54,118 - coordinator - INFO - Successfully sent 40 vectors to node localhost:6002
2025-03-23 19:40:54,118 - coordinator - INFO - Completed vector distribution
2025-03-23 19:40:54,119 - urllib3.connectionpool - DEBUG - Starting new HTTP connection (1): localhost:6001
2025-03-23 19:40:54,121 - urllib3.connectionpool - DEBUG - http://localhost:6001 "GET /stats HTTP/1.1" 200 219
2025-03-23 19:40:54,122 - urllib3.connectionpool - DEBUG - Starting new HTTP connection (1): localhost:6002
2025-03-23 19:40:54,123 - urllib3.connectionpool - DEBUG - http://localhost:6002 "GET /stats HTTP/1.1" 200 217
2025-03-23 19:40:54,124 - urllib3.connectionpool - DEBUG - Starting new HTTP connection (1): localhost:6003
2025-03-23 19:40:54,126 - urllib3.connectionpool - DEBUG - http://localhost:6003 "GET /stats HTTP/1.1" 200 219
2025-03-23 19:40:54,126 - __main__ - INFO - System stats after adding vectors: {'total_nodes': 3, 'sharding_strategy': 'lsh', 'replication_factor': 1, 'nodes': {'localhost:6001': {'dimension': 512, 'index_type': 'FlatL2', 'memory_usage_mb': 0.94, 'metric': 'L2', 'next_id': 0, 'sample_ids': [357737, 158744, 543043, 214224, 76547], 'storage_path': 'data/shard_0', 'timestamp': 1742773254.1210449, 'total_vectors': 479}, 'localhost:6002': {'dimension': 512, 'index_type': 'FlatL2', 'memory_usage_mb': 0.91, 'metric': 'L2', 'next_id': 0, 'sample_ids': [177934, 523957, 279769, 8211, 63602], 'storage_path': 'data/shard_1', 'timestamp': 1742773254.1234539, 'total_vectors': 463}, 'localhost:6003': {'dimension': 512, 'index_type': 'FlatL2', 'memory_usage_mb': 0.9, 'metric': 'L2', 'next_id': 0, 'sample_ids': [329614, 187144, 463647, 473118, 454067], 'storage_path': 'data/shard_2', 'timestamp': 1742773254.1256058, 'total_vectors': 458}}}
2025-03-23 19:40:54,126 - __main__ - INFO - Total vectors in system: 0
2025-03-23 19:40:54,126 - werkzeug - INFO - 127.0.0.1 - - [23/Mar/2025 19:40:54] "POST /add_vectors HTTP/1.1" 200 -
2025-03-23 19:40:54,128 - __main__ - INFO - Getting system statistics
2025-03-23 19:40:54,129 - urllib3.connectionpool - DEBUG - Starting new HTTP connection (1): localhost:6001
2025-03-23 19:40:54,131 - urllib3.connectionpool - DEBUG - http://localhost:6001 "GET /stats HTTP/1.1" 200 217
2025-03-23 19:40:54,131 - urllib3.connectionpool - DEBUG - Starting new HTTP connection (1): localhost:6002
2025-03-23 19:40:54,133 - urllib3.connectionpool - DEBUG - http://localhost:6002 "GET /stats HTTP/1.1" 200 216
2025-03-23 19:40:54,134 - urllib3.connectionpool - DEBUG - Starting new HTTP connection (1): localhost:6003
2025-03-23 19:40:54,135 - urllib3.connectionpool - DEBUG - http://localhost:6003 "GET /stats HTTP/1.1" 200 218
2025-03-23 19:40:54,135 - werkzeug - INFO - 127.0.0.1 - - [23/Mar/2025 19:40:54] "GET /stats HTTP/1.1" 200 -
2025-03-23 19:40:55,216 - __main__ - INFO - Received request to add 100 vectors
2025-03-23 19:40:55,216 - __main__ - DEBUG - Vectors shape: (100, 512)
2025-03-23 19:40:55,216 - __main__ - DEBUG - IDs shape: (100,)
2025-03-23 19:40:55,216 - __main__ - DEBUG - Sample IDs: [385205 134112 312192 195045  36936]...
2025-03-23 19:40:55,216 - __main__ - DEBUG - Calling coordinator.distribute_vectors
2025-03-23 19:40:55,216 - coordinator - INFO - Starting vector distribution for 100 vectors
2025-03-23 19:40:55,216 - root - INFO - LSH: Processing 100 vectors with shape (100, 512)
2025-03-23 19:40:55,217 - root - DEBUG - Table 0 hash value shape: (100, 4)
2025-03-23 19:40:55,217 - root - DEBUG - Table 1 hash value shape: (100, 4)
2025-03-23 19:40:55,217 - root - DEBUG - Table 2 hash value shape: (100, 4)
2025-03-23 19:40:55,217 - root - INFO - LSH: Combined hash shape: (100, 12)
2025-03-23 19:40:55,217 - root - INFO - LSH: Assigned vectors to shards: [(0, 43), (1, 31), (2, 26)]
2025-03-23 19:40:55,217 - coordinator - INFO - Shard assignments: (array([0, 1, 2]), array([43, 31, 26]))
2025-03-23 19:40:55,217 - coordinator - INFO - Grouped vectors by shard: ['shard_2: 26 vectors', 'shard_0: 43 vectors', 'shard_1: 31 vectors']
2025-03-23 19:40:55,217 - coordinator - INFO - Sending 26 vectors to node localhost:6003
2025-03-23 19:40:55,223 - coordinator - INFO - Sending 43 vectors to node localhost:6001
2025-03-23 19:40:55,231 - coordinator - INFO - Sending 31 vectors to node localhost:6002
2025-03-23 19:40:55,238 - urllib3.connectionpool - DEBUG - Starting new HTTP connection (1): localhost:6003
2025-03-23 19:40:55,239 - urllib3.connectionpool - DEBUG - Starting new HTTP connection (1): localhost:6001
2025-03-23 19:40:55,239 - urllib3.connectionpool - DEBUG - Starting new HTTP connection (1): localhost:6002
2025-03-23 19:40:55,244 - urllib3.connectionpool - DEBUG - http://localhost:6003 "POST /add_vectors HTTP/1.1" 200 52
2025-03-23 19:40:55,244 - coordinator - INFO - Successfully sent 26 vectors to node localhost:6003
2025-03-23 19:40:55,244 - urllib3.connectionpool - DEBUG - http://localhost:6002 "POST /add_vectors HTTP/1.1" 200 52
2025-03-23 19:40:55,245 - coordinator - INFO - Successfully sent 31 vectors to node localhost:6002
2025-03-23 19:40:55,245 - urllib3.connectionpool - DEBUG - http://localhost:6001 "POST /add_vectors HTTP/1.1" 200 52
2025-03-23 19:40:55,245 - coordinator - INFO - Successfully sent 43 vectors to node localhost:6001
2025-03-23 19:40:55,246 - coordinator - INFO - Completed vector distribution
2025-03-23 19:40:55,246 - urllib3.connectionpool - DEBUG - Starting new HTTP connection (1): localhost:6001
2025-03-23 19:40:55,247 - urllib3.connectionpool - DEBUG - http://localhost:6001 "GET /stats HTTP/1.1" 200 219
2025-03-23 19:40:55,248 - urllib3.connectionpool - DEBUG - Starting new HTTP connection (1): localhost:6002
2025-03-23 19:40:55,249 - urllib3.connectionpool - DEBUG - http://localhost:6002 "GET /stats HTTP/1.1" 200 217
2025-03-23 19:40:55,250 - urllib3.connectionpool - DEBUG - Starting new HTTP connection (1): localhost:6003
2025-03-23 19:40:55,251 - urllib3.connectionpool - DEBUG - http://localhost:6003 "GET /stats HTTP/1.1" 200 219
2025-03-23 19:40:55,251 - __main__ - INFO - System stats after adding vectors: {'total_nodes': 3, 'sharding_strategy': 'lsh', 'replication_factor': 1, 'nodes': {'localhost:6001': {'dimension': 512, 'index_type': 'FlatL2', 'memory_usage_mb': 1.02, 'metric': 'L2', 'next_id': 0, 'sample_ids': [357737, 158744, 543043, 214224, 76547], 'storage_path': 'data/shard_0', 'timestamp': 1742773255.2475772, 'total_vectors': 522}, 'localhost:6002': {'dimension': 512, 'index_type': 'FlatL2', 'memory_usage_mb': 0.97, 'metric': 'L2', 'next_id': 0, 'sample_ids': [177934, 523957, 279769, 8211, 63602], 'storage_path': 'data/shard_1', 'timestamp': 1742773255.2491179, 'total_vectors': 494}, 'localhost:6003': {'dimension': 512, 'index_type': 'FlatL2', 'memory_usage_mb': 0.95, 'metric': 'L2', 'next_id': 0, 'sample_ids': [329614, 187144, 463647, 473118, 454067], 'storage_path': 'data/shard_2', 'timestamp': 1742773255.251009, 'total_vectors': 484}}}
2025-03-23 19:40:55,251 - __main__ - INFO - Total vectors in system: 0
2025-03-23 19:40:55,251 - werkzeug - INFO - 127.0.0.1 - - [23/Mar/2025 19:40:55] "POST /add_vectors HTTP/1.1" 200 -
2025-03-23 19:40:55,253 - __main__ - INFO - Getting system statistics
2025-03-23 19:40:55,254 - urllib3.connectionpool - DEBUG - Starting new HTTP connection (1): localhost:6001
2025-03-23 19:40:55,255 - urllib3.connectionpool - DEBUG - http://localhost:6001 "GET /stats HTTP/1.1" 200 217
2025-03-23 19:40:55,255 - urllib3.connectionpool - DEBUG - Starting new HTTP connection (1): localhost:6002
2025-03-23 19:40:55,256 - urllib3.connectionpool - DEBUG - http://localhost:6002 "GET /stats HTTP/1.1" 200 216
2025-03-23 19:40:55,257 - urllib3.connectionpool - DEBUG - Starting new HTTP connection (1): localhost:6003
2025-03-23 19:40:55,258 - urllib3.connectionpool - DEBUG - http://localhost:6003 "GET /stats HTTP/1.1" 200 219
2025-03-23 19:40:55,259 - werkzeug - INFO - 127.0.0.1 - - [23/Mar/2025 19:40:55] "GET /stats HTTP/1.1" 200 -
2025-03-23 19:40:56,352 - __main__ - INFO - Received request to add 100 vectors
2025-03-23 19:40:56,352 - __main__ - DEBUG - Vectors shape: (100, 512)
2025-03-23 19:40:56,352 - __main__ - DEBUG - IDs shape: (100,)
2025-03-23 19:40:56,353 - __main__ - DEBUG - Sample IDs: [356498 119445 152120 218091  16010]...
2025-03-23 19:40:56,353 - __main__ - DEBUG - Calling coordinator.distribute_vectors
2025-03-23 19:40:56,353 - coordinator - INFO - Starting vector distribution for 100 vectors
2025-03-23 19:40:56,353 - root - INFO - LSH: Processing 100 vectors with shape (100, 512)
2025-03-23 19:40:56,353 - root - DEBUG - Table 0 hash value shape: (100, 4)
2025-03-23 19:40:56,353 - root - DEBUG - Table 1 hash value shape: (100, 4)
2025-03-23 19:40:56,353 - root - DEBUG - Table 2 hash value shape: (100, 4)
2025-03-23 19:40:56,353 - root - INFO - LSH: Combined hash shape: (100, 12)
2025-03-23 19:40:56,353 - root - INFO - LSH: Assigned vectors to shards: [(0, 34), (1, 33), (2, 33)]
2025-03-23 19:40:56,353 - coordinator - INFO - Shard assignments: (array([0, 1, 2]), array([34, 33, 33]))
2025-03-23 19:40:56,353 - coordinator - INFO - Grouped vectors by shard: ['shard_1: 33 vectors', 'shard_0: 34 vectors', 'shard_2: 33 vectors']
2025-03-23 19:40:56,353 - coordinator - INFO - Sending 33 vectors to node localhost:6002
2025-03-23 19:40:56,354 - coordinator - INFO - Sending 34 vectors to node localhost:6001
2025-03-23 19:40:56,368 - coordinator - INFO - Sending 33 vectors to node localhost:6003
2025-03-23 19:40:56,375 - urllib3.connectionpool - DEBUG - Starting new HTTP connection (1): localhost:6001
2025-03-23 19:40:56,376 - urllib3.connectionpool - DEBUG - Starting new HTTP connection (1): localhost:6002
2025-03-23 19:40:56,376 - urllib3.connectionpool - DEBUG - Starting new HTTP connection (1): localhost:6003
2025-03-23 19:40:56,381 - urllib3.connectionpool - DEBUG - http://localhost:6001 "POST /add_vectors HTTP/1.1" 200 52
2025-03-23 19:40:56,381 - coordinator - INFO - Successfully sent 34 vectors to node localhost:6001
2025-03-23 19:40:56,382 - urllib3.connectionpool - DEBUG - http://localhost:6002 "POST /add_vectors HTTP/1.1" 200 52
2025-03-23 19:40:56,382 - coordinator - INFO - Successfully sent 33 vectors to node localhost:6002
2025-03-23 19:40:56,382 - urllib3.connectionpool - DEBUG - http://localhost:6003 "POST /add_vectors HTTP/1.1" 200 52
2025-03-23 19:40:56,382 - coordinator - INFO - Successfully sent 33 vectors to node localhost:6003
2025-03-23 19:40:56,382 - coordinator - INFO - Completed vector distribution
2025-03-23 19:40:56,383 - urllib3.connectionpool - DEBUG - Starting new HTTP connection (1): localhost:6001
2025-03-23 19:40:56,384 - urllib3.connectionpool - DEBUG - http://localhost:6001 "GET /stats HTTP/1.1" 200 218
2025-03-23 19:40:56,385 - urllib3.connectionpool - DEBUG - Starting new HTTP connection (1): localhost:6002
2025-03-23 19:40:56,385 - urllib3.connectionpool - DEBUG - http://localhost:6002 "GET /stats HTTP/1.1" 200 215
2025-03-23 19:40:56,386 - urllib3.connectionpool - DEBUG - Starting new HTTP connection (1): localhost:6003
2025-03-23 19:40:56,387 - urllib3.connectionpool - DEBUG - http://localhost:6003 "GET /stats HTTP/1.1" 200 219
2025-03-23 19:40:56,387 - __main__ - INFO - System stats after adding vectors: {'total_nodes': 3, 'sharding_strategy': 'lsh', 'replication_factor': 1, 'nodes': {'localhost:6001': {'dimension': 512, 'index_type': 'FlatL2', 'memory_usage_mb': 1.09, 'metric': 'L2', 'next_id': 0, 'sample_ids': [357737, 158744, 543043, 214224, 76547], 'storage_path': 'data/shard_0', 'timestamp': 1742773256.384058, 'total_vectors': 556}, 'localhost:6002': {'dimension': 512, 'index_type': 'FlatL2', 'memory_usage_mb': 1.03, 'metric': 'L2', 'next_id': 0, 'sample_ids': [177934, 523957, 279769, 8211, 63602], 'storage_path': 'data/shard_1', 'timestamp': 1742773256.38575, 'total_vectors': 527}, 'localhost:6003': {'dimension': 512, 'index_type': 'FlatL2', 'memory_usage_mb': 1.01, 'metric': 'L2', 'next_id': 0, 'sample_ids': [329614, 187144, 463647, 473118, 454067], 'storage_path': 'data/shard_2', 'timestamp': 1742773256.387614, 'total_vectors': 517}}}
2025-03-23 19:40:56,388 - __main__ - INFO - Total vectors in system: 0
2025-03-23 19:40:56,388 - werkzeug - INFO - 127.0.0.1 - - [23/Mar/2025 19:40:56] "POST /add_vectors HTTP/1.1" 200 -
2025-03-23 19:40:56,389 - __main__ - INFO - Getting system statistics
2025-03-23 19:40:56,390 - urllib3.connectionpool - DEBUG - Starting new HTTP connection (1): localhost:6001
2025-03-23 19:40:56,391 - urllib3.connectionpool - DEBUG - http://localhost:6001 "GET /stats HTTP/1.1" 200 218
2025-03-23 19:40:56,392 - urllib3.connectionpool - DEBUG - Starting new HTTP connection (1): localhost:6002
2025-03-23 19:40:56,393 - urllib3.connectionpool - DEBUG - http://localhost:6002 "GET /stats HTTP/1.1" 200 217
2025-03-23 19:40:56,394 - urllib3.connectionpool - DEBUG - Starting new HTTP connection (1): localhost:6003
2025-03-23 19:40:56,395 - urllib3.connectionpool - DEBUG - http://localhost:6003 "GET /stats HTTP/1.1" 200 219
2025-03-23 19:40:56,395 - werkzeug - INFO - 127.0.0.1 - - [23/Mar/2025 19:40:56] "GET /stats HTTP/1.1" 200 -
2025-03-23 19:40:57,489 - __main__ - INFO - Received request to add 100 vectors
2025-03-23 19:40:57,489 - __main__ - DEBUG - Vectors shape: (100, 512)
2025-03-23 19:40:57,489 - __main__ - DEBUG - IDs shape: (100,)
2025-03-23 19:40:57,489 - __main__ - DEBUG - Sample IDs: [463283 134886 577584 569976 289415]...
2025-03-23 19:40:57,489 - __main__ - DEBUG - Calling coordinator.distribute_vectors
2025-03-23 19:40:57,489 - coordinator - INFO - Starting vector distribution for 100 vectors
2025-03-23 19:40:57,489 - root - INFO - LSH: Processing 100 vectors with shape (100, 512)
2025-03-23 19:40:57,490 - root - DEBUG - Table 0 hash value shape: (100, 4)
2025-03-23 19:40:57,490 - root - DEBUG - Table 1 hash value shape: (100, 4)
2025-03-23 19:40:57,490 - root - DEBUG - Table 2 hash value shape: (100, 4)
2025-03-23 19:40:57,490 - root - INFO - LSH: Combined hash shape: (100, 12)
2025-03-23 19:40:57,490 - root - INFO - LSH: Assigned vectors to shards: [(0, 34), (1, 36), (2, 30)]
2025-03-23 19:40:57,490 - coordinator - INFO - Shard assignments: (array([0, 1, 2]), array([34, 36, 30]))
2025-03-23 19:40:57,490 - coordinator - INFO - Grouped vectors by shard: ['shard_0: 34 vectors', 'shard_2: 30 vectors', 'shard_1: 36 vectors']
2025-03-23 19:40:57,490 - coordinator - INFO - Sending 34 vectors to node localhost:6001
2025-03-23 19:40:57,491 - coordinator - INFO - Sending 30 vectors to node localhost:6003
2025-03-23 19:40:57,504 - coordinator - INFO - Sending 36 vectors to node localhost:6002
2025-03-23 19:40:57,512 - urllib3.connectionpool - DEBUG - Starting new HTTP connection (1): localhost:6001
2025-03-23 19:40:57,513 - urllib3.connectionpool - DEBUG - Starting new HTTP connection (1): localhost:6003
2025-03-23 19:40:57,513 - urllib3.connectionpool - DEBUG - Starting new HTTP connection (1): localhost:6002
2025-03-23 19:40:57,519 - urllib3.connectionpool - DEBUG - http://localhost:6001 "POST /add_vectors HTTP/1.1" 200 52
2025-03-23 19:40:57,519 - coordinator - INFO - Successfully sent 34 vectors to node localhost:6001
2025-03-23 19:40:57,520 - urllib3.connectionpool - DEBUG - http://localhost:6003 "POST /add_vectors HTTP/1.1" 200 52
2025-03-23 19:40:57,520 - coordinator - INFO - Successfully sent 30 vectors to node localhost:6003
2025-03-23 19:40:57,520 - urllib3.connectionpool - DEBUG - http://localhost:6002 "POST /add_vectors HTTP/1.1" 200 52
2025-03-23 19:40:57,520 - coordinator - INFO - Successfully sent 36 vectors to node localhost:6002
2025-03-23 19:40:57,520 - coordinator - INFO - Completed vector distribution
2025-03-23 19:40:57,521 - urllib3.connectionpool - DEBUG - Starting new HTTP connection (1): localhost:6001
2025-03-23 19:40:57,522 - urllib3.connectionpool - DEBUG - http://localhost:6001 "GET /stats HTTP/1.1" 200 219
2025-03-23 19:40:57,523 - urllib3.connectionpool - DEBUG - Starting new HTTP connection (1): localhost:6002
2025-03-23 19:40:57,524 - urllib3.connectionpool - DEBUG - http://localhost:6002 "GET /stats HTTP/1.1" 200 216
2025-03-23 19:40:57,525 - urllib3.connectionpool - DEBUG - Starting new HTTP connection (1): localhost:6003
2025-03-23 19:40:57,526 - urllib3.connectionpool - DEBUG - http://localhost:6003 "GET /stats HTTP/1.1" 200 219
2025-03-23 19:40:57,526 - __main__ - INFO - System stats after adding vectors: {'total_nodes': 3, 'sharding_strategy': 'lsh', 'replication_factor': 1, 'nodes': {'localhost:6001': {'dimension': 512, 'index_type': 'FlatL2', 'memory_usage_mb': 1.16, 'metric': 'L2', 'next_id': 0, 'sample_ids': [357737, 158744, 543043, 214224, 76547], 'storage_path': 'data/shard_0', 'timestamp': 1742773257.5224671, 'total_vectors': 590}, 'localhost:6002': {'dimension': 512, 'index_type': 'FlatL2', 'memory_usage_mb': 1.1, 'metric': 'L2', 'next_id': 0, 'sample_ids': [177934, 523957, 279769, 154425, 8211], 'storage_path': 'data/shard_1', 'timestamp': 1742773257.524173, 'total_vectors': 563}, 'localhost:6003': {'dimension': 512, 'index_type': 'FlatL2', 'memory_usage_mb': 1.07, 'metric': 'L2', 'next_id': 0, 'sample_ids': [329614, 187144, 463647, 473118, 454067], 'storage_path': 'data/shard_2', 'timestamp': 1742773257.525908, 'total_vectors': 547}}}
2025-03-23 19:40:57,526 - __main__ - INFO - Total vectors in system: 0
2025-03-23 19:40:57,526 - werkzeug - INFO - 127.0.0.1 - - [23/Mar/2025 19:40:57] "POST /add_vectors HTTP/1.1" 200 -
2025-03-23 19:40:57,528 - __main__ - INFO - Getting system statistics
2025-03-23 19:40:57,529 - urllib3.connectionpool - DEBUG - Starting new HTTP connection (1): localhost:6001
2025-03-23 19:40:57,530 - urllib3.connectionpool - DEBUG - http://localhost:6001 "GET /stats HTTP/1.1" 200 218
2025-03-23 19:40:57,531 - urllib3.connectionpool - DEBUG - Starting new HTTP connection (1): localhost:6002
2025-03-23 19:40:57,532 - urllib3.connectionpool - DEBUG - http://localhost:6002 "GET /stats HTTP/1.1" 200 216
2025-03-23 19:40:57,532 - urllib3.connectionpool - DEBUG - Starting new HTTP connection (1): localhost:6003
2025-03-23 19:40:57,533 - urllib3.connectionpool - DEBUG - http://localhost:6003 "GET /stats HTTP/1.1" 200 219
2025-03-23 19:40:57,534 - werkzeug - INFO - 127.0.0.1 - - [23/Mar/2025 19:40:57] "GET /stats HTTP/1.1" 200 -
2025-03-23 19:40:58,601 - __main__ - INFO - Received request to add 100 vectors
2025-03-23 19:40:58,601 - __main__ - DEBUG - Vectors shape: (100, 512)
2025-03-23 19:40:58,601 - __main__ - DEBUG - IDs shape: (100,)
2025-03-23 19:40:58,601 - __main__ - DEBUG - Sample IDs: [376365 466339  93437  97679 184611]...
2025-03-23 19:40:58,601 - __main__ - DEBUG - Calling coordinator.distribute_vectors
2025-03-23 19:40:58,601 - coordinator - INFO - Starting vector distribution for 100 vectors
2025-03-23 19:40:58,601 - root - INFO - LSH: Processing 100 vectors with shape (100, 512)
2025-03-23 19:40:58,601 - root - DEBUG - Table 0 hash value shape: (100, 4)
2025-03-23 19:40:58,601 - root - DEBUG - Table 1 hash value shape: (100, 4)
2025-03-23 19:40:58,601 - root - DEBUG - Table 2 hash value shape: (100, 4)
2025-03-23 19:40:58,601 - root - INFO - LSH: Combined hash shape: (100, 12)
2025-03-23 19:40:58,601 - root - INFO - LSH: Assigned vectors to shards: [(0, 30), (1, 38), (2, 32)]
2025-03-23 19:40:58,602 - coordinator - INFO - Shard assignments: (array([0, 1, 2]), array([30, 38, 32]))
2025-03-23 19:40:58,602 - coordinator - INFO - Grouped vectors by shard: ['shard_2: 32 vectors', 'shard_0: 30 vectors', 'shard_1: 38 vectors']
2025-03-23 19:40:58,602 - coordinator - INFO - Sending 32 vectors to node localhost:6003
2025-03-23 19:40:58,608 - coordinator - INFO - Sending 30 vectors to node localhost:6001
2025-03-23 19:40:58,614 - coordinator - INFO - Sending 38 vectors to node localhost:6002
2025-03-23 19:40:58,622 - urllib3.connectionpool - DEBUG - Starting new HTTP connection (1): localhost:6001
2025-03-23 19:40:58,623 - urllib3.connectionpool - DEBUG - Starting new HTTP connection (1): localhost:6003
2025-03-23 19:40:58,623 - urllib3.connectionpool - DEBUG - Starting new HTTP connection (1): localhost:6002
2025-03-23 19:40:58,628 - urllib3.connectionpool - DEBUG - http://localhost:6001 "POST /add_vectors HTTP/1.1" 200 52
2025-03-23 19:40:58,628 - coordinator - INFO - Successfully sent 30 vectors to node localhost:6001
2025-03-23 19:40:58,628 - urllib3.connectionpool - DEBUG - http://localhost:6003 "POST /add_vectors HTTP/1.1" 200 52
2025-03-23 19:40:58,629 - coordinator - INFO - Successfully sent 32 vectors to node localhost:6003
2025-03-23 19:40:58,629 - urllib3.connectionpool - DEBUG - http://localhost:6002 "POST /add_vectors HTTP/1.1" 200 52
2025-03-23 19:40:58,629 - coordinator - INFO - Successfully sent 38 vectors to node localhost:6002
2025-03-23 19:40:58,629 - coordinator - INFO - Completed vector distribution
2025-03-23 19:40:58,630 - urllib3.connectionpool - DEBUG - Starting new HTTP connection (1): localhost:6001
2025-03-23 19:40:58,631 - urllib3.connectionpool - DEBUG - http://localhost:6001 "GET /stats HTTP/1.1" 200 219
2025-03-23 19:40:58,632 - urllib3.connectionpool - DEBUG - Starting new HTTP connection (1): localhost:6002
2025-03-23 19:40:58,633 - urllib3.connectionpool - DEBUG - http://localhost:6002 "GET /stats HTTP/1.1" 200 218
2025-03-23 19:40:58,634 - urllib3.connectionpool - DEBUG - Starting new HTTP connection (1): localhost:6003
2025-03-23 19:40:58,635 - urllib3.connectionpool - DEBUG - http://localhost:6003 "GET /stats HTTP/1.1" 200 220
2025-03-23 19:40:58,635 - __main__ - INFO - System stats after adding vectors: {'total_nodes': 3, 'sharding_strategy': 'lsh', 'replication_factor': 1, 'nodes': {'localhost:6001': {'dimension': 512, 'index_type': 'FlatL2', 'memory_usage_mb': 1.22, 'metric': 'L2', 'next_id': 0, 'sample_ids': [357737, 158744, 543043, 214224, 76547], 'storage_path': 'data/shard_0', 'timestamp': 1742773258.6315799, 'total_vectors': 620}, 'localhost:6002': {'dimension': 512, 'index_type': 'FlatL2', 'memory_usage_mb': 1.18, 'metric': 'L2', 'next_id': 0, 'sample_ids': [177934, 523957, 279769, 154425, 8211], 'storage_path': 'data/shard_1', 'timestamp': 1742773258.6332932, 'total_vectors': 601}, 'localhost:6003': {'dimension': 512, 'index_type': 'FlatL2', 'memory_usage_mb': 1.14, 'metric': 'L2', 'next_id': 0, 'sample_ids': [329614, 187144, 463647, 184611, 473118], 'storage_path': 'data/shard_2', 'timestamp': 1742773258.6350138, 'total_vectors': 579}}}
2025-03-23 19:40:58,635 - __main__ - INFO - Total vectors in system: 0
2025-03-23 19:40:58,635 - werkzeug - INFO - 127.0.0.1 - - [23/Mar/2025 19:40:58] "POST /add_vectors HTTP/1.1" 200 -
2025-03-23 19:40:58,637 - __main__ - INFO - Getting system statistics
2025-03-23 19:40:58,638 - urllib3.connectionpool - DEBUG - Starting new HTTP connection (1): localhost:6001
2025-03-23 19:40:58,639 - urllib3.connectionpool - DEBUG - http://localhost:6001 "GET /stats HTTP/1.1" 200 218
2025-03-23 19:40:58,639 - urllib3.connectionpool - DEBUG - Starting new HTTP connection (1): localhost:6002
2025-03-23 19:40:58,640 - urllib3.connectionpool - DEBUG - http://localhost:6002 "GET /stats HTTP/1.1" 200 217
2025-03-23 19:40:58,641 - urllib3.connectionpool - DEBUG - Starting new HTTP connection (1): localhost:6003
2025-03-23 19:40:58,642 - urllib3.connectionpool - DEBUG - http://localhost:6003 "GET /stats HTTP/1.1" 200 219
2025-03-23 19:40:58,642 - werkzeug - INFO - 127.0.0.1 - - [23/Mar/2025 19:40:58] "GET /stats HTTP/1.1" 200 -
2025-03-23 19:40:59,726 - __main__ - INFO - Received request to add 100 vectors
2025-03-23 19:40:59,726 - __main__ - DEBUG - Vectors shape: (100, 512)
2025-03-23 19:40:59,726 - __main__ - DEBUG - IDs shape: (100,)
2025-03-23 19:40:59,726 - __main__ - DEBUG - Sample IDs: [574315 318080 511599 475779 278006]...
2025-03-23 19:40:59,726 - __main__ - DEBUG - Calling coordinator.distribute_vectors
2025-03-23 19:40:59,726 - coordinator - INFO - Starting vector distribution for 100 vectors
2025-03-23 19:40:59,726 - root - INFO - LSH: Processing 100 vectors with shape (100, 512)
2025-03-23 19:40:59,726 - root - DEBUG - Table 0 hash value shape: (100, 4)
2025-03-23 19:40:59,726 - root - DEBUG - Table 1 hash value shape: (100, 4)
2025-03-23 19:40:59,726 - root - DEBUG - Table 2 hash value shape: (100, 4)
2025-03-23 19:40:59,726 - root - INFO - LSH: Combined hash shape: (100, 12)
2025-03-23 19:40:59,726 - root - INFO - LSH: Assigned vectors to shards: [(0, 39), (1, 37), (2, 24)]
2025-03-23 19:40:59,727 - coordinator - INFO - Shard assignments: (array([0, 1, 2]), array([39, 37, 24]))
2025-03-23 19:40:59,727 - coordinator - INFO - Grouped vectors by shard: ['shard_1: 37 vectors', 'shard_2: 24 vectors', 'shard_0: 39 vectors']
2025-03-23 19:40:59,727 - coordinator - INFO - Sending 37 vectors to node localhost:6002
2025-03-23 19:40:59,727 - coordinator - INFO - Sending 24 vectors to node localhost:6003
2025-03-23 19:40:59,739 - coordinator - INFO - Sending 39 vectors to node localhost:6001
2025-03-23 19:40:59,748 - urllib3.connectionpool - DEBUG - Starting new HTTP connection (1): localhost:6003
2025-03-23 19:40:59,748 - urllib3.connectionpool - DEBUG - Starting new HTTP connection (1): localhost:6001
2025-03-23 19:40:59,749 - urllib3.connectionpool - DEBUG - Starting new HTTP connection (1): localhost:6002
2025-03-23 19:40:59,753 - urllib3.connectionpool - DEBUG - http://localhost:6003 "POST /add_vectors HTTP/1.1" 200 52
2025-03-23 19:40:59,753 - coordinator - INFO - Successfully sent 24 vectors to node localhost:6003
2025-03-23 19:40:59,754 - urllib3.connectionpool - DEBUG - http://localhost:6001 "POST /add_vectors HTTP/1.1" 200 52
2025-03-23 19:40:59,755 - coordinator - INFO - Successfully sent 39 vectors to node localhost:6001
2025-03-23 19:40:59,755 - urllib3.connectionpool - DEBUG - http://localhost:6002 "POST /add_vectors HTTP/1.1" 200 52
2025-03-23 19:40:59,755 - coordinator - INFO - Successfully sent 37 vectors to node localhost:6002
2025-03-23 19:40:59,755 - coordinator - INFO - Completed vector distribution
2025-03-23 19:40:59,756 - urllib3.connectionpool - DEBUG - Starting new HTTP connection (1): localhost:6001
2025-03-23 19:40:59,757 - urllib3.connectionpool - DEBUG - http://localhost:6001 "GET /stats HTTP/1.1" 200 218
2025-03-23 19:40:59,758 - urllib3.connectionpool - DEBUG - Starting new HTTP connection (1): localhost:6002
2025-03-23 19:40:59,759 - urllib3.connectionpool - DEBUG - http://localhost:6002 "GET /stats HTTP/1.1" 200 220
2025-03-23 19:40:59,759 - urllib3.connectionpool - DEBUG - Starting new HTTP connection (1): localhost:6003
2025-03-23 19:40:59,760 - urllib3.connectionpool - DEBUG - http://localhost:6003 "GET /stats HTTP/1.1" 200 219
2025-03-23 19:40:59,761 - __main__ - INFO - System stats after adding vectors: {'total_nodes': 3, 'sharding_strategy': 'lsh', 'replication_factor': 1, 'nodes': {'localhost:6001': {'dimension': 512, 'index_type': 'FlatL2', 'memory_usage_mb': 1.29, 'metric': 'L2', 'next_id': 0, 'sample_ids': [357737, 158744, 543043, 214224, 76547], 'storage_path': 'data/shard_0', 'timestamp': 1742773259.757182, 'total_vectors': 659}, 'localhost:6002': {'dimension': 512, 'index_type': 'FlatL2', 'memory_usage_mb': 1.25, 'metric': 'L2', 'next_id': 0, 'sample_ids': [177934, 491366, 523957, 279769, 288685], 'storage_path': 'data/shard_1', 'timestamp': 1742773259.7590258, 'total_vectors': 638}, 'localhost:6003': {'dimension': 512, 'index_type': 'FlatL2', 'memory_usage_mb': 1.18, 'metric': 'L2', 'next_id': 0, 'sample_ids': [329614, 187144, 463647, 184611, 473118], 'storage_path': 'data/shard_2', 'timestamp': 1742773259.760719, 'total_vectors': 603}}}
2025-03-23 19:40:59,761 - __main__ - INFO - Total vectors in system: 0
2025-03-23 19:40:59,761 - werkzeug - INFO - 127.0.0.1 - - [23/Mar/2025 19:40:59] "POST /add_vectors HTTP/1.1" 200 -
2025-03-23 19:40:59,763 - __main__ - INFO - Getting system statistics
2025-03-23 19:40:59,763 - urllib3.connectionpool - DEBUG - Starting new HTTP connection (1): localhost:6001
2025-03-23 19:40:59,765 - urllib3.connectionpool - DEBUG - http://localhost:6001 "GET /stats HTTP/1.1" 200 218
2025-03-23 19:40:59,765 - urllib3.connectionpool - DEBUG - Starting new HTTP connection (1): localhost:6002
2025-03-23 19:40:59,766 - urllib3.connectionpool - DEBUG - http://localhost:6002 "GET /stats HTTP/1.1" 200 219
2025-03-23 19:40:59,767 - urllib3.connectionpool - DEBUG - Starting new HTTP connection (1): localhost:6003
2025-03-23 19:40:59,768 - urllib3.connectionpool - DEBUG - http://localhost:6003 "GET /stats HTTP/1.1" 200 219
2025-03-23 19:40:59,768 - werkzeug - INFO - 127.0.0.1 - - [23/Mar/2025 19:40:59] "GET /stats HTTP/1.1" 200 -
2025-03-23 19:41:00,858 - __main__ - INFO - Received request to add 100 vectors
2025-03-23 19:41:00,858 - __main__ - DEBUG - Vectors shape: (100, 512)
2025-03-23 19:41:00,858 - __main__ - DEBUG - IDs shape: (100,)
2025-03-23 19:41:00,858 - __main__ - DEBUG - Sample IDs: [161128  55299 234807 245026 537827]...
2025-03-23 19:41:00,858 - __main__ - DEBUG - Calling coordinator.distribute_vectors
2025-03-23 19:41:00,858 - coordinator - INFO - Starting vector distribution for 100 vectors
2025-03-23 19:41:00,858 - root - INFO - LSH: Processing 100 vectors with shape (100, 512)
2025-03-23 19:41:00,859 - root - DEBUG - Table 0 hash value shape: (100, 4)
2025-03-23 19:41:00,859 - root - DEBUG - Table 1 hash value shape: (100, 4)
2025-03-23 19:41:00,859 - root - DEBUG - Table 2 hash value shape: (100, 4)
2025-03-23 19:41:00,859 - root - INFO - LSH: Combined hash shape: (100, 12)
2025-03-23 19:41:00,859 - root - INFO - LSH: Assigned vectors to shards: [(0, 27), (1, 34), (2, 39)]
2025-03-23 19:41:00,859 - coordinator - INFO - Shard assignments: (array([0, 1, 2]), array([27, 34, 39]))
2025-03-23 19:41:00,859 - coordinator - INFO - Grouped vectors by shard: ['shard_2: 39 vectors', 'shard_0: 27 vectors', 'shard_1: 34 vectors']
2025-03-23 19:41:00,859 - coordinator - INFO - Sending 39 vectors to node localhost:6003
2025-03-23 19:41:00,860 - coordinator - INFO - Sending 27 vectors to node localhost:6001
2025-03-23 19:41:00,874 - coordinator - INFO - Sending 34 vectors to node localhost:6002
2025-03-23 19:41:00,883 - urllib3.connectionpool - DEBUG - Starting new HTTP connection (1): localhost:6001
2025-03-23 19:41:00,883 - urllib3.connectionpool - DEBUG - Starting new HTTP connection (1): localhost:6003
2025-03-23 19:41:00,884 - urllib3.connectionpool - DEBUG - Starting new HTTP connection (1): localhost:6002
2025-03-23 19:41:00,890 - urllib3.connectionpool - DEBUG - http://localhost:6001 "POST /add_vectors HTTP/1.1" 200 52
2025-03-23 19:41:00,890 - coordinator - INFO - Successfully sent 27 vectors to node localhost:6001
2025-03-23 19:41:00,891 - urllib3.connectionpool - DEBUG - http://localhost:6003 "POST /add_vectors HTTP/1.1" 200 52
2025-03-23 19:41:00,891 - urllib3.connectionpool - DEBUG - http://localhost:6002 "POST /add_vectors HTTP/1.1" 200 52
2025-03-23 19:41:00,891 - coordinator - INFO - Successfully sent 39 vectors to node localhost:6003
2025-03-23 19:41:00,891 - coordinator - INFO - Successfully sent 34 vectors to node localhost:6002
2025-03-23 19:41:00,892 - coordinator - INFO - Completed vector distribution
2025-03-23 19:41:00,893 - urllib3.connectionpool - DEBUG - Starting new HTTP connection (1): localhost:6001
2025-03-23 19:41:00,894 - urllib3.connectionpool - DEBUG - http://localhost:6001 "GET /stats HTTP/1.1" 200 218
2025-03-23 19:41:00,895 - urllib3.connectionpool - DEBUG - Starting new HTTP connection (1): localhost:6002
2025-03-23 19:41:00,896 - urllib3.connectionpool - DEBUG - http://localhost:6002 "GET /stats HTTP/1.1" 200 220
2025-03-23 19:41:00,897 - urllib3.connectionpool - DEBUG - Starting new HTTP connection (1): localhost:6003
2025-03-23 19:41:00,898 - urllib3.connectionpool - DEBUG - http://localhost:6003 "GET /stats HTTP/1.1" 200 219
2025-03-23 19:41:00,898 - __main__ - INFO - System stats after adding vectors: {'total_nodes': 3, 'sharding_strategy': 'lsh', 'replication_factor': 1, 'nodes': {'localhost:6001': {'dimension': 512, 'index_type': 'FlatL2', 'memory_usage_mb': 1.35, 'metric': 'L2', 'next_id': 0, 'sample_ids': [357737, 158744, 543043, 214224, 76547], 'storage_path': 'data/shard_0', 'timestamp': 1742773260.893876, 'total_vectors': 686}, 'localhost:6002': {'dimension': 512, 'index_type': 'FlatL2', 'memory_usage_mb': 1.32, 'metric': 'L2', 'next_id': 0, 'sample_ids': [177934, 491366, 523957, 279769, 288685], 'storage_path': 'data/shard_1', 'timestamp': 1742773260.8963342, 'total_vectors': 672}, 'localhost:6003': {'dimension': 512, 'index_type': 'FlatL2', 'memory_usage_mb': 1.26, 'metric': 'L2', 'next_id': 0, 'sample_ids': [329614, 187144, 463647, 184611, 473118], 'storage_path': 'data/shard_2', 'timestamp': 1742773260.898514, 'total_vectors': 642}}}
2025-03-23 19:41:00,899 - __main__ - INFO - Total vectors in system: 0
2025-03-23 19:41:00,899 - werkzeug - INFO - 127.0.0.1 - - [23/Mar/2025 19:41:00] "POST /add_vectors HTTP/1.1" 200 -
2025-03-23 19:41:00,901 - __main__ - INFO - Getting system statistics
2025-03-23 19:41:00,901 - urllib3.connectionpool - DEBUG - Starting new HTTP connection (1): localhost:6001
2025-03-23 19:41:00,903 - urllib3.connectionpool - DEBUG - http://localhost:6001 "GET /stats HTTP/1.1" 200 218
2025-03-23 19:41:00,903 - urllib3.connectionpool - DEBUG - Starting new HTTP connection (1): localhost:6002
2025-03-23 19:41:00,904 - urllib3.connectionpool - DEBUG - http://localhost:6002 "GET /stats HTTP/1.1" 200 220
2025-03-23 19:41:00,905 - urllib3.connectionpool - DEBUG - Starting new HTTP connection (1): localhost:6003
2025-03-23 19:41:00,907 - urllib3.connectionpool - DEBUG - http://localhost:6003 "GET /stats HTTP/1.1" 200 219
2025-03-23 19:41:00,907 - werkzeug - INFO - 127.0.0.1 - - [23/Mar/2025 19:41:00] "GET /stats HTTP/1.1" 200 -
2025-03-23 19:41:01,974 - __main__ - INFO - Received request to add 100 vectors
2025-03-23 19:41:01,974 - __main__ - DEBUG - Vectors shape: (100, 512)
2025-03-23 19:41:01,974 - __main__ - DEBUG - IDs shape: (100,)
2025-03-23 19:41:01,974 - __main__ - DEBUG - Sample IDs: [465806 345027  69213 512330  79014]...
2025-03-23 19:41:01,974 - __main__ - DEBUG - Calling coordinator.distribute_vectors
2025-03-23 19:41:01,974 - coordinator - INFO - Starting vector distribution for 100 vectors
2025-03-23 19:41:01,974 - root - INFO - LSH: Processing 100 vectors with shape (100, 512)
2025-03-23 19:41:01,974 - root - DEBUG - Table 0 hash value shape: (100, 4)
2025-03-23 19:41:01,975 - root - DEBUG - Table 1 hash value shape: (100, 4)
2025-03-23 19:41:01,975 - root - DEBUG - Table 2 hash value shape: (100, 4)
2025-03-23 19:41:01,975 - root - INFO - LSH: Combined hash shape: (100, 12)
2025-03-23 19:41:01,975 - root - INFO - LSH: Assigned vectors to shards: [(0, 30), (1, 34), (2, 36)]
2025-03-23 19:41:01,975 - coordinator - INFO - Shard assignments: (array([0, 1, 2]), array([30, 34, 36]))
2025-03-23 19:41:01,975 - coordinator - INFO - Grouped vectors by shard: ['shard_0: 30 vectors', 'shard_1: 34 vectors', 'shard_2: 36 vectors']
2025-03-23 19:41:01,975 - coordinator - INFO - Sending 30 vectors to node localhost:6001
2025-03-23 19:41:01,975 - coordinator - INFO - Sending 34 vectors to node localhost:6002
2025-03-23 19:41:01,988 - coordinator - INFO - Sending 36 vectors to node localhost:6003
2025-03-23 19:41:01,996 - urllib3.connectionpool - DEBUG - Starting new HTTP connection (1): localhost:6001
2025-03-23 19:41:01,996 - urllib3.connectionpool - DEBUG - Starting new HTTP connection (1): localhost:6002
2025-03-23 19:41:01,997 - urllib3.connectionpool - DEBUG - Starting new HTTP connection (1): localhost:6003
2025-03-23 19:41:02,002 - urllib3.connectionpool - DEBUG - http://localhost:6001 "POST /add_vectors HTTP/1.1" 200 52
2025-03-23 19:41:02,002 - coordinator - INFO - Successfully sent 30 vectors to node localhost:6001
2025-03-23 19:41:02,003 - urllib3.connectionpool - DEBUG - http://localhost:6002 "POST /add_vectors HTTP/1.1" 200 52
2025-03-23 19:41:02,003 - coordinator - INFO - Successfully sent 34 vectors to node localhost:6002
2025-03-23 19:41:02,003 - urllib3.connectionpool - DEBUG - http://localhost:6003 "POST /add_vectors HTTP/1.1" 200 52
2025-03-23 19:41:02,003 - coordinator - INFO - Successfully sent 36 vectors to node localhost:6003
2025-03-23 19:41:02,003 - coordinator - INFO - Completed vector distribution
2025-03-23 19:41:02,004 - urllib3.connectionpool - DEBUG - Starting new HTTP connection (1): localhost:6001
2025-03-23 19:41:02,005 - urllib3.connectionpool - DEBUG - http://localhost:6001 "GET /stats HTTP/1.1" 200 217
2025-03-23 19:41:02,006 - urllib3.connectionpool - DEBUG - Starting new HTTP connection (1): localhost:6002
2025-03-23 19:41:02,007 - urllib3.connectionpool - DEBUG - http://localhost:6002 "GET /stats HTTP/1.1" 200 219
2025-03-23 19:41:02,008 - urllib3.connectionpool - DEBUG - Starting new HTTP connection (1): localhost:6003
2025-03-23 19:41:02,009 - urllib3.connectionpool - DEBUG - http://localhost:6003 "GET /stats HTTP/1.1" 200 217
2025-03-23 19:41:02,009 - __main__ - INFO - System stats after adding vectors: {'total_nodes': 3, 'sharding_strategy': 'lsh', 'replication_factor': 1, 'nodes': {'localhost:6001': {'dimension': 512, 'index_type': 'FlatL2', 'memory_usage_mb': 1.4, 'metric': 'L2', 'next_id': 0, 'sample_ids': [357737, 158744, 543043, 214224, 76547], 'storage_path': 'data/shard_0', 'timestamp': 1742773262.005468, 'total_vectors': 716}, 'localhost:6002': {'dimension': 512, 'index_type': 'FlatL2', 'memory_usage_mb': 1.38, 'metric': 'L2', 'next_id': 0, 'sample_ids': [177934, 491366, 523957, 279769, 288685], 'storage_path': 'data/shard_1', 'timestamp': 1742773262.007464, 'total_vectors': 706}, 'localhost:6003': {'dimension': 512, 'index_type': 'FlatL2', 'memory_usage_mb': 1.33, 'metric': 'L2', 'next_id': 0, 'sample_ids': [329614, 6763, 187144, 463647, 184611], 'storage_path': 'data/shard_2', 'timestamp': 1742773262.009425, 'total_vectors': 678}}}
2025-03-23 19:41:02,009 - __main__ - INFO - Total vectors in system: 0
2025-03-23 19:41:02,010 - werkzeug - INFO - 127.0.0.1 - - [23/Mar/2025 19:41:02] "POST /add_vectors HTTP/1.1" 200 -
2025-03-23 19:41:02,012 - __main__ - INFO - Getting system statistics
2025-03-23 19:41:02,012 - urllib3.connectionpool - DEBUG - Starting new HTTP connection (1): localhost:6001
2025-03-23 19:41:02,014 - urllib3.connectionpool - DEBUG - http://localhost:6001 "GET /stats HTTP/1.1" 200 218
2025-03-23 19:41:02,015 - urllib3.connectionpool - DEBUG - Starting new HTTP connection (1): localhost:6002
2025-03-23 19:41:02,016 - urllib3.connectionpool - DEBUG - http://localhost:6002 "GET /stats HTTP/1.1" 200 220
2025-03-23 19:41:02,017 - urllib3.connectionpool - DEBUG - Starting new HTTP connection (1): localhost:6003
2025-03-23 19:41:02,018 - urllib3.connectionpool - DEBUG - http://localhost:6003 "GET /stats HTTP/1.1" 200 217
2025-03-23 19:41:02,018 - werkzeug - INFO - 127.0.0.1 - - [23/Mar/2025 19:41:02] "GET /stats HTTP/1.1" 200 -
2025-03-23 19:41:03,103 - __main__ - INFO - Received request to add 100 vectors
2025-03-23 19:41:03,104 - __main__ - DEBUG - Vectors shape: (100, 512)
2025-03-23 19:41:03,104 - __main__ - DEBUG - IDs shape: (100,)
2025-03-23 19:41:03,104 - __main__ - DEBUG - Sample IDs: [ 29596 349594  35197 567432 226147]...
2025-03-23 19:41:03,104 - __main__ - DEBUG - Calling coordinator.distribute_vectors
2025-03-23 19:41:03,104 - coordinator - INFO - Starting vector distribution for 100 vectors
2025-03-23 19:41:03,104 - root - INFO - LSH: Processing 100 vectors with shape (100, 512)
2025-03-23 19:41:03,105 - root - DEBUG - Table 0 hash value shape: (100, 4)
2025-03-23 19:41:03,105 - root - DEBUG - Table 1 hash value shape: (100, 4)
2025-03-23 19:41:03,105 - root - DEBUG - Table 2 hash value shape: (100, 4)
2025-03-23 19:41:03,105 - root - INFO - LSH: Combined hash shape: (100, 12)
2025-03-23 19:41:03,105 - root - INFO - LSH: Assigned vectors to shards: [(0, 36), (1, 39), (2, 25)]
2025-03-23 19:41:03,105 - coordinator - INFO - Shard assignments: (array([0, 1, 2]), array([36, 39, 25]))
2025-03-23 19:41:03,105 - coordinator - INFO - Grouped vectors by shard: ['shard_2: 25 vectors', 'shard_0: 36 vectors', 'shard_1: 39 vectors']
2025-03-23 19:41:03,106 - coordinator - INFO - Sending 25 vectors to node localhost:6003
2025-03-23 19:41:03,111 - coordinator - INFO - Sending 36 vectors to node localhost:6001
2025-03-23 19:41:03,120 - coordinator - INFO - Sending 39 vectors to node localhost:6002
2025-03-23 19:41:03,121 - urllib3.connectionpool - DEBUG - Starting new HTTP connection (1): localhost:6003
2025-03-23 19:41:03,121 - urllib3.connectionpool - DEBUG - Starting new HTTP connection (1): localhost:6001
2025-03-23 19:41:03,131 - urllib3.connectionpool - DEBUG - Starting new HTTP connection (1): localhost:6002
2025-03-23 19:41:03,136 - urllib3.connectionpool - DEBUG - http://localhost:6003 "POST /add_vectors HTTP/1.1" 200 52
2025-03-23 19:41:03,136 - coordinator - INFO - Successfully sent 25 vectors to node localhost:6003
2025-03-23 19:41:03,137 - urllib3.connectionpool - DEBUG - http://localhost:6001 "POST /add_vectors HTTP/1.1" 200 52
2025-03-23 19:41:03,138 - coordinator - INFO - Successfully sent 36 vectors to node localhost:6001
2025-03-23 19:41:03,138 - urllib3.connectionpool - DEBUG - http://localhost:6002 "POST /add_vectors HTTP/1.1" 200 52
2025-03-23 19:41:03,138 - coordinator - INFO - Successfully sent 39 vectors to node localhost:6002
2025-03-23 19:41:03,138 - coordinator - INFO - Completed vector distribution
2025-03-23 19:41:03,139 - urllib3.connectionpool - DEBUG - Starting new HTTP connection (1): localhost:6001
2025-03-23 19:41:03,140 - urllib3.connectionpool - DEBUG - http://localhost:6001 "GET /stats HTTP/1.1" 200 219
2025-03-23 19:41:03,141 - urllib3.connectionpool - DEBUG - Starting new HTTP connection (1): localhost:6002
2025-03-23 19:41:03,142 - urllib3.connectionpool - DEBUG - http://localhost:6002 "GET /stats HTTP/1.1" 200 218
2025-03-23 19:41:03,143 - urllib3.connectionpool - DEBUG - Starting new HTTP connection (1): localhost:6003
2025-03-23 19:41:03,144 - urllib3.connectionpool - DEBUG - http://localhost:6003 "GET /stats HTTP/1.1" 200 216
2025-03-23 19:41:03,144 - __main__ - INFO - System stats after adding vectors: {'total_nodes': 3, 'sharding_strategy': 'lsh', 'replication_factor': 1, 'nodes': {'localhost:6001': {'dimension': 512, 'index_type': 'FlatL2', 'memory_usage_mb': 1.47, 'metric': 'L2', 'next_id': 0, 'sample_ids': [357737, 158744, 543043, 214224, 76547], 'storage_path': 'data/shard_0', 'timestamp': 1742773263.1405609, 'total_vectors': 752}, 'localhost:6002': {'dimension': 512, 'index_type': 'FlatL2', 'memory_usage_mb': 1.46, 'metric': 'L2', 'next_id': 0, 'sample_ids': [177934, 491366, 523957, 279769, 288685], 'storage_path': 'data/shard_1', 'timestamp': 1742773263.14239, 'total_vectors': 745}, 'localhost:6003': {'dimension': 512, 'index_type': 'FlatL2', 'memory_usage_mb': 1.38, 'metric': 'L2', 'next_id': 0, 'sample_ids': [329614, 6763, 187144, 463647, 184611], 'storage_path': 'data/shard_2', 'timestamp': 1742773263.14428, 'total_vectors': 703}}}
2025-03-23 19:41:03,144 - __main__ - INFO - Total vectors in system: 0
2025-03-23 19:41:03,145 - werkzeug - INFO - 127.0.0.1 - - [23/Mar/2025 19:41:03] "POST /add_vectors HTTP/1.1" 200 -
2025-03-23 19:41:03,147 - __main__ - INFO - Getting system statistics
2025-03-23 19:41:03,148 - urllib3.connectionpool - DEBUG - Starting new HTTP connection (1): localhost:6001
2025-03-23 19:41:03,149 - urllib3.connectionpool - DEBUG - http://localhost:6001 "GET /stats HTTP/1.1" 200 218
2025-03-23 19:41:03,149 - urllib3.connectionpool - DEBUG - Starting new HTTP connection (1): localhost:6002
2025-03-23 19:41:03,150 - urllib3.connectionpool - DEBUG - http://localhost:6002 "GET /stats HTTP/1.1" 200 219
2025-03-23 19:41:03,151 - urllib3.connectionpool - DEBUG - Starting new HTTP connection (1): localhost:6003
2025-03-23 19:41:03,152 - urllib3.connectionpool - DEBUG - http://localhost:6003 "GET /stats HTTP/1.1" 200 217
2025-03-23 19:41:03,153 - werkzeug - INFO - 127.0.0.1 - - [23/Mar/2025 19:41:03] "GET /stats HTTP/1.1" 200 -
2025-03-23 19:41:04,219 - __main__ - INFO - Received request to add 100 vectors
2025-03-23 19:41:04,219 - __main__ - DEBUG - Vectors shape: (100, 512)
2025-03-23 19:41:04,219 - __main__ - DEBUG - IDs shape: (100,)
2025-03-23 19:41:04,219 - __main__ - DEBUG - Sample IDs: [450075 289229 301061 507893 477227]...
2025-03-23 19:41:04,219 - __main__ - DEBUG - Calling coordinator.distribute_vectors
2025-03-23 19:41:04,219 - coordinator - INFO - Starting vector distribution for 100 vectors
2025-03-23 19:41:04,219 - root - INFO - LSH: Processing 100 vectors with shape (100, 512)
2025-03-23 19:41:04,219 - root - DEBUG - Table 0 hash value shape: (100, 4)
2025-03-23 19:41:04,220 - root - DEBUG - Table 1 hash value shape: (100, 4)
2025-03-23 19:41:04,220 - root - DEBUG - Table 2 hash value shape: (100, 4)
2025-03-23 19:41:04,220 - root - INFO - LSH: Combined hash shape: (100, 12)
2025-03-23 19:41:04,220 - root - INFO - LSH: Assigned vectors to shards: [(0, 34), (1, 28), (2, 38)]
2025-03-23 19:41:04,220 - coordinator - INFO - Shard assignments: (array([0, 1, 2]), array([34, 28, 38]))
2025-03-23 19:41:04,220 - coordinator - INFO - Grouped vectors by shard: ['shard_2: 38 vectors', 'shard_0: 34 vectors', 'shard_1: 28 vectors']
2025-03-23 19:41:04,220 - coordinator - INFO - Sending 38 vectors to node localhost:6003
2025-03-23 19:41:04,220 - coordinator - INFO - Sending 34 vectors to node localhost:6001
2025-03-23 19:41:04,234 - coordinator - INFO - Sending 28 vectors to node localhost:6002
2025-03-23 19:41:04,241 - urllib3.connectionpool - DEBUG - Starting new HTTP connection (1): localhost:6002
2025-03-23 19:41:04,241 - urllib3.connectionpool - DEBUG - Starting new HTTP connection (1): localhost:6003
2025-03-23 19:41:04,265 - urllib3.connectionpool - DEBUG - Starting new HTTP connection (1): localhost:6001
2025-03-23 19:41:04,270 - urllib3.connectionpool - DEBUG - http://localhost:6002 "POST /add_vectors HTTP/1.1" 200 52
2025-03-23 19:41:04,270 - coordinator - INFO - Successfully sent 28 vectors to node localhost:6002
2025-03-23 19:41:04,271 - urllib3.connectionpool - DEBUG - http://localhost:6001 "POST /add_vectors HTTP/1.1" 200 52
2025-03-23 19:41:04,272 - coordinator - INFO - Successfully sent 34 vectors to node localhost:6001
2025-03-23 19:41:04,272 - urllib3.connectionpool - DEBUG - http://localhost:6003 "POST /add_vectors HTTP/1.1" 200 52
2025-03-23 19:41:04,272 - coordinator - INFO - Successfully sent 38 vectors to node localhost:6003
2025-03-23 19:41:04,272 - coordinator - INFO - Completed vector distribution
2025-03-23 19:41:04,273 - urllib3.connectionpool - DEBUG - Starting new HTTP connection (1): localhost:6001
2025-03-23 19:41:04,274 - urllib3.connectionpool - DEBUG - http://localhost:6001 "GET /stats HTTP/1.1" 200 218
2025-03-23 19:41:04,275 - urllib3.connectionpool - DEBUG - Starting new HTTP connection (1): localhost:6002
2025-03-23 19:41:04,276 - urllib3.connectionpool - DEBUG - http://localhost:6002 "GET /stats HTTP/1.1" 200 219
2025-03-23 19:41:04,277 - urllib3.connectionpool - DEBUG - Starting new HTTP connection (1): localhost:6003
2025-03-23 19:41:04,278 - urllib3.connectionpool - DEBUG - http://localhost:6003 "GET /stats HTTP/1.1" 200 218
2025-03-23 19:41:04,278 - __main__ - INFO - System stats after adding vectors: {'total_nodes': 3, 'sharding_strategy': 'lsh', 'replication_factor': 1, 'nodes': {'localhost:6001': {'dimension': 512, 'index_type': 'FlatL2', 'memory_usage_mb': 1.54, 'metric': 'L2', 'next_id': 0, 'sample_ids': [357737, 158744, 543043, 214224, 76547], 'storage_path': 'data/shard_0', 'timestamp': 1742773264.274333, 'total_vectors': 786}, 'localhost:6002': {'dimension': 512, 'index_type': 'FlatL2', 'memory_usage_mb': 1.52, 'metric': 'L2', 'next_id': 0, 'sample_ids': [177934, 491366, 523957, 279769, 288685], 'storage_path': 'data/shard_1', 'timestamp': 1742773264.276062, 'total_vectors': 773}, 'localhost:6003': {'dimension': 512, 'index_type': 'FlatL2', 'memory_usage_mb': 1.45, 'metric': 'L2', 'next_id': 0, 'sample_ids': [206487, 329614, 6763, 187144, 463647], 'storage_path': 'data/shard_2', 'timestamp': 1742773264.2779882, 'total_vectors': 741}}}
2025-03-23 19:41:04,278 - __main__ - INFO - Total vectors in system: 0
2025-03-23 19:41:04,278 - werkzeug - INFO - 127.0.0.1 - - [23/Mar/2025 19:41:04] "POST /add_vectors HTTP/1.1" 200 -
2025-03-23 19:41:04,280 - __main__ - INFO - Getting system statistics
2025-03-23 19:41:04,281 - urllib3.connectionpool - DEBUG - Starting new HTTP connection (1): localhost:6001
2025-03-23 19:41:04,282 - urllib3.connectionpool - DEBUG - http://localhost:6001 "GET /stats HTTP/1.1" 200 218
2025-03-23 19:41:04,283 - urllib3.connectionpool - DEBUG - Starting new HTTP connection (1): localhost:6002
2025-03-23 19:41:04,284 - urllib3.connectionpool - DEBUG - http://localhost:6002 "GET /stats HTTP/1.1" 200 219
2025-03-23 19:41:04,284 - urllib3.connectionpool - DEBUG - Starting new HTTP connection (1): localhost:6003
2025-03-23 19:41:04,285 - urllib3.connectionpool - DEBUG - http://localhost:6003 "GET /stats HTTP/1.1" 200 218
2025-03-23 19:41:04,286 - werkzeug - INFO - 127.0.0.1 - - [23/Mar/2025 19:41:04] "GET /stats HTTP/1.1" 200 -
2025-03-23 19:41:05,361 - __main__ - INFO - Received request to add 100 vectors
2025-03-23 19:41:05,361 - __main__ - DEBUG - Vectors shape: (100, 512)
2025-03-23 19:41:05,361 - __main__ - DEBUG - IDs shape: (100,)
2025-03-23 19:41:05,361 - __main__ - DEBUG - Sample IDs: [577959  79229 506178 282037 489339]...
2025-03-23 19:41:05,362 - __main__ - DEBUG - Calling coordinator.distribute_vectors
2025-03-23 19:41:05,362 - coordinator - INFO - Starting vector distribution for 100 vectors
2025-03-23 19:41:05,362 - root - INFO - LSH: Processing 100 vectors with shape (100, 512)
2025-03-23 19:41:05,362 - root - DEBUG - Table 0 hash value shape: (100, 4)
2025-03-23 19:41:05,362 - root - DEBUG - Table 1 hash value shape: (100, 4)
2025-03-23 19:41:05,362 - root - DEBUG - Table 2 hash value shape: (100, 4)
2025-03-23 19:41:05,362 - root - INFO - LSH: Combined hash shape: (100, 12)
2025-03-23 19:41:05,362 - root - INFO - LSH: Assigned vectors to shards: [(0, 33), (1, 28), (2, 39)]
2025-03-23 19:41:05,363 - coordinator - INFO - Shard assignments: (array([0, 1, 2]), array([33, 28, 39]))
2025-03-23 19:41:05,363 - coordinator - INFO - Grouped vectors by shard: ['shard_0: 33 vectors', 'shard_2: 39 vectors', 'shard_1: 28 vectors']
2025-03-23 19:41:05,363 - coordinator - INFO - Sending 33 vectors to node localhost:6001
2025-03-23 19:41:05,363 - coordinator - INFO - Sending 39 vectors to node localhost:6003
2025-03-23 19:41:05,378 - coordinator - INFO - Sending 28 vectors to node localhost:6002
2025-03-23 19:41:05,384 - urllib3.connectionpool - DEBUG - Starting new HTTP connection (1): localhost:6001
2025-03-23 19:41:05,384 - urllib3.connectionpool - DEBUG - Starting new HTTP connection (1): localhost:6003
2025-03-23 19:41:05,385 - urllib3.connectionpool - DEBUG - Starting new HTTP connection (1): localhost:6002
2025-03-23 19:41:05,390 - urllib3.connectionpool - DEBUG - http://localhost:6002 "POST /add_vectors HTTP/1.1" 200 52
2025-03-23 19:41:05,390 - coordinator - INFO - Successfully sent 28 vectors to node localhost:6002
2025-03-23 19:41:05,390 - urllib3.connectionpool - DEBUG - http://localhost:6001 "POST /add_vectors HTTP/1.1" 200 52
2025-03-23 19:41:05,391 - coordinator - INFO - Successfully sent 33 vectors to node localhost:6001
2025-03-23 19:41:05,391 - urllib3.connectionpool - DEBUG - http://localhost:6003 "POST /add_vectors HTTP/1.1" 200 52
2025-03-23 19:41:05,391 - coordinator - INFO - Successfully sent 39 vectors to node localhost:6003
2025-03-23 19:41:05,391 - coordinator - INFO - Completed vector distribution
2025-03-23 19:41:05,392 - urllib3.connectionpool - DEBUG - Starting new HTTP connection (1): localhost:6001
2025-03-23 19:41:05,393 - urllib3.connectionpool - DEBUG - http://localhost:6001 "GET /stats HTTP/1.1" 200 218
2025-03-23 19:41:05,394 - urllib3.connectionpool - DEBUG - Starting new HTTP connection (1): localhost:6002
2025-03-23 19:41:05,395 - urllib3.connectionpool - DEBUG - http://localhost:6002 "GET /stats HTTP/1.1" 200 219
2025-03-23 19:41:05,396 - urllib3.connectionpool - DEBUG - Starting new HTTP connection (1): localhost:6003
2025-03-23 19:41:05,397 - urllib3.connectionpool - DEBUG - http://localhost:6003 "GET /stats HTTP/1.1" 200 217
2025-03-23 19:41:05,397 - __main__ - INFO - System stats after adding vectors: {'total_nodes': 3, 'sharding_strategy': 'lsh', 'replication_factor': 1, 'nodes': {'localhost:6001': {'dimension': 512, 'index_type': 'FlatL2', 'memory_usage_mb': 1.61, 'metric': 'L2', 'next_id': 0, 'sample_ids': [357737, 158744, 543043, 214224, 76547], 'storage_path': 'data/shard_0', 'timestamp': 1742773265.393437, 'total_vectors': 819}, 'localhost:6002': {'dimension': 512, 'index_type': 'FlatL2', 'memory_usage_mb': 1.57, 'metric': 'L2', 'next_id': 0, 'sample_ids': [177934, 491366, 523957, 279769, 288685], 'storage_path': 'data/shard_1', 'timestamp': 1742773265.395228, 'total_vectors': 801}, 'localhost:6003': {'dimension': 512, 'index_type': 'FlatL2', 'memory_usage_mb': 1.53, 'metric': 'L2', 'next_id': 0, 'sample_ids': [206487, 329614, 6763, 187144, 463647], 'storage_path': 'data/shard_2', 'timestamp': 1742773265.396929, 'total_vectors': 780}}}
2025-03-23 19:41:05,397 - __main__ - INFO - Total vectors in system: 0
2025-03-23 19:41:05,397 - werkzeug - INFO - 127.0.0.1 - - [23/Mar/2025 19:41:05] "POST /add_vectors HTTP/1.1" 200 -
2025-03-23 19:41:05,399 - __main__ - INFO - Getting system statistics
2025-03-23 19:41:05,399 - urllib3.connectionpool - DEBUG - Starting new HTTP connection (1): localhost:6001
2025-03-23 19:41:05,401 - urllib3.connectionpool - DEBUG - http://localhost:6001 "GET /stats HTTP/1.1" 200 218
2025-03-23 19:41:05,401 - urllib3.connectionpool - DEBUG - Starting new HTTP connection (1): localhost:6002
2025-03-23 19:41:05,402 - urllib3.connectionpool - DEBUG - http://localhost:6002 "GET /stats HTTP/1.1" 200 220
2025-03-23 19:41:05,403 - urllib3.connectionpool - DEBUG - Starting new HTTP connection (1): localhost:6003
2025-03-23 19:41:05,404 - urllib3.connectionpool - DEBUG - http://localhost:6003 "GET /stats HTTP/1.1" 200 217
2025-03-23 19:41:05,404 - werkzeug - INFO - 127.0.0.1 - - [23/Mar/2025 19:41:05] "GET /stats HTTP/1.1" 200 -
2025-03-23 19:41:06,498 - __main__ - INFO - Received request to add 100 vectors
2025-03-23 19:41:06,499 - __main__ - DEBUG - Vectors shape: (100, 512)
2025-03-23 19:41:06,499 - __main__ - DEBUG - IDs shape: (100,)
2025-03-23 19:41:06,499 - __main__ - DEBUG - Sample IDs: [128476 319607 515266 460160 138856]...
2025-03-23 19:41:06,499 - __main__ - DEBUG - Calling coordinator.distribute_vectors
2025-03-23 19:41:06,499 - coordinator - INFO - Starting vector distribution for 100 vectors
2025-03-23 19:41:06,499 - root - INFO - LSH: Processing 100 vectors with shape (100, 512)
2025-03-23 19:41:06,500 - root - DEBUG - Table 0 hash value shape: (100, 4)
2025-03-23 19:41:06,500 - root - DEBUG - Table 1 hash value shape: (100, 4)
2025-03-23 19:41:06,500 - root - DEBUG - Table 2 hash value shape: (100, 4)
2025-03-23 19:41:06,500 - root - INFO - LSH: Combined hash shape: (100, 12)
2025-03-23 19:41:06,500 - root - INFO - LSH: Assigned vectors to shards: [(0, 35), (1, 39), (2, 26)]
2025-03-23 19:41:06,500 - coordinator - INFO - Shard assignments: (array([0, 1, 2]), array([35, 39, 26]))
2025-03-23 19:41:06,500 - coordinator - INFO - Grouped vectors by shard: ['shard_1: 39 vectors', 'shard_2: 26 vectors', 'shard_0: 35 vectors']
2025-03-23 19:41:06,500 - coordinator - INFO - Sending 39 vectors to node localhost:6002
2025-03-23 19:41:06,500 - coordinator - INFO - Sending 26 vectors to node localhost:6003
2025-03-23 19:41:06,514 - coordinator - INFO - Sending 35 vectors to node localhost:6001
2025-03-23 19:41:06,521 - urllib3.connectionpool - DEBUG - Starting new HTTP connection (1): localhost:6003
2025-03-23 19:41:06,522 - urllib3.connectionpool - DEBUG - Starting new HTTP connection (1): localhost:6002
2025-03-23 19:41:06,522 - urllib3.connectionpool - DEBUG - Starting new HTTP connection (1): localhost:6001
2025-03-23 19:41:06,526 - urllib3.connectionpool - DEBUG - http://localhost:6003 "POST /add_vectors HTTP/1.1" 200 52
2025-03-23 19:41:06,527 - coordinator - INFO - Successfully sent 26 vectors to node localhost:6003
2025-03-23 19:41:06,528 - urllib3.connectionpool - DEBUG - http://localhost:6001 "POST /add_vectors HTTP/1.1" 200 52
2025-03-23 19:41:06,528 - coordinator - INFO - Successfully sent 35 vectors to node localhost:6001
2025-03-23 19:41:06,528 - urllib3.connectionpool - DEBUG - http://localhost:6002 "POST /add_vectors HTTP/1.1" 200 52
2025-03-23 19:41:06,528 - coordinator - INFO - Successfully sent 39 vectors to node localhost:6002
2025-03-23 19:41:06,528 - coordinator - INFO - Completed vector distribution
2025-03-23 19:41:06,529 - urllib3.connectionpool - DEBUG - Starting new HTTP connection (1): localhost:6001
2025-03-23 19:41:06,531 - urllib3.connectionpool - DEBUG - http://localhost:6001 "GET /stats HTTP/1.1" 200 218
2025-03-23 19:41:06,531 - urllib3.connectionpool - DEBUG - Starting new HTTP connection (1): localhost:6002
2025-03-23 19:41:06,532 - urllib3.connectionpool - DEBUG - http://localhost:6002 "GET /stats HTTP/1.1" 200 220
2025-03-23 19:41:06,533 - urllib3.connectionpool - DEBUG - Starting new HTTP connection (1): localhost:6003
2025-03-23 19:41:06,534 - urllib3.connectionpool - DEBUG - http://localhost:6003 "GET /stats HTTP/1.1" 200 217
2025-03-23 19:41:06,534 - __main__ - INFO - System stats after adding vectors: {'total_nodes': 3, 'sharding_strategy': 'lsh', 'replication_factor': 1, 'nodes': {'localhost:6001': {'dimension': 512, 'index_type': 'FlatL2', 'memory_usage_mb': 1.67, 'metric': 'L2', 'next_id': 0, 'sample_ids': [357737, 158744, 543043, 214224, 76547], 'storage_path': 'data/shard_0', 'timestamp': 1742773266.530805, 'total_vectors': 854}, 'localhost:6002': {'dimension': 512, 'index_type': 'FlatL2', 'memory_usage_mb': 1.65, 'metric': 'L2', 'next_id': 0, 'sample_ids': [177934, 491366, 523957, 279769, 288685], 'storage_path': 'data/shard_1', 'timestamp': 1742773266.5325089, 'total_vectors': 840}, 'localhost:6003': {'dimension': 512, 'index_type': 'FlatL2', 'memory_usage_mb': 1.58, 'metric': 'L2', 'next_id': 0, 'sample_ids': [206487, 329614, 6763, 187144, 463647], 'storage_path': 'data/shard_2', 'timestamp': 1742773266.534401, 'total_vectors': 806}}}
2025-03-23 19:41:06,534 - __main__ - INFO - Total vectors in system: 0
2025-03-23 19:41:06,535 - werkzeug - INFO - 127.0.0.1 - - [23/Mar/2025 19:41:06] "POST /add_vectors HTTP/1.1" 200 -
2025-03-23 19:41:06,537 - __main__ - INFO - Getting system statistics
2025-03-23 19:41:06,537 - urllib3.connectionpool - DEBUG - Starting new HTTP connection (1): localhost:6001
2025-03-23 19:41:06,538 - urllib3.connectionpool - DEBUG - http://localhost:6001 "GET /stats HTTP/1.1" 200 218
2025-03-23 19:41:06,539 - urllib3.connectionpool - DEBUG - Starting new HTTP connection (1): localhost:6002
2025-03-23 19:41:06,540 - urllib3.connectionpool - DEBUG - http://localhost:6002 "GET /stats HTTP/1.1" 200 219
2025-03-23 19:41:06,541 - urllib3.connectionpool - DEBUG - Starting new HTTP connection (1): localhost:6003
2025-03-23 19:41:06,542 - urllib3.connectionpool - DEBUG - http://localhost:6003 "GET /stats HTTP/1.1" 200 217
2025-03-23 19:41:06,542 - werkzeug - INFO - 127.0.0.1 - - [23/Mar/2025 19:41:06] "GET /stats HTTP/1.1" 200 -
2025-03-23 19:41:07,632 - __main__ - INFO - Received request to add 100 vectors
2025-03-23 19:41:07,633 - __main__ - DEBUG - Vectors shape: (100, 512)
2025-03-23 19:41:07,633 - __main__ - DEBUG - IDs shape: (100,)
2025-03-23 19:41:07,633 - __main__ - DEBUG - Sample IDs: [157046 421455 525155 413395 579158]...
2025-03-23 19:41:07,633 - __main__ - DEBUG - Calling coordinator.distribute_vectors
2025-03-23 19:41:07,633 - coordinator - INFO - Starting vector distribution for 100 vectors
2025-03-23 19:41:07,633 - root - INFO - LSH: Processing 100 vectors with shape (100, 512)
2025-03-23 19:41:07,633 - root - DEBUG - Table 0 hash value shape: (100, 4)
2025-03-23 19:41:07,633 - root - DEBUG - Table 1 hash value shape: (100, 4)
2025-03-23 19:41:07,633 - root - DEBUG - Table 2 hash value shape: (100, 4)
2025-03-23 19:41:07,633 - root - INFO - LSH: Combined hash shape: (100, 12)
2025-03-23 19:41:07,633 - root - INFO - LSH: Assigned vectors to shards: [(0, 38), (1, 27), (2, 35)]
2025-03-23 19:41:07,634 - coordinator - INFO - Shard assignments: (array([0, 1, 2]), array([38, 27, 35]))
2025-03-23 19:41:07,634 - coordinator - INFO - Grouped vectors by shard: ['shard_2: 35 vectors', 'shard_0: 38 vectors', 'shard_1: 27 vectors']
2025-03-23 19:41:07,634 - coordinator - INFO - Sending 35 vectors to node localhost:6003
2025-03-23 19:41:07,641 - coordinator - INFO - Sending 38 vectors to node localhost:6001
2025-03-23 19:41:07,649 - coordinator - INFO - Sending 27 vectors to node localhost:6002
2025-03-23 19:41:07,655 - urllib3.connectionpool - DEBUG - Starting new HTTP connection (1): localhost:6003
2025-03-23 19:41:07,655 - urllib3.connectionpool - DEBUG - Starting new HTTP connection (1): localhost:6001
2025-03-23 19:41:07,656 - urllib3.connectionpool - DEBUG - Starting new HTTP connection (1): localhost:6002
2025-03-23 19:41:07,661 - urllib3.connectionpool - DEBUG - http://localhost:6002 "POST /add_vectors HTTP/1.1" 200 52
2025-03-23 19:41:07,661 - coordinator - INFO - Successfully sent 27 vectors to node localhost:6002
2025-03-23 19:41:07,661 - urllib3.connectionpool - DEBUG - http://localhost:6003 "POST /add_vectors HTTP/1.1" 200 52
2025-03-23 19:41:07,661 - coordinator - INFO - Successfully sent 35 vectors to node localhost:6003
2025-03-23 19:41:07,662 - urllib3.connectionpool - DEBUG - http://localhost:6001 "POST /add_vectors HTTP/1.1" 200 52
2025-03-23 19:41:07,662 - coordinator - INFO - Successfully sent 38 vectors to node localhost:6001
2025-03-23 19:41:07,662 - coordinator - INFO - Completed vector distribution
2025-03-23 19:41:07,663 - urllib3.connectionpool - DEBUG - Starting new HTTP connection (1): localhost:6001
2025-03-23 19:41:07,664 - urllib3.connectionpool - DEBUG - http://localhost:6001 "GET /stats HTTP/1.1" 200 218
2025-03-23 19:41:07,665 - urllib3.connectionpool - DEBUG - Starting new HTTP connection (1): localhost:6002
2025-03-23 19:41:07,666 - urllib3.connectionpool - DEBUG - http://localhost:6002 "GET /stats HTTP/1.1" 200 219
2025-03-23 19:41:07,666 - urllib3.connectionpool - DEBUG - Starting new HTTP connection (1): localhost:6003
2025-03-23 19:41:07,667 - urllib3.connectionpool - DEBUG - http://localhost:6003 "GET /stats HTTP/1.1" 200 217
2025-03-23 19:41:07,667 - __main__ - INFO - System stats after adding vectors: {'total_nodes': 3, 'sharding_strategy': 'lsh', 'replication_factor': 1, 'nodes': {'localhost:6001': {'dimension': 512, 'index_type': 'FlatL2', 'memory_usage_mb': 1.75, 'metric': 'L2', 'next_id': 0, 'sample_ids': [357737, 158744, 543043, 214224, 76547], 'storage_path': 'data/shard_0', 'timestamp': 1742773267.664126, 'total_vectors': 892}, 'localhost:6002': {'dimension': 512, 'index_type': 'FlatL2', 'memory_usage_mb': 1.7, 'metric': 'L2', 'next_id': 0, 'sample_ids': [177934, 491366, 523957, 440336, 279769], 'storage_path': 'data/shard_1', 'timestamp': 1742773267.6657689, 'total_vectors': 867}, 'localhost:6003': {'dimension': 512, 'index_type': 'FlatL2', 'memory_usage_mb': 1.65, 'metric': 'L2', 'next_id': 0, 'sample_ids': [206487, 329614, 6763, 187144, 463647], 'storage_path': 'data/shard_2', 'timestamp': 1742773267.667457, 'total_vectors': 841}}}
2025-03-23 19:41:07,667 - __main__ - INFO - Total vectors in system: 0
2025-03-23 19:41:07,668 - werkzeug - INFO - 127.0.0.1 - - [23/Mar/2025 19:41:07] "POST /add_vectors HTTP/1.1" 200 -
2025-03-23 19:41:07,669 - __main__ - INFO - Getting system statistics
2025-03-23 19:41:07,670 - urllib3.connectionpool - DEBUG - Starting new HTTP connection (1): localhost:6001
2025-03-23 19:41:07,671 - urllib3.connectionpool - DEBUG - http://localhost:6001 "GET /stats HTTP/1.1" 200 218
2025-03-23 19:41:07,672 - urllib3.connectionpool - DEBUG - Starting new HTTP connection (1): localhost:6002
2025-03-23 19:41:07,673 - urllib3.connectionpool - DEBUG - http://localhost:6002 "GET /stats HTTP/1.1" 200 218
2025-03-23 19:41:07,674 - urllib3.connectionpool - DEBUG - Starting new HTTP connection (1): localhost:6003
2025-03-23 19:41:07,675 - urllib3.connectionpool - DEBUG - http://localhost:6003 "GET /stats HTTP/1.1" 200 217
2025-03-23 19:41:07,675 - werkzeug - INFO - 127.0.0.1 - - [23/Mar/2025 19:41:07] "GET /stats HTTP/1.1" 200 -
2025-03-23 19:41:08,746 - __main__ - INFO - Received request to add 100 vectors
2025-03-23 19:41:08,746 - __main__ - DEBUG - Vectors shape: (100, 512)
2025-03-23 19:41:08,746 - __main__ - DEBUG - IDs shape: (100,)
2025-03-23 19:41:08,746 - __main__ - DEBUG - Sample IDs: [447465 195918 471869 458223 384661]...
2025-03-23 19:41:08,746 - __main__ - DEBUG - Calling coordinator.distribute_vectors
2025-03-23 19:41:08,746 - coordinator - INFO - Starting vector distribution for 100 vectors
2025-03-23 19:41:08,746 - root - INFO - LSH: Processing 100 vectors with shape (100, 512)
2025-03-23 19:41:08,746 - root - DEBUG - Table 0 hash value shape: (100, 4)
2025-03-23 19:41:08,746 - root - DEBUG - Table 1 hash value shape: (100, 4)
2025-03-23 19:41:08,747 - root - DEBUG - Table 2 hash value shape: (100, 4)
2025-03-23 19:41:08,747 - root - INFO - LSH: Combined hash shape: (100, 12)
2025-03-23 19:41:08,747 - root - INFO - LSH: Assigned vectors to shards: [(0, 33), (1, 30), (2, 37)]
2025-03-23 19:41:08,747 - coordinator - INFO - Shard assignments: (array([0, 1, 2]), array([33, 30, 37]))
2025-03-23 19:41:08,747 - coordinator - INFO - Grouped vectors by shard: ['shard_1: 30 vectors', 'shard_2: 37 vectors', 'shard_0: 33 vectors']
2025-03-23 19:41:08,747 - coordinator - INFO - Sending 30 vectors to node localhost:6002
2025-03-23 19:41:08,747 - coordinator - INFO - Sending 37 vectors to node localhost:6003
2025-03-23 19:41:08,753 - coordinator - INFO - Sending 33 vectors to node localhost:6001
2025-03-23 19:41:08,767 - urllib3.connectionpool - DEBUG - Starting new HTTP connection (1): localhost:6002
2025-03-23 19:41:08,768 - urllib3.connectionpool - DEBUG - Starting new HTTP connection (1): localhost:6003
2025-03-23 19:41:08,769 - urllib3.connectionpool - DEBUG - Starting new HTTP connection (1): localhost:6001
2025-03-23 19:41:08,773 - urllib3.connectionpool - DEBUG - http://localhost:6002 "POST /add_vectors HTTP/1.1" 200 52
2025-03-23 19:41:08,773 - coordinator - INFO - Successfully sent 30 vectors to node localhost:6002
2025-03-23 19:41:08,774 - urllib3.connectionpool - DEBUG - http://localhost:6001 "POST /add_vectors HTTP/1.1" 200 52
2025-03-23 19:41:08,774 - coordinator - INFO - Successfully sent 33 vectors to node localhost:6001
2025-03-23 19:41:08,774 - urllib3.connectionpool - DEBUG - http://localhost:6003 "POST /add_vectors HTTP/1.1" 200 52
2025-03-23 19:41:08,774 - coordinator - INFO - Successfully sent 37 vectors to node localhost:6003
2025-03-23 19:41:08,775 - coordinator - INFO - Completed vector distribution
2025-03-23 19:41:08,775 - urllib3.connectionpool - DEBUG - Starting new HTTP connection (1): localhost:6001
2025-03-23 19:41:08,776 - urllib3.connectionpool - DEBUG - http://localhost:6001 "GET /stats HTTP/1.1" 200 218
2025-03-23 19:41:08,777 - urllib3.connectionpool - DEBUG - Starting new HTTP connection (1): localhost:6002
2025-03-23 19:41:08,778 - urllib3.connectionpool - DEBUG - http://localhost:6002 "GET /stats HTTP/1.1" 200 219
2025-03-23 19:41:08,779 - urllib3.connectionpool - DEBUG - Starting new HTTP connection (1): localhost:6003
2025-03-23 19:41:08,780 - urllib3.connectionpool - DEBUG - http://localhost:6003 "GET /stats HTTP/1.1" 200 217
2025-03-23 19:41:08,780 - __main__ - INFO - System stats after adding vectors: {'total_nodes': 3, 'sharding_strategy': 'lsh', 'replication_factor': 1, 'nodes': {'localhost:6001': {'dimension': 512, 'index_type': 'FlatL2', 'memory_usage_mb': 1.81, 'metric': 'L2', 'next_id': 0, 'sample_ids': [357737, 158744, 543043, 214224, 76547], 'storage_path': 'data/shard_0', 'timestamp': 1742773268.776702, 'total_vectors': 925}, 'localhost:6002': {'dimension': 512, 'index_type': 'FlatL2', 'memory_usage_mb': 1.76, 'metric': 'L2', 'next_id': 0, 'sample_ids': [177934, 491366, 523957, 440336, 279769], 'storage_path': 'data/shard_1', 'timestamp': 1742773268.778629, 'total_vectors': 897}, 'localhost:6003': {'dimension': 512, 'index_type': 'FlatL2', 'memory_usage_mb': 1.72, 'metric': 'L2', 'next_id': 0, 'sample_ids': [206487, 329614, 6763, 187144, 463647], 'storage_path': 'data/shard_2', 'timestamp': 1742773268.780353, 'total_vectors': 878}}}
2025-03-23 19:41:08,780 - __main__ - INFO - Total vectors in system: 0
2025-03-23 19:41:08,781 - werkzeug - INFO - 127.0.0.1 - - [23/Mar/2025 19:41:08] "POST /add_vectors HTTP/1.1" 200 -
2025-03-23 19:41:08,783 - __main__ - INFO - Getting system statistics
2025-03-23 19:41:08,783 - urllib3.connectionpool - DEBUG - Starting new HTTP connection (1): localhost:6001
2025-03-23 19:41:08,785 - urllib3.connectionpool - DEBUG - http://localhost:6001 "GET /stats HTTP/1.1" 200 219
2025-03-23 19:41:08,785 - urllib3.connectionpool - DEBUG - Starting new HTTP connection (1): localhost:6002
2025-03-23 19:41:08,786 - urllib3.connectionpool - DEBUG - http://localhost:6002 "GET /stats HTTP/1.1" 200 220
2025-03-23 19:41:08,787 - urllib3.connectionpool - DEBUG - Starting new HTTP connection (1): localhost:6003
2025-03-23 19:41:08,788 - urllib3.connectionpool - DEBUG - http://localhost:6003 "GET /stats HTTP/1.1" 200 218
2025-03-23 19:41:08,788 - werkzeug - INFO - 127.0.0.1 - - [23/Mar/2025 19:41:08] "GET /stats HTTP/1.1" 200 -
2025-03-23 19:41:09,863 - __main__ - INFO - Received request to add 100 vectors
2025-03-23 19:41:09,863 - __main__ - DEBUG - Vectors shape: (100, 512)
2025-03-23 19:41:09,863 - __main__ - DEBUG - IDs shape: (100,)
2025-03-23 19:41:09,863 - __main__ - DEBUG - Sample IDs: [306139 122745 306893   5477 262440]...
2025-03-23 19:41:09,863 - __main__ - DEBUG - Calling coordinator.distribute_vectors
2025-03-23 19:41:09,863 - coordinator - INFO - Starting vector distribution for 100 vectors
2025-03-23 19:41:09,863 - root - INFO - LSH: Processing 100 vectors with shape (100, 512)
2025-03-23 19:41:09,863 - root - DEBUG - Table 0 hash value shape: (100, 4)
2025-03-23 19:41:09,863 - root - DEBUG - Table 1 hash value shape: (100, 4)
2025-03-23 19:41:09,864 - root - DEBUG - Table 2 hash value shape: (100, 4)
2025-03-23 19:41:09,864 - root - INFO - LSH: Combined hash shape: (100, 12)
2025-03-23 19:41:09,864 - root - INFO - LSH: Assigned vectors to shards: [(0, 34), (1, 36), (2, 30)]
2025-03-23 19:41:09,864 - coordinator - INFO - Shard assignments: (array([0, 1, 2]), array([34, 36, 30]))
2025-03-23 19:41:09,864 - coordinator - INFO - Grouped vectors by shard: ['shard_0: 34 vectors', 'shard_1: 36 vectors', 'shard_2: 30 vectors']
2025-03-23 19:41:09,864 - coordinator - INFO - Sending 34 vectors to node localhost:6001
2025-03-23 19:41:09,871 - coordinator - INFO - Sending 36 vectors to node localhost:6002
2025-03-23 19:41:09,878 - coordinator - INFO - Sending 30 vectors to node localhost:6003
2025-03-23 19:41:09,885 - urllib3.connectionpool - DEBUG - Starting new HTTP connection (1): localhost:6001
2025-03-23 19:41:09,885 - urllib3.connectionpool - DEBUG - Starting new HTTP connection (1): localhost:6002
2025-03-23 19:41:09,886 - urllib3.connectionpool - DEBUG - Starting new HTTP connection (1): localhost:6003
2025-03-23 19:41:09,891 - urllib3.connectionpool - DEBUG - http://localhost:6003 "POST /add_vectors HTTP/1.1" 200 52
2025-03-23 19:41:09,891 - coordinator - INFO - Successfully sent 30 vectors to node localhost:6003
2025-03-23 19:41:09,892 - urllib3.connectionpool - DEBUG - http://localhost:6001 "POST /add_vectors HTTP/1.1" 200 52
2025-03-23 19:41:09,892 - coordinator - INFO - Successfully sent 34 vectors to node localhost:6001
2025-03-23 19:41:09,892 - urllib3.connectionpool - DEBUG - http://localhost:6002 "POST /add_vectors HTTP/1.1" 200 52
2025-03-23 19:41:09,892 - coordinator - INFO - Successfully sent 36 vectors to node localhost:6002
2025-03-23 19:41:09,893 - coordinator - INFO - Completed vector distribution
2025-03-23 19:41:09,894 - urllib3.connectionpool - DEBUG - Starting new HTTP connection (1): localhost:6001
2025-03-23 19:41:09,895 - urllib3.connectionpool - DEBUG - http://localhost:6001 "GET /stats HTTP/1.1" 200 218
2025-03-23 19:41:09,896 - urllib3.connectionpool - DEBUG - Starting new HTTP connection (1): localhost:6002
2025-03-23 19:41:09,897 - urllib3.connectionpool - DEBUG - http://localhost:6002 "GET /stats HTTP/1.1" 200 219
2025-03-23 19:41:09,897 - urllib3.connectionpool - DEBUG - Starting new HTTP connection (1): localhost:6003
2025-03-23 19:41:09,899 - urllib3.connectionpool - DEBUG - http://localhost:6003 "GET /stats HTTP/1.1" 200 217
2025-03-23 19:41:09,899 - __main__ - INFO - System stats after adding vectors: {'total_nodes': 3, 'sharding_strategy': 'lsh', 'replication_factor': 1, 'nodes': {'localhost:6001': {'dimension': 512, 'index_type': 'FlatL2', 'memory_usage_mb': 1.88, 'metric': 'L2', 'next_id': 0, 'sample_ids': [357737, 158744, 543043, 214224, 76547], 'storage_path': 'data/shard_0', 'timestamp': 1742773269.895038, 'total_vectors': 959}, 'localhost:6002': {'dimension': 512, 'index_type': 'FlatL2', 'memory_usage_mb': 1.83, 'metric': 'L2', 'next_id': 0, 'sample_ids': [177934, 491366, 523957, 440336, 279769], 'storage_path': 'data/shard_1', 'timestamp': 1742773269.896961, 'total_vectors': 933}, 'localhost:6003': {'dimension': 512, 'index_type': 'FlatL2', 'memory_usage_mb': 1.78, 'metric': 'L2', 'next_id': 0, 'sample_ids': [206487, 329614, 6763, 187144, 463647], 'storage_path': 'data/shard_2', 'timestamp': 1742773269.898777, 'total_vectors': 908}}}
2025-03-23 19:41:09,899 - __main__ - INFO - Total vectors in system: 0
2025-03-23 19:41:09,899 - werkzeug - INFO - 127.0.0.1 - - [23/Mar/2025 19:41:09] "POST /add_vectors HTTP/1.1" 200 -
2025-03-23 19:41:09,901 - __main__ - INFO - Getting system statistics
2025-03-23 19:41:09,901 - urllib3.connectionpool - DEBUG - Starting new HTTP connection (1): localhost:6001
2025-03-23 19:41:09,902 - urllib3.connectionpool - DEBUG - http://localhost:6001 "GET /stats HTTP/1.1" 200 217
2025-03-23 19:41:09,903 - urllib3.connectionpool - DEBUG - Starting new HTTP connection (1): localhost:6002
2025-03-23 19:41:09,904 - urllib3.connectionpool - DEBUG - http://localhost:6002 "GET /stats HTTP/1.1" 200 220
2025-03-23 19:41:09,905 - urllib3.connectionpool - DEBUG - Starting new HTTP connection (1): localhost:6003
2025-03-23 19:41:09,906 - urllib3.connectionpool - DEBUG - http://localhost:6003 "GET /stats HTTP/1.1" 200 217
2025-03-23 19:41:09,906 - werkzeug - INFO - 127.0.0.1 - - [23/Mar/2025 19:41:09] "GET /stats HTTP/1.1" 200 -
2025-03-23 19:41:11,002 - __main__ - INFO - Received request to add 100 vectors
2025-03-23 19:41:11,003 - __main__ - DEBUG - Vectors shape: (100, 512)
2025-03-23 19:41:11,003 - __main__ - DEBUG - IDs shape: (100,)
2025-03-23 19:41:11,003 - __main__ - DEBUG - Sample IDs: [445846 492878 528314 360137 523241]...
2025-03-23 19:41:11,003 - __main__ - DEBUG - Calling coordinator.distribute_vectors
2025-03-23 19:41:11,003 - coordinator - INFO - Starting vector distribution for 100 vectors
2025-03-23 19:41:11,003 - root - INFO - LSH: Processing 100 vectors with shape (100, 512)
2025-03-23 19:41:11,003 - root - DEBUG - Table 0 hash value shape: (100, 4)
2025-03-23 19:41:11,003 - root - DEBUG - Table 1 hash value shape: (100, 4)
2025-03-23 19:41:11,004 - root - DEBUG - Table 2 hash value shape: (100, 4)
2025-03-23 19:41:11,004 - root - INFO - LSH: Combined hash shape: (100, 12)
2025-03-23 19:41:11,004 - root - INFO - LSH: Assigned vectors to shards: [(0, 34), (1, 33), (2, 33)]
2025-03-23 19:41:11,004 - coordinator - INFO - Shard assignments: (array([0, 1, 2]), array([34, 33, 33]))
2025-03-23 19:41:11,004 - coordinator - INFO - Grouped vectors by shard: ['shard_0: 34 vectors', 'shard_2: 33 vectors', 'shard_1: 33 vectors']
2025-03-23 19:41:11,004 - coordinator - INFO - Sending 34 vectors to node localhost:6001
2025-03-23 19:41:11,004 - coordinator - INFO - Sending 33 vectors to node localhost:6003
2025-03-23 19:41:11,018 - coordinator - INFO - Sending 33 vectors to node localhost:6002
2025-03-23 19:41:11,025 - urllib3.connectionpool - DEBUG - Starting new HTTP connection (1): localhost:6001
2025-03-23 19:41:11,025 - urllib3.connectionpool - DEBUG - Starting new HTTP connection (1): localhost:6003
2025-03-23 19:41:11,026 - urllib3.connectionpool - DEBUG - Starting new HTTP connection (1): localhost:6002
2025-03-23 19:41:11,049 - urllib3.connectionpool - DEBUG - http://localhost:6001 "POST /add_vectors HTTP/1.1" 200 52
2025-03-23 19:41:11,049 - coordinator - INFO - Successfully sent 34 vectors to node localhost:6001
2025-03-23 19:41:11,049 - urllib3.connectionpool - DEBUG - http://localhost:6003 "POST /add_vectors HTTP/1.1" 200 52
2025-03-23 19:41:11,049 - coordinator - INFO - Successfully sent 33 vectors to node localhost:6003
2025-03-23 19:41:11,050 - urllib3.connectionpool - DEBUG - http://localhost:6002 "POST /add_vectors HTTP/1.1" 200 52
2025-03-23 19:41:11,050 - coordinator - INFO - Successfully sent 33 vectors to node localhost:6002
2025-03-23 19:41:11,050 - coordinator - INFO - Completed vector distribution
2025-03-23 19:41:11,051 - urllib3.connectionpool - DEBUG - Starting new HTTP connection (1): localhost:6001
2025-03-23 19:41:11,052 - urllib3.connectionpool - DEBUG - http://localhost:6001 "GET /stats HTTP/1.1" 200 219
2025-03-23 19:41:11,053 - urllib3.connectionpool - DEBUG - Starting new HTTP connection (1): localhost:6002
2025-03-23 19:41:11,054 - urllib3.connectionpool - DEBUG - http://localhost:6002 "GET /stats HTTP/1.1" 200 219
2025-03-23 19:41:11,055 - urllib3.connectionpool - DEBUG - Starting new HTTP connection (1): localhost:6003
2025-03-23 19:41:11,056 - urllib3.connectionpool - DEBUG - http://localhost:6003 "GET /stats HTTP/1.1" 200 217
2025-03-23 19:41:11,056 - __main__ - INFO - System stats after adding vectors: {'total_nodes': 3, 'sharding_strategy': 'lsh', 'replication_factor': 1, 'nodes': {'localhost:6001': {'dimension': 512, 'index_type': 'FlatL2', 'memory_usage_mb': 1.95, 'metric': 'L2', 'next_id': 0, 'sample_ids': [357737, 158744, 543043, 214224, 76547], 'storage_path': 'data/shard_0', 'timestamp': 1742773271.0521128, 'total_vectors': 993}, 'localhost:6002': {'dimension': 512, 'index_type': 'FlatL2', 'memory_usage_mb': 1.89, 'metric': 'L2', 'next_id': 0, 'sample_ids': [177934, 491366, 523957, 440336, 411754], 'storage_path': 'data/shard_1', 'timestamp': 1742773271.054102, 'total_vectors': 966}, 'localhost:6003': {'dimension': 512, 'index_type': 'FlatL2', 'memory_usage_mb': 1.85, 'metric': 'L2', 'next_id': 0, 'sample_ids': [206487, 329614, 6763, 187144, 463647], 'storage_path': 'data/shard_2', 'timestamp': 1742773271.055854, 'total_vectors': 941}}}
2025-03-23 19:41:11,056 - __main__ - INFO - Total vectors in system: 0
2025-03-23 19:41:11,056 - werkzeug - INFO - 127.0.0.1 - - [23/Mar/2025 19:41:11] "POST /add_vectors HTTP/1.1" 200 -
2025-03-23 19:41:11,058 - __main__ - INFO - Getting system statistics
2025-03-23 19:41:11,059 - urllib3.connectionpool - DEBUG - Starting new HTTP connection (1): localhost:6001
2025-03-23 19:41:11,060 - urllib3.connectionpool - DEBUG - http://localhost:6001 "GET /stats HTTP/1.1" 200 219
2025-03-23 19:41:11,061 - urllib3.connectionpool - DEBUG - Starting new HTTP connection (1): localhost:6002
2025-03-23 19:41:11,062 - urllib3.connectionpool - DEBUG - http://localhost:6002 "GET /stats HTTP/1.1" 200 219
2025-03-23 19:41:11,062 - urllib3.connectionpool - DEBUG - Starting new HTTP connection (1): localhost:6003
2025-03-23 19:41:11,063 - urllib3.connectionpool - DEBUG - http://localhost:6003 "GET /stats HTTP/1.1" 200 218
2025-03-23 19:41:11,064 - werkzeug - INFO - 127.0.0.1 - - [23/Mar/2025 19:41:11] "GET /stats HTTP/1.1" 200 -
2025-03-23 19:41:12,159 - __main__ - INFO - Received request to add 100 vectors
2025-03-23 19:41:12,159 - __main__ - DEBUG - Vectors shape: (100, 512)
2025-03-23 19:41:12,159 - __main__ - DEBUG - IDs shape: (100,)
2025-03-23 19:41:12,159 - __main__ - DEBUG - Sample IDs: [245764 491008  79031 516173 516601]...
2025-03-23 19:41:12,159 - __main__ - DEBUG - Calling coordinator.distribute_vectors
2025-03-23 19:41:12,159 - coordinator - INFO - Starting vector distribution for 100 vectors
2025-03-23 19:41:12,159 - root - INFO - LSH: Processing 100 vectors with shape (100, 512)
2025-03-23 19:41:12,160 - root - DEBUG - Table 0 hash value shape: (100, 4)
2025-03-23 19:41:12,160 - root - DEBUG - Table 1 hash value shape: (100, 4)
2025-03-23 19:41:12,160 - root - DEBUG - Table 2 hash value shape: (100, 4)
2025-03-23 19:41:12,160 - root - INFO - LSH: Combined hash shape: (100, 12)
2025-03-23 19:41:12,160 - root - INFO - LSH: Assigned vectors to shards: [(0, 39), (1, 19), (2, 42)]
2025-03-23 19:41:12,160 - coordinator - INFO - Shard assignments: (array([0, 1, 2]), array([39, 19, 42]))
2025-03-23 19:41:12,160 - coordinator - INFO - Grouped vectors by shard: ['shard_2: 42 vectors', 'shard_0: 39 vectors', 'shard_1: 19 vectors']
2025-03-23 19:41:12,160 - coordinator - INFO - Sending 42 vectors to node localhost:6003
2025-03-23 19:41:12,169 - coordinator - INFO - Sending 39 vectors to node localhost:6001
2025-03-23 19:41:12,178 - coordinator - INFO - Sending 19 vectors to node localhost:6002
2025-03-23 19:41:12,183 - urllib3.connectionpool - DEBUG - Starting new HTTP connection (1): localhost:6003
2025-03-23 19:41:12,183 - urllib3.connectionpool - DEBUG - Starting new HTTP connection (1): localhost:6001
2025-03-23 19:41:12,184 - urllib3.connectionpool - DEBUG - Starting new HTTP connection (1): localhost:6002
2025-03-23 19:41:12,188 - urllib3.connectionpool - DEBUG - http://localhost:6002 "POST /add_vectors HTTP/1.1" 200 52
2025-03-23 19:41:12,188 - coordinator - INFO - Successfully sent 19 vectors to node localhost:6002
2025-03-23 19:41:12,189 - urllib3.connectionpool - DEBUG - http://localhost:6003 "POST /add_vectors HTTP/1.1" 200 52
2025-03-23 19:41:12,190 - coordinator - INFO - Successfully sent 42 vectors to node localhost:6003
2025-03-23 19:41:12,190 - urllib3.connectionpool - DEBUG - http://localhost:6001 "POST /add_vectors HTTP/1.1" 200 53
2025-03-23 19:41:12,190 - coordinator - INFO - Successfully sent 39 vectors to node localhost:6001
2025-03-23 19:41:12,190 - coordinator - INFO - Completed vector distribution
2025-03-23 19:41:12,191 - urllib3.connectionpool - DEBUG - Starting new HTTP connection (1): localhost:6001
2025-03-23 19:41:12,192 - urllib3.connectionpool - DEBUG - http://localhost:6001 "GET /stats HTTP/1.1" 200 219
2025-03-23 19:41:12,193 - urllib3.connectionpool - DEBUG - Starting new HTTP connection (1): localhost:6002
2025-03-23 19:41:12,194 - urllib3.connectionpool - DEBUG - http://localhost:6002 "GET /stats HTTP/1.1" 200 219
2025-03-23 19:41:12,195 - urllib3.connectionpool - DEBUG - Starting new HTTP connection (1): localhost:6003
2025-03-23 19:41:12,196 - urllib3.connectionpool - DEBUG - http://localhost:6003 "GET /stats HTTP/1.1" 200 217
2025-03-23 19:41:12,196 - __main__ - INFO - System stats after adding vectors: {'total_nodes': 3, 'sharding_strategy': 'lsh', 'replication_factor': 1, 'nodes': {'localhost:6001': {'dimension': 512, 'index_type': 'FlatL2', 'memory_usage_mb': 2.02, 'metric': 'L2', 'next_id': 0, 'sample_ids': [357737, 158744, 543043, 214224, 76547], 'storage_path': 'data/shard_0', 'timestamp': 1742773272.192419, 'total_vectors': 1032}, 'localhost:6002': {'dimension': 512, 'index_type': 'FlatL2', 'memory_usage_mb': 1.93, 'metric': 'L2', 'next_id': 0, 'sample_ids': [177934, 491366, 523957, 440336, 411754], 'storage_path': 'data/shard_1', 'timestamp': 1742773272.194227, 'total_vectors': 985}, 'localhost:6003': {'dimension': 512, 'index_type': 'FlatL2', 'memory_usage_mb': 1.93, 'metric': 'L2', 'next_id': 0, 'sample_ids': [206487, 329614, 6763, 187144, 463647], 'storage_path': 'data/shard_2', 'timestamp': 1742773272.196258, 'total_vectors': 983}}}
2025-03-23 19:41:12,196 - __main__ - INFO - Total vectors in system: 0
2025-03-23 19:41:12,197 - werkzeug - INFO - 127.0.0.1 - - [23/Mar/2025 19:41:12] "POST /add_vectors HTTP/1.1" 200 -
2025-03-23 19:41:12,199 - __main__ - INFO - Getting system statistics
2025-03-23 19:41:12,199 - urllib3.connectionpool - DEBUG - Starting new HTTP connection (1): localhost:6001
2025-03-23 19:41:12,200 - urllib3.connectionpool - DEBUG - http://localhost:6001 "GET /stats HTTP/1.1" 200 219
2025-03-23 19:41:12,201 - urllib3.connectionpool - DEBUG - Starting new HTTP connection (1): localhost:6002
2025-03-23 19:41:12,202 - urllib3.connectionpool - DEBUG - http://localhost:6002 "GET /stats HTTP/1.1" 200 220
2025-03-23 19:41:12,203 - urllib3.connectionpool - DEBUG - Starting new HTTP connection (1): localhost:6003
2025-03-23 19:41:12,204 - urllib3.connectionpool - DEBUG - http://localhost:6003 "GET /stats HTTP/1.1" 200 216
2025-03-23 19:41:12,204 - werkzeug - INFO - 127.0.0.1 - - [23/Mar/2025 19:41:12] "GET /stats HTTP/1.1" 200 -
2025-03-23 19:41:13,277 - __main__ - INFO - Received request to add 100 vectors
2025-03-23 19:41:13,277 - __main__ - DEBUG - Vectors shape: (100, 512)
2025-03-23 19:41:13,277 - __main__ - DEBUG - IDs shape: (100,)
2025-03-23 19:41:13,278 - __main__ - DEBUG - Sample IDs: [  4795 457884  92091 501368 537802]...
2025-03-23 19:41:13,278 - __main__ - DEBUG - Calling coordinator.distribute_vectors
2025-03-23 19:41:13,278 - coordinator - INFO - Starting vector distribution for 100 vectors
2025-03-23 19:41:13,278 - root - INFO - LSH: Processing 100 vectors with shape (100, 512)
2025-03-23 19:41:13,278 - root - DEBUG - Table 0 hash value shape: (100, 4)
2025-03-23 19:41:13,278 - root - DEBUG - Table 1 hash value shape: (100, 4)
2025-03-23 19:41:13,278 - root - DEBUG - Table 2 hash value shape: (100, 4)
2025-03-23 19:41:13,278 - root - INFO - LSH: Combined hash shape: (100, 12)
2025-03-23 19:41:13,278 - root - INFO - LSH: Assigned vectors to shards: [(0, 31), (1, 32), (2, 37)]
2025-03-23 19:41:13,278 - coordinator - INFO - Shard assignments: (array([0, 1, 2]), array([31, 32, 37]))
2025-03-23 19:41:13,278 - coordinator - INFO - Grouped vectors by shard: ['shard_1: 32 vectors', 'shard_0: 31 vectors', 'shard_2: 37 vectors']
2025-03-23 19:41:13,278 - coordinator - INFO - Sending 32 vectors to node localhost:6002
2025-03-23 19:41:13,279 - coordinator - INFO - Sending 31 vectors to node localhost:6001
2025-03-23 19:41:13,291 - coordinator - INFO - Sending 37 vectors to node localhost:6003
2025-03-23 19:41:13,300 - urllib3.connectionpool - DEBUG - Starting new HTTP connection (1): localhost:6002
2025-03-23 19:41:13,300 - urllib3.connectionpool - DEBUG - Starting new HTTP connection (1): localhost:6003
2025-03-23 19:41:13,300 - urllib3.connectionpool - DEBUG - Starting new HTTP connection (1): localhost:6001
2025-03-23 19:41:13,306 - urllib3.connectionpool - DEBUG - http://localhost:6001 "POST /add_vectors HTTP/1.1" 200 53
2025-03-23 19:41:13,306 - coordinator - INFO - Successfully sent 31 vectors to node localhost:6001
2025-03-23 19:41:13,307 - urllib3.connectionpool - DEBUG - http://localhost:6002 "POST /add_vectors HTTP/1.1" 200 53
2025-03-23 19:41:13,307 - coordinator - INFO - Successfully sent 32 vectors to node localhost:6002
2025-03-23 19:41:13,307 - urllib3.connectionpool - DEBUG - http://localhost:6003 "POST /add_vectors HTTP/1.1" 200 53
2025-03-23 19:41:13,307 - coordinator - INFO - Successfully sent 37 vectors to node localhost:6003
2025-03-23 19:41:13,307 - coordinator - INFO - Completed vector distribution
2025-03-23 19:41:13,308 - urllib3.connectionpool - DEBUG - Starting new HTTP connection (1): localhost:6001
2025-03-23 19:41:13,309 - urllib3.connectionpool - DEBUG - http://localhost:6001 "GET /stats HTTP/1.1" 200 219
2025-03-23 19:41:13,310 - urllib3.connectionpool - DEBUG - Starting new HTTP connection (1): localhost:6002
2025-03-23 19:41:13,311 - urllib3.connectionpool - DEBUG - http://localhost:6002 "GET /stats HTTP/1.1" 200 220
2025-03-23 19:41:13,311 - urllib3.connectionpool - DEBUG - Starting new HTTP connection (1): localhost:6003
2025-03-23 19:41:13,312 - urllib3.connectionpool - DEBUG - http://localhost:6003 "GET /stats HTTP/1.1" 200 218
2025-03-23 19:41:13,313 - __main__ - INFO - System stats after adding vectors: {'total_nodes': 3, 'sharding_strategy': 'lsh', 'replication_factor': 1, 'nodes': {'localhost:6001': {'dimension': 512, 'index_type': 'FlatL2', 'memory_usage_mb': 2.08, 'metric': 'L2', 'next_id': 0, 'sample_ids': [357737, 158744, 543043, 214224, 76547], 'storage_path': 'data/shard_0', 'timestamp': 1742773273.309311, 'total_vectors': 1063}, 'localhost:6002': {'dimension': 512, 'index_type': 'FlatL2', 'memory_usage_mb': 1.99, 'metric': 'L2', 'next_id': 0, 'sample_ids': [177934, 491366, 523957, 440336, 411754], 'storage_path': 'data/shard_1', 'timestamp': 1742773273.310922, 'total_vectors': 1017}, 'localhost:6003': {'dimension': 512, 'index_type': 'FlatL2', 'memory_usage_mb': 2.0, 'metric': 'L2', 'next_id': 0, 'sample_ids': [206487, 329614, 6763, 187144, 463647], 'storage_path': 'data/shard_2', 'timestamp': 1742773273.3125901, 'total_vectors': 1020}}}
2025-03-23 19:41:13,313 - __main__ - INFO - Total vectors in system: 0
2025-03-23 19:41:13,313 - werkzeug - INFO - 127.0.0.1 - - [23/Mar/2025 19:41:13] "POST /add_vectors HTTP/1.1" 200 -
2025-03-23 19:41:13,314 - __main__ - INFO - Getting system statistics
2025-03-23 19:41:13,315 - urllib3.connectionpool - DEBUG - Starting new HTTP connection (1): localhost:6001
2025-03-23 19:41:13,316 - urllib3.connectionpool - DEBUG - http://localhost:6001 "GET /stats HTTP/1.1" 200 219
2025-03-23 19:41:13,317 - urllib3.connectionpool - DEBUG - Starting new HTTP connection (1): localhost:6002
2025-03-23 19:41:13,318 - urllib3.connectionpool - DEBUG - http://localhost:6002 "GET /stats HTTP/1.1" 200 221
2025-03-23 19:41:13,319 - urllib3.connectionpool - DEBUG - Starting new HTTP connection (1): localhost:6003
2025-03-23 19:41:13,320 - urllib3.connectionpool - DEBUG - http://localhost:6003 "GET /stats HTTP/1.1" 200 217
2025-03-23 19:41:13,320 - werkzeug - INFO - 127.0.0.1 - - [23/Mar/2025 19:41:13] "GET /stats HTTP/1.1" 200 -
2025-03-23 19:41:14,398 - __main__ - INFO - Received request to add 100 vectors
2025-03-23 19:41:14,400 - __main__ - DEBUG - Vectors shape: (100, 512)
2025-03-23 19:41:14,400 - __main__ - DEBUG - IDs shape: (100,)
2025-03-23 19:41:14,400 - __main__ - DEBUG - Sample IDs: [492110 371749  39951  88432 343937]...
2025-03-23 19:41:14,400 - __main__ - DEBUG - Calling coordinator.distribute_vectors
2025-03-23 19:41:14,400 - coordinator - INFO - Starting vector distribution for 100 vectors
2025-03-23 19:41:14,400 - root - INFO - LSH: Processing 100 vectors with shape (100, 512)
2025-03-23 19:41:14,400 - root - DEBUG - Table 0 hash value shape: (100, 4)
2025-03-23 19:41:14,401 - root - DEBUG - Table 1 hash value shape: (100, 4)
2025-03-23 19:41:14,401 - root - DEBUG - Table 2 hash value shape: (100, 4)
2025-03-23 19:41:14,401 - root - INFO - LSH: Combined hash shape: (100, 12)
2025-03-23 19:41:14,401 - root - INFO - LSH: Assigned vectors to shards: [(0, 29), (1, 31), (2, 40)]
2025-03-23 19:41:14,401 - coordinator - INFO - Shard assignments: (array([0, 1, 2]), array([29, 31, 40]))
2025-03-23 19:41:14,401 - coordinator - INFO - Grouped vectors by shard: ['shard_0: 29 vectors', 'shard_2: 40 vectors', 'shard_1: 31 vectors']
2025-03-23 19:41:14,401 - coordinator - INFO - Sending 29 vectors to node localhost:6001
2025-03-23 19:41:14,401 - coordinator - INFO - Sending 40 vectors to node localhost:6003
2025-03-23 19:41:14,407 - coordinator - INFO - Sending 31 vectors to node localhost:6002
2025-03-23 19:41:14,422 - urllib3.connectionpool - DEBUG - Starting new HTTP connection (1): localhost:6001
2025-03-23 19:41:14,423 - urllib3.connectionpool - DEBUG - Starting new HTTP connection (1): localhost:6002
2025-03-23 19:41:14,423 - urllib3.connectionpool - DEBUG - Starting new HTTP connection (1): localhost:6003
2025-03-23 19:41:14,427 - urllib3.connectionpool - DEBUG - http://localhost:6001 "POST /add_vectors HTTP/1.1" 200 53
2025-03-23 19:41:14,427 - coordinator - INFO - Successfully sent 29 vectors to node localhost:6001
2025-03-23 19:41:14,428 - urllib3.connectionpool - DEBUG - http://localhost:6002 "POST /add_vectors HTTP/1.1" 200 53
2025-03-23 19:41:14,428 - coordinator - INFO - Successfully sent 31 vectors to node localhost:6002
2025-03-23 19:41:14,429 - urllib3.connectionpool - DEBUG - http://localhost:6003 "POST /add_vectors HTTP/1.1" 200 53
2025-03-23 19:41:14,429 - coordinator - INFO - Successfully sent 40 vectors to node localhost:6003
2025-03-23 19:41:14,430 - coordinator - INFO - Completed vector distribution
2025-03-23 19:41:14,431 - urllib3.connectionpool - DEBUG - Starting new HTTP connection (1): localhost:6001
2025-03-23 19:41:14,432 - urllib3.connectionpool - DEBUG - http://localhost:6001 "GET /stats HTTP/1.1" 200 221
2025-03-23 19:41:14,433 - urllib3.connectionpool - DEBUG - Starting new HTTP connection (1): localhost:6002
2025-03-23 19:41:14,434 - urllib3.connectionpool - DEBUG - http://localhost:6002 "GET /stats HTTP/1.1" 200 221
2025-03-23 19:41:14,435 - urllib3.connectionpool - DEBUG - Starting new HTTP connection (1): localhost:6003
2025-03-23 19:41:14,436 - urllib3.connectionpool - DEBUG - http://localhost:6003 "GET /stats HTTP/1.1" 200 218
2025-03-23 19:41:14,436 - __main__ - INFO - System stats after adding vectors: {'total_nodes': 3, 'sharding_strategy': 'lsh', 'replication_factor': 1, 'nodes': {'localhost:6001': {'dimension': 512, 'index_type': 'FlatL2', 'memory_usage_mb': 2.14, 'metric': 'L2', 'next_id': 0, 'sample_ids': [357737, 171050, 158744, 543043, 214224], 'storage_path': 'data/shard_0', 'timestamp': 1742773274.4322891, 'total_vectors': 1092}, 'localhost:6002': {'dimension': 512, 'index_type': 'FlatL2', 'memory_usage_mb': 2.05, 'metric': 'L2', 'next_id': 0, 'sample_ids': [177934, 491366, 523957, 440336, 411754], 'storage_path': 'data/shard_1', 'timestamp': 1742773274.4342248, 'total_vectors': 1048}, 'localhost:6003': {'dimension': 512, 'index_type': 'FlatL2', 'memory_usage_mb': 2.08, 'metric': 'L2', 'next_id': 0, 'sample_ids': [206487, 329614, 6763, 187144, 463647], 'storage_path': 'data/shard_2', 'timestamp': 1742773274.435929, 'total_vectors': 1060}}}
2025-03-23 19:41:14,436 - __main__ - INFO - Total vectors in system: 0
2025-03-23 19:41:14,436 - werkzeug - INFO - 127.0.0.1 - - [23/Mar/2025 19:41:14] "POST /add_vectors HTTP/1.1" 200 -
2025-03-23 19:41:14,438 - __main__ - INFO - Getting system statistics
2025-03-23 19:41:14,439 - urllib3.connectionpool - DEBUG - Starting new HTTP connection (1): localhost:6001
2025-03-23 19:41:14,440 - urllib3.connectionpool - DEBUG - http://localhost:6001 "GET /stats HTTP/1.1" 200 220
2025-03-23 19:41:14,441 - urllib3.connectionpool - DEBUG - Starting new HTTP connection (1): localhost:6002
2025-03-23 19:41:14,442 - urllib3.connectionpool - DEBUG - http://localhost:6002 "GET /stats HTTP/1.1" 200 220
2025-03-23 19:41:14,442 - urllib3.connectionpool - DEBUG - Starting new HTTP connection (1): localhost:6003
2025-03-23 19:41:14,443 - urllib3.connectionpool - DEBUG - http://localhost:6003 "GET /stats HTTP/1.1" 200 218
2025-03-23 19:41:14,444 - werkzeug - INFO - 127.0.0.1 - - [23/Mar/2025 19:41:14] "GET /stats HTTP/1.1" 200 -
2025-03-23 19:41:15,538 - __main__ - INFO - Received request to add 100 vectors
2025-03-23 19:41:15,538 - __main__ - DEBUG - Vectors shape: (100, 512)
2025-03-23 19:41:15,538 - __main__ - DEBUG - IDs shape: (100,)
2025-03-23 19:41:15,538 - __main__ - DEBUG - Sample IDs: [163118 246308 232489  48564  66841]...
2025-03-23 19:41:15,538 - __main__ - DEBUG - Calling coordinator.distribute_vectors
2025-03-23 19:41:15,538 - coordinator - INFO - Starting vector distribution for 100 vectors
2025-03-23 19:41:15,538 - root - INFO - LSH: Processing 100 vectors with shape (100, 512)
2025-03-23 19:41:15,539 - root - DEBUG - Table 0 hash value shape: (100, 4)
2025-03-23 19:41:15,539 - root - DEBUG - Table 1 hash value shape: (100, 4)
2025-03-23 19:41:15,539 - root - DEBUG - Table 2 hash value shape: (100, 4)
2025-03-23 19:41:15,539 - root - INFO - LSH: Combined hash shape: (100, 12)
2025-03-23 19:41:15,539 - root - INFO - LSH: Assigned vectors to shards: [(0, 35), (1, 30), (2, 35)]
2025-03-23 19:41:15,540 - coordinator - INFO - Shard assignments: (array([0, 1, 2]), array([35, 30, 35]))
2025-03-23 19:41:15,540 - coordinator - INFO - Grouped vectors by shard: ['shard_0: 35 vectors', 'shard_1: 30 vectors', 'shard_2: 35 vectors']
2025-03-23 19:41:15,540 - coordinator - INFO - Sending 35 vectors to node localhost:6001
2025-03-23 19:41:15,540 - coordinator - INFO - Sending 30 vectors to node localhost:6002
2025-03-23 19:41:15,553 - coordinator - INFO - Sending 35 vectors to node localhost:6003
2025-03-23 19:41:15,561 - urllib3.connectionpool - DEBUG - Starting new HTTP connection (1): localhost:6001
2025-03-23 19:41:15,561 - urllib3.connectionpool - DEBUG - Starting new HTTP connection (1): localhost:6002
2025-03-23 19:41:15,562 - urllib3.connectionpool - DEBUG - Starting new HTTP connection (1): localhost:6003
2025-03-23 19:41:15,567 - urllib3.connectionpool - DEBUG - http://localhost:6002 "POST /add_vectors HTTP/1.1" 200 53
2025-03-23 19:41:15,567 - coordinator - INFO - Successfully sent 30 vectors to node localhost:6002
2025-03-23 19:41:15,567 - urllib3.connectionpool - DEBUG - http://localhost:6001 "POST /add_vectors HTTP/1.1" 200 53
2025-03-23 19:41:15,568 - coordinator - INFO - Successfully sent 35 vectors to node localhost:6001
2025-03-23 19:41:15,568 - urllib3.connectionpool - DEBUG - http://localhost:6003 "POST /add_vectors HTTP/1.1" 200 53
2025-03-23 19:41:15,568 - coordinator - INFO - Successfully sent 35 vectors to node localhost:6003
2025-03-23 19:41:15,568 - coordinator - INFO - Completed vector distribution
2025-03-23 19:41:15,570 - urllib3.connectionpool - DEBUG - Starting new HTTP connection (1): localhost:6001
2025-03-23 19:41:15,571 - urllib3.connectionpool - DEBUG - http://localhost:6001 "GET /stats HTTP/1.1" 200 220
2025-03-23 19:41:15,572 - urllib3.connectionpool - DEBUG - Starting new HTTP connection (1): localhost:6002
2025-03-23 19:41:15,573 - urllib3.connectionpool - DEBUG - http://localhost:6002 "GET /stats HTTP/1.1" 200 220
2025-03-23 19:41:15,573 - urllib3.connectionpool - DEBUG - Starting new HTTP connection (1): localhost:6003
2025-03-23 19:41:15,574 - urllib3.connectionpool - DEBUG - http://localhost:6003 "GET /stats HTTP/1.1" 200 219
2025-03-23 19:41:15,575 - __main__ - INFO - System stats after adding vectors: {'total_nodes': 3, 'sharding_strategy': 'lsh', 'replication_factor': 1, 'nodes': {'localhost:6001': {'dimension': 512, 'index_type': 'FlatL2', 'memory_usage_mb': 2.21, 'metric': 'L2', 'next_id': 0, 'sample_ids': [357737, 171050, 158744, 543043, 214224], 'storage_path': 'data/shard_0', 'timestamp': 1742773275.571021, 'total_vectors': 1127}, 'localhost:6002': {'dimension': 512, 'index_type': 'FlatL2', 'memory_usage_mb': 2.11, 'metric': 'L2', 'next_id': 0, 'sample_ids': [177934, 491366, 523957, 440336, 411754], 'storage_path': 'data/shard_1', 'timestamp': 1742773275.572801, 'total_vectors': 1078}, 'localhost:6003': {'dimension': 512, 'index_type': 'FlatL2', 'memory_usage_mb': 2.15, 'metric': 'L2', 'next_id': 0, 'sample_ids': [206487, 329614, 6763, 187144, 463647], 'storage_path': 'data/shard_2', 'timestamp': 1742773275.5745668, 'total_vectors': 1095}}}
2025-03-23 19:41:15,575 - __main__ - INFO - Total vectors in system: 0
2025-03-23 19:41:15,575 - werkzeug - INFO - 127.0.0.1 - - [23/Mar/2025 19:41:15] "POST /add_vectors HTTP/1.1" 200 -
2025-03-23 19:41:15,577 - __main__ - INFO - Getting system statistics
2025-03-23 19:41:15,578 - urllib3.connectionpool - DEBUG - Starting new HTTP connection (1): localhost:6001
2025-03-23 19:41:15,579 - urllib3.connectionpool - DEBUG - http://localhost:6001 "GET /stats HTTP/1.1" 200 221
2025-03-23 19:41:15,579 - urllib3.connectionpool - DEBUG - Starting new HTTP connection (1): localhost:6002
2025-03-23 19:41:15,580 - urllib3.connectionpool - DEBUG - http://localhost:6002 "GET /stats HTTP/1.1" 200 221
2025-03-23 19:41:15,581 - urllib3.connectionpool - DEBUG - Starting new HTTP connection (1): localhost:6003
2025-03-23 19:41:15,582 - urllib3.connectionpool - DEBUG - http://localhost:6003 "GET /stats HTTP/1.1" 200 218
2025-03-23 19:41:15,583 - werkzeug - INFO - 127.0.0.1 - - [23/Mar/2025 19:41:15] "GET /stats HTTP/1.1" 200 -
2025-03-23 19:41:16,650 - __main__ - INFO - Received request to add 100 vectors
2025-03-23 19:41:16,650 - __main__ - DEBUG - Vectors shape: (100, 512)
2025-03-23 19:41:16,650 - __main__ - DEBUG - IDs shape: (100,)
2025-03-23 19:41:16,650 - __main__ - DEBUG - Sample IDs: [417043  25560 348708 495054  42276]...
2025-03-23 19:41:16,650 - __main__ - DEBUG - Calling coordinator.distribute_vectors
2025-03-23 19:41:16,650 - coordinator - INFO - Starting vector distribution for 100 vectors
2025-03-23 19:41:16,651 - root - INFO - LSH: Processing 100 vectors with shape (100, 512)
2025-03-23 19:41:16,651 - root - DEBUG - Table 0 hash value shape: (100, 4)
2025-03-23 19:41:16,651 - root - DEBUG - Table 1 hash value shape: (100, 4)
2025-03-23 19:41:16,651 - root - DEBUG - Table 2 hash value shape: (100, 4)
2025-03-23 19:41:16,651 - root - INFO - LSH: Combined hash shape: (100, 12)
2025-03-23 19:41:16,651 - root - INFO - LSH: Assigned vectors to shards: [(0, 41), (1, 39), (2, 20)]
2025-03-23 19:41:16,651 - coordinator - INFO - Shard assignments: (array([0, 1, 2]), array([41, 39, 20]))
2025-03-23 19:41:16,651 - coordinator - INFO - Grouped vectors by shard: ['shard_1: 39 vectors', 'shard_2: 20 vectors', 'shard_0: 41 vectors']
2025-03-23 19:41:16,651 - coordinator - INFO - Sending 39 vectors to node localhost:6002
2025-03-23 19:41:16,659 - coordinator - INFO - Sending 20 vectors to node localhost:6003
2025-03-23 19:41:16,663 - coordinator - INFO - Sending 41 vectors to node localhost:6001
2025-03-23 19:41:16,672 - urllib3.connectionpool - DEBUG - Starting new HTTP connection (1): localhost:6002
2025-03-23 19:41:16,672 - urllib3.connectionpool - DEBUG - Starting new HTTP connection (1): localhost:6003
2025-03-23 19:41:16,673 - urllib3.connectionpool - DEBUG - Starting new HTTP connection (1): localhost:6001
2025-03-23 19:41:16,677 - urllib3.connectionpool - DEBUG - http://localhost:6003 "POST /add_vectors HTTP/1.1" 200 53
2025-03-23 19:41:16,677 - coordinator - INFO - Successfully sent 20 vectors to node localhost:6003
2025-03-23 19:41:16,678 - urllib3.connectionpool - DEBUG - http://localhost:6002 "POST /add_vectors HTTP/1.1" 200 53
2025-03-23 19:41:16,678 - coordinator - INFO - Successfully sent 39 vectors to node localhost:6002
2025-03-23 19:41:16,679 - urllib3.connectionpool - DEBUG - http://localhost:6001 "POST /add_vectors HTTP/1.1" 200 53
2025-03-23 19:41:16,679 - coordinator - INFO - Successfully sent 41 vectors to node localhost:6001
2025-03-23 19:41:16,679 - coordinator - INFO - Completed vector distribution
2025-03-23 19:41:16,680 - urllib3.connectionpool - DEBUG - Starting new HTTP connection (1): localhost:6001
2025-03-23 19:41:16,681 - urllib3.connectionpool - DEBUG - http://localhost:6001 "GET /stats HTTP/1.1" 200 220
2025-03-23 19:41:16,682 - urllib3.connectionpool - DEBUG - Starting new HTTP connection (1): localhost:6002
2025-03-23 19:41:16,683 - urllib3.connectionpool - DEBUG - http://localhost:6002 "GET /stats HTTP/1.1" 200 219
2025-03-23 19:41:16,684 - urllib3.connectionpool - DEBUG - Starting new HTTP connection (1): localhost:6003
2025-03-23 19:41:16,685 - urllib3.connectionpool - DEBUG - http://localhost:6003 "GET /stats HTTP/1.1" 200 218
2025-03-23 19:41:16,685 - __main__ - INFO - System stats after adding vectors: {'total_nodes': 3, 'sharding_strategy': 'lsh', 'replication_factor': 1, 'nodes': {'localhost:6001': {'dimension': 512, 'index_type': 'FlatL2', 'memory_usage_mb': 2.29, 'metric': 'L2', 'next_id': 0, 'sample_ids': [357737, 171050, 158744, 543043, 214224], 'storage_path': 'data/shard_0', 'timestamp': 1742773276.681545, 'total_vectors': 1168}, 'localhost:6002': {'dimension': 512, 'index_type': 'FlatL2', 'memory_usage_mb': 2.19, 'metric': 'L2', 'next_id': 0, 'sample_ids': [177934, 491366, 523957, 440336, 411754], 'storage_path': 'data/shard_1', 'timestamp': 1742773276.68326, 'total_vectors': 1117}, 'localhost:6003': {'dimension': 512, 'index_type': 'FlatL2', 'memory_usage_mb': 2.19, 'metric': 'L2', 'next_id': 0, 'sample_ids': [206487, 329614, 6763, 187144, 463647], 'storage_path': 'data/shard_2', 'timestamp': 1742773276.685011, 'total_vectors': 1115}}}
2025-03-23 19:41:16,685 - __main__ - INFO - Total vectors in system: 0
2025-03-23 19:41:16,685 - werkzeug - INFO - 127.0.0.1 - - [23/Mar/2025 19:41:16] "POST /add_vectors HTTP/1.1" 200 -
2025-03-23 19:41:16,687 - __main__ - INFO - Getting system statistics
2025-03-23 19:41:16,687 - urllib3.connectionpool - DEBUG - Starting new HTTP connection (1): localhost:6001
2025-03-23 19:41:16,689 - urllib3.connectionpool - DEBUG - http://localhost:6001 "GET /stats HTTP/1.1" 200 220
2025-03-23 19:41:16,689 - urllib3.connectionpool - DEBUG - Starting new HTTP connection (1): localhost:6002
2025-03-23 19:41:16,690 - urllib3.connectionpool - DEBUG - http://localhost:6002 "GET /stats HTTP/1.1" 200 220
2025-03-23 19:41:16,691 - urllib3.connectionpool - DEBUG - Starting new HTTP connection (1): localhost:6003
2025-03-23 19:41:16,692 - urllib3.connectionpool - DEBUG - http://localhost:6003 "GET /stats HTTP/1.1" 200 218
2025-03-23 19:41:16,692 - werkzeug - INFO - 127.0.0.1 - - [23/Mar/2025 19:41:16] "GET /stats HTTP/1.1" 200 -
2025-03-23 19:41:17,785 - __main__ - INFO - Received request to add 100 vectors
2025-03-23 19:41:17,785 - __main__ - DEBUG - Vectors shape: (100, 512)
2025-03-23 19:41:17,785 - __main__ - DEBUG - IDs shape: (100,)
2025-03-23 19:41:17,785 - __main__ - DEBUG - Sample IDs: [129945   8021 334006 500477 456143]...
2025-03-23 19:41:17,785 - __main__ - DEBUG - Calling coordinator.distribute_vectors
2025-03-23 19:41:17,785 - coordinator - INFO - Starting vector distribution for 100 vectors
2025-03-23 19:41:17,785 - root - INFO - LSH: Processing 100 vectors with shape (100, 512)
2025-03-23 19:41:17,785 - root - DEBUG - Table 0 hash value shape: (100, 4)
2025-03-23 19:41:17,785 - root - DEBUG - Table 1 hash value shape: (100, 4)
2025-03-23 19:41:17,785 - root - DEBUG - Table 2 hash value shape: (100, 4)
2025-03-23 19:41:17,785 - root - INFO - LSH: Combined hash shape: (100, 12)
2025-03-23 19:41:17,785 - root - INFO - LSH: Assigned vectors to shards: [(0, 33), (1, 37), (2, 30)]
2025-03-23 19:41:17,786 - coordinator - INFO - Shard assignments: (array([0, 1, 2]), array([33, 37, 30]))
2025-03-23 19:41:17,786 - coordinator - INFO - Grouped vectors by shard: ['shard_2: 30 vectors', 'shard_1: 37 vectors', 'shard_0: 33 vectors']
2025-03-23 19:41:17,786 - coordinator - INFO - Sending 30 vectors to node localhost:6003
2025-03-23 19:41:17,786 - coordinator - INFO - Sending 37 vectors to node localhost:6002
2025-03-23 19:41:17,800 - coordinator - INFO - Sending 33 vectors to node localhost:6001
2025-03-23 19:41:17,808 - urllib3.connectionpool - DEBUG - Starting new HTTP connection (1): localhost:6003
2025-03-23 19:41:17,808 - urllib3.connectionpool - DEBUG - Starting new HTTP connection (1): localhost:6002
2025-03-23 19:41:17,809 - urllib3.connectionpool - DEBUG - Starting new HTTP connection (1): localhost:6001
2025-03-23 19:41:17,813 - urllib3.connectionpool - DEBUG - http://localhost:6003 "POST /add_vectors HTTP/1.1" 200 53
2025-03-23 19:41:17,814 - coordinator - INFO - Successfully sent 30 vectors to node localhost:6003
2025-03-23 19:41:17,814 - urllib3.connectionpool - DEBUG - http://localhost:6001 "POST /add_vectors HTTP/1.1" 200 53
2025-03-23 19:41:17,814 - coordinator - INFO - Successfully sent 33 vectors to node localhost:6001
2025-03-23 19:41:17,815 - urllib3.connectionpool - DEBUG - http://localhost:6002 "POST /add_vectors HTTP/1.1" 200 53
2025-03-23 19:41:17,815 - coordinator - INFO - Successfully sent 37 vectors to node localhost:6002
2025-03-23 19:41:17,815 - coordinator - INFO - Completed vector distribution
2025-03-23 19:41:17,816 - urllib3.connectionpool - DEBUG - Starting new HTTP connection (1): localhost:6001
2025-03-23 19:41:17,817 - urllib3.connectionpool - DEBUG - http://localhost:6001 "GET /stats HTTP/1.1" 200 221
2025-03-23 19:41:17,817 - urllib3.connectionpool - DEBUG - Starting new HTTP connection (1): localhost:6002
2025-03-23 19:41:17,819 - urllib3.connectionpool - DEBUG - http://localhost:6002 "GET /stats HTTP/1.1" 200 220
2025-03-23 19:41:17,819 - urllib3.connectionpool - DEBUG - Starting new HTTP connection (1): localhost:6003
2025-03-23 19:41:17,820 - urllib3.connectionpool - DEBUG - http://localhost:6003 "GET /stats HTTP/1.1" 200 218
2025-03-23 19:41:17,820 - __main__ - INFO - System stats after adding vectors: {'total_nodes': 3, 'sharding_strategy': 'lsh', 'replication_factor': 1, 'nodes': {'localhost:6001': {'dimension': 512, 'index_type': 'FlatL2', 'memory_usage_mb': 2.35, 'metric': 'L2', 'next_id': 0, 'sample_ids': [357737, 171050, 158744, 543043, 214224], 'storage_path': 'data/shard_0', 'timestamp': 1742773277.8168662, 'total_vectors': 1201}, 'localhost:6002': {'dimension': 512, 'index_type': 'FlatL2', 'memory_usage_mb': 2.26, 'metric': 'L2', 'next_id': 0, 'sample_ids': [177934, 491366, 523957, 440336, 411754], 'storage_path': 'data/shard_1', 'timestamp': 1742773277.818812, 'total_vectors': 1154}, 'localhost:6003': {'dimension': 512, 'index_type': 'FlatL2', 'memory_usage_mb': 2.25, 'metric': 'L2', 'next_id': 0, 'sample_ids': [206487, 329614, 6763, 187144, 463647], 'storage_path': 'data/shard_2', 'timestamp': 1742773277.820539, 'total_vectors': 1145}}}
2025-03-23 19:41:17,821 - __main__ - INFO - Total vectors in system: 0
2025-03-23 19:41:17,821 - werkzeug - INFO - 127.0.0.1 - - [23/Mar/2025 19:41:17] "POST /add_vectors HTTP/1.1" 200 -
2025-03-23 19:41:17,823 - __main__ - INFO - Getting system statistics
2025-03-23 19:41:17,824 - urllib3.connectionpool - DEBUG - Starting new HTTP connection (1): localhost:6001
2025-03-23 19:41:17,825 - urllib3.connectionpool - DEBUG - http://localhost:6001 "GET /stats HTTP/1.1" 200 221
2025-03-23 19:41:17,826 - urllib3.connectionpool - DEBUG - Starting new HTTP connection (1): localhost:6002
2025-03-23 19:41:17,827 - urllib3.connectionpool - DEBUG - http://localhost:6002 "GET /stats HTTP/1.1" 200 220
2025-03-23 19:41:17,828 - urllib3.connectionpool - DEBUG - Starting new HTTP connection (1): localhost:6003
2025-03-23 19:41:17,829 - urllib3.connectionpool - DEBUG - http://localhost:6003 "GET /stats HTTP/1.1" 200 218
2025-03-23 19:41:17,829 - werkzeug - INFO - 127.0.0.1 - - [23/Mar/2025 19:41:17] "GET /stats HTTP/1.1" 200 -
2025-03-23 19:41:18,895 - __main__ - INFO - Received request to add 100 vectors
2025-03-23 19:41:18,895 - __main__ - DEBUG - Vectors shape: (100, 512)
2025-03-23 19:41:18,895 - __main__ - DEBUG - IDs shape: (100,)
2025-03-23 19:41:18,895 - __main__ - DEBUG - Sample IDs: [153782  29984 473869 259571 137576]...
2025-03-23 19:41:18,895 - __main__ - DEBUG - Calling coordinator.distribute_vectors
2025-03-23 19:41:18,896 - coordinator - INFO - Starting vector distribution for 100 vectors
2025-03-23 19:41:18,896 - root - INFO - LSH: Processing 100 vectors with shape (100, 512)
2025-03-23 19:41:18,896 - root - DEBUG - Table 0 hash value shape: (100, 4)
2025-03-23 19:41:18,897 - root - DEBUG - Table 1 hash value shape: (100, 4)
2025-03-23 19:41:18,897 - root - DEBUG - Table 2 hash value shape: (100, 4)
2025-03-23 19:41:18,897 - root - INFO - LSH: Combined hash shape: (100, 12)
2025-03-23 19:41:18,897 - root - INFO - LSH: Assigned vectors to shards: [(0, 40), (1, 31), (2, 29)]
2025-03-23 19:41:18,897 - coordinator - INFO - Shard assignments: (array([0, 1, 2]), array([40, 31, 29]))
2025-03-23 19:41:18,897 - coordinator - INFO - Grouped vectors by shard: ['shard_1: 31 vectors', 'shard_0: 40 vectors', 'shard_2: 29 vectors']
2025-03-23 19:41:18,898 - coordinator - INFO - Sending 31 vectors to node localhost:6002
2025-03-23 19:41:18,907 - coordinator - INFO - Sending 40 vectors to node localhost:6001
2025-03-23 19:41:18,916 - coordinator - INFO - Sending 29 vectors to node localhost:6003
2025-03-23 19:41:18,916 - urllib3.connectionpool - DEBUG - Starting new HTTP connection (1): localhost:6002
2025-03-23 19:41:18,923 - urllib3.connectionpool - DEBUG - Starting new HTTP connection (1): localhost:6001
2025-03-23 19:41:18,924 - urllib3.connectionpool - DEBUG - Starting new HTTP connection (1): localhost:6003
2025-03-23 19:41:18,930 - urllib3.connectionpool - DEBUG - http://localhost:6002 "POST /add_vectors HTTP/1.1" 200 53
2025-03-23 19:41:18,930 - coordinator - INFO - Successfully sent 31 vectors to node localhost:6002
2025-03-23 19:41:18,930 - urllib3.connectionpool - DEBUG - http://localhost:6003 "POST /add_vectors HTTP/1.1" 200 53
2025-03-23 19:41:18,930 - coordinator - INFO - Successfully sent 29 vectors to node localhost:6003
2025-03-23 19:41:18,931 - urllib3.connectionpool - DEBUG - http://localhost:6001 "POST /add_vectors HTTP/1.1" 200 53
2025-03-23 19:41:18,931 - coordinator - INFO - Successfully sent 40 vectors to node localhost:6001
2025-03-23 19:41:18,931 - coordinator - INFO - Completed vector distribution
2025-03-23 19:41:18,932 - urllib3.connectionpool - DEBUG - Starting new HTTP connection (1): localhost:6001
2025-03-23 19:41:18,933 - urllib3.connectionpool - DEBUG - http://localhost:6001 "GET /stats HTTP/1.1" 200 220
2025-03-23 19:41:18,934 - urllib3.connectionpool - DEBUG - Starting new HTTP connection (1): localhost:6002
2025-03-23 19:41:18,935 - urllib3.connectionpool - DEBUG - http://localhost:6002 "GET /stats HTTP/1.1" 200 220
2025-03-23 19:41:18,936 - urllib3.connectionpool - DEBUG - Starting new HTTP connection (1): localhost:6003
2025-03-23 19:41:18,938 - urllib3.connectionpool - DEBUG - http://localhost:6003 "GET /stats HTTP/1.1" 200 217
2025-03-23 19:41:18,938 - __main__ - INFO - System stats after adding vectors: {'total_nodes': 3, 'sharding_strategy': 'lsh', 'replication_factor': 1, 'nodes': {'localhost:6001': {'dimension': 512, 'index_type': 'FlatL2', 'memory_usage_mb': 2.43, 'metric': 'L2', 'next_id': 0, 'sample_ids': [357737, 171050, 158744, 543043, 214224], 'storage_path': 'data/shard_0', 'timestamp': 1742773278.933165, 'total_vectors': 1241}, 'localhost:6002': {'dimension': 512, 'index_type': 'FlatL2', 'memory_usage_mb': 2.32, 'metric': 'L2', 'next_id': 0, 'sample_ids': [177934, 491366, 468124, 523957, 440336], 'storage_path': 'data/shard_1', 'timestamp': 1742773278.935067, 'total_vectors': 1185}, 'localhost:6003': {'dimension': 512, 'index_type': 'FlatL2', 'memory_usage_mb': 2.3, 'metric': 'L2', 'next_id': 0, 'sample_ids': [206487, 329614, 6763, 187144, 463647], 'storage_path': 'data/shard_2', 'timestamp': 1742773278.937758, 'total_vectors': 1174}}}
2025-03-23 19:41:18,938 - __main__ - INFO - Total vectors in system: 0
2025-03-23 19:41:18,938 - werkzeug - INFO - 127.0.0.1 - - [23/Mar/2025 19:41:18] "POST /add_vectors HTTP/1.1" 200 -
2025-03-23 19:41:18,941 - __main__ - INFO - Getting system statistics
2025-03-23 19:41:18,943 - urllib3.connectionpool - DEBUG - Starting new HTTP connection (1): localhost:6001
2025-03-23 19:41:18,944 - urllib3.connectionpool - DEBUG - http://localhost:6001 "GET /stats HTTP/1.1" 200 220
2025-03-23 19:41:18,945 - urllib3.connectionpool - DEBUG - Starting new HTTP connection (1): localhost:6002
2025-03-23 19:41:18,947 - urllib3.connectionpool - DEBUG - http://localhost:6002 "GET /stats HTTP/1.1" 200 221
2025-03-23 19:41:18,948 - urllib3.connectionpool - DEBUG - Starting new HTTP connection (1): localhost:6003
2025-03-23 19:41:18,949 - urllib3.connectionpool - DEBUG - http://localhost:6003 "GET /stats HTTP/1.1" 200 217
2025-03-23 19:41:18,950 - werkzeug - INFO - 127.0.0.1 - - [23/Mar/2025 19:41:18] "GET /stats HTTP/1.1" 200 -
2025-03-23 19:41:20,020 - __main__ - INFO - Received request to add 100 vectors
2025-03-23 19:41:20,020 - __main__ - DEBUG - Vectors shape: (100, 512)
2025-03-23 19:41:20,020 - __main__ - DEBUG - IDs shape: (100,)
2025-03-23 19:41:20,020 - __main__ - DEBUG - Sample IDs: [148957  35770 125211 173057 364587]...
2025-03-23 19:41:20,020 - __main__ - DEBUG - Calling coordinator.distribute_vectors
2025-03-23 19:41:20,020 - coordinator - INFO - Starting vector distribution for 100 vectors
2025-03-23 19:41:20,020 - root - INFO - LSH: Processing 100 vectors with shape (100, 512)
2025-03-23 19:41:20,020 - root - DEBUG - Table 0 hash value shape: (100, 4)
2025-03-23 19:41:20,020 - root - DEBUG - Table 1 hash value shape: (100, 4)
2025-03-23 19:41:20,020 - root - DEBUG - Table 2 hash value shape: (100, 4)
2025-03-23 19:41:20,020 - root - INFO - LSH: Combined hash shape: (100, 12)
2025-03-23 19:41:20,021 - root - INFO - LSH: Assigned vectors to shards: [(0, 34), (1, 36), (2, 30)]
2025-03-23 19:41:20,021 - coordinator - INFO - Shard assignments: (array([0, 1, 2]), array([34, 36, 30]))
2025-03-23 19:41:20,021 - coordinator - INFO - Grouped vectors by shard: ['shard_1: 36 vectors', 'shard_0: 34 vectors', 'shard_2: 30 vectors']
2025-03-23 19:41:20,021 - coordinator - INFO - Sending 36 vectors to node localhost:6002
2025-03-23 19:41:20,021 - coordinator - INFO - Sending 34 vectors to node localhost:6001
2025-03-23 19:41:20,035 - coordinator - INFO - Sending 30 vectors to node localhost:6003
2025-03-23 19:41:20,042 - urllib3.connectionpool - DEBUG - Starting new HTTP connection (1): localhost:6001
2025-03-23 19:41:20,042 - urllib3.connectionpool - DEBUG - Starting new HTTP connection (1): localhost:6002
2025-03-23 19:41:20,042 - urllib3.connectionpool - DEBUG - Starting new HTTP connection (1): localhost:6003
2025-03-23 19:41:20,048 - urllib3.connectionpool - DEBUG - http://localhost:6001 "POST /add_vectors HTTP/1.1" 200 53
2025-03-23 19:41:20,048 - coordinator - INFO - Successfully sent 34 vectors to node localhost:6001
2025-03-23 19:41:20,048 - urllib3.connectionpool - DEBUG - http://localhost:6003 "POST /add_vectors HTTP/1.1" 200 53
2025-03-23 19:41:20,048 - coordinator - INFO - Successfully sent 30 vectors to node localhost:6003
2025-03-23 19:41:20,049 - urllib3.connectionpool - DEBUG - http://localhost:6002 "POST /add_vectors HTTP/1.1" 200 53
2025-03-23 19:41:20,049 - coordinator - INFO - Successfully sent 36 vectors to node localhost:6002
2025-03-23 19:41:20,049 - coordinator - INFO - Completed vector distribution
2025-03-23 19:41:20,050 - urllib3.connectionpool - DEBUG - Starting new HTTP connection (1): localhost:6001
2025-03-23 19:41:20,051 - urllib3.connectionpool - DEBUG - http://localhost:6001 "GET /stats HTTP/1.1" 200 219
2025-03-23 19:41:20,052 - urllib3.connectionpool - DEBUG - Starting new HTTP connection (1): localhost:6002
2025-03-23 19:41:20,053 - urllib3.connectionpool - DEBUG - http://localhost:6002 "GET /stats HTTP/1.1" 200 221
2025-03-23 19:41:20,054 - urllib3.connectionpool - DEBUG - Starting new HTTP connection (1): localhost:6003
2025-03-23 19:41:20,055 - urllib3.connectionpool - DEBUG - http://localhost:6003 "GET /stats HTTP/1.1" 200 219
2025-03-23 19:41:20,055 - __main__ - INFO - System stats after adding vectors: {'total_nodes': 3, 'sharding_strategy': 'lsh', 'replication_factor': 1, 'nodes': {'localhost:6001': {'dimension': 512, 'index_type': 'FlatL2', 'memory_usage_mb': 2.5, 'metric': 'L2', 'next_id': 0, 'sample_ids': [357737, 171050, 158744, 543043, 214224], 'storage_path': 'data/shard_0', 'timestamp': 1742773280.050972, 'total_vectors': 1275}, 'localhost:6002': {'dimension': 512, 'index_type': 'FlatL2', 'memory_usage_mb': 2.39, 'metric': 'L2', 'next_id': 0, 'sample_ids': [177934, 491366, 468124, 523957, 440336], 'storage_path': 'data/shard_1', 'timestamp': 1742773280.0529191, 'total_vectors': 1221}, 'localhost:6003': {'dimension': 512, 'index_type': 'FlatL2', 'memory_usage_mb': 2.36, 'metric': 'L2', 'next_id': 0, 'sample_ids': [206487, 329614, 180487, 6763, 187144], 'storage_path': 'data/shard_2', 'timestamp': 1742773280.0549839, 'total_vectors': 1204}}}
2025-03-23 19:41:20,055 - __main__ - INFO - Total vectors in system: 0
2025-03-23 19:41:20,055 - werkzeug - INFO - 127.0.0.1 - - [23/Mar/2025 19:41:20] "POST /add_vectors HTTP/1.1" 200 -
2025-03-23 19:41:20,057 - __main__ - INFO - Getting system statistics
2025-03-23 19:41:20,058 - urllib3.connectionpool - DEBUG - Starting new HTTP connection (1): localhost:6001
2025-03-23 19:41:20,059 - urllib3.connectionpool - DEBUG - http://localhost:6001 "GET /stats HTTP/1.1" 200 219
2025-03-23 19:41:20,060 - urllib3.connectionpool - DEBUG - Starting new HTTP connection (1): localhost:6002
2025-03-23 19:41:20,061 - urllib3.connectionpool - DEBUG - http://localhost:6002 "GET /stats HTTP/1.1" 200 221
2025-03-23 19:41:20,062 - urllib3.connectionpool - DEBUG - Starting new HTTP connection (1): localhost:6003
2025-03-23 19:41:20,063 - urllib3.connectionpool - DEBUG - http://localhost:6003 "GET /stats HTTP/1.1" 200 218
2025-03-23 19:41:20,063 - werkzeug - INFO - 127.0.0.1 - - [23/Mar/2025 19:41:20] "GET /stats HTTP/1.1" 200 -
2025-03-23 19:41:21,165 - __main__ - INFO - Received request to add 100 vectors
2025-03-23 19:41:21,165 - __main__ - DEBUG - Vectors shape: (100, 512)
2025-03-23 19:41:21,165 - __main__ - DEBUG - IDs shape: (100,)
2025-03-23 19:41:21,165 - __main__ - DEBUG - Sample IDs: [439593  20553 484760 332845 105923]...
2025-03-23 19:41:21,165 - __main__ - DEBUG - Calling coordinator.distribute_vectors
2025-03-23 19:41:21,165 - coordinator - INFO - Starting vector distribution for 100 vectors
2025-03-23 19:41:21,166 - root - INFO - LSH: Processing 100 vectors with shape (100, 512)
2025-03-23 19:41:21,166 - root - DEBUG - Table 0 hash value shape: (100, 4)
2025-03-23 19:41:21,166 - root - DEBUG - Table 1 hash value shape: (100, 4)
2025-03-23 19:41:21,166 - root - DEBUG - Table 2 hash value shape: (100, 4)
2025-03-23 19:41:21,166 - root - INFO - LSH: Combined hash shape: (100, 12)
2025-03-23 19:41:21,166 - root - INFO - LSH: Assigned vectors to shards: [(0, 32), (1, 34), (2, 34)]
2025-03-23 19:41:21,166 - coordinator - INFO - Shard assignments: (array([0, 1, 2]), array([32, 34, 34]))
2025-03-23 19:41:21,166 - coordinator - INFO - Grouped vectors by shard: ['shard_0: 32 vectors', 'shard_2: 34 vectors', 'shard_1: 34 vectors']
2025-03-23 19:41:21,166 - coordinator - INFO - Sending 32 vectors to node localhost:6001
2025-03-23 19:41:21,167 - coordinator - INFO - Sending 34 vectors to node localhost:6003
2025-03-23 19:41:21,180 - coordinator - INFO - Sending 34 vectors to node localhost:6002
2025-03-23 19:41:21,188 - urllib3.connectionpool - DEBUG - Starting new HTTP connection (1): localhost:6001
2025-03-23 19:41:21,188 - urllib3.connectionpool - DEBUG - Starting new HTTP connection (1): localhost:6003
2025-03-23 19:41:21,189 - urllib3.connectionpool - DEBUG - Starting new HTTP connection (1): localhost:6002
2025-03-23 19:41:21,194 - urllib3.connectionpool - DEBUG - http://localhost:6001 "POST /add_vectors HTTP/1.1" 200 53
2025-03-23 19:41:21,194 - urllib3.connectionpool - DEBUG - http://localhost:6003 "POST /add_vectors HTTP/1.1" 200 53
2025-03-23 19:41:21,195 - coordinator - INFO - Successfully sent 32 vectors to node localhost:6001
2025-03-23 19:41:21,195 - coordinator - INFO - Successfully sent 34 vectors to node localhost:6003
2025-03-23 19:41:21,196 - urllib3.connectionpool - DEBUG - http://localhost:6002 "POST /add_vectors HTTP/1.1" 200 53
2025-03-23 19:41:21,196 - coordinator - INFO - Successfully sent 34 vectors to node localhost:6002
2025-03-23 19:41:21,196 - coordinator - INFO - Completed vector distribution
2025-03-23 19:41:21,198 - urllib3.connectionpool - DEBUG - Starting new HTTP connection (1): localhost:6001
2025-03-23 19:41:21,199 - urllib3.connectionpool - DEBUG - http://localhost:6001 "GET /stats HTTP/1.1" 200 221
2025-03-23 19:41:21,200 - urllib3.connectionpool - DEBUG - Starting new HTTP connection (1): localhost:6002
2025-03-23 19:41:21,201 - urllib3.connectionpool - DEBUG - http://localhost:6002 "GET /stats HTTP/1.1" 200 220
2025-03-23 19:41:21,202 - urllib3.connectionpool - DEBUG - Starting new HTTP connection (1): localhost:6003
2025-03-23 19:41:21,203 - urllib3.connectionpool - DEBUG - http://localhost:6003 "GET /stats HTTP/1.1" 200 219
2025-03-23 19:41:21,203 - __main__ - INFO - System stats after adding vectors: {'total_nodes': 3, 'sharding_strategy': 'lsh', 'replication_factor': 1, 'nodes': {'localhost:6001': {'dimension': 512, 'index_type': 'FlatL2', 'memory_usage_mb': 2.56, 'metric': 'L2', 'next_id': 0, 'sample_ids': [357737, 171050, 158744, 543043, 214224], 'storage_path': 'data/shard_0', 'timestamp': 1742773281.1991198, 'total_vectors': 1307}, 'localhost:6002': {'dimension': 512, 'index_type': 'FlatL2', 'memory_usage_mb': 2.46, 'metric': 'L2', 'next_id': 0, 'sample_ids': [177934, 491366, 468124, 523957, 440336], 'storage_path': 'data/shard_1', 'timestamp': 1742773281.201328, 'total_vectors': 1255}, 'localhost:6003': {'dimension': 512, 'index_type': 'FlatL2', 'memory_usage_mb': 2.43, 'metric': 'L2', 'next_id': 0, 'sample_ids': [206487, 329614, 180487, 6763, 187144], 'storage_path': 'data/shard_2', 'timestamp': 1742773281.2033541, 'total_vectors': 1238}}}
2025-03-23 19:41:21,203 - __main__ - INFO - Total vectors in system: 0
2025-03-23 19:41:21,204 - werkzeug - INFO - 127.0.0.1 - - [23/Mar/2025 19:41:21] "POST /add_vectors HTTP/1.1" 200 -
2025-03-23 19:41:21,205 - __main__ - INFO - Getting system statistics
2025-03-23 19:41:21,206 - urllib3.connectionpool - DEBUG - Starting new HTTP connection (1): localhost:6001
2025-03-23 19:41:21,207 - urllib3.connectionpool - DEBUG - http://localhost:6001 "GET /stats HTTP/1.1" 200 221
2025-03-23 19:41:21,208 - urllib3.connectionpool - DEBUG - Starting new HTTP connection (1): localhost:6002
2025-03-23 19:41:21,209 - urllib3.connectionpool - DEBUG - http://localhost:6002 "GET /stats HTTP/1.1" 200 221
2025-03-23 19:41:21,210 - urllib3.connectionpool - DEBUG - Starting new HTTP connection (1): localhost:6003
2025-03-23 19:41:21,211 - urllib3.connectionpool - DEBUG - http://localhost:6003 "GET /stats HTTP/1.1" 200 218
2025-03-23 19:41:21,212 - werkzeug - INFO - 127.0.0.1 - - [23/Mar/2025 19:41:21] "GET /stats HTTP/1.1" 200 -
2025-03-23 19:41:22,291 - __main__ - INFO - Received request to add 100 vectors
2025-03-23 19:41:22,291 - __main__ - DEBUG - Vectors shape: (100, 512)
2025-03-23 19:41:22,291 - __main__ - DEBUG - IDs shape: (100,)
2025-03-23 19:41:22,291 - __main__ - DEBUG - Sample IDs: [165518 398377 225184 460683 551304]...
2025-03-23 19:41:22,291 - __main__ - DEBUG - Calling coordinator.distribute_vectors
2025-03-23 19:41:22,291 - coordinator - INFO - Starting vector distribution for 100 vectors
2025-03-23 19:41:22,291 - root - INFO - LSH: Processing 100 vectors with shape (100, 512)
2025-03-23 19:41:22,291 - root - DEBUG - Table 0 hash value shape: (100, 4)
2025-03-23 19:41:22,291 - root - DEBUG - Table 1 hash value shape: (100, 4)
2025-03-23 19:41:22,291 - root - DEBUG - Table 2 hash value shape: (100, 4)
2025-03-23 19:41:22,291 - root - INFO - LSH: Combined hash shape: (100, 12)
2025-03-23 19:41:22,291 - root - INFO - LSH: Assigned vectors to shards: [(0, 34), (1, 35), (2, 31)]
2025-03-23 19:41:22,291 - coordinator - INFO - Shard assignments: (array([0, 1, 2]), array([34, 35, 31]))
2025-03-23 19:41:22,291 - coordinator - INFO - Grouped vectors by shard: ['shard_0: 34 vectors', 'shard_1: 35 vectors', 'shard_2: 31 vectors']
2025-03-23 19:41:22,292 - coordinator - INFO - Sending 34 vectors to node localhost:6001
2025-03-23 19:41:22,299 - coordinator - INFO - Sending 35 vectors to node localhost:6002
2025-03-23 19:41:22,306 - coordinator - INFO - Sending 31 vectors to node localhost:6003
2025-03-23 19:41:22,313 - urllib3.connectionpool - DEBUG - Starting new HTTP connection (1): localhost:6001
2025-03-23 19:41:22,313 - urllib3.connectionpool - DEBUG - Starting new HTTP connection (1): localhost:6002
2025-03-23 19:41:22,314 - urllib3.connectionpool - DEBUG - Starting new HTTP connection (1): localhost:6003
2025-03-23 19:41:22,319 - urllib3.connectionpool - DEBUG - http://localhost:6001 "POST /add_vectors HTTP/1.1" 200 53
2025-03-23 19:41:22,319 - coordinator - INFO - Successfully sent 34 vectors to node localhost:6001
2025-03-23 19:41:22,320 - urllib3.connectionpool - DEBUG - http://localhost:6003 "POST /add_vectors HTTP/1.1" 200 53
2025-03-23 19:41:22,320 - coordinator - INFO - Successfully sent 31 vectors to node localhost:6003
2025-03-23 19:41:22,320 - urllib3.connectionpool - DEBUG - http://localhost:6002 "POST /add_vectors HTTP/1.1" 200 53
2025-03-23 19:41:22,320 - coordinator - INFO - Successfully sent 35 vectors to node localhost:6002
2025-03-23 19:41:22,320 - coordinator - INFO - Completed vector distribution
2025-03-23 19:41:22,321 - urllib3.connectionpool - DEBUG - Starting new HTTP connection (1): localhost:6001
2025-03-23 19:41:22,323 - urllib3.connectionpool - DEBUG - http://localhost:6001 "GET /stats HTTP/1.1" 200 220
2025-03-23 19:41:22,323 - urllib3.connectionpool - DEBUG - Starting new HTTP connection (1): localhost:6002
2025-03-23 19:41:22,324 - urllib3.connectionpool - DEBUG - http://localhost:6002 "GET /stats HTTP/1.1" 200 220
2025-03-23 19:41:22,325 - urllib3.connectionpool - DEBUG - Starting new HTTP connection (1): localhost:6003
2025-03-23 19:41:22,326 - urllib3.connectionpool - DEBUG - http://localhost:6003 "GET /stats HTTP/1.1" 200 219
2025-03-23 19:41:22,326 - __main__ - INFO - System stats after adding vectors: {'total_nodes': 3, 'sharding_strategy': 'lsh', 'replication_factor': 1, 'nodes': {'localhost:6001': {'dimension': 512, 'index_type': 'FlatL2', 'memory_usage_mb': 2.63, 'metric': 'L2', 'next_id': 0, 'sample_ids': [357737, 171050, 158744, 377239, 543043], 'storage_path': 'data/shard_0', 'timestamp': 1742773282.322748, 'total_vectors': 1341}, 'localhost:6002': {'dimension': 512, 'index_type': 'FlatL2', 'memory_usage_mb': 2.53, 'metric': 'L2', 'next_id': 0, 'sample_ids': [177934, 491366, 468124, 523957, 440336], 'storage_path': 'data/shard_1', 'timestamp': 1742773282.324564, 'total_vectors': 1290}, 'localhost:6003': {'dimension': 512, 'index_type': 'FlatL2', 'memory_usage_mb': 2.49, 'metric': 'L2', 'next_id': 0, 'sample_ids': [206487, 329614, 180487, 6763, 187144], 'storage_path': 'data/shard_2', 'timestamp': 1742773282.3263319, 'total_vectors': 1269}}}
2025-03-23 19:41:22,326 - __main__ - INFO - Total vectors in system: 0
2025-03-23 19:41:22,327 - werkzeug - INFO - 127.0.0.1 - - [23/Mar/2025 19:41:22] "POST /add_vectors HTTP/1.1" 200 -
2025-03-23 19:41:22,328 - __main__ - INFO - Getting system statistics
2025-03-23 19:41:22,329 - urllib3.connectionpool - DEBUG - Starting new HTTP connection (1): localhost:6001
2025-03-23 19:41:22,330 - urllib3.connectionpool - DEBUG - http://localhost:6001 "GET /stats HTTP/1.1" 200 221
2025-03-23 19:41:22,331 - urllib3.connectionpool - DEBUG - Starting new HTTP connection (1): localhost:6002
2025-03-23 19:41:22,332 - urllib3.connectionpool - DEBUG - http://localhost:6002 "GET /stats HTTP/1.1" 200 220
2025-03-23 19:41:22,332 - urllib3.connectionpool - DEBUG - Starting new HTTP connection (1): localhost:6003
2025-03-23 19:41:22,334 - urllib3.connectionpool - DEBUG - http://localhost:6003 "GET /stats HTTP/1.1" 200 219
2025-03-23 19:41:22,334 - werkzeug - INFO - 127.0.0.1 - - [23/Mar/2025 19:41:22] "GET /stats HTTP/1.1" 200 -
2025-03-23 19:41:23,419 - __main__ - INFO - Received request to add 100 vectors
2025-03-23 19:41:23,419 - __main__ - DEBUG - Vectors shape: (100, 512)
2025-03-23 19:41:23,419 - __main__ - DEBUG - IDs shape: (100,)
2025-03-23 19:41:23,420 - __main__ - DEBUG - Sample IDs: [447611 408112 145597 507235 398028]...
2025-03-23 19:41:23,420 - __main__ - DEBUG - Calling coordinator.distribute_vectors
2025-03-23 19:41:23,420 - coordinator - INFO - Starting vector distribution for 100 vectors
2025-03-23 19:41:23,420 - root - INFO - LSH: Processing 100 vectors with shape (100, 512)
2025-03-23 19:41:23,420 - root - DEBUG - Table 0 hash value shape: (100, 4)
2025-03-23 19:41:23,420 - root - DEBUG - Table 1 hash value shape: (100, 4)
2025-03-23 19:41:23,420 - root - DEBUG - Table 2 hash value shape: (100, 4)
2025-03-23 19:41:23,420 - root - INFO - LSH: Combined hash shape: (100, 12)
2025-03-23 19:41:23,421 - root - INFO - LSH: Assigned vectors to shards: [(0, 40), (1, 32), (2, 28)]
2025-03-23 19:41:23,421 - coordinator - INFO - Shard assignments: (array([0, 1, 2]), array([40, 32, 28]))
2025-03-23 19:41:23,421 - coordinator - INFO - Grouped vectors by shard: ['shard_2: 28 vectors', 'shard_0: 40 vectors', 'shard_1: 32 vectors']
2025-03-23 19:41:23,421 - coordinator - INFO - Sending 28 vectors to node localhost:6003
2025-03-23 19:41:23,421 - coordinator - INFO - Sending 40 vectors to node localhost:6001
2025-03-23 19:41:23,429 - coordinator - INFO - Sending 32 vectors to node localhost:6002
2025-03-23 19:41:23,442 - urllib3.connectionpool - DEBUG - Starting new HTTP connection (1): localhost:6002
2025-03-23 19:41:23,442 - urllib3.connectionpool - DEBUG - Starting new HTTP connection (1): localhost:6001
2025-03-23 19:41:23,443 - urllib3.connectionpool - DEBUG - Starting new HTTP connection (1): localhost:6003
2025-03-23 19:41:23,448 - urllib3.connectionpool - DEBUG - http://localhost:6003 "POST /add_vectors HTTP/1.1" 200 53
2025-03-23 19:41:23,448 - coordinator - INFO - Successfully sent 28 vectors to node localhost:6003
2025-03-23 19:41:23,449 - urllib3.connectionpool - DEBUG - http://localhost:6002 "POST /add_vectors HTTP/1.1" 200 53
2025-03-23 19:41:23,449 - coordinator - INFO - Successfully sent 32 vectors to node localhost:6002
2025-03-23 19:41:23,449 - urllib3.connectionpool - DEBUG - http://localhost:6001 "POST /add_vectors HTTP/1.1" 200 53
2025-03-23 19:41:23,449 - coordinator - INFO - Successfully sent 40 vectors to node localhost:6001
2025-03-23 19:41:23,450 - coordinator - INFO - Completed vector distribution
2025-03-23 19:41:23,450 - urllib3.connectionpool - DEBUG - Starting new HTTP connection (1): localhost:6001
2025-03-23 19:41:23,452 - urllib3.connectionpool - DEBUG - http://localhost:6001 "GET /stats HTTP/1.1" 200 221
2025-03-23 19:41:23,452 - urllib3.connectionpool - DEBUG - Starting new HTTP connection (1): localhost:6002
2025-03-23 19:41:23,453 - urllib3.connectionpool - DEBUG - http://localhost:6002 "GET /stats HTTP/1.1" 200 220
2025-03-23 19:41:23,454 - urllib3.connectionpool - DEBUG - Starting new HTTP connection (1): localhost:6003
2025-03-23 19:41:23,455 - urllib3.connectionpool - DEBUG - http://localhost:6003 "GET /stats HTTP/1.1" 200 219
2025-03-23 19:41:23,455 - __main__ - INFO - System stats after adding vectors: {'total_nodes': 3, 'sharding_strategy': 'lsh', 'replication_factor': 1, 'nodes': {'localhost:6001': {'dimension': 512, 'index_type': 'FlatL2', 'memory_usage_mb': 2.71, 'metric': 'L2', 'next_id': 0, 'sample_ids': [357737, 171050, 158744, 377239, 543043], 'storage_path': 'data/shard_0', 'timestamp': 1742773283.4519072, 'total_vectors': 1381}, 'localhost:6002': {'dimension': 512, 'index_type': 'FlatL2', 'memory_usage_mb': 2.59, 'metric': 'L2', 'next_id': 0, 'sample_ids': [177934, 491366, 468124, 523957, 440336], 'storage_path': 'data/shard_1', 'timestamp': 1742773283.453697, 'total_vectors': 1322}, 'localhost:6003': {'dimension': 512, 'index_type': 'FlatL2', 'memory_usage_mb': 2.54, 'metric': 'L2', 'next_id': 0, 'sample_ids': [206487, 329614, 180487, 6763, 187144], 'storage_path': 'data/shard_2', 'timestamp': 1742773283.4555688, 'total_vectors': 1297}}}
2025-03-23 19:41:23,455 - __main__ - INFO - Total vectors in system: 0
2025-03-23 19:41:23,456 - werkzeug - INFO - 127.0.0.1 - - [23/Mar/2025 19:41:23] "POST /add_vectors HTTP/1.1" 200 -
2025-03-23 19:41:23,458 - __main__ - INFO - Getting system statistics
2025-03-23 19:41:23,459 - urllib3.connectionpool - DEBUG - Starting new HTTP connection (1): localhost:6001
2025-03-23 19:41:23,460 - urllib3.connectionpool - DEBUG - http://localhost:6001 "GET /stats HTTP/1.1" 200 220
2025-03-23 19:41:23,461 - urllib3.connectionpool - DEBUG - Starting new HTTP connection (1): localhost:6002
2025-03-23 19:41:23,462 - urllib3.connectionpool - DEBUG - http://localhost:6002 "GET /stats HTTP/1.1" 200 220
2025-03-23 19:41:23,462 - urllib3.connectionpool - DEBUG - Starting new HTTP connection (1): localhost:6003
2025-03-23 19:41:23,464 - urllib3.connectionpool - DEBUG - http://localhost:6003 "GET /stats HTTP/1.1" 200 218
2025-03-23 19:41:23,464 - werkzeug - INFO - 127.0.0.1 - - [23/Mar/2025 19:41:23] "GET /stats HTTP/1.1" 200 -
2025-03-23 19:41:24,560 - __main__ - INFO - Received request to add 100 vectors
2025-03-23 19:41:24,560 - __main__ - DEBUG - Vectors shape: (100, 512)
2025-03-23 19:41:24,560 - __main__ - DEBUG - IDs shape: (100,)
2025-03-23 19:41:24,560 - __main__ - DEBUG - Sample IDs: [559956 538364  57232 364126 151657]...
2025-03-23 19:41:24,560 - __main__ - DEBUG - Calling coordinator.distribute_vectors
2025-03-23 19:41:24,560 - coordinator - INFO - Starting vector distribution for 100 vectors
2025-03-23 19:41:24,560 - root - INFO - LSH: Processing 100 vectors with shape (100, 512)
2025-03-23 19:41:24,560 - root - DEBUG - Table 0 hash value shape: (100, 4)
2025-03-23 19:41:24,560 - root - DEBUG - Table 1 hash value shape: (100, 4)
2025-03-23 19:41:24,561 - root - DEBUG - Table 2 hash value shape: (100, 4)
2025-03-23 19:41:24,561 - root - INFO - LSH: Combined hash shape: (100, 12)
2025-03-23 19:41:24,561 - root - INFO - LSH: Assigned vectors to shards: [(0, 23), (1, 35), (2, 42)]
2025-03-23 19:41:24,561 - coordinator - INFO - Shard assignments: (array([0, 1, 2]), array([23, 35, 42]))
2025-03-23 19:41:24,561 - coordinator - INFO - Grouped vectors by shard: ['shard_0: 23 vectors', 'shard_2: 42 vectors', 'shard_1: 35 vectors']
2025-03-23 19:41:24,561 - coordinator - INFO - Sending 23 vectors to node localhost:6001
2025-03-23 19:41:24,561 - coordinator - INFO - Sending 42 vectors to node localhost:6003
2025-03-23 19:41:24,575 - coordinator - INFO - Sending 35 vectors to node localhost:6002
2025-03-23 19:41:24,582 - urllib3.connectionpool - DEBUG - Starting new HTTP connection (1): localhost:6001
2025-03-23 19:41:24,583 - urllib3.connectionpool - DEBUG - Starting new HTTP connection (1): localhost:6003
2025-03-23 19:41:24,583 - urllib3.connectionpool - DEBUG - Starting new HTTP connection (1): localhost:6002
2025-03-23 19:41:24,587 - urllib3.connectionpool - DEBUG - http://localhost:6001 "POST /add_vectors HTTP/1.1" 200 53
2025-03-23 19:41:24,587 - coordinator - INFO - Successfully sent 23 vectors to node localhost:6001
2025-03-23 19:41:24,589 - urllib3.connectionpool - DEBUG - http://localhost:6002 "POST /add_vectors HTTP/1.1" 200 53
2025-03-23 19:41:24,589 - coordinator - INFO - Successfully sent 35 vectors to node localhost:6002
2025-03-23 19:41:24,589 - urllib3.connectionpool - DEBUG - http://localhost:6003 "POST /add_vectors HTTP/1.1" 200 53
2025-03-23 19:41:24,589 - coordinator - INFO - Successfully sent 42 vectors to node localhost:6003
2025-03-23 19:41:24,590 - coordinator - INFO - Completed vector distribution
2025-03-23 19:41:24,590 - urllib3.connectionpool - DEBUG - Starting new HTTP connection (1): localhost:6001
2025-03-23 19:41:24,592 - urllib3.connectionpool - DEBUG - http://localhost:6001 "GET /stats HTTP/1.1" 200 220
2025-03-23 19:41:24,592 - urllib3.connectionpool - DEBUG - Starting new HTTP connection (1): localhost:6002
2025-03-23 19:41:24,593 - urllib3.connectionpool - DEBUG - http://localhost:6002 "GET /stats HTTP/1.1" 200 221
2025-03-23 19:41:24,594 - urllib3.connectionpool - DEBUG - Starting new HTTP connection (1): localhost:6003
2025-03-23 19:41:24,595 - urllib3.connectionpool - DEBUG - http://localhost:6003 "GET /stats HTTP/1.1" 200 218
2025-03-23 19:41:24,596 - __main__ - INFO - System stats after adding vectors: {'total_nodes': 3, 'sharding_strategy': 'lsh', 'replication_factor': 1, 'nodes': {'localhost:6001': {'dimension': 512, 'index_type': 'FlatL2', 'memory_usage_mb': 2.75, 'metric': 'L2', 'next_id': 0, 'sample_ids': [357737, 171050, 158744, 377239, 543043], 'storage_path': 'data/shard_0', 'timestamp': 1742773284.591905, 'total_vectors': 1404}, 'localhost:6002': {'dimension': 512, 'index_type': 'FlatL2', 'memory_usage_mb': 2.66, 'metric': 'L2', 'next_id': 0, 'sample_ids': [177934, 146667, 491366, 468124, 523957], 'storage_path': 'data/shard_1', 'timestamp': 1742773284.5936809, 'total_vectors': 1357}, 'localhost:6003': {'dimension': 512, 'index_type': 'FlatL2', 'memory_usage_mb': 2.63, 'metric': 'L2', 'next_id': 0, 'sample_ids': [206487, 329614, 180487, 6763, 187144], 'storage_path': 'data/shard_2', 'timestamp': 1742773284.595638, 'total_vectors': 1339}}}
2025-03-23 19:41:24,596 - __main__ - INFO - Total vectors in system: 0
2025-03-23 19:41:24,596 - werkzeug - INFO - 127.0.0.1 - - [23/Mar/2025 19:41:24] "POST /add_vectors HTTP/1.1" 200 -
2025-03-23 19:41:24,598 - __main__ - INFO - Getting system statistics
2025-03-23 19:41:24,598 - urllib3.connectionpool - DEBUG - Starting new HTTP connection (1): localhost:6001
2025-03-23 19:41:24,600 - urllib3.connectionpool - DEBUG - http://localhost:6001 "GET /stats HTTP/1.1" 200 220
2025-03-23 19:41:24,601 - urllib3.connectionpool - DEBUG - Starting new HTTP connection (1): localhost:6002
2025-03-23 19:41:24,602 - urllib3.connectionpool - DEBUG - http://localhost:6002 "GET /stats HTTP/1.1" 200 220
2025-03-23 19:41:24,602 - urllib3.connectionpool - DEBUG - Starting new HTTP connection (1): localhost:6003
2025-03-23 19:41:24,603 - urllib3.connectionpool - DEBUG - http://localhost:6003 "GET /stats HTTP/1.1" 200 218
2025-03-23 19:41:24,604 - werkzeug - INFO - 127.0.0.1 - - [23/Mar/2025 19:41:24] "GET /stats HTTP/1.1" 200 -
2025-03-23 19:41:25,694 - __main__ - INFO - Received request to add 100 vectors
2025-03-23 19:41:25,695 - __main__ - DEBUG - Vectors shape: (100, 512)
2025-03-23 19:41:25,695 - __main__ - DEBUG - IDs shape: (100,)
2025-03-23 19:41:25,695 - __main__ - DEBUG - Sample IDs: [261706 154705  52412 297084 210855]...
2025-03-23 19:41:25,695 - __main__ - DEBUG - Calling coordinator.distribute_vectors
2025-03-23 19:41:25,695 - coordinator - INFO - Starting vector distribution for 100 vectors
2025-03-23 19:41:25,695 - root - INFO - LSH: Processing 100 vectors with shape (100, 512)
2025-03-23 19:41:25,696 - root - DEBUG - Table 0 hash value shape: (100, 4)
2025-03-23 19:41:25,696 - root - DEBUG - Table 1 hash value shape: (100, 4)
2025-03-23 19:41:25,696 - root - DEBUG - Table 2 hash value shape: (100, 4)
2025-03-23 19:41:25,696 - root - INFO - LSH: Combined hash shape: (100, 12)
2025-03-23 19:41:25,696 - root - INFO - LSH: Assigned vectors to shards: [(0, 33), (1, 32), (2, 35)]
2025-03-23 19:41:25,696 - coordinator - INFO - Shard assignments: (array([0, 1, 2]), array([33, 32, 35]))
2025-03-23 19:41:25,696 - coordinator - INFO - Grouped vectors by shard: ['shard_1: 32 vectors', 'shard_0: 33 vectors', 'shard_2: 35 vectors']
2025-03-23 19:41:25,696 - coordinator - INFO - Sending 32 vectors to node localhost:6002
2025-03-23 19:41:25,703 - coordinator - INFO - Sending 33 vectors to node localhost:6001
2025-03-23 19:41:25,711 - coordinator - INFO - Sending 35 vectors to node localhost:6003
2025-03-23 19:41:25,732 - urllib3.connectionpool - DEBUG - Starting new HTTP connection (1): localhost:6002
2025-03-23 19:41:25,733 - urllib3.connectionpool - DEBUG - Starting new HTTP connection (1): localhost:6001
2025-03-23 19:41:25,734 - urllib3.connectionpool - DEBUG - Starting new HTTP connection (1): localhost:6003
2025-03-23 19:41:25,744 - urllib3.connectionpool - DEBUG - http://localhost:6003 "POST /add_vectors HTTP/1.1" 200 53
2025-03-23 19:41:25,744 - coordinator - INFO - Successfully sent 35 vectors to node localhost:6003
2025-03-23 19:41:25,745 - urllib3.connectionpool - DEBUG - http://localhost:6001 "POST /add_vectors HTTP/1.1" 200 53
2025-03-23 19:41:25,745 - coordinator - INFO - Successfully sent 33 vectors to node localhost:6001
2025-03-23 19:41:25,746 - urllib3.connectionpool - DEBUG - http://localhost:6002 "POST /add_vectors HTTP/1.1" 200 53
2025-03-23 19:41:25,746 - coordinator - INFO - Successfully sent 32 vectors to node localhost:6002
2025-03-23 19:41:25,746 - coordinator - INFO - Completed vector distribution
2025-03-23 19:41:25,748 - urllib3.connectionpool - DEBUG - Starting new HTTP connection (1): localhost:6001
2025-03-23 19:41:25,749 - urllib3.connectionpool - DEBUG - http://localhost:6001 "GET /stats HTTP/1.1" 200 220
2025-03-23 19:41:25,750 - urllib3.connectionpool - DEBUG - Starting new HTTP connection (1): localhost:6002
2025-03-23 19:41:25,751 - urllib3.connectionpool - DEBUG - http://localhost:6002 "GET /stats HTTP/1.1" 200 221
2025-03-23 19:41:25,752 - urllib3.connectionpool - DEBUG - Starting new HTTP connection (1): localhost:6003
2025-03-23 19:41:25,753 - urllib3.connectionpool - DEBUG - http://localhost:6003 "GET /stats HTTP/1.1" 200 218
2025-03-23 19:41:25,753 - __main__ - INFO - System stats after adding vectors: {'total_nodes': 3, 'sharding_strategy': 'lsh', 'replication_factor': 1, 'nodes': {'localhost:6001': {'dimension': 512, 'index_type': 'FlatL2', 'memory_usage_mb': 2.82, 'metric': 'L2', 'next_id': 0, 'sample_ids': [357737, 171050, 158744, 377239, 543043], 'storage_path': 'data/shard_0', 'timestamp': 1742773285.749181, 'total_vectors': 1437}, 'localhost:6002': {'dimension': 512, 'index_type': 'FlatL2', 'memory_usage_mb': 2.72, 'metric': 'L2', 'next_id': 0, 'sample_ids': [177934, 146667, 491366, 468124, 523957], 'storage_path': 'data/shard_1', 'timestamp': 1742773285.7515059, 'total_vectors': 1389}, 'localhost:6003': {'dimension': 512, 'index_type': 'FlatL2', 'memory_usage_mb': 2.69, 'metric': 'L2', 'next_id': 0, 'sample_ids': [206487, 329614, 180487, 6763, 187144], 'storage_path': 'data/shard_2', 'timestamp': 1742773285.753365, 'total_vectors': 1374}}}
2025-03-23 19:41:25,753 - __main__ - INFO - Total vectors in system: 0
2025-03-23 19:41:25,754 - werkzeug - INFO - 127.0.0.1 - - [23/Mar/2025 19:41:25] "POST /add_vectors HTTP/1.1" 200 -
2025-03-23 19:41:25,756 - __main__ - INFO - Getting system statistics
2025-03-23 19:41:25,756 - urllib3.connectionpool - DEBUG - Starting new HTTP connection (1): localhost:6001
2025-03-23 19:41:25,757 - urllib3.connectionpool - DEBUG - http://localhost:6001 "GET /stats HTTP/1.1" 200 220
2025-03-23 19:41:25,758 - urllib3.connectionpool - DEBUG - Starting new HTTP connection (1): localhost:6002
2025-03-23 19:41:25,760 - urllib3.connectionpool - DEBUG - http://localhost:6002 "GET /stats HTTP/1.1" 200 220
2025-03-23 19:41:25,761 - urllib3.connectionpool - DEBUG - Starting new HTTP connection (1): localhost:6003
2025-03-23 19:41:25,762 - urllib3.connectionpool - DEBUG - http://localhost:6003 "GET /stats HTTP/1.1" 200 218
2025-03-23 19:41:25,762 - werkzeug - INFO - 127.0.0.1 - - [23/Mar/2025 19:41:25] "GET /stats HTTP/1.1" 200 -
2025-03-23 19:41:26,832 - __main__ - INFO - Received request to add 100 vectors
2025-03-23 19:41:26,832 - __main__ - DEBUG - Vectors shape: (100, 512)
2025-03-23 19:41:26,832 - __main__ - DEBUG - IDs shape: (100,)
2025-03-23 19:41:26,832 - __main__ - DEBUG - Sample IDs: [239627  60932 515828   5600 342295]...
2025-03-23 19:41:26,832 - __main__ - DEBUG - Calling coordinator.distribute_vectors
2025-03-23 19:41:26,832 - coordinator - INFO - Starting vector distribution for 100 vectors
2025-03-23 19:41:26,832 - root - INFO - LSH: Processing 100 vectors with shape (100, 512)
2025-03-23 19:41:26,832 - root - DEBUG - Table 0 hash value shape: (100, 4)
2025-03-23 19:41:26,832 - root - DEBUG - Table 1 hash value shape: (100, 4)
2025-03-23 19:41:26,832 - root - DEBUG - Table 2 hash value shape: (100, 4)
2025-03-23 19:41:26,832 - root - INFO - LSH: Combined hash shape: (100, 12)
2025-03-23 19:41:26,833 - root - INFO - LSH: Assigned vectors to shards: [(0, 36), (1, 29), (2, 35)]
2025-03-23 19:41:26,833 - coordinator - INFO - Shard assignments: (array([0, 1, 2]), array([36, 29, 35]))
2025-03-23 19:41:26,833 - coordinator - INFO - Grouped vectors by shard: ['shard_1: 29 vectors', 'shard_2: 35 vectors', 'shard_0: 36 vectors']
2025-03-23 19:41:26,833 - coordinator - INFO - Sending 29 vectors to node localhost:6002
2025-03-23 19:41:26,833 - coordinator - INFO - Sending 35 vectors to node localhost:6003
2025-03-23 19:41:26,846 - coordinator - INFO - Sending 36 vectors to node localhost:6001
2025-03-23 19:41:26,853 - urllib3.connectionpool - DEBUG - Starting new HTTP connection (1): localhost:6002
2025-03-23 19:41:26,854 - urllib3.connectionpool - DEBUG - Starting new HTTP connection (1): localhost:6003
2025-03-23 19:41:26,854 - urllib3.connectionpool - DEBUG - Starting new HTTP connection (1): localhost:6001
2025-03-23 19:41:26,859 - urllib3.connectionpool - DEBUG - http://localhost:6002 "POST /add_vectors HTTP/1.1" 200 53
2025-03-23 19:41:26,859 - coordinator - INFO - Successfully sent 29 vectors to node localhost:6002
2025-03-23 19:41:26,860 - urllib3.connectionpool - DEBUG - http://localhost:6003 "POST /add_vectors HTTP/1.1" 200 53
2025-03-23 19:41:26,860 - coordinator - INFO - Successfully sent 35 vectors to node localhost:6003
2025-03-23 19:41:26,860 - urllib3.connectionpool - DEBUG - http://localhost:6001 "POST /add_vectors HTTP/1.1" 200 53
2025-03-23 19:41:26,860 - coordinator - INFO - Successfully sent 36 vectors to node localhost:6001
2025-03-23 19:41:26,860 - coordinator - INFO - Completed vector distribution
2025-03-23 19:41:26,862 - urllib3.connectionpool - DEBUG - Starting new HTTP connection (1): localhost:6001
2025-03-23 19:41:26,863 - urllib3.connectionpool - DEBUG - http://localhost:6001 "GET /stats HTTP/1.1" 200 220
2025-03-23 19:41:26,863 - urllib3.connectionpool - DEBUG - Starting new HTTP connection (1): localhost:6002
2025-03-23 19:41:26,865 - urllib3.connectionpool - DEBUG - http://localhost:6002 "GET /stats HTTP/1.1" 200 221
2025-03-23 19:41:26,865 - urllib3.connectionpool - DEBUG - Starting new HTTP connection (1): localhost:6003
2025-03-23 19:41:26,867 - urllib3.connectionpool - DEBUG - http://localhost:6003 "GET /stats HTTP/1.1" 200 218
2025-03-23 19:41:26,867 - __main__ - INFO - System stats after adding vectors: {'total_nodes': 3, 'sharding_strategy': 'lsh', 'replication_factor': 1, 'nodes': {'localhost:6001': {'dimension': 512, 'index_type': 'FlatL2', 'memory_usage_mb': 2.89, 'metric': 'L2', 'next_id': 0, 'sample_ids': [357737, 171050, 158744, 377239, 543043], 'storage_path': 'data/shard_0', 'timestamp': 1742773286.862954, 'total_vectors': 1473}, 'localhost:6002': {'dimension': 512, 'index_type': 'FlatL2', 'memory_usage_mb': 2.78, 'metric': 'L2', 'next_id': 0, 'sample_ids': [177934, 146667, 491366, 468124, 523957], 'storage_path': 'data/shard_1', 'timestamp': 1742773286.8649101, 'total_vectors': 1418}, 'localhost:6003': {'dimension': 512, 'index_type': 'FlatL2', 'memory_usage_mb': 2.76, 'metric': 'L2', 'next_id': 0, 'sample_ids': [206487, 257896, 329614, 180487, 6763], 'storage_path': 'data/shard_2', 'timestamp': 1742773286.866731, 'total_vectors': 1409}}}
2025-03-23 19:41:26,867 - __main__ - INFO - Total vectors in system: 0
2025-03-23 19:41:26,867 - werkzeug - INFO - 127.0.0.1 - - [23/Mar/2025 19:41:26] "POST /add_vectors HTTP/1.1" 200 -
2025-03-23 19:41:26,869 - __main__ - INFO - Getting system statistics
2025-03-23 19:41:26,870 - urllib3.connectionpool - DEBUG - Starting new HTTP connection (1): localhost:6001
2025-03-23 19:41:26,871 - urllib3.connectionpool - DEBUG - http://localhost:6001 "GET /stats HTTP/1.1" 200 220
2025-03-23 19:41:26,872 - urllib3.connectionpool - DEBUG - Starting new HTTP connection (1): localhost:6002
2025-03-23 19:41:26,873 - urllib3.connectionpool - DEBUG - http://localhost:6002 "GET /stats HTTP/1.1" 200 221
2025-03-23 19:41:26,873 - urllib3.connectionpool - DEBUG - Starting new HTTP connection (1): localhost:6003
2025-03-23 19:41:26,874 - urllib3.connectionpool - DEBUG - http://localhost:6003 "GET /stats HTTP/1.1" 200 218
2025-03-23 19:41:26,875 - werkzeug - INFO - 127.0.0.1 - - [23/Mar/2025 19:41:26] "GET /stats HTTP/1.1" 200 -
2025-03-23 19:41:27,969 - __main__ - INFO - Received request to add 100 vectors
2025-03-23 19:41:27,969 - __main__ - DEBUG - Vectors shape: (100, 512)
2025-03-23 19:41:27,969 - __main__ - DEBUG - IDs shape: (100,)
2025-03-23 19:41:27,969 - __main__ - DEBUG - Sample IDs: [362434 431545 507975 190140 325031]...
2025-03-23 19:41:27,969 - __main__ - DEBUG - Calling coordinator.distribute_vectors
2025-03-23 19:41:27,969 - coordinator - INFO - Starting vector distribution for 100 vectors
2025-03-23 19:41:27,969 - root - INFO - LSH: Processing 100 vectors with shape (100, 512)
2025-03-23 19:41:27,970 - root - DEBUG - Table 0 hash value shape: (100, 4)
2025-03-23 19:41:27,970 - root - DEBUG - Table 1 hash value shape: (100, 4)
2025-03-23 19:41:27,970 - root - DEBUG - Table 2 hash value shape: (100, 4)
2025-03-23 19:41:27,970 - root - INFO - LSH: Combined hash shape: (100, 12)
2025-03-23 19:41:27,970 - root - INFO - LSH: Assigned vectors to shards: [(0, 40), (1, 29), (2, 31)]
2025-03-23 19:41:27,970 - coordinator - INFO - Shard assignments: (array([0, 1, 2]), array([40, 29, 31]))
2025-03-23 19:41:27,970 - coordinator - INFO - Grouped vectors by shard: ['shard_1: 29 vectors', 'shard_2: 31 vectors', 'shard_0: 40 vectors']
2025-03-23 19:41:27,970 - coordinator - INFO - Sending 29 vectors to node localhost:6002
2025-03-23 19:41:27,970 - coordinator - INFO - Sending 31 vectors to node localhost:6003
2025-03-23 19:41:27,983 - coordinator - INFO - Sending 40 vectors to node localhost:6001
2025-03-23 19:41:27,992 - urllib3.connectionpool - DEBUG - Starting new HTTP connection (1): localhost:6002
2025-03-23 19:41:27,992 - urllib3.connectionpool - DEBUG - Starting new HTTP connection (1): localhost:6003
2025-03-23 19:41:27,992 - urllib3.connectionpool - DEBUG - Starting new HTTP connection (1): localhost:6001
2025-03-23 19:41:27,997 - urllib3.connectionpool - DEBUG - http://localhost:6002 "POST /add_vectors HTTP/1.1" 200 53
2025-03-23 19:41:27,997 - coordinator - INFO - Successfully sent 29 vectors to node localhost:6002
2025-03-23 19:41:27,998 - urllib3.connectionpool - DEBUG - http://localhost:6003 "POST /add_vectors HTTP/1.1" 200 53
2025-03-23 19:41:27,998 - coordinator - INFO - Successfully sent 31 vectors to node localhost:6003
2025-03-23 19:41:27,999 - urllib3.connectionpool - DEBUG - http://localhost:6001 "POST /add_vectors HTTP/1.1" 200 53
2025-03-23 19:41:27,999 - coordinator - INFO - Successfully sent 40 vectors to node localhost:6001
2025-03-23 19:41:27,999 - coordinator - INFO - Completed vector distribution
2025-03-23 19:41:28,000 - urllib3.connectionpool - DEBUG - Starting new HTTP connection (1): localhost:6001
2025-03-23 19:41:28,001 - urllib3.connectionpool - DEBUG - http://localhost:6001 "GET /stats HTTP/1.1" 200 220
2025-03-23 19:41:28,002 - urllib3.connectionpool - DEBUG - Starting new HTTP connection (1): localhost:6002
2025-03-23 19:41:28,003 - urllib3.connectionpool - DEBUG - http://localhost:6002 "GET /stats HTTP/1.1" 200 220
2025-03-23 19:41:28,003 - urllib3.connectionpool - DEBUG - Starting new HTTP connection (1): localhost:6003
2025-03-23 19:41:28,004 - urllib3.connectionpool - DEBUG - http://localhost:6003 "GET /stats HTTP/1.1" 200 218
2025-03-23 19:41:28,005 - __main__ - INFO - System stats after adding vectors: {'total_nodes': 3, 'sharding_strategy': 'lsh', 'replication_factor': 1, 'nodes': {'localhost:6001': {'dimension': 512, 'index_type': 'FlatL2', 'memory_usage_mb': 2.97, 'metric': 'L2', 'next_id': 0, 'sample_ids': [357737, 171050, 158744, 377239, 543043], 'storage_path': 'data/shard_0', 'timestamp': 1742773288.001034, 'total_vectors': 1513}, 'localhost:6002': {'dimension': 512, 'index_type': 'FlatL2', 'memory_usage_mb': 2.84, 'metric': 'L2', 'next_id': 0, 'sample_ids': [177934, 146667, 491366, 468124, 523957], 'storage_path': 'data/shard_1', 'timestamp': 1742773288.002827, 'total_vectors': 1447}, 'localhost:6003': {'dimension': 512, 'index_type': 'FlatL2', 'memory_usage_mb': 2.82, 'metric': 'L2', 'next_id': 0, 'sample_ids': [206487, 257896, 329614, 180487, 6763], 'storage_path': 'data/shard_2', 'timestamp': 1742773288.004598, 'total_vectors': 1440}}}
2025-03-23 19:41:28,005 - __main__ - INFO - Total vectors in system: 0
2025-03-23 19:41:28,005 - werkzeug - INFO - 127.0.0.1 - - [23/Mar/2025 19:41:28] "POST /add_vectors HTTP/1.1" 200 -
2025-03-23 19:41:28,007 - __main__ - INFO - Getting system statistics
2025-03-23 19:41:28,007 - urllib3.connectionpool - DEBUG - Starting new HTTP connection (1): localhost:6001
2025-03-23 19:41:28,008 - urllib3.connectionpool - DEBUG - http://localhost:6001 "GET /stats HTTP/1.1" 200 221
2025-03-23 19:41:28,009 - urllib3.connectionpool - DEBUG - Starting new HTTP connection (1): localhost:6002
2025-03-23 19:41:28,010 - urllib3.connectionpool - DEBUG - http://localhost:6002 "GET /stats HTTP/1.1" 200 220
2025-03-23 19:41:28,011 - urllib3.connectionpool - DEBUG - Starting new HTTP connection (1): localhost:6003
2025-03-23 19:41:28,012 - urllib3.connectionpool - DEBUG - http://localhost:6003 "GET /stats HTTP/1.1" 200 219
2025-03-23 19:41:28,012 - werkzeug - INFO - 127.0.0.1 - - [23/Mar/2025 19:41:28] "GET /stats HTTP/1.1" 200 -
2025-03-23 19:41:29,104 - __main__ - INFO - Received request to add 100 vectors
2025-03-23 19:41:29,104 - __main__ - DEBUG - Vectors shape: (100, 512)
2025-03-23 19:41:29,104 - __main__ - DEBUG - IDs shape: (100,)
2025-03-23 19:41:29,104 - __main__ - DEBUG - Sample IDs: [427055 344795 181303 276055 226662]...
2025-03-23 19:41:29,104 - __main__ - DEBUG - Calling coordinator.distribute_vectors
2025-03-23 19:41:29,104 - coordinator - INFO - Starting vector distribution for 100 vectors
2025-03-23 19:41:29,104 - root - INFO - LSH: Processing 100 vectors with shape (100, 512)
2025-03-23 19:41:29,105 - root - DEBUG - Table 0 hash value shape: (100, 4)
2025-03-23 19:41:29,105 - root - DEBUG - Table 1 hash value shape: (100, 4)
2025-03-23 19:41:29,105 - root - DEBUG - Table 2 hash value shape: (100, 4)
2025-03-23 19:41:29,105 - root - INFO - LSH: Combined hash shape: (100, 12)
2025-03-23 19:41:29,105 - root - INFO - LSH: Assigned vectors to shards: [(0, 28), (1, 35), (2, 37)]
2025-03-23 19:41:29,105 - coordinator - INFO - Shard assignments: (array([0, 1, 2]), array([28, 35, 37]))
2025-03-23 19:41:29,105 - coordinator - INFO - Grouped vectors by shard: ['shard_2: 37 vectors', 'shard_0: 28 vectors', 'shard_1: 35 vectors']
2025-03-23 19:41:29,105 - coordinator - INFO - Sending 37 vectors to node localhost:6003
2025-03-23 19:41:29,106 - coordinator - INFO - Sending 28 vectors to node localhost:6001
2025-03-23 19:41:29,119 - coordinator - INFO - Sending 35 vectors to node localhost:6002
2025-03-23 19:41:29,127 - urllib3.connectionpool - DEBUG - Starting new HTTP connection (1): localhost:6003
2025-03-23 19:41:29,127 - urllib3.connectionpool - DEBUG - Starting new HTTP connection (1): localhost:6001
2025-03-23 19:41:29,128 - urllib3.connectionpool - DEBUG - Starting new HTTP connection (1): localhost:6002
2025-03-23 19:41:29,132 - urllib3.connectionpool - DEBUG - http://localhost:6001 "POST /add_vectors HTTP/1.1" 200 53
2025-03-23 19:41:29,132 - coordinator - INFO - Successfully sent 28 vectors to node localhost:6001
2025-03-23 19:41:29,133 - urllib3.connectionpool - DEBUG - http://localhost:6003 "POST /add_vectors HTTP/1.1" 200 53
2025-03-23 19:41:29,133 - coordinator - INFO - Successfully sent 37 vectors to node localhost:6003
2025-03-23 19:41:29,133 - urllib3.connectionpool - DEBUG - http://localhost:6002 "POST /add_vectors HTTP/1.1" 200 53
2025-03-23 19:41:29,133 - coordinator - INFO - Successfully sent 35 vectors to node localhost:6002
2025-03-23 19:41:29,133 - coordinator - INFO - Completed vector distribution
2025-03-23 19:41:29,134 - urllib3.connectionpool - DEBUG - Starting new HTTP connection (1): localhost:6001
2025-03-23 19:41:29,135 - urllib3.connectionpool - DEBUG - http://localhost:6001 "GET /stats HTTP/1.1" 200 220
2025-03-23 19:41:29,136 - urllib3.connectionpool - DEBUG - Starting new HTTP connection (1): localhost:6002
2025-03-23 19:41:29,137 - urllib3.connectionpool - DEBUG - http://localhost:6002 "GET /stats HTTP/1.1" 200 220
2025-03-23 19:41:29,138 - urllib3.connectionpool - DEBUG - Starting new HTTP connection (1): localhost:6003
2025-03-23 19:41:29,139 - urllib3.connectionpool - DEBUG - http://localhost:6003 "GET /stats HTTP/1.1" 200 217
2025-03-23 19:41:29,139 - __main__ - INFO - System stats after adding vectors: {'total_nodes': 3, 'sharding_strategy': 'lsh', 'replication_factor': 1, 'nodes': {'localhost:6001': {'dimension': 512, 'index_type': 'FlatL2', 'memory_usage_mb': 3.02, 'metric': 'L2', 'next_id': 0, 'sample_ids': [357737, 171050, 158744, 377239, 543043], 'storage_path': 'data/shard_0', 'timestamp': 1742773289.135571, 'total_vectors': 1541}, 'localhost:6002': {'dimension': 512, 'index_type': 'FlatL2', 'memory_usage_mb': 2.91, 'metric': 'L2', 'next_id': 0, 'sample_ids': [177934, 146667, 491366, 468124, 523957], 'storage_path': 'data/shard_1', 'timestamp': 1742773289.137512, 'total_vectors': 1482}, 'localhost:6003': {'dimension': 512, 'index_type': 'FlatL2', 'memory_usage_mb': 2.9, 'metric': 'L2', 'next_id': 0, 'sample_ids': [206487, 257896, 329614, 180487, 6763], 'storage_path': 'data/shard_2', 'timestamp': 1742773289.139344, 'total_vectors': 1477}}}
2025-03-23 19:41:29,139 - __main__ - INFO - Total vectors in system: 0
2025-03-23 19:41:29,140 - werkzeug - INFO - 127.0.0.1 - - [23/Mar/2025 19:41:29] "POST /add_vectors HTTP/1.1" 200 -
2025-03-23 19:41:29,142 - __main__ - INFO - Getting system statistics
2025-03-23 19:41:29,143 - urllib3.connectionpool - DEBUG - Starting new HTTP connection (1): localhost:6001
2025-03-23 19:41:29,144 - urllib3.connectionpool - DEBUG - http://localhost:6001 "GET /stats HTTP/1.1" 200 219
2025-03-23 19:41:29,144 - urllib3.connectionpool - DEBUG - Starting new HTTP connection (1): localhost:6002
2025-03-23 19:41:29,145 - urllib3.connectionpool - DEBUG - http://localhost:6002 "GET /stats HTTP/1.1" 200 220
2025-03-23 19:41:29,146 - urllib3.connectionpool - DEBUG - Starting new HTTP connection (1): localhost:6003
2025-03-23 19:41:29,148 - urllib3.connectionpool - DEBUG - http://localhost:6003 "GET /stats HTTP/1.1" 200 217
2025-03-23 19:41:29,148 - werkzeug - INFO - 127.0.0.1 - - [23/Mar/2025 19:41:29] "GET /stats HTTP/1.1" 200 -
2025-03-23 19:41:30,245 - __main__ - INFO - Received request to add 100 vectors
2025-03-23 19:41:30,247 - __main__ - DEBUG - Vectors shape: (100, 512)
2025-03-23 19:41:30,247 - __main__ - DEBUG - IDs shape: (100,)
2025-03-23 19:41:30,247 - __main__ - DEBUG - Sample IDs: [281032 231097  68628  76416  23359]...
2025-03-23 19:41:30,247 - __main__ - DEBUG - Calling coordinator.distribute_vectors
2025-03-23 19:41:30,247 - coordinator - INFO - Starting vector distribution for 100 vectors
2025-03-23 19:41:30,247 - root - INFO - LSH: Processing 100 vectors with shape (100, 512)
2025-03-23 19:41:30,247 - root - DEBUG - Table 0 hash value shape: (100, 4)
2025-03-23 19:41:30,247 - root - DEBUG - Table 1 hash value shape: (100, 4)
2025-03-23 19:41:30,248 - root - DEBUG - Table 2 hash value shape: (100, 4)
2025-03-23 19:41:30,248 - root - INFO - LSH: Combined hash shape: (100, 12)
2025-03-23 19:41:30,248 - root - INFO - LSH: Assigned vectors to shards: [(0, 33), (1, 27), (2, 40)]
2025-03-23 19:41:30,248 - coordinator - INFO - Shard assignments: (array([0, 1, 2]), array([33, 27, 40]))
2025-03-23 19:41:30,248 - coordinator - INFO - Grouped vectors by shard: ['shard_2: 40 vectors', 'shard_0: 33 vectors', 'shard_1: 27 vectors']
2025-03-23 19:41:30,248 - coordinator - INFO - Sending 40 vectors to node localhost:6003
2025-03-23 19:41:30,248 - coordinator - INFO - Sending 33 vectors to node localhost:6001
2025-03-23 19:41:30,263 - coordinator - INFO - Sending 27 vectors to node localhost:6002
2025-03-23 19:41:30,269 - urllib3.connectionpool - DEBUG - Starting new HTTP connection (1): localhost:6003
2025-03-23 19:41:30,269 - urllib3.connectionpool - DEBUG - Starting new HTTP connection (1): localhost:6001
2025-03-23 19:41:30,270 - urllib3.connectionpool - DEBUG - Starting new HTTP connection (1): localhost:6002
2025-03-23 19:41:30,275 - urllib3.connectionpool - DEBUG - http://localhost:6002 "POST /add_vectors HTTP/1.1" 200 53
2025-03-23 19:41:30,275 - coordinator - INFO - Successfully sent 27 vectors to node localhost:6002
2025-03-23 19:41:30,275 - urllib3.connectionpool - DEBUG - http://localhost:6001 "POST /add_vectors HTTP/1.1" 200 53
2025-03-23 19:41:30,276 - coordinator - INFO - Successfully sent 33 vectors to node localhost:6001
2025-03-23 19:41:30,276 - urllib3.connectionpool - DEBUG - http://localhost:6003 "POST /add_vectors HTTP/1.1" 200 53
2025-03-23 19:41:30,276 - coordinator - INFO - Successfully sent 40 vectors to node localhost:6003
2025-03-23 19:41:30,277 - coordinator - INFO - Completed vector distribution
2025-03-23 19:41:30,278 - urllib3.connectionpool - DEBUG - Starting new HTTP connection (1): localhost:6001
2025-03-23 19:41:30,279 - urllib3.connectionpool - DEBUG - http://localhost:6001 "GET /stats HTTP/1.1" 200 220
2025-03-23 19:41:30,280 - urllib3.connectionpool - DEBUG - Starting new HTTP connection (1): localhost:6002
2025-03-23 19:41:30,281 - urllib3.connectionpool - DEBUG - http://localhost:6002 "GET /stats HTTP/1.1" 200 220
2025-03-23 19:41:30,281 - urllib3.connectionpool - DEBUG - Starting new HTTP connection (1): localhost:6003
2025-03-23 19:41:30,282 - urllib3.connectionpool - DEBUG - http://localhost:6003 "GET /stats HTTP/1.1" 200 219
2025-03-23 19:41:30,282 - __main__ - INFO - System stats after adding vectors: {'total_nodes': 3, 'sharding_strategy': 'lsh', 'replication_factor': 1, 'nodes': {'localhost:6001': {'dimension': 512, 'index_type': 'FlatL2', 'memory_usage_mb': 3.09, 'metric': 'L2', 'next_id': 0, 'sample_ids': [357737, 171050, 158744, 377239, 543043], 'storage_path': 'data/shard_0', 'timestamp': 1742773290.279022, 'total_vectors': 1574}, 'localhost:6002': {'dimension': 512, 'index_type': 'FlatL2', 'memory_usage_mb': 2.96, 'metric': 'L2', 'next_id': 0, 'sample_ids': [177934, 146667, 491366, 468124, 523957], 'storage_path': 'data/shard_1', 'timestamp': 1742773290.280813, 'total_vectors': 1509}, 'localhost:6003': {'dimension': 512, 'index_type': 'FlatL2', 'memory_usage_mb': 2.97, 'metric': 'L2', 'next_id': 0, 'sample_ids': [206487, 257896, 329614, 180487, 6763], 'storage_path': 'data/shard_2', 'timestamp': 1742773290.2825909, 'total_vectors': 1517}}}
2025-03-23 19:41:30,283 - __main__ - INFO - Total vectors in system: 0
2025-03-23 19:41:30,283 - werkzeug - INFO - 127.0.0.1 - - [23/Mar/2025 19:41:30] "POST /add_vectors HTTP/1.1" 200 -
2025-03-23 19:41:30,285 - __main__ - INFO - Getting system statistics
2025-03-23 19:41:30,286 - urllib3.connectionpool - DEBUG - Starting new HTTP connection (1): localhost:6001
2025-03-23 19:41:30,287 - urllib3.connectionpool - DEBUG - http://localhost:6001 "GET /stats HTTP/1.1" 200 220
2025-03-23 19:41:30,288 - urllib3.connectionpool - DEBUG - Starting new HTTP connection (1): localhost:6002
2025-03-23 19:41:30,289 - urllib3.connectionpool - DEBUG - http://localhost:6002 "GET /stats HTTP/1.1" 200 221
2025-03-23 19:41:30,290 - urllib3.connectionpool - DEBUG - Starting new HTTP connection (1): localhost:6003
2025-03-23 19:41:30,292 - urllib3.connectionpool - DEBUG - http://localhost:6003 "GET /stats HTTP/1.1" 200 218
2025-03-23 19:41:30,292 - werkzeug - INFO - 127.0.0.1 - - [23/Mar/2025 19:41:30] "GET /stats HTTP/1.1" 200 -
2025-03-23 19:41:31,360 - __main__ - INFO - Received request to add 100 vectors
2025-03-23 19:41:31,361 - __main__ - DEBUG - Vectors shape: (100, 512)
2025-03-23 19:41:31,361 - __main__ - DEBUG - IDs shape: (100,)
2025-03-23 19:41:31,361 - __main__ - DEBUG - Sample IDs: [497344 509008 511647 555005 271471]...
2025-03-23 19:41:31,361 - __main__ - DEBUG - Calling coordinator.distribute_vectors
2025-03-23 19:41:31,361 - coordinator - INFO - Starting vector distribution for 100 vectors
2025-03-23 19:41:31,361 - root - INFO - LSH: Processing 100 vectors with shape (100, 512)
2025-03-23 19:41:31,362 - root - DEBUG - Table 0 hash value shape: (100, 4)
2025-03-23 19:41:31,362 - root - DEBUG - Table 1 hash value shape: (100, 4)
2025-03-23 19:41:31,362 - root - DEBUG - Table 2 hash value shape: (100, 4)
2025-03-23 19:41:31,362 - root - INFO - LSH: Combined hash shape: (100, 12)
2025-03-23 19:41:31,362 - root - INFO - LSH: Assigned vectors to shards: [(0, 36), (1, 26), (2, 38)]
2025-03-23 19:41:31,362 - coordinator - INFO - Shard assignments: (array([0, 1, 2]), array([36, 26, 38]))
2025-03-23 19:41:31,362 - coordinator - INFO - Grouped vectors by shard: ['shard_2: 38 vectors', 'shard_0: 36 vectors', 'shard_1: 26 vectors']
2025-03-23 19:41:31,362 - coordinator - INFO - Sending 38 vectors to node localhost:6003
2025-03-23 19:41:31,362 - coordinator - INFO - Sending 36 vectors to node localhost:6001
2025-03-23 19:41:31,377 - coordinator - INFO - Sending 26 vectors to node localhost:6002
2025-03-23 19:41:31,383 - urllib3.connectionpool - DEBUG - Starting new HTTP connection (1): localhost:6001
2025-03-23 19:41:31,383 - urllib3.connectionpool - DEBUG - Starting new HTTP connection (1): localhost:6003
2025-03-23 19:41:31,384 - urllib3.connectionpool - DEBUG - Starting new HTTP connection (1): localhost:6002
2025-03-23 19:41:31,389 - urllib3.connectionpool - DEBUG - http://localhost:6002 "POST /add_vectors HTTP/1.1" 200 53
2025-03-23 19:41:31,389 - coordinator - INFO - Successfully sent 26 vectors to node localhost:6002
2025-03-23 19:41:31,390 - urllib3.connectionpool - DEBUG - http://localhost:6001 "POST /add_vectors HTTP/1.1" 200 53
2025-03-23 19:41:31,390 - coordinator - INFO - Successfully sent 36 vectors to node localhost:6001
2025-03-23 19:41:31,390 - urllib3.connectionpool - DEBUG - http://localhost:6003 "POST /add_vectors HTTP/1.1" 200 53
2025-03-23 19:41:31,390 - coordinator - INFO - Successfully sent 38 vectors to node localhost:6003
2025-03-23 19:41:31,390 - coordinator - INFO - Completed vector distribution
2025-03-23 19:41:31,391 - urllib3.connectionpool - DEBUG - Starting new HTTP connection (1): localhost:6001
2025-03-23 19:41:31,392 - urllib3.connectionpool - DEBUG - http://localhost:6001 "GET /stats HTTP/1.1" 200 220
2025-03-23 19:41:31,393 - urllib3.connectionpool - DEBUG - Starting new HTTP connection (1): localhost:6002
2025-03-23 19:41:31,394 - urllib3.connectionpool - DEBUG - http://localhost:6002 "GET /stats HTTP/1.1" 200 220
2025-03-23 19:41:31,395 - urllib3.connectionpool - DEBUG - Starting new HTTP connection (1): localhost:6003
2025-03-23 19:41:31,397 - urllib3.connectionpool - DEBUG - http://localhost:6003 "GET /stats HTTP/1.1" 200 219
2025-03-23 19:41:31,397 - __main__ - INFO - System stats after adding vectors: {'total_nodes': 3, 'sharding_strategy': 'lsh', 'replication_factor': 1, 'nodes': {'localhost:6001': {'dimension': 512, 'index_type': 'FlatL2', 'memory_usage_mb': 3.16, 'metric': 'L2', 'next_id': 0, 'sample_ids': [357737, 171050, 158744, 377239, 543043], 'storage_path': 'data/shard_0', 'timestamp': 1742773291.392672, 'total_vectors': 1610}, 'localhost:6002': {'dimension': 512, 'index_type': 'FlatL2', 'memory_usage_mb': 3.01, 'metric': 'L2', 'next_id': 0, 'sample_ids': [177934, 146667, 491366, 468124, 523957], 'storage_path': 'data/shard_1', 'timestamp': 1742773291.394719, 'total_vectors': 1535}, 'localhost:6003': {'dimension': 512, 'index_type': 'FlatL2', 'memory_usage_mb': 3.05, 'metric': 'L2', 'next_id': 0, 'sample_ids': [206487, 257896, 329614, 180487, 6763], 'storage_path': 'data/shard_2', 'timestamp': 1742773291.3967512, 'total_vectors': 1555}}}
2025-03-23 19:41:31,397 - __main__ - INFO - Total vectors in system: 0
2025-03-23 19:41:31,397 - werkzeug - INFO - 127.0.0.1 - - [23/Mar/2025 19:41:31] "POST /add_vectors HTTP/1.1" 200 -
2025-03-23 19:41:31,399 - __main__ - INFO - Getting system statistics
2025-03-23 19:41:31,400 - urllib3.connectionpool - DEBUG - Starting new HTTP connection (1): localhost:6001
2025-03-23 19:41:31,401 - urllib3.connectionpool - DEBUG - http://localhost:6001 "GET /stats HTTP/1.1" 200 220
2025-03-23 19:41:31,402 - urllib3.connectionpool - DEBUG - Starting new HTTP connection (1): localhost:6002
2025-03-23 19:41:31,403 - urllib3.connectionpool - DEBUG - http://localhost:6002 "GET /stats HTTP/1.1" 200 220
2025-03-23 19:41:31,404 - urllib3.connectionpool - DEBUG - Starting new HTTP connection (1): localhost:6003
2025-03-23 19:41:31,405 - urllib3.connectionpool - DEBUG - http://localhost:6003 "GET /stats HTTP/1.1" 200 218
2025-03-23 19:41:31,406 - werkzeug - INFO - 127.0.0.1 - - [23/Mar/2025 19:41:31] "GET /stats HTTP/1.1" 200 -
2025-03-23 19:41:32,488 - __main__ - INFO - Received request to add 100 vectors
2025-03-23 19:41:32,488 - __main__ - DEBUG - Vectors shape: (100, 512)
2025-03-23 19:41:32,488 - __main__ - DEBUG - IDs shape: (100,)
2025-03-23 19:41:32,488 - __main__ - DEBUG - Sample IDs: [280930 520077 293794 155179 359937]...
2025-03-23 19:41:32,488 - __main__ - DEBUG - Calling coordinator.distribute_vectors
2025-03-23 19:41:32,488 - coordinator - INFO - Starting vector distribution for 100 vectors
2025-03-23 19:41:32,488 - root - INFO - LSH: Processing 100 vectors with shape (100, 512)
2025-03-23 19:41:32,489 - root - DEBUG - Table 0 hash value shape: (100, 4)
2025-03-23 19:41:32,489 - root - DEBUG - Table 1 hash value shape: (100, 4)
2025-03-23 19:41:32,489 - root - DEBUG - Table 2 hash value shape: (100, 4)
2025-03-23 19:41:32,489 - root - INFO - LSH: Combined hash shape: (100, 12)
2025-03-23 19:41:32,489 - root - INFO - LSH: Assigned vectors to shards: [(0, 34), (1, 38), (2, 28)]
2025-03-23 19:41:32,489 - coordinator - INFO - Shard assignments: (array([0, 1, 2]), array([34, 38, 28]))
2025-03-23 19:41:32,489 - coordinator - INFO - Grouped vectors by shard: ['shard_0: 34 vectors', 'shard_1: 38 vectors', 'shard_2: 28 vectors']
2025-03-23 19:41:32,489 - coordinator - INFO - Sending 34 vectors to node localhost:6001
2025-03-23 19:41:32,496 - coordinator - INFO - Sending 38 vectors to node localhost:6002
2025-03-23 19:41:32,504 - coordinator - INFO - Sending 28 vectors to node localhost:6003
2025-03-23 19:41:32,511 - urllib3.connectionpool - DEBUG - Starting new HTTP connection (1): localhost:6001
2025-03-23 19:41:32,511 - urllib3.connectionpool - DEBUG - Starting new HTTP connection (1): localhost:6002
2025-03-23 19:41:32,512 - urllib3.connectionpool - DEBUG - Starting new HTTP connection (1): localhost:6003
2025-03-23 19:41:32,517 - urllib3.connectionpool - DEBUG - http://localhost:6001 "POST /add_vectors HTTP/1.1" 200 53
2025-03-23 19:41:32,517 - coordinator - INFO - Successfully sent 34 vectors to node localhost:6001
2025-03-23 19:41:32,517 - urllib3.connectionpool - DEBUG - http://localhost:6003 "POST /add_vectors HTTP/1.1" 200 53
2025-03-23 19:41:32,517 - coordinator - INFO - Successfully sent 28 vectors to node localhost:6003
2025-03-23 19:41:32,517 - urllib3.connectionpool - DEBUG - http://localhost:6002 "POST /add_vectors HTTP/1.1" 200 53
2025-03-23 19:41:32,518 - coordinator - INFO - Successfully sent 38 vectors to node localhost:6002
2025-03-23 19:41:32,518 - coordinator - INFO - Completed vector distribution
2025-03-23 19:41:32,519 - urllib3.connectionpool - DEBUG - Starting new HTTP connection (1): localhost:6001
2025-03-23 19:41:32,520 - urllib3.connectionpool - DEBUG - http://localhost:6001 "GET /stats HTTP/1.1" 200 221
2025-03-23 19:41:32,521 - urllib3.connectionpool - DEBUG - Starting new HTTP connection (1): localhost:6002
2025-03-23 19:41:32,522 - urllib3.connectionpool - DEBUG - http://localhost:6002 "GET /stats HTTP/1.1" 200 220
2025-03-23 19:41:32,523 - urllib3.connectionpool - DEBUG - Starting new HTTP connection (1): localhost:6003
2025-03-23 19:41:32,524 - urllib3.connectionpool - DEBUG - http://localhost:6003 "GET /stats HTTP/1.1" 200 218
2025-03-23 19:41:32,524 - __main__ - INFO - System stats after adding vectors: {'total_nodes': 3, 'sharding_strategy': 'lsh', 'replication_factor': 1, 'nodes': {'localhost:6001': {'dimension': 512, 'index_type': 'FlatL2', 'memory_usage_mb': 3.22, 'metric': 'L2', 'next_id': 0, 'sample_ids': [357737, 171050, 158744, 377239, 543043], 'storage_path': 'data/shard_0', 'timestamp': 1742773292.5203042, 'total_vectors': 1644}, 'localhost:6002': {'dimension': 512, 'index_type': 'FlatL2', 'memory_usage_mb': 3.08, 'metric': 'L2', 'next_id': 0, 'sample_ids': [177934, 146667, 491366, 468124, 523957], 'storage_path': 'data/shard_1', 'timestamp': 1742773292.522305, 'total_vectors': 1573}, 'localhost:6003': {'dimension': 512, 'index_type': 'FlatL2', 'memory_usage_mb': 3.1, 'metric': 'L2', 'next_id': 0, 'sample_ids': [206487, 257896, 329614, 180487, 6763], 'storage_path': 'data/shard_2', 'timestamp': 1742773292.5240908, 'total_vectors': 1583}}}
2025-03-23 19:41:32,524 - __main__ - INFO - Total vectors in system: 0
2025-03-23 19:41:32,524 - werkzeug - INFO - 127.0.0.1 - - [23/Mar/2025 19:41:32] "POST /add_vectors HTTP/1.1" 200 -
2025-03-23 19:41:32,527 - __main__ - INFO - Getting system statistics
2025-03-23 19:41:32,527 - urllib3.connectionpool - DEBUG - Starting new HTTP connection (1): localhost:6001
2025-03-23 19:41:32,528 - urllib3.connectionpool - DEBUG - http://localhost:6001 "GET /stats HTTP/1.1" 200 221
2025-03-23 19:41:32,529 - urllib3.connectionpool - DEBUG - Starting new HTTP connection (1): localhost:6002
2025-03-23 19:41:32,531 - urllib3.connectionpool - DEBUG - http://localhost:6002 "GET /stats HTTP/1.1" 200 220
2025-03-23 19:41:32,531 - urllib3.connectionpool - DEBUG - Starting new HTTP connection (1): localhost:6003
2025-03-23 19:41:32,532 - urllib3.connectionpool - DEBUG - http://localhost:6003 "GET /stats HTTP/1.1" 200 217
2025-03-23 19:41:32,533 - werkzeug - INFO - 127.0.0.1 - - [23/Mar/2025 19:41:32] "GET /stats HTTP/1.1" 200 -
2025-03-23 19:41:33,613 - __main__ - INFO - Received request to add 100 vectors
2025-03-23 19:41:33,613 - __main__ - DEBUG - Vectors shape: (100, 512)
2025-03-23 19:41:33,613 - __main__ - DEBUG - IDs shape: (100,)
2025-03-23 19:41:33,613 - __main__ - DEBUG - Sample IDs: [110784 213547 347664 244379 449406]...
2025-03-23 19:41:33,613 - __main__ - DEBUG - Calling coordinator.distribute_vectors
2025-03-23 19:41:33,613 - coordinator - INFO - Starting vector distribution for 100 vectors
2025-03-23 19:41:33,613 - root - INFO - LSH: Processing 100 vectors with shape (100, 512)
2025-03-23 19:41:33,614 - root - DEBUG - Table 0 hash value shape: (100, 4)
2025-03-23 19:41:33,614 - root - DEBUG - Table 1 hash value shape: (100, 4)
2025-03-23 19:41:33,614 - root - DEBUG - Table 2 hash value shape: (100, 4)
2025-03-23 19:41:33,614 - root - INFO - LSH: Combined hash shape: (100, 12)
2025-03-23 19:41:33,614 - root - INFO - LSH: Assigned vectors to shards: [(0, 36), (1, 37), (2, 27)]
2025-03-23 19:41:33,614 - coordinator - INFO - Shard assignments: (array([0, 1, 2]), array([36, 37, 27]))
2025-03-23 19:41:33,614 - coordinator - INFO - Grouped vectors by shard: ['shard_2: 27 vectors', 'shard_1: 37 vectors', 'shard_0: 36 vectors']
2025-03-23 19:41:33,614 - coordinator - INFO - Sending 27 vectors to node localhost:6003
2025-03-23 19:41:33,615 - coordinator - INFO - Sending 37 vectors to node localhost:6002
2025-03-23 19:41:33,629 - coordinator - INFO - Sending 36 vectors to node localhost:6001
2025-03-23 19:41:33,636 - urllib3.connectionpool - DEBUG - Starting new HTTP connection (1): localhost:6002
2025-03-23 19:41:33,637 - urllib3.connectionpool - DEBUG - Starting new HTTP connection (1): localhost:6003
2025-03-23 19:41:33,637 - urllib3.connectionpool - DEBUG - Starting new HTTP connection (1): localhost:6001
2025-03-23 19:41:33,642 - urllib3.connectionpool - DEBUG - http://localhost:6003 "POST /add_vectors HTTP/1.1" 200 53
2025-03-23 19:41:33,642 - coordinator - INFO - Successfully sent 27 vectors to node localhost:6003
2025-03-23 19:41:33,643 - urllib3.connectionpool - DEBUG - http://localhost:6002 "POST /add_vectors HTTP/1.1" 200 53
2025-03-23 19:41:33,643 - coordinator - INFO - Successfully sent 37 vectors to node localhost:6002
2025-03-23 19:41:33,643 - urllib3.connectionpool - DEBUG - http://localhost:6001 "POST /add_vectors HTTP/1.1" 200 53
2025-03-23 19:41:33,643 - coordinator - INFO - Successfully sent 36 vectors to node localhost:6001
2025-03-23 19:41:33,643 - coordinator - INFO - Completed vector distribution
2025-03-23 19:41:33,644 - urllib3.connectionpool - DEBUG - Starting new HTTP connection (1): localhost:6001
2025-03-23 19:41:33,646 - urllib3.connectionpool - DEBUG - http://localhost:6001 "GET /stats HTTP/1.1" 200 221
2025-03-23 19:41:33,646 - urllib3.connectionpool - DEBUG - Starting new HTTP connection (1): localhost:6002
2025-03-23 19:41:33,647 - urllib3.connectionpool - DEBUG - http://localhost:6002 "GET /stats HTTP/1.1" 200 220
2025-03-23 19:41:33,648 - urllib3.connectionpool - DEBUG - Starting new HTTP connection (1): localhost:6003
2025-03-23 19:41:33,649 - urllib3.connectionpool - DEBUG - http://localhost:6003 "GET /stats HTTP/1.1" 200 218
2025-03-23 19:41:33,650 - __main__ - INFO - System stats after adding vectors: {'total_nodes': 3, 'sharding_strategy': 'lsh', 'replication_factor': 1, 'nodes': {'localhost:6001': {'dimension': 512, 'index_type': 'FlatL2', 'memory_usage_mb': 3.29, 'metric': 'L2', 'next_id': 0, 'sample_ids': [357737, 171050, 158744, 377239, 543043], 'storage_path': 'data/shard_0', 'timestamp': 1742773293.6458712, 'total_vectors': 1680}, 'localhost:6002': {'dimension': 512, 'index_type': 'FlatL2', 'memory_usage_mb': 3.16, 'metric': 'L2', 'next_id': 0, 'sample_ids': [177934, 146667, 491366, 468124, 523957], 'storage_path': 'data/shard_1', 'timestamp': 1742773293.647646, 'total_vectors': 1610}, 'localhost:6003': {'dimension': 512, 'index_type': 'FlatL2', 'memory_usage_mb': 3.16, 'metric': 'L2', 'next_id': 0, 'sample_ids': [206487, 257896, 329614, 180487, 6763], 'storage_path': 'data/shard_2', 'timestamp': 1742773293.649645, 'total_vectors': 1610}}}
2025-03-23 19:41:33,650 - __main__ - INFO - Total vectors in system: 0
2025-03-23 19:41:33,650 - werkzeug - INFO - 127.0.0.1 - - [23/Mar/2025 19:41:33] "POST /add_vectors HTTP/1.1" 200 -
2025-03-23 19:41:33,652 - __main__ - INFO - Getting system statistics
2025-03-23 19:41:33,652 - urllib3.connectionpool - DEBUG - Starting new HTTP connection (1): localhost:6001
2025-03-23 19:41:33,654 - urllib3.connectionpool - DEBUG - http://localhost:6001 "GET /stats HTTP/1.1" 200 220
2025-03-23 19:41:33,654 - urllib3.connectionpool - DEBUG - Starting new HTTP connection (1): localhost:6002
2025-03-23 19:41:33,655 - urllib3.connectionpool - DEBUG - http://localhost:6002 "GET /stats HTTP/1.1" 200 220
2025-03-23 19:41:33,656 - urllib3.connectionpool - DEBUG - Starting new HTTP connection (1): localhost:6003
2025-03-23 19:41:33,657 - urllib3.connectionpool - DEBUG - http://localhost:6003 "GET /stats HTTP/1.1" 200 218
2025-03-23 19:41:33,658 - werkzeug - INFO - 127.0.0.1 - - [23/Mar/2025 19:41:33] "GET /stats HTTP/1.1" 200 -
2025-03-23 19:41:34,752 - __main__ - INFO - Received request to add 100 vectors
2025-03-23 19:41:34,753 - __main__ - DEBUG - Vectors shape: (100, 512)
2025-03-23 19:41:34,753 - __main__ - DEBUG - IDs shape: (100,)
2025-03-23 19:41:34,753 - __main__ - DEBUG - Sample IDs: [188906 291551 553339 512403 565853]...
2025-03-23 19:41:34,754 - __main__ - DEBUG - Calling coordinator.distribute_vectors
2025-03-23 19:41:34,754 - coordinator - INFO - Starting vector distribution for 100 vectors
2025-03-23 19:41:34,754 - root - INFO - LSH: Processing 100 vectors with shape (100, 512)
2025-03-23 19:41:34,754 - root - DEBUG - Table 0 hash value shape: (100, 4)
2025-03-23 19:41:34,754 - root - DEBUG - Table 1 hash value shape: (100, 4)
2025-03-23 19:41:34,754 - root - DEBUG - Table 2 hash value shape: (100, 4)
2025-03-23 19:41:34,754 - root - INFO - LSH: Combined hash shape: (100, 12)
2025-03-23 19:41:34,755 - root - INFO - LSH: Assigned vectors to shards: [(0, 37), (1, 35), (2, 28)]
2025-03-23 19:41:34,755 - coordinator - INFO - Shard assignments: (array([0, 1, 2]), array([37, 35, 28]))
2025-03-23 19:41:34,755 - coordinator - INFO - Grouped vectors by shard: ['shard_2: 28 vectors', 'shard_1: 35 vectors', 'shard_0: 37 vectors']
2025-03-23 19:41:34,755 - coordinator - INFO - Sending 28 vectors to node localhost:6003
2025-03-23 19:41:34,755 - coordinator - INFO - Sending 35 vectors to node localhost:6002
2025-03-23 19:41:34,761 - coordinator - INFO - Sending 37 vectors to node localhost:6001
2025-03-23 19:41:34,776 - urllib3.connectionpool - DEBUG - Starting new HTTP connection (1): localhost:6003
2025-03-23 19:41:34,776 - urllib3.connectionpool - DEBUG - Starting new HTTP connection (1): localhost:6002
2025-03-23 19:41:34,777 - urllib3.connectionpool - DEBUG - Starting new HTTP connection (1): localhost:6001
2025-03-23 19:41:34,781 - urllib3.connectionpool - DEBUG - http://localhost:6003 "POST /add_vectors HTTP/1.1" 200 53
2025-03-23 19:41:34,781 - coordinator - INFO - Successfully sent 28 vectors to node localhost:6003
2025-03-23 19:41:34,782 - urllib3.connectionpool - DEBUG - http://localhost:6002 "POST /add_vectors HTTP/1.1" 200 53
2025-03-23 19:41:34,783 - coordinator - INFO - Successfully sent 35 vectors to node localhost:6002
2025-03-23 19:41:34,783 - urllib3.connectionpool - DEBUG - http://localhost:6001 "POST /add_vectors HTTP/1.1" 200 53
2025-03-23 19:41:34,783 - coordinator - INFO - Successfully sent 37 vectors to node localhost:6001
2025-03-23 19:41:34,783 - coordinator - INFO - Completed vector distribution
2025-03-23 19:41:34,785 - urllib3.connectionpool - DEBUG - Starting new HTTP connection (1): localhost:6001
2025-03-23 19:41:34,786 - urllib3.connectionpool - DEBUG - http://localhost:6001 "GET /stats HTTP/1.1" 200 221
2025-03-23 19:41:34,786 - urllib3.connectionpool - DEBUG - Starting new HTTP connection (1): localhost:6002
2025-03-23 19:41:34,788 - urllib3.connectionpool - DEBUG - http://localhost:6002 "GET /stats HTTP/1.1" 200 220
2025-03-23 19:41:34,788 - urllib3.connectionpool - DEBUG - Starting new HTTP connection (1): localhost:6003
2025-03-23 19:41:34,789 - urllib3.connectionpool - DEBUG - http://localhost:6003 "GET /stats HTTP/1.1" 200 218
2025-03-23 19:41:34,790 - __main__ - INFO - System stats after adding vectors: {'total_nodes': 3, 'sharding_strategy': 'lsh', 'replication_factor': 1, 'nodes': {'localhost:6001': {'dimension': 512, 'index_type': 'FlatL2', 'memory_usage_mb': 3.37, 'metric': 'L2', 'next_id': 0, 'sample_ids': [357737, 171050, 158744, 377239, 543043], 'storage_path': 'data/shard_0', 'timestamp': 1742773294.7857962, 'total_vectors': 1717}, 'localhost:6002': {'dimension': 512, 'index_type': 'FlatL2', 'memory_usage_mb': 3.23, 'metric': 'L2', 'next_id': 0, 'sample_ids': [177934, 146667, 491366, 468124, 523957], 'storage_path': 'data/shard_1', 'timestamp': 1742773294.787811, 'total_vectors': 1645}, 'localhost:6003': {'dimension': 512, 'index_type': 'FlatL2', 'memory_usage_mb': 3.21, 'metric': 'L2', 'next_id': 0, 'sample_ids': [206487, 257896, 329614, 180487, 6763], 'storage_path': 'data/shard_2', 'timestamp': 1742773294.789647, 'total_vectors': 1638}}}
2025-03-23 19:41:34,790 - __main__ - INFO - Total vectors in system: 0
2025-03-23 19:41:34,790 - werkzeug - INFO - 127.0.0.1 - - [23/Mar/2025 19:41:34] "POST /add_vectors HTTP/1.1" 200 -
2025-03-23 19:41:34,792 - __main__ - INFO - Getting system statistics
2025-03-23 19:41:34,792 - urllib3.connectionpool - DEBUG - Starting new HTTP connection (1): localhost:6001
2025-03-23 19:41:34,794 - urllib3.connectionpool - DEBUG - http://localhost:6001 "GET /stats HTTP/1.1" 200 220
2025-03-23 19:41:34,795 - urllib3.connectionpool - DEBUG - Starting new HTTP connection (1): localhost:6002
2025-03-23 19:41:34,796 - urllib3.connectionpool - DEBUG - http://localhost:6002 "GET /stats HTTP/1.1" 200 221
2025-03-23 19:41:34,796 - urllib3.connectionpool - DEBUG - Starting new HTTP connection (1): localhost:6003
2025-03-23 19:41:34,798 - urllib3.connectionpool - DEBUG - http://localhost:6003 "GET /stats HTTP/1.1" 200 218
2025-03-23 19:41:34,798 - werkzeug - INFO - 127.0.0.1 - - [23/Mar/2025 19:41:34] "GET /stats HTTP/1.1" 200 -
2025-03-23 19:41:57,778 - __main__ - DEBUG - Received search request with query_vector shape=(1, 512), k=10
2025-03-23 19:41:57,779 - __main__ - DEBUG - Calling coordinator.search
2025-03-23 19:41:57,779 - coordinator - DEBUG - Starting search with query_vector shape=(1, 512), k=10
2025-03-23 19:41:57,779 - root - DEBUG - Getting candidate shards for query vector with shape (1, 512)
2025-03-23 19:41:57,780 - root - DEBUG - Table 0 hash value shape: (1, 4)
2025-03-23 19:41:57,780 - root - DEBUG - Table 1 hash value shape: (1, 4)
2025-03-23 19:41:57,780 - root - DEBUG - Table 2 hash value shape: (1, 4)
2025-03-23 19:41:57,780 - root - DEBUG - Assigned vector to shard 2
2025-03-23 19:41:57,780 - root - DEBUG - Table 0 hash value shape: (1, 4)
2025-03-23 19:41:57,780 - root - DEBUG - Table 1 hash value shape: (1, 4)
2025-03-23 19:41:57,780 - root - DEBUG - Table 2 hash value shape: (1, 4)
2025-03-23 19:41:57,781 - root - DEBUG - Selected candidate shards: [0, 2]
2025-03-23 19:41:57,781 - coordinator - DEBUG - Candidate shards: [0, 2]
2025-03-23 19:41:57,781 - coordinator - DEBUG - Mapping shard_id 0 to node_idx 0 (out of 3 nodes)
2025-03-23 19:41:57,781 - coordinator - DEBUG - Submitting search to shard 0 at localhost:6001
2025-03-23 19:41:57,781 - coordinator - DEBUG - Sending search request to http://localhost:6001/search
2025-03-23 19:41:57,781 - coordinator - DEBUG - Mapping shard_id 2 to node_idx 2 (out of 3 nodes)
2025-03-23 19:41:57,783 - coordinator - DEBUG - Submitting search to shard 2 at localhost:6003
2025-03-23 19:41:57,784 - coordinator - DEBUG - Sending search request to http://localhost:6003/search
2025-03-23 19:41:57,786 - urllib3.connectionpool - DEBUG - Starting new HTTP connection (1): localhost:6003
2025-03-23 19:41:57,787 - urllib3.connectionpool - DEBUG - Starting new HTTP connection (1): localhost:6001
2025-03-23 19:41:57,797 - urllib3.connectionpool - DEBUG - http://localhost:6001 "POST /search HTTP/1.1" 200 305
2025-03-23 19:41:57,798 - coordinator - DEBUG - Received response from http://localhost:6001/search: {'distances': [[174.54026794433594, 184.19842529296875, 186.17422485351562, 189.0262908935547, 189.57101440429688, 209.95437622070312, 213.28305053710938, 215.8924560546875, 232.5655517578125, 239.72811889648438]], 'indices': [[342397, 576031, 96825, 236308, 118921, 451714, 38118, 509014, 327605, 89078]], 'status': 'success'}
2025-03-23 19:41:57,798 - coordinator - DEBUG - Valid results from http://localhost:6001/search: distances shape=(1, 10), indices shape=(1, 10)
2025-03-23 19:41:57,799 - coordinator - DEBUG - Received search results: distances shape=(1, 10), indices shape=(1, 10)
2025-03-23 19:41:57,799 - urllib3.connectionpool - DEBUG - http://localhost:6003 "POST /search HTTP/1.1" 200 307
2025-03-23 19:41:57,799 - coordinator - DEBUG - Received response from http://localhost:6003/search: {'distances': [[6.294117450714111, 184.20773315429688, 209.05474853515625, 230.70066833496094, 241.34524536132812, 252.39779663085938, 259.8319091796875, 272.6663818359375, 279.2589111328125, 288.94976806640625]], 'indices': [[334767, 314709, 252507, 573258, 464144, 347265, 465836, 309467, 361919, 445602]], 'status': 'success'}
2025-03-23 19:41:57,799 - coordinator - DEBUG - Valid results from http://localhost:6003/search: distances shape=(1, 10), indices shape=(1, 10)
2025-03-23 19:41:57,799 - coordinator - DEBUG - Received search results: distances shape=(1, 10), indices shape=(1, 10)
2025-03-23 19:41:57,800 - coordinator - DEBUG - All distances: [array([174.54026794, 184.19842529, 186.17422485, 189.02629089,
       189.5710144 , 209.95437622, 213.28305054, 215.89245605,
       232.56555176, 239.7281189 ]), array([  6.29411745, 184.20773315, 209.05474854, 230.70066833,
       241.34524536, 252.39779663, 259.83190918, 272.66638184,
       279.25891113, 288.94976807])]
2025-03-23 19:41:57,800 - coordinator - DEBUG - All indices: [array([342397, 576031,  96825, 236308, 118921, 451714,  38118, 509014,
       327605,  89078]), array([334767, 314709, 252507, 573258, 464144, 347265, 465836, 309467,
       361919, 445602])]
2025-03-23 19:41:57,800 - coordinator - DEBUG - all_distances shape: (2, 10), all_indices shape: (2, 10)
2025-03-23 19:41:57,800 - coordinator - DEBUG - Using k=2 for sorting
2025-03-23 19:41:57,800 - coordinator - DEBUG - sorted_idx: [[0 1 2 3 4 5 6 7 8 9]
 [0 1 2 3 4 5 6 7 8 9]]
2025-03-23 19:41:57,800 - coordinator - ERROR - Index out of bounds: max sorted_idx=9, len(all_distances)=2
2025-03-23 19:41:57,800 - coordinator - DEBUG - Returning results: distances=[[174.54026794 184.19842529 186.17422485 189.02629089 189.5710144
  209.95437622 213.28305054 215.89245605 232.56555176 239.7281189 ]
 [  6.29411745 184.20773315 209.05474854 230.70066833 241.34524536
  252.39779663 259.83190918 272.66638184 279.25891113 288.94976807]
 [174.54026794 184.19842529 186.17422485 189.02629089 189.5710144
  209.95437622 213.28305054 215.89245605 232.56555176 239.7281189 ]
 [  6.29411745 184.20773315 209.05474854 230.70066833 241.34524536
  252.39779663 259.83190918 272.66638184 279.25891113 288.94976807]], indices=[[342397 576031  96825 236308 118921 451714  38118 509014 327605  89078]
 [334767 314709 252507 573258 464144 347265 465836 309467 361919 445602]
 [342397 576031  96825 236308 118921 451714  38118 509014 327605  89078]
 [334767 314709 252507 573258 464144 347265 465836 309467 361919 445602]]
2025-03-23 19:41:57,800 - __main__ - DEBUG - Search results: distances shape=(4, 10), indices shape=(4, 10)
2025-03-23 19:41:57,801 - __main__ - DEBUG - Returning search results: 4 items
2025-03-23 19:41:57,801 - werkzeug - INFO - 127.0.0.1 - - [23/Mar/2025 19:41:57] "POST /search HTTP/1.1" 200 -
2025-03-23 19:42:42,858 - __main__ - DEBUG - Received search request with query_vector shape=(1, 512), k=10
2025-03-23 19:42:42,859 - __main__ - DEBUG - Calling coordinator.search
2025-03-23 19:42:42,859 - coordinator - DEBUG - Starting search with query_vector shape=(1, 512), k=10
2025-03-23 19:42:42,859 - root - DEBUG - Getting candidate shards for query vector with shape (1, 512)
2025-03-23 19:42:42,860 - root - DEBUG - Table 0 hash value shape: (1, 4)
2025-03-23 19:42:42,860 - root - DEBUG - Table 1 hash value shape: (1, 4)
2025-03-23 19:42:42,860 - root - DEBUG - Table 2 hash value shape: (1, 4)
2025-03-23 19:42:42,860 - root - DEBUG - Assigned vector to shard 2
2025-03-23 19:42:42,860 - root - DEBUG - Table 0 hash value shape: (1, 4)
2025-03-23 19:42:42,860 - root - DEBUG - Table 1 hash value shape: (1, 4)
2025-03-23 19:42:42,860 - root - DEBUG - Table 2 hash value shape: (1, 4)
2025-03-23 19:42:42,860 - root - DEBUG - Selected candidate shards: [0, 2]
2025-03-23 19:42:42,860 - coordinator - DEBUG - Candidate shards: [0, 2]
2025-03-23 19:42:42,861 - coordinator - DEBUG - Mapping shard_id 0 to node_idx 0 (out of 3 nodes)
2025-03-23 19:42:42,861 - coordinator - DEBUG - Submitting search to shard 0 at localhost:6001
2025-03-23 19:42:42,861 - coordinator - DEBUG - Sending search request to http://localhost:6001/search
2025-03-23 19:42:42,861 - coordinator - DEBUG - Mapping shard_id 2 to node_idx 2 (out of 3 nodes)
2025-03-23 19:42:42,863 - coordinator - DEBUG - Submitting search to shard 2 at localhost:6003
2025-03-23 19:42:42,864 - coordinator - DEBUG - Sending search request to http://localhost:6003/search
2025-03-23 19:42:42,867 - urllib3.connectionpool - DEBUG - Starting new HTTP connection (1): localhost:6001
2025-03-23 19:42:42,868 - urllib3.connectionpool - DEBUG - Starting new HTTP connection (1): localhost:6003
2025-03-23 19:42:42,880 - urllib3.connectionpool - DEBUG - http://localhost:6003 "POST /search HTTP/1.1" 200 306
2025-03-23 19:42:42,881 - coordinator - DEBUG - Received response from http://localhost:6003/search: {'distances': [[5.839263916015625, 201.77398681640625, 229.59075927734375, 241.66351318359375, 254.0713653564453, 256.43914794921875, 270.29718017578125, 278.4067077636719, 287.8733215332031, 293.62103271484375]], 'indices': [[308193, 349678, 544306, 173044, 391648, 247806, 58655, 130465, 512248, 131431]], 'status': 'success'}
2025-03-23 19:42:42,881 - coordinator - DEBUG - Valid results from http://localhost:6003/search: distances shape=(1, 10), indices shape=(1, 10)
2025-03-23 19:42:42,881 - urllib3.connectionpool - DEBUG - http://localhost:6001 "POST /search HTTP/1.1" 200 303
2025-03-23 19:42:42,882 - coordinator - DEBUG - Received search results: distances shape=(1, 10), indices shape=(1, 10)
2025-03-23 19:42:42,882 - coordinator - DEBUG - Received response from http://localhost:6001/search: {'distances': [[176.96954345703125, 179.1200408935547, 232.2452392578125, 236.07369995117188, 262.7195129394531, 267.7439270019531, 281.5191650390625, 283.35015869140625, 294.8568115234375, 296.1485595703125]], 'indices': [[105455, 304396, 455352, 519491, 382122, 94157, 519522, 145591, 409542, 140658]], 'status': 'success'}
2025-03-23 19:42:42,882 - coordinator - DEBUG - Valid results from http://localhost:6001/search: distances shape=(1, 10), indices shape=(1, 10)
2025-03-23 19:42:42,882 - coordinator - DEBUG - Received search results: distances shape=(1, 10), indices shape=(1, 10)
2025-03-23 19:42:42,883 - coordinator - DEBUG - All distances: [array([  5.83926392, 201.77398682, 229.59075928, 241.66351318,
       254.07136536, 256.43914795, 270.29718018, 278.40670776,
       287.87332153, 293.62103271]), array([176.96954346, 179.12004089, 232.24523926, 236.07369995,
       262.71951294, 267.743927  , 281.51916504, 283.35015869,
       294.85681152, 296.14855957])]
2025-03-23 19:42:42,883 - coordinator - DEBUG - All indices: [array([308193, 349678, 544306, 173044, 391648, 247806,  58655, 130465,
       512248, 131431]), array([105455, 304396, 455352, 519491, 382122,  94157, 519522, 145591,
       409542, 140658])]
2025-03-23 19:42:42,883 - coordinator - DEBUG - all_distances shape: (2, 10), all_indices shape: (2, 10)
2025-03-23 19:42:42,883 - coordinator - DEBUG - Using k=2 for sorting
2025-03-23 19:42:42,883 - coordinator - DEBUG - sorted_idx: [[0 1 2 3 4 5 6 7 8 9]
 [0 1 2 3 4 5 6 7 8 9]]
2025-03-23 19:42:42,883 - coordinator - ERROR - Index out of bounds: max sorted_idx=9, len(all_distances)=2
2025-03-23 19:42:42,883 - coordinator - DEBUG - Returning results: distances=[[  5.83926392 201.77398682 229.59075928 241.66351318 254.07136536
  256.43914795 270.29718018 278.40670776 287.87332153 293.62103271]
 [176.96954346 179.12004089 232.24523926 236.07369995 262.71951294
  267.743927   281.51916504 283.35015869 294.85681152 296.14855957]
 [  5.83926392 201.77398682 229.59075928 241.66351318 254.07136536
  256.43914795 270.29718018 278.40670776 287.87332153 293.62103271]
 [176.96954346 179.12004089 232.24523926 236.07369995 262.71951294
  267.743927   281.51916504 283.35015869 294.85681152 296.14855957]], indices=[[308193 349678 544306 173044 391648 247806  58655 130465 512248 131431]
 [105455 304396 455352 519491 382122  94157 519522 145591 409542 140658]
 [308193 349678 544306 173044 391648 247806  58655 130465 512248 131431]
 [105455 304396 455352 519491 382122  94157 519522 145591 409542 140658]]
2025-03-23 19:42:42,883 - __main__ - DEBUG - Search results: distances shape=(4, 10), indices shape=(4, 10)
2025-03-23 19:42:42,883 - __main__ - DEBUG - Returning search results: 4 items
2025-03-23 19:42:42,884 - werkzeug - INFO - 127.0.0.1 - - [23/Mar/2025 19:42:42] "POST /search HTTP/1.1" 200 -
2025-03-23 19:43:26,060 - __main__ - DEBUG - Received search request with query_vector shape=(1, 512), k=10
2025-03-23 19:43:26,061 - __main__ - DEBUG - Calling coordinator.search
2025-03-23 19:43:26,061 - coordinator - DEBUG - Starting search with query_vector shape=(1, 512), k=10
2025-03-23 19:43:26,061 - root - DEBUG - Getting candidate shards for query vector with shape (1, 512)
2025-03-23 19:43:26,062 - root - DEBUG - Table 0 hash value shape: (1, 4)
2025-03-23 19:43:26,062 - root - DEBUG - Table 1 hash value shape: (1, 4)
2025-03-23 19:43:26,062 - root - DEBUG - Table 2 hash value shape: (1, 4)
2025-03-23 19:43:26,062 - root - DEBUG - Assigned vector to shard 1
2025-03-23 19:43:26,063 - root - DEBUG - Table 0 hash value shape: (1, 4)
2025-03-23 19:43:26,063 - root - DEBUG - Table 1 hash value shape: (1, 4)
2025-03-23 19:43:26,063 - root - DEBUG - Table 2 hash value shape: (1, 4)
2025-03-23 19:43:26,063 - root - DEBUG - Selected candidate shards: [1, 2]
2025-03-23 19:43:26,063 - coordinator - DEBUG - Candidate shards: [1, 2]
2025-03-23 19:43:26,063 - coordinator - DEBUG - Mapping shard_id 1 to node_idx 1 (out of 3 nodes)
2025-03-23 19:43:26,063 - coordinator - DEBUG - Submitting search to shard 1 at localhost:6002
2025-03-23 19:43:26,063 - coordinator - DEBUG - Sending search request to http://localhost:6002/search
2025-03-23 19:43:26,063 - coordinator - DEBUG - Mapping shard_id 2 to node_idx 2 (out of 3 nodes)
2025-03-23 19:43:26,065 - coordinator - DEBUG - Submitting search to shard 2 at localhost:6003
2025-03-23 19:43:26,066 - coordinator - DEBUG - Sending search request to http://localhost:6003/search
2025-03-23 19:43:26,068 - urllib3.connectionpool - DEBUG - Starting new HTTP connection (1): localhost:6002
2025-03-23 19:43:26,069 - urllib3.connectionpool - DEBUG - Starting new HTTP connection (1): localhost:6003
2025-03-23 19:43:26,082 - urllib3.connectionpool - DEBUG - http://localhost:6003 "POST /search HTTP/1.1" 200 304
2025-03-23 19:43:26,083 - coordinator - DEBUG - Received response from http://localhost:6003/search: {'distances': [[7.617677688598633, 221.25828552246094, 232.12802124023438, 243.28683471679688, 250.91009521484375, 251.56356811523438, 256.0752258300781, 281.4809265136719, 282.3612976074219, 299.2816467285156]], 'indices': [[532129, 575815, 520871, 323151, 306700, 179214, 329455, 24144, 32038, 429623]], 'status': 'success'}
2025-03-23 19:43:26,083 - urllib3.connectionpool - DEBUG - http://localhost:6002 "POST /search HTTP/1.1" 200 301
2025-03-23 19:43:26,083 - coordinator - DEBUG - Valid results from http://localhost:6003/search: distances shape=(1, 10), indices shape=(1, 10)
2025-03-23 19:43:26,083 - coordinator - DEBUG - Received response from http://localhost:6002/search: {'distances': [[183.08309936523438, 204.83010864257812, 245.91465759277344, 259.2183837890625, 270.204345703125, 273.500244140625, 287.2481689453125, 298.7044677734375, 312.8169250488281, 315.3875732421875]], 'indices': [[436315, 451693, 337498, 256916, 75456, 307172, 402433, 361238, 357430, 294831]], 'status': 'success'}
2025-03-23 19:43:26,084 - coordinator - DEBUG - Received search results: distances shape=(1, 10), indices shape=(1, 10)
2025-03-23 19:43:26,084 - coordinator - DEBUG - Valid results from http://localhost:6002/search: distances shape=(1, 10), indices shape=(1, 10)
2025-03-23 19:43:26,084 - coordinator - DEBUG - Received search results: distances shape=(1, 10), indices shape=(1, 10)
2025-03-23 19:43:26,085 - coordinator - DEBUG - All distances: [array([  7.61767769, 221.25828552, 232.12802124, 243.28683472,
       250.91009521, 251.56356812, 256.07522583, 281.48092651,
       282.36129761, 299.28164673]), array([183.08309937, 204.83010864, 245.91465759, 259.21838379,
       270.2043457 , 273.50024414, 287.24816895, 298.70446777,
       312.81692505, 315.38757324])]
2025-03-23 19:43:26,085 - coordinator - DEBUG - All indices: [array([532129, 575815, 520871, 323151, 306700, 179214, 329455,  24144,
        32038, 429623]), array([436315, 451693, 337498, 256916,  75456, 307172, 402433, 361238,
       357430, 294831])]
2025-03-23 19:43:26,085 - coordinator - DEBUG - all_distances shape: (2, 10), all_indices shape: (2, 10)
2025-03-23 19:43:26,085 - coordinator - DEBUG - Using k=2 for sorting
2025-03-23 19:43:26,085 - coordinator - DEBUG - sorted_idx: [[0 1 2 3 4 5 6 7 8 9]
 [0 1 2 3 4 5 6 7 8 9]]
2025-03-23 19:43:26,085 - coordinator - ERROR - Index out of bounds: max sorted_idx=9, len(all_distances)=2
2025-03-23 19:43:26,085 - coordinator - DEBUG - Returning results: distances=[[  7.61767769 221.25828552 232.12802124 243.28683472 250.91009521
  251.56356812 256.07522583 281.48092651 282.36129761 299.28164673]
 [183.08309937 204.83010864 245.91465759 259.21838379 270.2043457
  273.50024414 287.24816895 298.70446777 312.81692505 315.38757324]
 [  7.61767769 221.25828552 232.12802124 243.28683472 250.91009521
  251.56356812 256.07522583 281.48092651 282.36129761 299.28164673]
 [183.08309937 204.83010864 245.91465759 259.21838379 270.2043457
  273.50024414 287.24816895 298.70446777 312.81692505 315.38757324]], indices=[[532129 575815 520871 323151 306700 179214 329455  24144  32038 429623]
 [436315 451693 337498 256916  75456 307172 402433 361238 357430 294831]
 [532129 575815 520871 323151 306700 179214 329455  24144  32038 429623]
 [436315 451693 337498 256916  75456 307172 402433 361238 357430 294831]]
2025-03-23 19:43:26,085 - __main__ - DEBUG - Search results: distances shape=(4, 10), indices shape=(4, 10)
2025-03-23 19:43:26,085 - __main__ - DEBUG - Returning search results: 4 items
2025-03-23 19:43:26,086 - werkzeug - INFO - 127.0.0.1 - - [23/Mar/2025 19:43:26] "POST /search HTTP/1.1" 200 -
2025-03-23 19:43:42,960 - __main__ - DEBUG - Received search request with query_vector shape=(1, 512), k=1
2025-03-23 19:43:42,961 - __main__ - DEBUG - Calling coordinator.search
2025-03-23 19:43:42,961 - coordinator - DEBUG - Starting search with query_vector shape=(1, 512), k=1
2025-03-23 19:43:42,961 - root - DEBUG - Getting candidate shards for query vector with shape (1, 512)
2025-03-23 19:43:42,961 - root - DEBUG - Table 0 hash value shape: (1, 4)
2025-03-23 19:43:42,961 - root - DEBUG - Table 1 hash value shape: (1, 4)
2025-03-23 19:43:42,961 - root - DEBUG - Table 2 hash value shape: (1, 4)
2025-03-23 19:43:42,961 - root - DEBUG - Assigned vector to shard 2
2025-03-23 19:43:42,962 - root - DEBUG - Table 0 hash value shape: (1, 4)
2025-03-23 19:43:42,962 - root - DEBUG - Table 1 hash value shape: (1, 4)
2025-03-23 19:43:42,962 - root - DEBUG - Table 2 hash value shape: (1, 4)
2025-03-23 19:43:42,962 - root - DEBUG - Selected candidate shards: [0, 2]
2025-03-23 19:43:42,962 - coordinator - DEBUG - Candidate shards: [0, 2]
2025-03-23 19:43:42,962 - coordinator - DEBUG - Mapping shard_id 0 to node_idx 0 (out of 3 nodes)
2025-03-23 19:43:42,962 - coordinator - DEBUG - Submitting search to shard 0 at localhost:6001
2025-03-23 19:43:42,962 - coordinator - DEBUG - Sending search request to http://localhost:6001/search
2025-03-23 19:43:42,962 - coordinator - DEBUG - Mapping shard_id 2 to node_idx 2 (out of 3 nodes)
2025-03-23 19:43:42,964 - coordinator - DEBUG - Submitting search to shard 2 at localhost:6003
2025-03-23 19:43:42,964 - coordinator - DEBUG - Sending search request to http://localhost:6003/search
2025-03-23 19:43:42,966 - urllib3.connectionpool - DEBUG - Starting new HTTP connection (1): localhost:6001
2025-03-23 19:43:42,966 - urllib3.connectionpool - DEBUG - Starting new HTTP connection (1): localhost:6003
2025-03-23 19:43:42,972 - urllib3.connectionpool - DEBUG - http://localhost:6003 "POST /search HTTP/1.1" 200 77
2025-03-23 19:43:42,973 - coordinator - DEBUG - Received response from http://localhost:6003/search: {'distances': [[223.68067932128906]], 'indices': [[572555]], 'status': 'success'}
2025-03-23 19:43:42,973 - coordinator - DEBUG - Valid results from http://localhost:6003/search: distances shape=(1, 1), indices shape=(1, 1)
2025-03-23 19:43:42,973 - coordinator - DEBUG - Received search results: distances shape=(1, 1), indices shape=(1, 1)
2025-03-23 19:43:42,975 - urllib3.connectionpool - DEBUG - http://localhost:6001 "POST /search HTTP/1.1" 200 76
2025-03-23 19:43:42,976 - coordinator - DEBUG - Received response from http://localhost:6001/search: {'distances': [[6.050220012664795]], 'indices': [[379800]], 'status': 'success'}
2025-03-23 19:43:42,976 - coordinator - DEBUG - Valid results from http://localhost:6001/search: distances shape=(1, 1), indices shape=(1, 1)
2025-03-23 19:43:42,976 - coordinator - DEBUG - Received search results: distances shape=(1, 1), indices shape=(1, 1)
2025-03-23 19:43:42,977 - coordinator - DEBUG - All distances: [array([223.68067932]), array([6.05022001])]
2025-03-23 19:43:42,977 - coordinator - DEBUG - All indices: [array([572555]), array([379800])]
2025-03-23 19:43:42,977 - coordinator - DEBUG - all_distances shape: (2, 1), all_indices shape: (2, 1)
2025-03-23 19:43:42,977 - coordinator - DEBUG - Using k=1 for sorting
2025-03-23 19:43:42,977 - coordinator - DEBUG - sorted_idx: [[0]]
2025-03-23 19:43:42,977 - coordinator - DEBUG - Returning results: distances=[[[223.68067932]]], indices=[[[572555]]]
2025-03-23 19:43:42,977 - __main__ - DEBUG - Search results: distances shape=(1, 1, 1), indices shape=(1, 1, 1)
2025-03-23 19:43:42,977 - __main__ - DEBUG - Returning search results: 1 items
2025-03-23 19:43:42,978 - werkzeug - INFO - 127.0.0.1 - - [23/Mar/2025 19:43:42] "POST /search HTTP/1.1" 200 -
2025-03-23 19:43:42,982 - __main__ - DEBUG - Received search request with query_vector shape=(1, 512), k=1
2025-03-23 19:43:42,983 - __main__ - DEBUG - Calling coordinator.search
2025-03-23 19:43:42,983 - coordinator - DEBUG - Starting search with query_vector shape=(1, 512), k=1
2025-03-23 19:43:42,983 - root - DEBUG - Getting candidate shards for query vector with shape (1, 512)
2025-03-23 19:43:42,983 - root - DEBUG - Table 0 hash value shape: (1, 4)
2025-03-23 19:43:42,983 - root - DEBUG - Table 1 hash value shape: (1, 4)
2025-03-23 19:43:42,983 - root - DEBUG - Table 2 hash value shape: (1, 4)
2025-03-23 19:43:42,984 - root - DEBUG - Assigned vector to shard 2
2025-03-23 19:43:42,984 - root - DEBUG - Table 0 hash value shape: (1, 4)
2025-03-23 19:43:42,984 - root - DEBUG - Table 1 hash value shape: (1, 4)
2025-03-23 19:43:42,984 - root - DEBUG - Table 2 hash value shape: (1, 4)
2025-03-23 19:43:42,984 - root - DEBUG - Selected candidate shards: [1, 2]
2025-03-23 19:43:42,984 - coordinator - DEBUG - Candidate shards: [1, 2]
2025-03-23 19:43:42,984 - coordinator - DEBUG - Mapping shard_id 1 to node_idx 1 (out of 3 nodes)
2025-03-23 19:43:42,984 - coordinator - DEBUG - Submitting search to shard 1 at localhost:6002
2025-03-23 19:43:42,985 - coordinator - DEBUG - Sending search request to http://localhost:6002/search
2025-03-23 19:43:42,985 - coordinator - DEBUG - Mapping shard_id 2 to node_idx 2 (out of 3 nodes)
2025-03-23 19:43:42,985 - coordinator - DEBUG - Submitting search to shard 2 at localhost:6003
2025-03-23 19:43:42,986 - coordinator - DEBUG - Sending search request to http://localhost:6003/search
2025-03-23 19:43:42,986 - urllib3.connectionpool - DEBUG - Starting new HTTP connection (1): localhost:6002
2025-03-23 19:43:42,988 - urllib3.connectionpool - DEBUG - Starting new HTTP connection (1): localhost:6003
2025-03-23 19:43:42,992 - urllib3.connectionpool - DEBUG - http://localhost:6003 "POST /search HTTP/1.1" 200 76
2025-03-23 19:43:42,993 - urllib3.connectionpool - DEBUG - http://localhost:6002 "POST /search HTTP/1.1" 200 76
2025-03-23 19:43:42,993 - coordinator - DEBUG - Received response from http://localhost:6003/search: {'distances': [[5.917777061462402]], 'indices': [[145620]], 'status': 'success'}
2025-03-23 19:43:42,994 - coordinator - DEBUG - Received response from http://localhost:6002/search: {'distances': [[288.9261779785156]], 'indices': [[190756]], 'status': 'success'}
2025-03-23 19:43:42,994 - coordinator - DEBUG - Valid results from http://localhost:6003/search: distances shape=(1, 1), indices shape=(1, 1)
2025-03-23 19:43:42,994 - coordinator - DEBUG - Valid results from http://localhost:6002/search: distances shape=(1, 1), indices shape=(1, 1)
2025-03-23 19:43:42,994 - coordinator - DEBUG - Received search results: distances shape=(1, 1), indices shape=(1, 1)
2025-03-23 19:43:42,994 - coordinator - DEBUG - Received search results: distances shape=(1, 1), indices shape=(1, 1)
2025-03-23 19:43:42,994 - coordinator - DEBUG - All distances: [array([5.91777706]), array([288.92617798])]
2025-03-23 19:43:42,995 - coordinator - DEBUG - All indices: [array([145620]), array([190756])]
2025-03-23 19:43:42,995 - coordinator - DEBUG - all_distances shape: (2, 1), all_indices shape: (2, 1)
2025-03-23 19:43:42,995 - coordinator - DEBUG - Using k=1 for sorting
2025-03-23 19:43:42,995 - coordinator - DEBUG - sorted_idx: [[0]]
2025-03-23 19:43:42,995 - coordinator - DEBUG - Returning results: distances=[[[5.91777706]]], indices=[[[145620]]]
2025-03-23 19:43:42,995 - __main__ - DEBUG - Search results: distances shape=(1, 1, 1), indices shape=(1, 1, 1)
2025-03-23 19:43:42,995 - __main__ - DEBUG - Returning search results: 1 items
2025-03-23 19:43:42,996 - werkzeug - INFO - 127.0.0.1 - - [23/Mar/2025 19:43:42] "POST /search HTTP/1.1" 200 -
2025-03-23 19:43:43,001 - __main__ - DEBUG - Received search request with query_vector shape=(1, 512), k=1
2025-03-23 19:43:43,001 - __main__ - DEBUG - Calling coordinator.search
2025-03-23 19:43:43,001 - coordinator - DEBUG - Starting search with query_vector shape=(1, 512), k=1
2025-03-23 19:43:43,001 - root - DEBUG - Getting candidate shards for query vector with shape (1, 512)
2025-03-23 19:43:43,001 - root - DEBUG - Table 0 hash value shape: (1, 4)
2025-03-23 19:43:43,001 - root - DEBUG - Table 1 hash value shape: (1, 4)
2025-03-23 19:43:43,002 - root - DEBUG - Table 2 hash value shape: (1, 4)
2025-03-23 19:43:43,002 - root - DEBUG - Assigned vector to shard 1
2025-03-23 19:43:43,002 - root - DEBUG - Table 0 hash value shape: (1, 4)
2025-03-23 19:43:43,002 - root - DEBUG - Table 1 hash value shape: (1, 4)
2025-03-23 19:43:43,002 - root - DEBUG - Table 2 hash value shape: (1, 4)
2025-03-23 19:43:43,002 - root - DEBUG - Selected candidate shards: [1, 2]
2025-03-23 19:43:43,003 - coordinator - DEBUG - Candidate shards: [1, 2]
2025-03-23 19:43:43,003 - coordinator - DEBUG - Mapping shard_id 1 to node_idx 1 (out of 3 nodes)
2025-03-23 19:43:43,003 - coordinator - DEBUG - Submitting search to shard 1 at localhost:6002
2025-03-23 19:43:43,003 - coordinator - DEBUG - Sending search request to http://localhost:6002/search
2025-03-23 19:43:43,003 - coordinator - DEBUG - Mapping shard_id 2 to node_idx 2 (out of 3 nodes)
2025-03-23 19:43:43,003 - coordinator - DEBUG - Submitting search to shard 2 at localhost:6003
2025-03-23 19:43:43,004 - coordinator - DEBUG - Sending search request to http://localhost:6003/search
2025-03-23 19:43:43,006 - urllib3.connectionpool - DEBUG - Starting new HTTP connection (1): localhost:6002
2025-03-23 19:43:43,007 - urllib3.connectionpool - DEBUG - Starting new HTTP connection (1): localhost:6003
2025-03-23 19:43:43,011 - urllib3.connectionpool - DEBUG - http://localhost:6002 "POST /search HTTP/1.1" 200 75
2025-03-23 19:43:43,011 - urllib3.connectionpool - DEBUG - http://localhost:6003 "POST /search HTTP/1.1" 200 74
2025-03-23 19:43:43,011 - coordinator - DEBUG - Received response from http://localhost:6002/search: {'distances': [[8.292370796203613]], 'indices': [[58350]], 'status': 'success'}
2025-03-23 19:43:43,012 - coordinator - DEBUG - Received response from http://localhost:6003/search: {'distances': [[309.370849609375]], 'indices': [[45550]], 'status': 'success'}
2025-03-23 19:43:43,012 - coordinator - DEBUG - Valid results from http://localhost:6002/search: distances shape=(1, 1), indices shape=(1, 1)
2025-03-23 19:43:43,012 - coordinator - DEBUG - Valid results from http://localhost:6003/search: distances shape=(1, 1), indices shape=(1, 1)
2025-03-23 19:43:43,012 - coordinator - DEBUG - Received search results: distances shape=(1, 1), indices shape=(1, 1)
2025-03-23 19:43:43,012 - coordinator - DEBUG - Received search results: distances shape=(1, 1), indices shape=(1, 1)
2025-03-23 19:43:43,013 - coordinator - DEBUG - All distances: [array([8.2923708]), array([309.37084961])]
2025-03-23 19:43:43,013 - coordinator - DEBUG - All indices: [array([58350]), array([45550])]
2025-03-23 19:43:43,013 - coordinator - DEBUG - all_distances shape: (2, 1), all_indices shape: (2, 1)
2025-03-23 19:43:43,013 - coordinator - DEBUG - Using k=1 for sorting
2025-03-23 19:43:43,013 - coordinator - DEBUG - sorted_idx: [[0]]
2025-03-23 19:43:43,013 - coordinator - DEBUG - Returning results: distances=[[[8.2923708]]], indices=[[[58350]]]
2025-03-23 19:43:43,013 - __main__ - DEBUG - Search results: distances shape=(1, 1, 1), indices shape=(1, 1, 1)
2025-03-23 19:43:43,013 - __main__ - DEBUG - Returning search results: 1 items
2025-03-23 19:43:43,014 - werkzeug - INFO - 127.0.0.1 - - [23/Mar/2025 19:43:43] "POST /search HTTP/1.1" 200 -
2025-03-23 19:43:43,018 - __main__ - DEBUG - Received search request with query_vector shape=(1, 512), k=1
2025-03-23 19:43:43,018 - __main__ - DEBUG - Calling coordinator.search
2025-03-23 19:43:43,018 - coordinator - DEBUG - Starting search with query_vector shape=(1, 512), k=1
2025-03-23 19:43:43,018 - root - DEBUG - Getting candidate shards for query vector with shape (1, 512)
2025-03-23 19:43:43,019 - root - DEBUG - Table 0 hash value shape: (1, 4)
2025-03-23 19:43:43,019 - root - DEBUG - Table 1 hash value shape: (1, 4)
2025-03-23 19:43:43,019 - root - DEBUG - Table 2 hash value shape: (1, 4)
2025-03-23 19:43:43,019 - root - DEBUG - Assigned vector to shard 1
2025-03-23 19:43:43,019 - root - DEBUG - Table 0 hash value shape: (1, 4)
2025-03-23 19:43:43,020 - root - DEBUG - Table 1 hash value shape: (1, 4)
2025-03-23 19:43:43,020 - root - DEBUG - Table 2 hash value shape: (1, 4)
2025-03-23 19:43:43,020 - root - DEBUG - Selected candidate shards: [0, 1]
2025-03-23 19:43:43,020 - coordinator - DEBUG - Candidate shards: [0, 1]
2025-03-23 19:43:43,020 - coordinator - DEBUG - Mapping shard_id 0 to node_idx 0 (out of 3 nodes)
2025-03-23 19:43:43,020 - coordinator - DEBUG - Submitting search to shard 0 at localhost:6001
2025-03-23 19:43:43,020 - coordinator - DEBUG - Sending search request to http://localhost:6001/search
2025-03-23 19:43:43,020 - coordinator - DEBUG - Mapping shard_id 1 to node_idx 1 (out of 3 nodes)
2025-03-23 19:43:43,021 - coordinator - DEBUG - Submitting search to shard 1 at localhost:6002
2025-03-23 19:43:43,022 - coordinator - DEBUG - Sending search request to http://localhost:6002/search
2025-03-23 19:43:43,023 - urllib3.connectionpool - DEBUG - Starting new HTTP connection (1): localhost:6001
2025-03-23 19:43:43,024 - urllib3.connectionpool - DEBUG - Starting new HTTP connection (1): localhost:6002
2025-03-23 19:43:43,028 - urllib3.connectionpool - DEBUG - http://localhost:6002 "POST /search HTTP/1.1" 200 77
2025-03-23 19:43:43,028 - urllib3.connectionpool - DEBUG - http://localhost:6001 "POST /search HTTP/1.1" 200 76
2025-03-23 19:43:43,029 - coordinator - DEBUG - Received response from http://localhost:6002/search: {'distances': [[16.840970993041992]], 'indices': [[194506]], 'status': 'success'}
2025-03-23 19:43:43,029 - coordinator - DEBUG - Received response from http://localhost:6001/search: {'distances': [[552.5786743164062]], 'indices': [[269196]], 'status': 'success'}
2025-03-23 19:43:43,029 - coordinator - DEBUG - Valid results from http://localhost:6002/search: distances shape=(1, 1), indices shape=(1, 1)
2025-03-23 19:43:43,029 - coordinator - DEBUG - Valid results from http://localhost:6001/search: distances shape=(1, 1), indices shape=(1, 1)
2025-03-23 19:43:43,030 - coordinator - DEBUG - Received search results: distances shape=(1, 1), indices shape=(1, 1)
2025-03-23 19:43:43,030 - coordinator - DEBUG - Received search results: distances shape=(1, 1), indices shape=(1, 1)
2025-03-23 19:43:43,030 - coordinator - DEBUG - All distances: [array([16.84097099]), array([552.57867432])]
2025-03-23 19:43:43,030 - coordinator - DEBUG - All indices: [array([194506]), array([269196])]
2025-03-23 19:43:43,031 - coordinator - DEBUG - all_distances shape: (2, 1), all_indices shape: (2, 1)
2025-03-23 19:43:43,031 - coordinator - DEBUG - Using k=1 for sorting
2025-03-23 19:43:43,031 - coordinator - DEBUG - sorted_idx: [[0]]
2025-03-23 19:43:43,031 - coordinator - DEBUG - Returning results: distances=[[[16.84097099]]], indices=[[[194506]]]
2025-03-23 19:43:43,031 - __main__ - DEBUG - Search results: distances shape=(1, 1, 1), indices shape=(1, 1, 1)
2025-03-23 19:43:43,031 - __main__ - DEBUG - Returning search results: 1 items
2025-03-23 19:43:43,031 - werkzeug - INFO - 127.0.0.1 - - [23/Mar/2025 19:43:43] "POST /search HTTP/1.1" 200 -
2025-03-23 19:43:43,036 - __main__ - DEBUG - Received search request with query_vector shape=(1, 512), k=1
2025-03-23 19:43:43,036 - __main__ - DEBUG - Calling coordinator.search
2025-03-23 19:43:43,036 - coordinator - DEBUG - Starting search with query_vector shape=(1, 512), k=1
2025-03-23 19:43:43,036 - root - DEBUG - Getting candidate shards for query vector with shape (1, 512)
2025-03-23 19:43:43,036 - root - DEBUG - Table 0 hash value shape: (1, 4)
2025-03-23 19:43:43,036 - root - DEBUG - Table 1 hash value shape: (1, 4)
2025-03-23 19:43:43,037 - root - DEBUG - Table 2 hash value shape: (1, 4)
2025-03-23 19:43:43,037 - root - DEBUG - Assigned vector to shard 1
2025-03-23 19:43:43,037 - root - DEBUG - Table 0 hash value shape: (1, 4)
2025-03-23 19:43:43,037 - root - DEBUG - Table 1 hash value shape: (1, 4)
2025-03-23 19:43:43,037 - root - DEBUG - Table 2 hash value shape: (1, 4)
2025-03-23 19:43:43,037 - root - DEBUG - Selected candidate shards: [0, 1]
2025-03-23 19:43:43,037 - coordinator - DEBUG - Candidate shards: [0, 1]
2025-03-23 19:43:43,038 - coordinator - DEBUG - Mapping shard_id 0 to node_idx 0 (out of 3 nodes)
2025-03-23 19:43:43,038 - coordinator - DEBUG - Submitting search to shard 0 at localhost:6001
2025-03-23 19:43:43,038 - coordinator - DEBUG - Sending search request to http://localhost:6001/search
2025-03-23 19:43:43,038 - coordinator - DEBUG - Mapping shard_id 1 to node_idx 1 (out of 3 nodes)
2025-03-23 19:43:43,039 - coordinator - DEBUG - Submitting search to shard 1 at localhost:6002
2025-03-23 19:43:43,039 - coordinator - DEBUG - Sending search request to http://localhost:6002/search
2025-03-23 19:43:43,041 - urllib3.connectionpool - DEBUG - Starting new HTTP connection (1): localhost:6001
2025-03-23 19:43:43,042 - urllib3.connectionpool - DEBUG - Starting new HTTP connection (1): localhost:6002
2025-03-23 19:43:43,045 - urllib3.connectionpool - DEBUG - http://localhost:6002 "POST /search HTTP/1.1" 200 77
2025-03-23 19:43:43,046 - urllib3.connectionpool - DEBUG - http://localhost:6001 "POST /search HTTP/1.1" 200 77
2025-03-23 19:43:43,046 - coordinator - DEBUG - Received response from http://localhost:6002/search: {'distances': [[10.470561027526855]], 'indices': [[545129]], 'status': 'success'}
2025-03-23 19:43:43,046 - coordinator - DEBUG - Received response from http://localhost:6001/search: {'distances': [[174.93800354003906]], 'indices': [[577149]], 'status': 'success'}
2025-03-23 19:43:43,047 - coordinator - DEBUG - Valid results from http://localhost:6002/search: distances shape=(1, 1), indices shape=(1, 1)
2025-03-23 19:43:43,047 - coordinator - DEBUG - Valid results from http://localhost:6001/search: distances shape=(1, 1), indices shape=(1, 1)
2025-03-23 19:43:43,047 - coordinator - DEBUG - Received search results: distances shape=(1, 1), indices shape=(1, 1)
2025-03-23 19:43:43,047 - coordinator - DEBUG - Received search results: distances shape=(1, 1), indices shape=(1, 1)
2025-03-23 19:43:43,047 - coordinator - DEBUG - All distances: [array([10.47056103]), array([174.93800354])]
2025-03-23 19:43:43,048 - coordinator - DEBUG - All indices: [array([545129]), array([577149])]
2025-03-23 19:43:43,048 - coordinator - DEBUG - all_distances shape: (2, 1), all_indices shape: (2, 1)
2025-03-23 19:43:43,048 - coordinator - DEBUG - Using k=1 for sorting
2025-03-23 19:43:43,048 - coordinator - DEBUG - sorted_idx: [[0]]
2025-03-23 19:43:43,048 - coordinator - DEBUG - Returning results: distances=[[[10.47056103]]], indices=[[[545129]]]
2025-03-23 19:43:43,048 - __main__ - DEBUG - Search results: distances shape=(1, 1, 1), indices shape=(1, 1, 1)
2025-03-23 19:43:43,048 - __main__ - DEBUG - Returning search results: 1 items
2025-03-23 19:43:43,049 - werkzeug - INFO - 127.0.0.1 - - [23/Mar/2025 19:43:43] "POST /search HTTP/1.1" 200 -
2025-03-23 19:43:43,053 - __main__ - DEBUG - Received search request with query_vector shape=(1, 512), k=5
2025-03-23 19:43:43,053 - __main__ - DEBUG - Calling coordinator.search
2025-03-23 19:43:43,053 - coordinator - DEBUG - Starting search with query_vector shape=(1, 512), k=5
2025-03-23 19:43:43,053 - root - DEBUG - Getting candidate shards for query vector with shape (1, 512)
2025-03-23 19:43:43,053 - root - DEBUG - Table 0 hash value shape: (1, 4)
2025-03-23 19:43:43,053 - root - DEBUG - Table 1 hash value shape: (1, 4)
2025-03-23 19:43:43,054 - root - DEBUG - Table 2 hash value shape: (1, 4)
2025-03-23 19:43:43,054 - root - DEBUG - Assigned vector to shard 2
2025-03-23 19:43:43,054 - root - DEBUG - Table 0 hash value shape: (1, 4)
2025-03-23 19:43:43,054 - root - DEBUG - Table 1 hash value shape: (1, 4)
2025-03-23 19:43:43,054 - root - DEBUG - Table 2 hash value shape: (1, 4)
2025-03-23 19:43:43,054 - root - DEBUG - Selected candidate shards: [0, 2]
2025-03-23 19:43:43,054 - coordinator - DEBUG - Candidate shards: [0, 2]
2025-03-23 19:43:43,055 - coordinator - DEBUG - Mapping shard_id 0 to node_idx 0 (out of 3 nodes)
2025-03-23 19:43:43,055 - coordinator - DEBUG - Submitting search to shard 0 at localhost:6001
2025-03-23 19:43:43,055 - coordinator - DEBUG - Sending search request to http://localhost:6001/search
2025-03-23 19:43:43,055 - coordinator - DEBUG - Mapping shard_id 2 to node_idx 2 (out of 3 nodes)
2025-03-23 19:43:43,056 - coordinator - DEBUG - Submitting search to shard 2 at localhost:6003
2025-03-23 19:43:43,056 - coordinator - DEBUG - Sending search request to http://localhost:6003/search
2025-03-23 19:43:43,058 - urllib3.connectionpool - DEBUG - Starting new HTTP connection (1): localhost:6001
2025-03-23 19:43:43,059 - urllib3.connectionpool - DEBUG - Starting new HTTP connection (1): localhost:6003
2025-03-23 19:43:43,063 - urllib3.connectionpool - DEBUG - http://localhost:6001 "POST /search HTTP/1.1" 200 178
2025-03-23 19:43:43,063 - coordinator - DEBUG - Received response from http://localhost:6001/search: {'distances': [[6.050220012664795, 182.7266845703125, 197.43667602539062, 203.05563354492188, 213.77268981933594]], 'indices': [[379800, 30675, 133567, 493566, 477623]], 'status': 'success'}
2025-03-23 19:43:43,063 - coordinator - DEBUG - Valid results from http://localhost:6001/search: distances shape=(1, 5), indices shape=(1, 5)
2025-03-23 19:43:43,063 - urllib3.connectionpool - DEBUG - http://localhost:6003 "POST /search HTTP/1.1" 200 177
2025-03-23 19:43:43,064 - coordinator - DEBUG - Received search results: distances shape=(1, 5), indices shape=(1, 5)
2025-03-23 19:43:43,064 - coordinator - DEBUG - Received response from http://localhost:6003/search: {'distances': [[223.68067932128906, 261.1363220214844, 264.6928405761719, 268.89154052734375, 270.8614196777344]], 'indices': [[572555, 70254, 270297, 295420, 416269]], 'status': 'success'}
2025-03-23 19:43:43,064 - coordinator - DEBUG - Valid results from http://localhost:6003/search: distances shape=(1, 5), indices shape=(1, 5)
2025-03-23 19:43:43,064 - coordinator - DEBUG - Received search results: distances shape=(1, 5), indices shape=(1, 5)
2025-03-23 19:43:43,065 - coordinator - DEBUG - All distances: [array([  6.05022001, 182.72668457, 197.43667603, 203.05563354,
       213.77268982]), array([223.68067932, 261.13632202, 264.69284058, 268.89154053,
       270.86141968])]
2025-03-23 19:43:43,065 - coordinator - DEBUG - All indices: [array([379800,  30675, 133567, 493566, 477623]), array([572555,  70254, 270297, 295420, 416269])]
2025-03-23 19:43:43,065 - coordinator - DEBUG - all_distances shape: (2, 5), all_indices shape: (2, 5)
2025-03-23 19:43:43,065 - coordinator - DEBUG - Using k=2 for sorting
2025-03-23 19:43:43,065 - coordinator - DEBUG - sorted_idx: [[0 1 2 3 4]
 [0 1 2 3 4]]
2025-03-23 19:43:43,065 - coordinator - ERROR - Index out of bounds: max sorted_idx=4, len(all_distances)=2
2025-03-23 19:43:43,066 - coordinator - DEBUG - Returning results: distances=[[  6.05022001 182.72668457 197.43667603 203.05563354 213.77268982]
 [223.68067932 261.13632202 264.69284058 268.89154053 270.86141968]
 [  6.05022001 182.72668457 197.43667603 203.05563354 213.77268982]
 [223.68067932 261.13632202 264.69284058 268.89154053 270.86141968]], indices=[[379800  30675 133567 493566 477623]
 [572555  70254 270297 295420 416269]
 [379800  30675 133567 493566 477623]
 [572555  70254 270297 295420 416269]]
2025-03-23 19:43:43,066 - __main__ - DEBUG - Search results: distances shape=(4, 5), indices shape=(4, 5)
2025-03-23 19:43:43,066 - __main__ - DEBUG - Returning search results: 4 items
2025-03-23 19:43:43,066 - werkzeug - INFO - 127.0.0.1 - - [23/Mar/2025 19:43:43] "POST /search HTTP/1.1" 200 -
2025-03-23 19:43:43,071 - __main__ - DEBUG - Received search request with query_vector shape=(1, 512), k=5
2025-03-23 19:43:43,071 - __main__ - DEBUG - Calling coordinator.search
2025-03-23 19:43:43,072 - coordinator - DEBUG - Starting search with query_vector shape=(1, 512), k=5
2025-03-23 19:43:43,072 - root - DEBUG - Getting candidate shards for query vector with shape (1, 512)
2025-03-23 19:43:43,072 - root - DEBUG - Table 0 hash value shape: (1, 4)
2025-03-23 19:43:43,072 - root - DEBUG - Table 1 hash value shape: (1, 4)
2025-03-23 19:43:43,072 - root - DEBUG - Table 2 hash value shape: (1, 4)
2025-03-23 19:43:43,072 - root - DEBUG - Assigned vector to shard 2
2025-03-23 19:43:43,073 - root - DEBUG - Table 0 hash value shape: (1, 4)
2025-03-23 19:43:43,073 - root - DEBUG - Table 1 hash value shape: (1, 4)
2025-03-23 19:43:43,073 - root - DEBUG - Table 2 hash value shape: (1, 4)
2025-03-23 19:43:43,073 - root - DEBUG - Selected candidate shards: [1, 2]
2025-03-23 19:43:43,073 - coordinator - DEBUG - Candidate shards: [1, 2]
2025-03-23 19:43:43,073 - coordinator - DEBUG - Mapping shard_id 1 to node_idx 1 (out of 3 nodes)
2025-03-23 19:43:43,073 - coordinator - DEBUG - Submitting search to shard 1 at localhost:6002
2025-03-23 19:43:43,074 - coordinator - DEBUG - Sending search request to http://localhost:6002/search
2025-03-23 19:43:43,074 - coordinator - DEBUG - Mapping shard_id 2 to node_idx 2 (out of 3 nodes)
2025-03-23 19:43:43,075 - coordinator - DEBUG - Submitting search to shard 2 at localhost:6003
2025-03-23 19:43:43,075 - coordinator - DEBUG - Sending search request to http://localhost:6003/search
2025-03-23 19:43:43,077 - urllib3.connectionpool - DEBUG - Starting new HTTP connection (1): localhost:6002
2025-03-23 19:43:43,078 - urllib3.connectionpool - DEBUG - Starting new HTTP connection (1): localhost:6003
2025-03-23 19:43:43,081 - urllib3.connectionpool - DEBUG - http://localhost:6002 "POST /search HTTP/1.1" 200 177
2025-03-23 19:43:43,081 - coordinator - DEBUG - Received response from http://localhost:6002/search: {'distances': [[288.9261779785156, 303.25177001953125, 311.8754577636719, 315.74237060546875, 326.10980224609375]], 'indices': [[190756, 7816, 549390, 338219, 214192]], 'status': 'success'}
2025-03-23 19:43:43,081 - coordinator - DEBUG - Valid results from http://localhost:6002/search: distances shape=(1, 5), indices shape=(1, 5)
2025-03-23 19:43:43,081 - coordinator - DEBUG - Received search results: distances shape=(1, 5), indices shape=(1, 5)
2025-03-23 19:43:43,082 - urllib3.connectionpool - DEBUG - http://localhost:6003 "POST /search HTTP/1.1" 200 176
2025-03-23 19:43:43,082 - coordinator - DEBUG - Received response from http://localhost:6003/search: {'distances': [[5.917777061462402, 267.8946838378906, 290.0080261230469, 292.7058410644531, 341.6820068359375]], 'indices': [[145620, 102331, 210299, 102411, 455624]], 'status': 'success'}
2025-03-23 19:43:43,082 - coordinator - DEBUG - Valid results from http://localhost:6003/search: distances shape=(1, 5), indices shape=(1, 5)
2025-03-23 19:43:43,082 - coordinator - DEBUG - Received search results: distances shape=(1, 5), indices shape=(1, 5)
2025-03-23 19:43:43,083 - coordinator - DEBUG - All distances: [array([288.92617798, 303.25177002, 311.87545776, 315.74237061,
       326.10980225]), array([  5.91777706, 267.89468384, 290.00802612, 292.70584106,
       341.68200684])]
2025-03-23 19:43:43,083 - coordinator - DEBUG - All indices: [array([190756,   7816, 549390, 338219, 214192]), array([145620, 102331, 210299, 102411, 455624])]
2025-03-23 19:43:43,083 - coordinator - DEBUG - all_distances shape: (2, 5), all_indices shape: (2, 5)
2025-03-23 19:43:43,083 - coordinator - DEBUG - Using k=2 for sorting
2025-03-23 19:43:43,083 - coordinator - DEBUG - sorted_idx: [[0 1 2 3 4]
 [0 1 2 3 4]]
2025-03-23 19:43:43,083 - coordinator - ERROR - Index out of bounds: max sorted_idx=4, len(all_distances)=2
2025-03-23 19:43:43,084 - coordinator - DEBUG - Returning results: distances=[[288.92617798 303.25177002 311.87545776 315.74237061 326.10980225]
 [  5.91777706 267.89468384 290.00802612 292.70584106 341.68200684]
 [288.92617798 303.25177002 311.87545776 315.74237061 326.10980225]
 [  5.91777706 267.89468384 290.00802612 292.70584106 341.68200684]], indices=[[190756   7816 549390 338219 214192]
 [145620 102331 210299 102411 455624]
 [190756   7816 549390 338219 214192]
 [145620 102331 210299 102411 455624]]
2025-03-23 19:43:43,084 - __main__ - DEBUG - Search results: distances shape=(4, 5), indices shape=(4, 5)
2025-03-23 19:43:43,084 - __main__ - DEBUG - Returning search results: 4 items
2025-03-23 19:43:43,084 - werkzeug - INFO - 127.0.0.1 - - [23/Mar/2025 19:43:43] "POST /search HTTP/1.1" 200 -
2025-03-23 19:43:43,088 - __main__ - DEBUG - Received search request with query_vector shape=(1, 512), k=5
2025-03-23 19:43:43,088 - __main__ - DEBUG - Calling coordinator.search
2025-03-23 19:43:43,088 - coordinator - DEBUG - Starting search with query_vector shape=(1, 512), k=5
2025-03-23 19:43:43,088 - root - DEBUG - Getting candidate shards for query vector with shape (1, 512)
2025-03-23 19:43:43,089 - root - DEBUG - Table 0 hash value shape: (1, 4)
2025-03-23 19:43:43,089 - root - DEBUG - Table 1 hash value shape: (1, 4)
2025-03-23 19:43:43,089 - root - DEBUG - Table 2 hash value shape: (1, 4)
2025-03-23 19:43:43,089 - root - DEBUG - Assigned vector to shard 1
2025-03-23 19:43:43,089 - root - DEBUG - Table 0 hash value shape: (1, 4)
2025-03-23 19:43:43,089 - root - DEBUG - Table 1 hash value shape: (1, 4)
2025-03-23 19:43:43,090 - root - DEBUG - Table 2 hash value shape: (1, 4)
2025-03-23 19:43:43,090 - root - DEBUG - Selected candidate shards: [1, 2]
2025-03-23 19:43:43,090 - coordinator - DEBUG - Candidate shards: [1, 2]
2025-03-23 19:43:43,090 - coordinator - DEBUG - Mapping shard_id 1 to node_idx 1 (out of 3 nodes)
2025-03-23 19:43:43,090 - coordinator - DEBUG - Submitting search to shard 1 at localhost:6002
2025-03-23 19:43:43,090 - coordinator - DEBUG - Sending search request to http://localhost:6002/search
2025-03-23 19:43:43,090 - coordinator - DEBUG - Mapping shard_id 2 to node_idx 2 (out of 3 nodes)
2025-03-23 19:43:43,091 - coordinator - DEBUG - Submitting search to shard 2 at localhost:6003
2025-03-23 19:43:43,092 - coordinator - DEBUG - Sending search request to http://localhost:6003/search
2025-03-23 19:43:43,093 - urllib3.connectionpool - DEBUG - Starting new HTTP connection (1): localhost:6002
2025-03-23 19:43:43,094 - urllib3.connectionpool - DEBUG - Starting new HTTP connection (1): localhost:6003
2025-03-23 19:43:43,098 - urllib3.connectionpool - DEBUG - http://localhost:6003 "POST /search HTTP/1.1" 200 177
2025-03-23 19:43:43,099 - urllib3.connectionpool - DEBUG - http://localhost:6002 "POST /search HTTP/1.1" 200 175
2025-03-23 19:43:43,099 - coordinator - DEBUG - Received response from http://localhost:6003/search: {'distances': [[309.370849609375, 322.09503173828125, 331.71026611328125, 335.06781005859375, 340.92828369140625]], 'indices': [[45550, 473237, 312552, 70739, 148662]], 'status': 'success'}
2025-03-23 19:43:43,100 - coordinator - DEBUG - Received response from http://localhost:6002/search: {'distances': [[8.292370796203613, 282.02337646484375, 304.1513977050781, 342.9234619140625, 347.66815185546875]], 'indices': [[58350, 383838, 18150, 513283, 11051]], 'status': 'success'}
2025-03-23 19:43:43,100 - coordinator - DEBUG - Valid results from http://localhost:6003/search: distances shape=(1, 5), indices shape=(1, 5)
2025-03-23 19:43:43,100 - coordinator - DEBUG - Valid results from http://localhost:6002/search: distances shape=(1, 5), indices shape=(1, 5)
2025-03-23 19:43:43,100 - coordinator - DEBUG - Received search results: distances shape=(1, 5), indices shape=(1, 5)
2025-03-23 19:43:43,100 - coordinator - DEBUG - Received search results: distances shape=(1, 5), indices shape=(1, 5)
2025-03-23 19:43:43,101 - coordinator - DEBUG - All distances: [array([309.37084961, 322.09503174, 331.71026611, 335.06781006,
       340.92828369]), array([  8.2923708 , 282.02337646, 304.15139771, 342.92346191,
       347.66815186])]
2025-03-23 19:43:43,101 - coordinator - DEBUG - All indices: [array([ 45550, 473237, 312552,  70739, 148662]), array([ 58350, 383838,  18150, 513283,  11051])]
2025-03-23 19:43:43,101 - coordinator - DEBUG - all_distances shape: (2, 5), all_indices shape: (2, 5)
2025-03-23 19:43:43,101 - coordinator - DEBUG - Using k=2 for sorting
2025-03-23 19:43:43,101 - coordinator - DEBUG - sorted_idx: [[0 1 2 3 4]
 [0 1 2 3 4]]
2025-03-23 19:43:43,101 - coordinator - ERROR - Index out of bounds: max sorted_idx=4, len(all_distances)=2
2025-03-23 19:43:43,102 - coordinator - DEBUG - Returning results: distances=[[309.37084961 322.09503174 331.71026611 335.06781006 340.92828369]
 [  8.2923708  282.02337646 304.15139771 342.92346191 347.66815186]
 [309.37084961 322.09503174 331.71026611 335.06781006 340.92828369]
 [  8.2923708  282.02337646 304.15139771 342.92346191 347.66815186]], indices=[[ 45550 473237 312552  70739 148662]
 [ 58350 383838  18150 513283  11051]
 [ 45550 473237 312552  70739 148662]
 [ 58350 383838  18150 513283  11051]]
2025-03-23 19:43:43,102 - __main__ - DEBUG - Search results: distances shape=(4, 5), indices shape=(4, 5)
2025-03-23 19:43:43,102 - __main__ - DEBUG - Returning search results: 4 items
2025-03-23 19:43:43,102 - werkzeug - INFO - 127.0.0.1 - - [23/Mar/2025 19:43:43] "POST /search HTTP/1.1" 200 -
2025-03-23 19:43:43,107 - __main__ - DEBUG - Received search request with query_vector shape=(1, 512), k=5
2025-03-23 19:43:43,107 - __main__ - DEBUG - Calling coordinator.search
2025-03-23 19:43:43,107 - coordinator - DEBUG - Starting search with query_vector shape=(1, 512), k=5
2025-03-23 19:43:43,107 - root - DEBUG - Getting candidate shards for query vector with shape (1, 512)
2025-03-23 19:43:43,107 - root - DEBUG - Table 0 hash value shape: (1, 4)
2025-03-23 19:43:43,108 - root - DEBUG - Table 1 hash value shape: (1, 4)
2025-03-23 19:43:43,108 - root - DEBUG - Table 2 hash value shape: (1, 4)
2025-03-23 19:43:43,108 - root - DEBUG - Assigned vector to shard 1
2025-03-23 19:43:43,108 - root - DEBUG - Table 0 hash value shape: (1, 4)
2025-03-23 19:43:43,108 - root - DEBUG - Table 1 hash value shape: (1, 4)
2025-03-23 19:43:43,108 - root - DEBUG - Table 2 hash value shape: (1, 4)
2025-03-23 19:43:43,109 - root - DEBUG - Selected candidate shards: [0, 1]
2025-03-23 19:43:43,109 - coordinator - DEBUG - Candidate shards: [0, 1]
2025-03-23 19:43:43,109 - coordinator - DEBUG - Mapping shard_id 0 to node_idx 0 (out of 3 nodes)
2025-03-23 19:43:43,109 - coordinator - DEBUG - Submitting search to shard 0 at localhost:6001
2025-03-23 19:43:43,109 - coordinator - DEBUG - Sending search request to http://localhost:6001/search
2025-03-23 19:43:43,109 - coordinator - DEBUG - Mapping shard_id 1 to node_idx 1 (out of 3 nodes)
2025-03-23 19:43:43,109 - coordinator - DEBUG - Submitting search to shard 1 at localhost:6002
2025-03-23 19:43:43,110 - coordinator - DEBUG - Sending search request to http://localhost:6002/search
2025-03-23 19:43:43,112 - urllib3.connectionpool - DEBUG - Starting new HTTP connection (1): localhost:6001
2025-03-23 19:43:43,113 - urllib3.connectionpool - DEBUG - Starting new HTTP connection (1): localhost:6002
2025-03-23 19:43:43,117 - urllib3.connectionpool - DEBUG - http://localhost:6002 "POST /search HTTP/1.1" 200 178
2025-03-23 19:43:43,118 - coordinator - DEBUG - Received response from http://localhost:6002/search: {'distances': [[16.840970993041992, 413.3643798828125, 483.1694641113281, 493.7472229003906, 506.23394775390625]], 'indices': [[194506, 203546, 418959, 490171, 560266]], 'status': 'success'}
2025-03-23 19:43:43,118 - coordinator - DEBUG - Valid results from http://localhost:6002/search: distances shape=(1, 5), indices shape=(1, 5)
2025-03-23 19:43:43,118 - coordinator - DEBUG - Received search results: distances shape=(1, 5), indices shape=(1, 5)
2025-03-23 19:43:43,120 - urllib3.connectionpool - DEBUG - http://localhost:6001 "POST /search HTTP/1.1" 200 169
2025-03-23 19:43:43,121 - coordinator - DEBUG - Received response from http://localhost:6001/search: {'distances': [[552.5786743164062, 553.4232177734375, 571.69140625, 572.9830322265625, 585.572998046875]], 'indices': [[269196, 20247, 523033, 471756, 404805]], 'status': 'success'}
2025-03-23 19:43:43,121 - coordinator - DEBUG - Valid results from http://localhost:6001/search: distances shape=(1, 5), indices shape=(1, 5)
2025-03-23 19:43:43,121 - coordinator - DEBUG - Received search results: distances shape=(1, 5), indices shape=(1, 5)
2025-03-23 19:43:43,122 - coordinator - DEBUG - All distances: [array([ 16.84097099, 413.36437988, 483.16946411, 493.7472229 ,
       506.23394775]), array([552.57867432, 553.42321777, 571.69140625, 572.98303223,
       585.57299805])]
2025-03-23 19:43:43,122 - coordinator - DEBUG - All indices: [array([194506, 203546, 418959, 490171, 560266]), array([269196,  20247, 523033, 471756, 404805])]
2025-03-23 19:43:43,122 - coordinator - DEBUG - all_distances shape: (2, 5), all_indices shape: (2, 5)
2025-03-23 19:43:43,122 - coordinator - DEBUG - Using k=2 for sorting
2025-03-23 19:43:43,122 - coordinator - DEBUG - sorted_idx: [[0 1 2 3 4]
 [0 1 2 3 4]]
2025-03-23 19:43:43,122 - coordinator - ERROR - Index out of bounds: max sorted_idx=4, len(all_distances)=2
2025-03-23 19:43:43,123 - coordinator - DEBUG - Returning results: distances=[[ 16.84097099 413.36437988 483.16946411 493.7472229  506.23394775]
 [552.57867432 553.42321777 571.69140625 572.98303223 585.57299805]
 [ 16.84097099 413.36437988 483.16946411 493.7472229  506.23394775]
 [552.57867432 553.42321777 571.69140625 572.98303223 585.57299805]], indices=[[194506 203546 418959 490171 560266]
 [269196  20247 523033 471756 404805]
 [194506 203546 418959 490171 560266]
 [269196  20247 523033 471756 404805]]
2025-03-23 19:43:43,123 - __main__ - DEBUG - Search results: distances shape=(4, 5), indices shape=(4, 5)
2025-03-23 19:43:43,123 - __main__ - DEBUG - Returning search results: 4 items
2025-03-23 19:43:43,123 - werkzeug - INFO - 127.0.0.1 - - [23/Mar/2025 19:43:43] "POST /search HTTP/1.1" 200 -
2025-03-23 19:43:43,128 - __main__ - DEBUG - Received search request with query_vector shape=(1, 512), k=5
2025-03-23 19:43:43,128 - __main__ - DEBUG - Calling coordinator.search
2025-03-23 19:43:43,128 - coordinator - DEBUG - Starting search with query_vector shape=(1, 512), k=5
2025-03-23 19:43:43,128 - root - DEBUG - Getting candidate shards for query vector with shape (1, 512)
2025-03-23 19:43:43,128 - root - DEBUG - Table 0 hash value shape: (1, 4)
2025-03-23 19:43:43,128 - root - DEBUG - Table 1 hash value shape: (1, 4)
2025-03-23 19:43:43,129 - root - DEBUG - Table 2 hash value shape: (1, 4)
2025-03-23 19:43:43,129 - root - DEBUG - Assigned vector to shard 1
2025-03-23 19:43:43,129 - root - DEBUG - Table 0 hash value shape: (1, 4)
2025-03-23 19:43:43,129 - root - DEBUG - Table 1 hash value shape: (1, 4)
2025-03-23 19:43:43,129 - root - DEBUG - Table 2 hash value shape: (1, 4)
2025-03-23 19:43:43,129 - root - DEBUG - Selected candidate shards: [0, 1]
2025-03-23 19:43:43,130 - coordinator - DEBUG - Candidate shards: [0, 1]
2025-03-23 19:43:43,130 - coordinator - DEBUG - Mapping shard_id 0 to node_idx 0 (out of 3 nodes)
2025-03-23 19:43:43,130 - coordinator - DEBUG - Submitting search to shard 0 at localhost:6001
2025-03-23 19:43:43,130 - coordinator - DEBUG - Sending search request to http://localhost:6001/search
2025-03-23 19:43:43,130 - coordinator - DEBUG - Mapping shard_id 1 to node_idx 1 (out of 3 nodes)
2025-03-23 19:43:43,131 - coordinator - DEBUG - Submitting search to shard 1 at localhost:6002
2025-03-23 19:43:43,132 - coordinator - DEBUG - Sending search request to http://localhost:6002/search
2025-03-23 19:43:43,132 - urllib3.connectionpool - DEBUG - Starting new HTTP connection (1): localhost:6001
2025-03-23 19:43:43,135 - urllib3.connectionpool - DEBUG - Starting new HTTP connection (1): localhost:6002
2025-03-23 19:43:43,137 - urllib3.connectionpool - DEBUG - http://localhost:6001 "POST /search HTTP/1.1" 200 179
2025-03-23 19:43:43,138 - coordinator - DEBUG - Received response from http://localhost:6001/search: {'distances': [[174.93800354003906, 177.30520629882812, 216.1268310546875, 221.31491088867188, 233.08541870117188]], 'indices': [[577149, 501243, 54123, 159311, 484296]], 'status': 'success'}
2025-03-23 19:43:43,138 - coordinator - DEBUG - Valid results from http://localhost:6001/search: distances shape=(1, 5), indices shape=(1, 5)
2025-03-23 19:43:43,138 - coordinator - DEBUG - Received search results: distances shape=(1, 5), indices shape=(1, 5)
2025-03-23 19:43:43,140 - urllib3.connectionpool - DEBUG - http://localhost:6002 "POST /search HTTP/1.1" 200 176
2025-03-23 19:43:43,140 - coordinator - DEBUG - Received response from http://localhost:6002/search: {'distances': [[10.470561027526855, 183.81088256835938, 190.28012084960938, 192.55322265625, 199.662841796875]], 'indices': [[545129, 124975, 325306, 172977, 493019]], 'status': 'success'}
2025-03-23 19:43:43,140 - coordinator - DEBUG - Valid results from http://localhost:6002/search: distances shape=(1, 5), indices shape=(1, 5)
2025-03-23 19:43:43,140 - coordinator - DEBUG - Received search results: distances shape=(1, 5), indices shape=(1, 5)
2025-03-23 19:43:43,141 - coordinator - DEBUG - All distances: [array([174.93800354, 177.3052063 , 216.12683105, 221.31491089,
       233.0854187 ]), array([ 10.47056103, 183.81088257, 190.28012085, 192.55322266,
       199.6628418 ])]
2025-03-23 19:43:43,141 - coordinator - DEBUG - All indices: [array([577149, 501243,  54123, 159311, 484296]), array([545129, 124975, 325306, 172977, 493019])]
2025-03-23 19:43:43,141 - coordinator - DEBUG - all_distances shape: (2, 5), all_indices shape: (2, 5)
2025-03-23 19:43:43,141 - coordinator - DEBUG - Using k=2 for sorting
2025-03-23 19:43:43,141 - coordinator - DEBUG - sorted_idx: [[0 1 2 3 4]
 [0 1 2 3 4]]
2025-03-23 19:43:43,141 - coordinator - ERROR - Index out of bounds: max sorted_idx=4, len(all_distances)=2
2025-03-23 19:43:43,142 - coordinator - DEBUG - Returning results: distances=[[174.93800354 177.3052063  216.12683105 221.31491089 233.0854187 ]
 [ 10.47056103 183.81088257 190.28012085 192.55322266 199.6628418 ]
 [174.93800354 177.3052063  216.12683105 221.31491089 233.0854187 ]
 [ 10.47056103 183.81088257 190.28012085 192.55322266 199.6628418 ]], indices=[[577149 501243  54123 159311 484296]
 [545129 124975 325306 172977 493019]
 [577149 501243  54123 159311 484296]
 [545129 124975 325306 172977 493019]]
2025-03-23 19:43:43,142 - __main__ - DEBUG - Search results: distances shape=(4, 5), indices shape=(4, 5)
2025-03-23 19:43:43,142 - __main__ - DEBUG - Returning search results: 4 items
2025-03-23 19:43:43,142 - werkzeug - INFO - 127.0.0.1 - - [23/Mar/2025 19:43:43] "POST /search HTTP/1.1" 200 -
2025-03-23 19:43:43,147 - __main__ - DEBUG - Received search request with query_vector shape=(1, 512), k=10
2025-03-23 19:43:43,147 - __main__ - DEBUG - Calling coordinator.search
2025-03-23 19:43:43,147 - coordinator - DEBUG - Starting search with query_vector shape=(1, 512), k=10
2025-03-23 19:43:43,147 - root - DEBUG - Getting candidate shards for query vector with shape (1, 512)
2025-03-23 19:43:43,147 - root - DEBUG - Table 0 hash value shape: (1, 4)
2025-03-23 19:43:43,147 - root - DEBUG - Table 1 hash value shape: (1, 4)
2025-03-23 19:43:43,148 - root - DEBUG - Table 2 hash value shape: (1, 4)
2025-03-23 19:43:43,148 - root - DEBUG - Assigned vector to shard 2
2025-03-23 19:43:43,148 - root - DEBUG - Table 0 hash value shape: (1, 4)
2025-03-23 19:43:43,148 - root - DEBUG - Table 1 hash value shape: (1, 4)
2025-03-23 19:43:43,148 - root - DEBUG - Table 2 hash value shape: (1, 4)
2025-03-23 19:43:43,148 - root - DEBUG - Selected candidate shards: [0, 2]
2025-03-23 19:43:43,148 - coordinator - DEBUG - Candidate shards: [0, 2]
2025-03-23 19:43:43,148 - coordinator - DEBUG - Mapping shard_id 0 to node_idx 0 (out of 3 nodes)
2025-03-23 19:43:43,149 - coordinator - DEBUG - Submitting search to shard 0 at localhost:6001
2025-03-23 19:43:43,149 - coordinator - DEBUG - Sending search request to http://localhost:6001/search
2025-03-23 19:43:43,150 - coordinator - DEBUG - Mapping shard_id 2 to node_idx 2 (out of 3 nodes)
2025-03-23 19:43:43,150 - coordinator - DEBUG - Submitting search to shard 2 at localhost:6003
2025-03-23 19:43:43,150 - coordinator - DEBUG - Sending search request to http://localhost:6003/search
2025-03-23 19:43:43,153 - urllib3.connectionpool - DEBUG - Starting new HTTP connection (1): localhost:6001
2025-03-23 19:43:43,154 - urllib3.connectionpool - DEBUG - Starting new HTTP connection (1): localhost:6003
2025-03-23 19:43:43,158 - urllib3.connectionpool - DEBUG - http://localhost:6001 "POST /search HTTP/1.1" 200 297
2025-03-23 19:43:43,159 - coordinator - DEBUG - Received response from http://localhost:6001/search: {'distances': [[6.050220012664795, 182.7266845703125, 197.43667602539062, 203.05563354492188, 213.77268981933594, 224.72149658203125, 231.47866821289062, 246.13876342773438, 246.6099853515625, 252.28125]], 'indices': [[379800, 30675, 133567, 493566, 477623, 439593, 241297, 256195, 60090, 440508]], 'status': 'success'}
2025-03-23 19:43:43,159 - urllib3.connectionpool - DEBUG - http://localhost:6003 "POST /search HTTP/1.1" 200 304
2025-03-23 19:43:43,159 - coordinator - DEBUG - Valid results from http://localhost:6001/search: distances shape=(1, 10), indices shape=(1, 10)
2025-03-23 19:43:43,159 - coordinator - DEBUG - Received response from http://localhost:6003/search: {'distances': [[223.68067932128906, 261.1363220214844, 264.6928405761719, 268.89154052734375, 270.8614196777344, 271.2298889160156, 280.7435302734375, 285.25506591796875, 293.28814697265625, 294.4590759277344]], 'indices': [[572555, 70254, 270297, 295420, 416269, 311883, 155443, 508917, 135902, 511999]], 'status': 'success'}
2025-03-23 19:43:43,159 - coordinator - DEBUG - Received search results: distances shape=(1, 10), indices shape=(1, 10)
2025-03-23 19:43:43,159 - coordinator - DEBUG - Valid results from http://localhost:6003/search: distances shape=(1, 10), indices shape=(1, 10)
2025-03-23 19:43:43,159 - coordinator - DEBUG - Received search results: distances shape=(1, 10), indices shape=(1, 10)
2025-03-23 19:43:43,159 - coordinator - DEBUG - All distances: [array([  6.05022001, 182.72668457, 197.43667603, 203.05563354,
       213.77268982, 224.72149658, 231.47866821, 246.13876343,
       246.60998535, 252.28125   ]), array([223.68067932, 261.13632202, 264.69284058, 268.89154053,
       270.86141968, 271.22988892, 280.74353027, 285.25506592,
       293.28814697, 294.45907593])]
2025-03-23 19:43:43,159 - coordinator - DEBUG - All indices: [array([379800,  30675, 133567, 493566, 477623, 439593, 241297, 256195,
        60090, 440508]), array([572555,  70254, 270297, 295420, 416269, 311883, 155443, 508917,
       135902, 511999])]
2025-03-23 19:43:43,159 - coordinator - DEBUG - all_distances shape: (2, 10), all_indices shape: (2, 10)
2025-03-23 19:43:43,159 - coordinator - DEBUG - Using k=2 for sorting
2025-03-23 19:43:43,160 - coordinator - DEBUG - sorted_idx: [[0 1 2 3 4 5 6 7 8 9]
 [0 1 2 3 4 5 6 7 8 9]]
2025-03-23 19:43:43,160 - coordinator - ERROR - Index out of bounds: max sorted_idx=9, len(all_distances)=2
2025-03-23 19:43:43,160 - coordinator - DEBUG - Returning results: distances=[[  6.05022001 182.72668457 197.43667603 203.05563354 213.77268982
  224.72149658 231.47866821 246.13876343 246.60998535 252.28125   ]
 [223.68067932 261.13632202 264.69284058 268.89154053 270.86141968
  271.22988892 280.74353027 285.25506592 293.28814697 294.45907593]
 [  6.05022001 182.72668457 197.43667603 203.05563354 213.77268982
  224.72149658 231.47866821 246.13876343 246.60998535 252.28125   ]
 [223.68067932 261.13632202 264.69284058 268.89154053 270.86141968
  271.22988892 280.74353027 285.25506592 293.28814697 294.45907593]], indices=[[379800  30675 133567 493566 477623 439593 241297 256195  60090 440508]
 [572555  70254 270297 295420 416269 311883 155443 508917 135902 511999]
 [379800  30675 133567 493566 477623 439593 241297 256195  60090 440508]
 [572555  70254 270297 295420 416269 311883 155443 508917 135902 511999]]
2025-03-23 19:43:43,160 - __main__ - DEBUG - Search results: distances shape=(4, 10), indices shape=(4, 10)
2025-03-23 19:43:43,160 - __main__ - DEBUG - Returning search results: 4 items
2025-03-23 19:43:43,160 - werkzeug - INFO - 127.0.0.1 - - [23/Mar/2025 19:43:43] "POST /search HTTP/1.1" 200 -
2025-03-23 19:43:43,162 - __main__ - DEBUG - Received search request with query_vector shape=(1, 512), k=10
2025-03-23 19:43:43,162 - __main__ - DEBUG - Calling coordinator.search
2025-03-23 19:43:43,162 - coordinator - DEBUG - Starting search with query_vector shape=(1, 512), k=10
2025-03-23 19:43:43,162 - root - DEBUG - Getting candidate shards for query vector with shape (1, 512)
2025-03-23 19:43:43,162 - root - DEBUG - Table 0 hash value shape: (1, 4)
2025-03-23 19:43:43,162 - root - DEBUG - Table 1 hash value shape: (1, 4)
2025-03-23 19:43:43,162 - root - DEBUG - Table 2 hash value shape: (1, 4)
2025-03-23 19:43:43,163 - root - DEBUG - Assigned vector to shard 2
2025-03-23 19:43:43,163 - root - DEBUG - Table 0 hash value shape: (1, 4)
2025-03-23 19:43:43,163 - root - DEBUG - Table 1 hash value shape: (1, 4)
2025-03-23 19:43:43,163 - root - DEBUG - Table 2 hash value shape: (1, 4)
2025-03-23 19:43:43,163 - root - DEBUG - Selected candidate shards: [1, 2]
2025-03-23 19:43:43,163 - coordinator - DEBUG - Candidate shards: [1, 2]
2025-03-23 19:43:43,163 - coordinator - DEBUG - Mapping shard_id 1 to node_idx 1 (out of 3 nodes)
2025-03-23 19:43:43,163 - coordinator - DEBUG - Submitting search to shard 1 at localhost:6002
2025-03-23 19:43:43,163 - coordinator - DEBUG - Sending search request to http://localhost:6002/search
2025-03-23 19:43:43,163 - coordinator - DEBUG - Mapping shard_id 2 to node_idx 2 (out of 3 nodes)
2025-03-23 19:43:43,163 - coordinator - DEBUG - Submitting search to shard 2 at localhost:6003
2025-03-23 19:43:43,164 - coordinator - DEBUG - Sending search request to http://localhost:6003/search
2025-03-23 19:43:43,164 - urllib3.connectionpool - DEBUG - Starting new HTTP connection (1): localhost:6002
2025-03-23 19:43:43,165 - urllib3.connectionpool - DEBUG - Starting new HTTP connection (1): localhost:6003
2025-03-23 19:43:43,167 - urllib3.connectionpool - DEBUG - http://localhost:6003 "POST /search HTTP/1.1" 200 301
2025-03-23 19:43:43,167 - urllib3.connectionpool - DEBUG - http://localhost:6002 "POST /search HTTP/1.1" 200 301
2025-03-23 19:43:43,167 - coordinator - DEBUG - Received response from http://localhost:6002/search: {'distances': [[288.9261779785156, 303.25177001953125, 311.8754577636719, 315.74237060546875, 326.10980224609375, 353.1025085449219, 356.060302734375, 358.80621337890625, 366.4284973144531, 370.611572265625]], 'indices': [[190756, 7816, 549390, 338219, 214192, 321557, 270066, 433204, 291634, 174482]], 'status': 'success'}
2025-03-23 19:43:43,167 - coordinator - DEBUG - Received response from http://localhost:6003/search: {'distances': [[5.917777061462402, 267.8946838378906, 290.0080261230469, 292.7058410644531, 341.6820068359375, 346.6094055175781, 353.0570068359375, 364.8480224609375, 366.2452087402344, 367.3668212890625]], 'indices': [[145620, 102331, 210299, 102411, 455624, 571264, 491213, 291791, 491090, 259690]], 'status': 'success'}
2025-03-23 19:43:43,167 - coordinator - DEBUG - Valid results from http://localhost:6003/search: distances shape=(1, 10), indices shape=(1, 10)
2025-03-23 19:43:43,167 - coordinator - DEBUG - Received search results: distances shape=(1, 10), indices shape=(1, 10)
2025-03-23 19:43:43,167 - coordinator - DEBUG - Valid results from http://localhost:6002/search: distances shape=(1, 10), indices shape=(1, 10)
2025-03-23 19:43:43,167 - coordinator - DEBUG - Received search results: distances shape=(1, 10), indices shape=(1, 10)
2025-03-23 19:43:43,168 - coordinator - DEBUG - All distances: [array([  5.91777706, 267.89468384, 290.00802612, 292.70584106,
       341.68200684, 346.60940552, 353.05700684, 364.84802246,
       366.24520874, 367.36682129]), array([288.92617798, 303.25177002, 311.87545776, 315.74237061,
       326.10980225, 353.10250854, 356.06030273, 358.80621338,
       366.42849731, 370.61157227])]
2025-03-23 19:43:43,168 - coordinator - DEBUG - All indices: [array([145620, 102331, 210299, 102411, 455624, 571264, 491213, 291791,
       491090, 259690]), array([190756,   7816, 549390, 338219, 214192, 321557, 270066, 433204,
       291634, 174482])]
2025-03-23 19:43:43,168 - coordinator - DEBUG - all_distances shape: (2, 10), all_indices shape: (2, 10)
2025-03-23 19:43:43,168 - coordinator - DEBUG - Using k=2 for sorting
2025-03-23 19:43:43,168 - coordinator - DEBUG - sorted_idx: [[0 1 2 3 4 5 6 7 8 9]
 [0 1 2 3 4 5 6 7 8 9]]
2025-03-23 19:43:43,168 - coordinator - ERROR - Index out of bounds: max sorted_idx=9, len(all_distances)=2
2025-03-23 19:43:43,168 - coordinator - DEBUG - Returning results: distances=[[  5.91777706 267.89468384 290.00802612 292.70584106 341.68200684
  346.60940552 353.05700684 364.84802246 366.24520874 367.36682129]
 [288.92617798 303.25177002 311.87545776 315.74237061 326.10980225
  353.10250854 356.06030273 358.80621338 366.42849731 370.61157227]
 [  5.91777706 267.89468384 290.00802612 292.70584106 341.68200684
  346.60940552 353.05700684 364.84802246 366.24520874 367.36682129]
 [288.92617798 303.25177002 311.87545776 315.74237061 326.10980225
  353.10250854 356.06030273 358.80621338 366.42849731 370.61157227]], indices=[[145620 102331 210299 102411 455624 571264 491213 291791 491090 259690]
 [190756   7816 549390 338219 214192 321557 270066 433204 291634 174482]
 [145620 102331 210299 102411 455624 571264 491213 291791 491090 259690]
 [190756   7816 549390 338219 214192 321557 270066 433204 291634 174482]]
2025-03-23 19:43:43,168 - __main__ - DEBUG - Search results: distances shape=(4, 10), indices shape=(4, 10)
2025-03-23 19:43:43,168 - __main__ - DEBUG - Returning search results: 4 items
2025-03-23 19:43:43,168 - werkzeug - INFO - 127.0.0.1 - - [23/Mar/2025 19:43:43] "POST /search HTTP/1.1" 200 -
2025-03-23 19:43:43,170 - __main__ - DEBUG - Received search request with query_vector shape=(1, 512), k=10
2025-03-23 19:43:43,170 - __main__ - DEBUG - Calling coordinator.search
2025-03-23 19:43:43,170 - coordinator - DEBUG - Starting search with query_vector shape=(1, 512), k=10
2025-03-23 19:43:43,170 - root - DEBUG - Getting candidate shards for query vector with shape (1, 512)
2025-03-23 19:43:43,170 - root - DEBUG - Table 0 hash value shape: (1, 4)
2025-03-23 19:43:43,171 - root - DEBUG - Table 1 hash value shape: (1, 4)
2025-03-23 19:43:43,171 - root - DEBUG - Table 2 hash value shape: (1, 4)
2025-03-23 19:43:43,171 - root - DEBUG - Assigned vector to shard 1
2025-03-23 19:43:43,171 - root - DEBUG - Table 0 hash value shape: (1, 4)
2025-03-23 19:43:43,171 - root - DEBUG - Table 1 hash value shape: (1, 4)
2025-03-23 19:43:43,171 - root - DEBUG - Table 2 hash value shape: (1, 4)
2025-03-23 19:43:43,171 - root - DEBUG - Selected candidate shards: [1, 2]
2025-03-23 19:43:43,171 - coordinator - DEBUG - Candidate shards: [1, 2]
2025-03-23 19:43:43,171 - coordinator - DEBUG - Mapping shard_id 1 to node_idx 1 (out of 3 nodes)
2025-03-23 19:43:43,171 - coordinator - DEBUG - Submitting search to shard 1 at localhost:6002
2025-03-23 19:43:43,171 - coordinator - DEBUG - Sending search request to http://localhost:6002/search
2025-03-23 19:43:43,171 - coordinator - DEBUG - Mapping shard_id 2 to node_idx 2 (out of 3 nodes)
2025-03-23 19:43:43,172 - coordinator - DEBUG - Submitting search to shard 2 at localhost:6003
2025-03-23 19:43:43,172 - coordinator - DEBUG - Sending search request to http://localhost:6003/search
2025-03-23 19:43:43,173 - urllib3.connectionpool - DEBUG - Starting new HTTP connection (1): localhost:6003
2025-03-23 19:43:43,173 - urllib3.connectionpool - DEBUG - Starting new HTTP connection (1): localhost:6002
2025-03-23 19:43:43,175 - urllib3.connectionpool - DEBUG - http://localhost:6002 "POST /search HTTP/1.1" 200 298
2025-03-23 19:43:43,175 - coordinator - DEBUG - Received response from http://localhost:6002/search: {'distances': [[8.292370796203613, 282.02337646484375, 304.1513977050781, 342.9234619140625, 347.66815185546875, 351.9064636230469, 352.5394287109375, 356.6254577636719, 358.4598388671875, 359.13525390625]], 'indices': [[58350, 383838, 18150, 513283, 11051, 389381, 294831, 356498, 334417, 245026]], 'status': 'success'}
2025-03-23 19:43:43,175 - coordinator - DEBUG - Valid results from http://localhost:6002/search: distances shape=(1, 10), indices shape=(1, 10)
2025-03-23 19:43:43,175 - coordinator - DEBUG - Received search results: distances shape=(1, 10), indices shape=(1, 10)
2025-03-23 19:43:43,175 - urllib3.connectionpool - DEBUG - http://localhost:6003 "POST /search HTTP/1.1" 200 303
2025-03-23 19:43:43,175 - coordinator - DEBUG - Received response from http://localhost:6003/search: {'distances': [[309.370849609375, 322.09503173828125, 331.71026611328125, 335.06781005859375, 340.92828369140625, 345.37030029296875, 354.1963806152344, 357.0580139160156, 363.3660888671875, 364.5304260253906]], 'indices': [[45550, 473237, 312552, 70739, 148662, 474167, 394940, 201646, 489611, 173008]], 'status': 'success'}
2025-03-23 19:43:43,175 - coordinator - DEBUG - Valid results from http://localhost:6003/search: distances shape=(1, 10), indices shape=(1, 10)
2025-03-23 19:43:43,175 - coordinator - DEBUG - Received search results: distances shape=(1, 10), indices shape=(1, 10)
2025-03-23 19:43:43,176 - coordinator - DEBUG - All distances: [array([  8.2923708 , 282.02337646, 304.15139771, 342.92346191,
       347.66815186, 351.90646362, 352.53942871, 356.62545776,
       358.45983887, 359.13525391]), array([309.37084961, 322.09503174, 331.71026611, 335.06781006,
       340.92828369, 345.37030029, 354.19638062, 357.05801392,
       363.36608887, 364.53042603])]
2025-03-23 19:43:43,176 - coordinator - DEBUG - All indices: [array([ 58350, 383838,  18150, 513283,  11051, 389381, 294831, 356498,
       334417, 245026]), array([ 45550, 473237, 312552,  70739, 148662, 474167, 394940, 201646,
       489611, 173008])]
2025-03-23 19:43:43,176 - coordinator - DEBUG - all_distances shape: (2, 10), all_indices shape: (2, 10)
2025-03-23 19:43:43,176 - coordinator - DEBUG - Using k=2 for sorting
2025-03-23 19:43:43,176 - coordinator - DEBUG - sorted_idx: [[0 1 2 3 4 5 6 7 8 9]
 [0 1 2 3 4 5 6 7 8 9]]
2025-03-23 19:43:43,176 - coordinator - ERROR - Index out of bounds: max sorted_idx=9, len(all_distances)=2
2025-03-23 19:43:43,176 - coordinator - DEBUG - Returning results: distances=[[  8.2923708  282.02337646 304.15139771 342.92346191 347.66815186
  351.90646362 352.53942871 356.62545776 358.45983887 359.13525391]
 [309.37084961 322.09503174 331.71026611 335.06781006 340.92828369
  345.37030029 354.19638062 357.05801392 363.36608887 364.53042603]
 [  8.2923708  282.02337646 304.15139771 342.92346191 347.66815186
  351.90646362 352.53942871 356.62545776 358.45983887 359.13525391]
 [309.37084961 322.09503174 331.71026611 335.06781006 340.92828369
  345.37030029 354.19638062 357.05801392 363.36608887 364.53042603]], indices=[[ 58350 383838  18150 513283  11051 389381 294831 356498 334417 245026]
 [ 45550 473237 312552  70739 148662 474167 394940 201646 489611 173008]
 [ 58350 383838  18150 513283  11051 389381 294831 356498 334417 245026]
 [ 45550 473237 312552  70739 148662 474167 394940 201646 489611 173008]]
2025-03-23 19:43:43,176 - __main__ - DEBUG - Search results: distances shape=(4, 10), indices shape=(4, 10)
2025-03-23 19:43:43,176 - __main__ - DEBUG - Returning search results: 4 items
2025-03-23 19:43:43,176 - werkzeug - INFO - 127.0.0.1 - - [23/Mar/2025 19:43:43] "POST /search HTTP/1.1" 200 -
2025-03-23 19:43:43,179 - __main__ - DEBUG - Received search request with query_vector shape=(1, 512), k=10
2025-03-23 19:43:43,179 - __main__ - DEBUG - Calling coordinator.search
2025-03-23 19:43:43,179 - coordinator - DEBUG - Starting search with query_vector shape=(1, 512), k=10
2025-03-23 19:43:43,179 - root - DEBUG - Getting candidate shards for query vector with shape (1, 512)
2025-03-23 19:43:43,179 - root - DEBUG - Table 0 hash value shape: (1, 4)
2025-03-23 19:43:43,179 - root - DEBUG - Table 1 hash value shape: (1, 4)
2025-03-23 19:43:43,179 - root - DEBUG - Table 2 hash value shape: (1, 4)
2025-03-23 19:43:43,179 - root - DEBUG - Assigned vector to shard 1
2025-03-23 19:43:43,179 - root - DEBUG - Table 0 hash value shape: (1, 4)
2025-03-23 19:43:43,179 - root - DEBUG - Table 1 hash value shape: (1, 4)
2025-03-23 19:43:43,179 - root - DEBUG - Table 2 hash value shape: (1, 4)
2025-03-23 19:43:43,179 - root - DEBUG - Selected candidate shards: [0, 1]
2025-03-23 19:43:43,179 - coordinator - DEBUG - Candidate shards: [0, 1]
2025-03-23 19:43:43,179 - coordinator - DEBUG - Mapping shard_id 0 to node_idx 0 (out of 3 nodes)
2025-03-23 19:43:43,179 - coordinator - DEBUG - Submitting search to shard 0 at localhost:6001
2025-03-23 19:43:43,179 - coordinator - DEBUG - Sending search request to http://localhost:6001/search
2025-03-23 19:43:43,180 - coordinator - DEBUG - Mapping shard_id 1 to node_idx 1 (out of 3 nodes)
2025-03-23 19:43:43,180 - coordinator - DEBUG - Submitting search to shard 1 at localhost:6002
2025-03-23 19:43:43,180 - coordinator - DEBUG - Sending search request to http://localhost:6002/search
2025-03-23 19:43:43,181 - urllib3.connectionpool - DEBUG - Starting new HTTP connection (1): localhost:6002
2025-03-23 19:43:43,181 - urllib3.connectionpool - DEBUG - Starting new HTTP connection (1): localhost:6001
2025-03-23 19:43:43,183 - urllib3.connectionpool - DEBUG - http://localhost:6002 "POST /search HTTP/1.1" 200 297
2025-03-23 19:43:43,183 - coordinator - DEBUG - Received response from http://localhost:6002/search: {'distances': [[16.840970993041992, 413.3643798828125, 483.1694641113281, 493.7472229003906, 506.23394775390625, 519.689208984375, 542.630859375, 566.206787109375, 574.3439331054688, 606.5430297851562]], 'indices': [[194506, 203546, 418959, 490171, 560266, 186422, 127955, 475904, 307658, 132622]], 'status': 'success'}
2025-03-23 19:43:43,183 - coordinator - DEBUG - Valid results from http://localhost:6002/search: distances shape=(1, 10), indices shape=(1, 10)
2025-03-23 19:43:43,183 - urllib3.connectionpool - DEBUG - http://localhost:6001 "POST /search HTTP/1.1" 200 289
2025-03-23 19:43:43,183 - coordinator - DEBUG - Received response from http://localhost:6001/search: {'distances': [[552.5786743164062, 553.4232177734375, 571.69140625, 572.9830322265625, 585.572998046875, 593.6044921875, 594.8322143554688, 596.0274658203125, 598.8050537109375, 612.6243896484375]], 'indices': [[269196, 20247, 523033, 471756, 404805, 2261, 209829, 191672, 482735, 119088]], 'status': 'success'}
2025-03-23 19:43:43,183 - coordinator - DEBUG - Valid results from http://localhost:6001/search: distances shape=(1, 10), indices shape=(1, 10)
2025-03-23 19:43:43,183 - coordinator - DEBUG - Received search results: distances shape=(1, 10), indices shape=(1, 10)
2025-03-23 19:43:43,183 - coordinator - DEBUG - Received search results: distances shape=(1, 10), indices shape=(1, 10)
2025-03-23 19:43:43,184 - coordinator - DEBUG - All distances: [array([ 16.84097099, 413.36437988, 483.16946411, 493.7472229 ,
       506.23394775, 519.68920898, 542.63085938, 566.20678711,
       574.34393311, 606.54302979]), array([552.57867432, 553.42321777, 571.69140625, 572.98303223,
       585.57299805, 593.60449219, 594.83221436, 596.02746582,
       598.80505371, 612.62438965])]
2025-03-23 19:43:43,184 - coordinator - DEBUG - All indices: [array([194506, 203546, 418959, 490171, 560266, 186422, 127955, 475904,
       307658, 132622]), array([269196,  20247, 523033, 471756, 404805,   2261, 209829, 191672,
       482735, 119088])]
2025-03-23 19:43:43,184 - coordinator - DEBUG - all_distances shape: (2, 10), all_indices shape: (2, 10)
2025-03-23 19:43:43,184 - coordinator - DEBUG - Using k=2 for sorting
2025-03-23 19:43:43,184 - coordinator - DEBUG - sorted_idx: [[0 1 2 3 4 5 6 7 8 9]
 [0 1 2 3 4 5 6 7 8 9]]
2025-03-23 19:43:43,184 - coordinator - ERROR - Index out of bounds: max sorted_idx=9, len(all_distances)=2
2025-03-23 19:43:43,184 - coordinator - DEBUG - Returning results: distances=[[ 16.84097099 413.36437988 483.16946411 493.7472229  506.23394775
  519.68920898 542.63085938 566.20678711 574.34393311 606.54302979]
 [552.57867432 553.42321777 571.69140625 572.98303223 585.57299805
  593.60449219 594.83221436 596.02746582 598.80505371 612.62438965]
 [ 16.84097099 413.36437988 483.16946411 493.7472229  506.23394775
  519.68920898 542.63085938 566.20678711 574.34393311 606.54302979]
 [552.57867432 553.42321777 571.69140625 572.98303223 585.57299805
  593.60449219 594.83221436 596.02746582 598.80505371 612.62438965]], indices=[[194506 203546 418959 490171 560266 186422 127955 475904 307658 132622]
 [269196  20247 523033 471756 404805   2261 209829 191672 482735 119088]
 [194506 203546 418959 490171 560266 186422 127955 475904 307658 132622]
 [269196  20247 523033 471756 404805   2261 209829 191672 482735 119088]]
2025-03-23 19:43:43,184 - __main__ - DEBUG - Search results: distances shape=(4, 10), indices shape=(4, 10)
2025-03-23 19:43:43,184 - __main__ - DEBUG - Returning search results: 4 items
2025-03-23 19:43:43,184 - werkzeug - INFO - 127.0.0.1 - - [23/Mar/2025 19:43:43] "POST /search HTTP/1.1" 200 -
2025-03-23 19:43:43,186 - __main__ - DEBUG - Received search request with query_vector shape=(1, 512), k=10
2025-03-23 19:43:43,187 - __main__ - DEBUG - Calling coordinator.search
2025-03-23 19:43:43,187 - coordinator - DEBUG - Starting search with query_vector shape=(1, 512), k=10
2025-03-23 19:43:43,187 - root - DEBUG - Getting candidate shards for query vector with shape (1, 512)
2025-03-23 19:43:43,187 - root - DEBUG - Table 0 hash value shape: (1, 4)
2025-03-23 19:43:43,187 - root - DEBUG - Table 1 hash value shape: (1, 4)
2025-03-23 19:43:43,187 - root - DEBUG - Table 2 hash value shape: (1, 4)
2025-03-23 19:43:43,187 - root - DEBUG - Assigned vector to shard 1
2025-03-23 19:43:43,187 - root - DEBUG - Table 0 hash value shape: (1, 4)
2025-03-23 19:43:43,187 - root - DEBUG - Table 1 hash value shape: (1, 4)
2025-03-23 19:43:43,187 - root - DEBUG - Table 2 hash value shape: (1, 4)
2025-03-23 19:43:43,187 - root - DEBUG - Selected candidate shards: [0, 1]
2025-03-23 19:43:43,187 - coordinator - DEBUG - Candidate shards: [0, 1]
2025-03-23 19:43:43,187 - coordinator - DEBUG - Mapping shard_id 0 to node_idx 0 (out of 3 nodes)
2025-03-23 19:43:43,187 - coordinator - DEBUG - Submitting search to shard 0 at localhost:6001
2025-03-23 19:43:43,187 - coordinator - DEBUG - Sending search request to http://localhost:6001/search
2025-03-23 19:43:43,187 - coordinator - DEBUG - Mapping shard_id 1 to node_idx 1 (out of 3 nodes)
2025-03-23 19:43:43,188 - coordinator - DEBUG - Submitting search to shard 1 at localhost:6002
2025-03-23 19:43:43,188 - coordinator - DEBUG - Sending search request to http://localhost:6002/search
2025-03-23 19:43:43,188 - urllib3.connectionpool - DEBUG - Starting new HTTP connection (1): localhost:6001
2025-03-23 19:43:43,189 - urllib3.connectionpool - DEBUG - Starting new HTTP connection (1): localhost:6002
2025-03-23 19:43:43,190 - urllib3.connectionpool - DEBUG - http://localhost:6001 "POST /search HTTP/1.1" 200 303
2025-03-23 19:43:43,191 - coordinator - DEBUG - Received response from http://localhost:6001/search: {'distances': [[174.93800354003906, 177.30520629882812, 216.1268310546875, 221.31491088867188, 233.08541870117188, 261.701904296875, 262.1899108886719, 262.27606201171875, 269.3204345703125, 292.8341064453125]], 'indices': [[577149, 501243, 54123, 159311, 484296, 125211, 201676, 378453, 320632, 52462]], 'status': 'success'}
2025-03-23 19:43:43,191 - coordinator - DEBUG - Valid results from http://localhost:6001/search: distances shape=(1, 10), indices shape=(1, 10)
2025-03-23 19:43:43,191 - coordinator - DEBUG - Received search results: distances shape=(1, 10), indices shape=(1, 10)
2025-03-23 19:43:43,191 - urllib3.connectionpool - DEBUG - http://localhost:6002 "POST /search HTTP/1.1" 200 305
2025-03-23 19:43:43,191 - coordinator - DEBUG - Received response from http://localhost:6002/search: {'distances': [[10.470561027526855, 183.81088256835938, 190.28012084960938, 192.55322265625, 199.662841796875, 214.04718017578125, 236.26507568359375, 242.81317138671875, 242.8248291015625, 247.85531616210938]], 'indices': [[545129, 124975, 325306, 172977, 493019, 364166, 552902, 290833, 250758, 236730]], 'status': 'success'}
2025-03-23 19:43:43,191 - coordinator - DEBUG - Valid results from http://localhost:6002/search: distances shape=(1, 10), indices shape=(1, 10)
2025-03-23 19:43:43,191 - coordinator - DEBUG - Received search results: distances shape=(1, 10), indices shape=(1, 10)
2025-03-23 19:43:43,191 - coordinator - DEBUG - All distances: [array([174.93800354, 177.3052063 , 216.12683105, 221.31491089,
       233.0854187 , 261.7019043 , 262.18991089, 262.27606201,
       269.32043457, 292.83410645]), array([ 10.47056103, 183.81088257, 190.28012085, 192.55322266,
       199.6628418 , 214.04718018, 236.26507568, 242.81317139,
       242.8248291 , 247.85531616])]
2025-03-23 19:43:43,191 - coordinator - DEBUG - All indices: [array([577149, 501243,  54123, 159311, 484296, 125211, 201676, 378453,
       320632,  52462]), array([545129, 124975, 325306, 172977, 493019, 364166, 552902, 290833,
       250758, 236730])]
2025-03-23 19:43:43,191 - coordinator - DEBUG - all_distances shape: (2, 10), all_indices shape: (2, 10)
2025-03-23 19:43:43,191 - coordinator - DEBUG - Using k=2 for sorting
2025-03-23 19:43:43,191 - coordinator - DEBUG - sorted_idx: [[0 1 2 3 4 5 6 7 8 9]
 [0 1 2 3 4 5 6 7 8 9]]
2025-03-23 19:43:43,191 - coordinator - ERROR - Index out of bounds: max sorted_idx=9, len(all_distances)=2
2025-03-23 19:43:43,192 - coordinator - DEBUG - Returning results: distances=[[174.93800354 177.3052063  216.12683105 221.31491089 233.0854187
  261.7019043  262.18991089 262.27606201 269.32043457 292.83410645]
 [ 10.47056103 183.81088257 190.28012085 192.55322266 199.6628418
  214.04718018 236.26507568 242.81317139 242.8248291  247.85531616]
 [174.93800354 177.3052063  216.12683105 221.31491089 233.0854187
  261.7019043  262.18991089 262.27606201 269.32043457 292.83410645]
 [ 10.47056103 183.81088257 190.28012085 192.55322266 199.6628418
  214.04718018 236.26507568 242.81317139 242.8248291  247.85531616]], indices=[[577149 501243  54123 159311 484296 125211 201676 378453 320632  52462]
 [545129 124975 325306 172977 493019 364166 552902 290833 250758 236730]
 [577149 501243  54123 159311 484296 125211 201676 378453 320632  52462]
 [545129 124975 325306 172977 493019 364166 552902 290833 250758 236730]]
2025-03-23 19:43:43,192 - __main__ - DEBUG - Search results: distances shape=(4, 10), indices shape=(4, 10)
2025-03-23 19:43:43,192 - __main__ - DEBUG - Returning search results: 4 items
2025-03-23 19:43:43,192 - werkzeug - INFO - 127.0.0.1 - - [23/Mar/2025 19:43:43] "POST /search HTTP/1.1" 200 -
2025-03-23 19:43:43,194 - __main__ - DEBUG - Received search request with query_vector shape=(1, 512), k=50
2025-03-23 19:43:43,194 - __main__ - DEBUG - Calling coordinator.search
2025-03-23 19:43:43,194 - coordinator - DEBUG - Starting search with query_vector shape=(1, 512), k=50
2025-03-23 19:43:43,194 - root - DEBUG - Getting candidate shards for query vector with shape (1, 512)
2025-03-23 19:43:43,194 - root - DEBUG - Table 0 hash value shape: (1, 4)
2025-03-23 19:43:43,194 - root - DEBUG - Table 1 hash value shape: (1, 4)
2025-03-23 19:43:43,194 - root - DEBUG - Table 2 hash value shape: (1, 4)
2025-03-23 19:43:43,194 - root - DEBUG - Assigned vector to shard 2
2025-03-23 19:43:43,195 - root - DEBUG - Table 0 hash value shape: (1, 4)
2025-03-23 19:43:43,195 - root - DEBUG - Table 1 hash value shape: (1, 4)
2025-03-23 19:43:43,195 - root - DEBUG - Table 2 hash value shape: (1, 4)
2025-03-23 19:43:43,195 - root - DEBUG - Selected candidate shards: [0, 2]
2025-03-23 19:43:43,195 - coordinator - DEBUG - Candidate shards: [0, 2]
2025-03-23 19:43:43,195 - coordinator - DEBUG - Mapping shard_id 0 to node_idx 0 (out of 3 nodes)
2025-03-23 19:43:43,195 - coordinator - DEBUG - Submitting search to shard 0 at localhost:6001
2025-03-23 19:43:43,195 - coordinator - DEBUG - Sending search request to http://localhost:6001/search
2025-03-23 19:43:43,195 - coordinator - DEBUG - Mapping shard_id 2 to node_idx 2 (out of 3 nodes)
2025-03-23 19:43:43,195 - coordinator - DEBUG - Submitting search to shard 2 at localhost:6003
2025-03-23 19:43:43,195 - coordinator - DEBUG - Sending search request to http://localhost:6003/search
2025-03-23 19:43:43,196 - urllib3.connectionpool - DEBUG - Starting new HTTP connection (1): localhost:6003
2025-03-23 19:43:43,196 - urllib3.connectionpool - DEBUG - Starting new HTTP connection (1): localhost:6001
2025-03-23 19:43:43,199 - urllib3.connectionpool - DEBUG - http://localhost:6001 "POST /search HTTP/1.1" 200 1292
2025-03-23 19:43:43,199 - coordinator - DEBUG - Received response from http://localhost:6001/search: {'distances': [[6.050220012664795, 182.7266845703125, 197.43667602539062, 203.05563354492188, 213.77268981933594, 224.72149658203125, 231.47866821289062, 246.13876342773438, 246.6099853515625, 252.28125, 252.76806640625, 252.86325073242188, 254.14694213867188, 255.91751098632812, 259.0876159667969, 259.6744384765625, 261.52484130859375, 267.11639404296875, 269.86163330078125, 276.9520263671875, 277.20269775390625, 283.43927001953125, 283.455810546875, 294.4888916015625, 297.879638671875, 298.8684997558594, 304.7881164550781, 309.724853515625, 311.57867431640625, 313.5284118652344, 314.1706848144531, 316.9643249511719, 318.3319091796875, 327.8151550292969, 328.31329345703125, 328.78125, 331.5523376464844, 333.74871826171875, 335.8971252441406, 338.8893737792969, 339.1814880371094, 341.83734130859375, 342.09405517578125, 343.8394775390625, 347.00103759765625, 353.07244873046875, 356.53570556640625, 358.2470703125, 359.8987731933594, 364.48785400390625]], 'indices': [[379800, 30675, 133567, 493566, 477623, 439593, 241297, 256195, 60090, 440508, 206994, 33109, 90155, 566524, 368038, 482585, 519338, 225946, 431896, 539143, 419096, 201148, 134722, 275727, 200162, 39670, 217400, 448410, 146825, 232538, 323751, 115118, 128051, 180188, 558421, 440617, 151857, 579818, 52007, 303863, 363072, 177893, 82085, 287874, 494863, 311909, 231169, 578967, 90208, 572303]], 'status': 'success'}
2025-03-23 19:43:43,199 - coordinator - DEBUG - Valid results from http://localhost:6001/search: distances shape=(1, 50), indices shape=(1, 50)
2025-03-23 19:43:43,199 - coordinator - DEBUG - Received search results: distances shape=(1, 50), indices shape=(1, 50)
2025-03-23 19:43:43,199 - urllib3.connectionpool - DEBUG - http://localhost:6003 "POST /search HTTP/1.1" 200 1302
2025-03-23 19:43:43,200 - coordinator - DEBUG - Received response from http://localhost:6003/search: {'distances': [[223.68067932128906, 261.1363220214844, 264.6928405761719, 268.89154052734375, 270.8614196777344, 271.2298889160156, 280.7435302734375, 285.25506591796875, 293.28814697265625, 294.4590759277344, 298.4531555175781, 302.074462890625, 310.91162109375, 316.76007080078125, 320.2503967285156, 336.86834716796875, 338.4091491699219, 344.02020263671875, 345.87548828125, 346.639404296875, 350.7432861328125, 353.98773193359375, 356.8609924316406, 358.2466125488281, 358.8722229003906, 361.87933349609375, 363.3062744140625, 366.0379638671875, 371.9473571777344, 379.4862060546875, 381.3715515136719, 383.8329162597656, 384.0146789550781, 384.55670166015625, 388.66961669921875, 391.22381591796875, 391.79425048828125, 392.451416015625, 396.4420166015625, 399.48272705078125, 402.5003662109375, 402.840087890625, 403.5804443359375, 404.62640380859375, 408.8249816894531, 412.0340576171875, 413.0330810546875, 413.6707458496094, 413.83319091796875, 414.55841064453125]], 'indices': [[572555, 70254, 270297, 295420, 416269, 311883, 155443, 508917, 135902, 511999, 478474, 185472, 307598, 344816, 546659, 347544, 539445, 478286, 55167, 338986, 187144, 475387, 315450, 155341, 184321, 128372, 469246, 66135, 423229, 26204, 6723, 275791, 122606, 423519, 443498, 442456, 17207, 249643, 574425, 423617, 306893, 415536, 221754, 15338, 426372, 306136, 392722, 314251, 446206, 206487]], 'status': 'success'}
2025-03-23 19:43:43,200 - coordinator - DEBUG - Valid results from http://localhost:6003/search: distances shape=(1, 50), indices shape=(1, 50)
2025-03-23 19:43:43,200 - coordinator - DEBUG - Received search results: distances shape=(1, 50), indices shape=(1, 50)
2025-03-23 19:43:43,200 - coordinator - DEBUG - All distances: [array([  6.05022001, 182.72668457, 197.43667603, 203.05563354,
       213.77268982, 224.72149658, 231.47866821, 246.13876343,
       246.60998535, 252.28125   , 252.76806641, 252.86325073,
       254.14694214, 255.91751099, 259.08761597, 259.67443848,
       261.52484131, 267.11639404, 269.8616333 , 276.95202637,
       277.20269775, 283.43927002, 283.45581055, 294.4888916 ,
       297.87963867, 298.86849976, 304.78811646, 309.72485352,
       311.57867432, 313.52841187, 314.17068481, 316.96432495,
       318.33190918, 327.81515503, 328.31329346, 328.78125   ,
       331.55233765, 333.74871826, 335.89712524, 338.88937378,
       339.18148804, 341.83734131, 342.09405518, 343.83947754,
       347.0010376 , 353.07244873, 356.53570557, 358.24707031,
       359.89877319, 364.487854  ]), array([223.68067932, 261.13632202, 264.69284058, 268.89154053,
       270.86141968, 271.22988892, 280.74353027, 285.25506592,
       293.28814697, 294.45907593, 298.45315552, 302.07446289,
       310.91162109, 316.7600708 , 320.25039673, 336.86834717,
       338.40914917, 344.02020264, 345.87548828, 346.6394043 ,
       350.74328613, 353.98773193, 356.86099243, 358.24661255,
       358.8722229 , 361.8793335 , 363.30627441, 366.03796387,
       371.94735718, 379.48620605, 381.37155151, 383.83291626,
       384.01467896, 384.55670166, 388.6696167 , 391.22381592,
       391.79425049, 392.45141602, 396.4420166 , 399.48272705,
       402.50036621, 402.84008789, 403.58044434, 404.62640381,
       408.82498169, 412.03405762, 413.03308105, 413.67074585,
       413.83319092, 414.55841064])]
2025-03-23 19:43:43,200 - coordinator - DEBUG - All indices: [array([379800,  30675, 133567, 493566, 477623, 439593, 241297, 256195,
        60090, 440508, 206994,  33109,  90155, 566524, 368038, 482585,
       519338, 225946, 431896, 539143, 419096, 201148, 134722, 275727,
       200162,  39670, 217400, 448410, 146825, 232538, 323751, 115118,
       128051, 180188, 558421, 440617, 151857, 579818,  52007, 303863,
       363072, 177893,  82085, 287874, 494863, 311909, 231169, 578967,
        90208, 572303]), array([572555,  70254, 270297, 295420, 416269, 311883, 155443, 508917,
       135902, 511999, 478474, 185472, 307598, 344816, 546659, 347544,
       539445, 478286,  55167, 338986, 187144, 475387, 315450, 155341,
       184321, 128372, 469246,  66135, 423229,  26204,   6723, 275791,
       122606, 423519, 443498, 442456,  17207, 249643, 574425, 423617,
       306893, 415536, 221754,  15338, 426372, 306136, 392722, 314251,
       446206, 206487])]
2025-03-23 19:43:43,200 - coordinator - DEBUG - all_distances shape: (2, 50), all_indices shape: (2, 50)
2025-03-23 19:43:43,200 - coordinator - DEBUG - Using k=2 for sorting
2025-03-23 19:43:43,200 - coordinator - DEBUG - sorted_idx: [[ 0  1  2  3  4  5  6  7  8  9 10 11 12 13 14 15 16 17 18 19 20 21 22 23
  24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47
  48 49]
 [ 0  1  2  3  4  5  6  7  8  9 10 11 12 13 14 15 16 17 18 19 20 21 22 23
  24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47
  48 49]]
2025-03-23 19:43:43,200 - coordinator - ERROR - Index out of bounds: max sorted_idx=49, len(all_distances)=2
2025-03-23 19:43:43,201 - coordinator - DEBUG - Returning results: distances=[[  6.05022001 182.72668457 197.43667603 203.05563354 213.77268982
  224.72149658 231.47866821 246.13876343 246.60998535 252.28125
  252.76806641 252.86325073 254.14694214 255.91751099 259.08761597
  259.67443848 261.52484131 267.11639404 269.8616333  276.95202637
  277.20269775 283.43927002 283.45581055 294.4888916  297.87963867
  298.86849976 304.78811646 309.72485352 311.57867432 313.52841187
  314.17068481 316.96432495 318.33190918 327.81515503 328.31329346
  328.78125    331.55233765 333.74871826 335.89712524 338.88937378
  339.18148804 341.83734131 342.09405518 343.83947754 347.0010376
  353.07244873 356.53570557 358.24707031 359.89877319 364.487854  ]
 [223.68067932 261.13632202 264.69284058 268.89154053 270.86141968
  271.22988892 280.74353027 285.25506592 293.28814697 294.45907593
  298.45315552 302.07446289 310.91162109 316.7600708  320.25039673
  336.86834717 338.40914917 344.02020264 345.87548828 346.6394043
  350.74328613 353.98773193 356.86099243 358.24661255 358.8722229
  361.8793335  363.30627441 366.03796387 371.94735718 379.48620605
  381.37155151 383.83291626 384.01467896 384.55670166 388.6696167
  391.22381592 391.79425049 392.45141602 396.4420166  399.48272705
  402.50036621 402.84008789 403.58044434 404.62640381 408.82498169
  412.03405762 413.03308105 413.67074585 413.83319092 414.55841064]
 [  6.05022001 182.72668457 197.43667603 203.05563354 213.77268982
  224.72149658 231.47866821 246.13876343 246.60998535 252.28125
  252.76806641 252.86325073 254.14694214 255.91751099 259.08761597
  259.67443848 261.52484131 267.11639404 269.8616333  276.95202637
  277.20269775 283.43927002 283.45581055 294.4888916  297.87963867
  298.86849976 304.78811646 309.72485352 311.57867432 313.52841187
  314.17068481 316.96432495 318.33190918 327.81515503 328.31329346
  328.78125    331.55233765 333.74871826 335.89712524 338.88937378
  339.18148804 341.83734131 342.09405518 343.83947754 347.0010376
  353.07244873 356.53570557 358.24707031 359.89877319 364.487854  ]
 [223.68067932 261.13632202 264.69284058 268.89154053 270.86141968
  271.22988892 280.74353027 285.25506592 293.28814697 294.45907593
  298.45315552 302.07446289 310.91162109 316.7600708  320.25039673
  336.86834717 338.40914917 344.02020264 345.87548828 346.6394043
  350.74328613 353.98773193 356.86099243 358.24661255 358.8722229
  361.8793335  363.30627441 366.03796387 371.94735718 379.48620605
  381.37155151 383.83291626 384.01467896 384.55670166 388.6696167
  391.22381592 391.79425049 392.45141602 396.4420166  399.48272705
  402.50036621 402.84008789 403.58044434 404.62640381 408.82498169
  412.03405762 413.03308105 413.67074585 413.83319092 414.55841064]], indices=[[379800  30675 133567 493566 477623 439593 241297 256195  60090 440508
  206994  33109  90155 566524 368038 482585 519338 225946 431896 539143
  419096 201148 134722 275727 200162  39670 217400 448410 146825 232538
  323751 115118 128051 180188 558421 440617 151857 579818  52007 303863
  363072 177893  82085 287874 494863 311909 231169 578967  90208 572303]
 [572555  70254 270297 295420 416269 311883 155443 508917 135902 511999
  478474 185472 307598 344816 546659 347544 539445 478286  55167 338986
  187144 475387 315450 155341 184321 128372 469246  66135 423229  26204
    6723 275791 122606 423519 443498 442456  17207 249643 574425 423617
  306893 415536 221754  15338 426372 306136 392722 314251 446206 206487]
 [379800  30675 133567 493566 477623 439593 241297 256195  60090 440508
  206994  33109  90155 566524 368038 482585 519338 225946 431896 539143
  419096 201148 134722 275727 200162  39670 217400 448410 146825 232538
  323751 115118 128051 180188 558421 440617 151857 579818  52007 303863
  363072 177893  82085 287874 494863 311909 231169 578967  90208 572303]
 [572555  70254 270297 295420 416269 311883 155443 508917 135902 511999
  478474 185472 307598 344816 546659 347544 539445 478286  55167 338986
  187144 475387 315450 155341 184321 128372 469246  66135 423229  26204
    6723 275791 122606 423519 443498 442456  17207 249643 574425 423617
  306893 415536 221754  15338 426372 306136 392722 314251 446206 206487]]
2025-03-23 19:43:43,201 - __main__ - DEBUG - Search results: distances shape=(4, 50), indices shape=(4, 50)
2025-03-23 19:43:43,201 - __main__ - DEBUG - Returning search results: 4 items
2025-03-23 19:43:43,201 - werkzeug - INFO - 127.0.0.1 - - [23/Mar/2025 19:43:43] "POST /search HTTP/1.1" 200 -
2025-03-23 19:43:43,204 - __main__ - DEBUG - Received search request with query_vector shape=(1, 512), k=50
2025-03-23 19:43:43,204 - __main__ - DEBUG - Calling coordinator.search
2025-03-23 19:43:43,204 - coordinator - DEBUG - Starting search with query_vector shape=(1, 512), k=50
2025-03-23 19:43:43,205 - root - DEBUG - Getting candidate shards for query vector with shape (1, 512)
2025-03-23 19:43:43,205 - root - DEBUG - Table 0 hash value shape: (1, 4)
2025-03-23 19:43:43,205 - root - DEBUG - Table 1 hash value shape: (1, 4)
2025-03-23 19:43:43,205 - root - DEBUG - Table 2 hash value shape: (1, 4)
2025-03-23 19:43:43,205 - root - DEBUG - Assigned vector to shard 2
2025-03-23 19:43:43,205 - root - DEBUG - Table 0 hash value shape: (1, 4)
2025-03-23 19:43:43,205 - root - DEBUG - Table 1 hash value shape: (1, 4)
2025-03-23 19:43:43,205 - root - DEBUG - Table 2 hash value shape: (1, 4)
2025-03-23 19:43:43,205 - root - DEBUG - Selected candidate shards: [1, 2]
2025-03-23 19:43:43,205 - coordinator - DEBUG - Candidate shards: [1, 2]
2025-03-23 19:43:43,205 - coordinator - DEBUG - Mapping shard_id 1 to node_idx 1 (out of 3 nodes)
2025-03-23 19:43:43,205 - coordinator - DEBUG - Submitting search to shard 1 at localhost:6002
2025-03-23 19:43:43,205 - coordinator - DEBUG - Sending search request to http://localhost:6002/search
2025-03-23 19:43:43,206 - coordinator - DEBUG - Mapping shard_id 2 to node_idx 2 (out of 3 nodes)
2025-03-23 19:43:43,206 - coordinator - DEBUG - Submitting search to shard 2 at localhost:6003
2025-03-23 19:43:43,206 - coordinator - DEBUG - Sending search request to http://localhost:6003/search
2025-03-23 19:43:43,206 - urllib3.connectionpool - DEBUG - Starting new HTTP connection (1): localhost:6002
2025-03-23 19:43:43,207 - urllib3.connectionpool - DEBUG - Starting new HTTP connection (1): localhost:6003
2025-03-23 19:43:43,209 - urllib3.connectionpool - DEBUG - http://localhost:6002 "POST /search HTTP/1.1" 200 1291
2025-03-23 19:43:43,209 - coordinator - DEBUG - Received response from http://localhost:6002/search: {'distances': [[288.9261779785156, 303.25177001953125, 311.8754577636719, 315.74237060546875, 326.10980224609375, 353.1025085449219, 356.060302734375, 358.80621337890625, 366.4284973144531, 370.611572265625, 380.0295104980469, 380.60748291015625, 382.93206787109375, 384.07525634765625, 384.9373474121094, 400.9406433105469, 401.01824951171875, 402.2726745605469, 403.6279602050781, 406.5517578125, 421.16351318359375, 429.89056396484375, 440.1388244628906, 441.16619873046875, 441.60870361328125, 442.0572204589844, 454.10693359375, 460.55255126953125, 469.76336669921875, 473.57763671875, 473.6805114746094, 474.6334228515625, 475.148193359375, 476.9756774902344, 478.29534912109375, 479.294921875, 479.6615905761719, 481.4598388671875, 481.7870788574219, 484.7803039550781, 486.760986328125, 490.3440856933594, 492.84521484375, 497.1930847167969, 498.9060363769531, 500.000732421875, 500.00335693359375, 501.716552734375, 503.57049560546875, 504.8685302734375]], 'indices': [[190756, 7816, 549390, 338219, 214192, 321557, 270066, 433204, 291634, 174482, 273551, 70774, 177934, 441586, 499622, 181542, 579902, 44590, 462756, 245448, 55022, 572956, 136715, 228436, 226417, 98287, 194875, 467511, 343561, 394199, 142324, 578792, 507037, 141671, 388258, 226662, 8211, 523957, 275392, 488385, 395180, 349860, 184324, 146667, 192607, 513580, 345027, 299887, 144333, 574297]], 'status': 'success'}
2025-03-23 19:43:43,209 - coordinator - DEBUG - Valid results from http://localhost:6002/search: distances shape=(1, 50), indices shape=(1, 50)
2025-03-23 19:43:43,209 - coordinator - DEBUG - Received search results: distances shape=(1, 50), indices shape=(1, 50)
2025-03-23 19:43:43,209 - urllib3.connectionpool - DEBUG - http://localhost:6003 "POST /search HTTP/1.1" 200 1294
2025-03-23 19:43:43,209 - coordinator - DEBUG - Received response from http://localhost:6003/search: {'distances': [[5.917777061462402, 267.8946838378906, 290.0080261230469, 292.7058410644531, 341.6820068359375, 346.6094055175781, 353.0570068359375, 364.8480224609375, 366.2452087402344, 367.3668212890625, 377.8171691894531, 390.9093017578125, 391.0843505859375, 391.44207763671875, 408.686279296875, 412.5203552246094, 417.2493896484375, 418.00360107421875, 422.0140075683594, 423.4010009765625, 429.2477722167969, 438.7749938964844, 443.6248474121094, 453.77447509765625, 455.6508483886719, 458.37847900390625, 467.5233154296875, 472.23822021484375, 476.1922912597656, 478.13818359375, 484.18719482421875, 486.16845703125, 486.7788391113281, 489.05963134765625, 489.6727294921875, 492.92462158203125, 493.81793212890625, 496.46759033203125, 497.13018798828125, 497.749267578125, 507.72186279296875, 510.63189697265625, 513.6138916015625, 516.83544921875, 517.0880126953125, 517.14404296875, 518.4512329101562, 518.8209838867188, 521.1495971679688, 522.306640625]], 'indices': [[145620, 102331, 210299, 102411, 455624, 571264, 491213, 291791, 491090, 259690, 224051, 48924, 179765, 184611, 538364, 343934, 18737, 185472, 114770, 472623, 78748, 524108, 424162, 190676, 492937, 297147, 356169, 365642, 297022, 476119, 414510, 204186, 48555, 205289, 389532, 140420, 263299, 581357, 50145, 172935, 20553, 373315, 404249, 560880, 471023, 419408, 232646, 220764, 148508, 573094]], 'status': 'success'}
2025-03-23 19:43:43,209 - coordinator - DEBUG - Valid results from http://localhost:6003/search: distances shape=(1, 50), indices shape=(1, 50)
2025-03-23 19:43:43,209 - coordinator - DEBUG - Received search results: distances shape=(1, 50), indices shape=(1, 50)
2025-03-23 19:43:43,210 - coordinator - DEBUG - All distances: [array([288.92617798, 303.25177002, 311.87545776, 315.74237061,
       326.10980225, 353.10250854, 356.06030273, 358.80621338,
       366.42849731, 370.61157227, 380.0295105 , 380.60748291,
       382.93206787, 384.07525635, 384.93734741, 400.94064331,
       401.01824951, 402.27267456, 403.62796021, 406.55175781,
       421.16351318, 429.89056396, 440.13882446, 441.16619873,
       441.60870361, 442.05722046, 454.10693359, 460.55255127,
       469.7633667 , 473.57763672, 473.68051147, 474.63342285,
       475.14819336, 476.97567749, 478.29534912, 479.29492188,
       479.66159058, 481.45983887, 481.78707886, 484.78030396,
       486.76098633, 490.34408569, 492.84521484, 497.19308472,
       498.90603638, 500.00073242, 500.00335693, 501.71655273,
       503.57049561, 504.86853027]), array([  5.91777706, 267.89468384, 290.00802612, 292.70584106,
       341.68200684, 346.60940552, 353.05700684, 364.84802246,
       366.24520874, 367.36682129, 377.81716919, 390.90930176,
       391.08435059, 391.44207764, 408.6862793 , 412.52035522,
       417.24938965, 418.00360107, 422.01400757, 423.40100098,
       429.24777222, 438.7749939 , 443.62484741, 453.7744751 ,
       455.65084839, 458.378479  , 467.52331543, 472.23822021,
       476.19229126, 478.13818359, 484.18719482, 486.16845703,
       486.77883911, 489.05963135, 489.67272949, 492.92462158,
       493.81793213, 496.46759033, 497.13018799, 497.74926758,
       507.72186279, 510.63189697, 513.6138916 , 516.83544922,
       517.0880127 , 517.14404297, 518.45123291, 518.82098389,
       521.14959717, 522.30664062])]
2025-03-23 19:43:43,210 - coordinator - DEBUG - All indices: [array([190756,   7816, 549390, 338219, 214192, 321557, 270066, 433204,
       291634, 174482, 273551,  70774, 177934, 441586, 499622, 181542,
       579902,  44590, 462756, 245448,  55022, 572956, 136715, 228436,
       226417,  98287, 194875, 467511, 343561, 394199, 142324, 578792,
       507037, 141671, 388258, 226662,   8211, 523957, 275392, 488385,
       395180, 349860, 184324, 146667, 192607, 513580, 345027, 299887,
       144333, 574297]), array([145620, 102331, 210299, 102411, 455624, 571264, 491213, 291791,
       491090, 259690, 224051,  48924, 179765, 184611, 538364, 343934,
        18737, 185472, 114770, 472623,  78748, 524108, 424162, 190676,
       492937, 297147, 356169, 365642, 297022, 476119, 414510, 204186,
        48555, 205289, 389532, 140420, 263299, 581357,  50145, 172935,
        20553, 373315, 404249, 560880, 471023, 419408, 232646, 220764,
       148508, 573094])]
2025-03-23 19:43:43,210 - coordinator - DEBUG - all_distances shape: (2, 50), all_indices shape: (2, 50)
2025-03-23 19:43:43,210 - coordinator - DEBUG - Using k=2 for sorting
2025-03-23 19:43:43,210 - coordinator - DEBUG - sorted_idx: [[ 0  1  2  3  4  5  6  7  8  9 10 11 12 13 14 15 16 17 18 19 20 21 22 23
  24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47
  48 49]
 [ 0  1  2  3  4  5  6  7  8  9 10 11 12 13 14 15 16 17 18 19 20 21 22 23
  24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47
  48 49]]
2025-03-23 19:43:43,210 - coordinator - ERROR - Index out of bounds: max sorted_idx=49, len(all_distances)=2
2025-03-23 19:43:43,211 - coordinator - DEBUG - Returning results: distances=[[288.92617798 303.25177002 311.87545776 315.74237061 326.10980225
  353.10250854 356.06030273 358.80621338 366.42849731 370.61157227
  380.0295105  380.60748291 382.93206787 384.07525635 384.93734741
  400.94064331 401.01824951 402.27267456 403.62796021 406.55175781
  421.16351318 429.89056396 440.13882446 441.16619873 441.60870361
  442.05722046 454.10693359 460.55255127 469.7633667  473.57763672
  473.68051147 474.63342285 475.14819336 476.97567749 478.29534912
  479.29492188 479.66159058 481.45983887 481.78707886 484.78030396
  486.76098633 490.34408569 492.84521484 497.19308472 498.90603638
  500.00073242 500.00335693 501.71655273 503.57049561 504.86853027]
 [  5.91777706 267.89468384 290.00802612 292.70584106 341.68200684
  346.60940552 353.05700684 364.84802246 366.24520874 367.36682129
  377.81716919 390.90930176 391.08435059 391.44207764 408.6862793
  412.52035522 417.24938965 418.00360107 422.01400757 423.40100098
  429.24777222 438.7749939  443.62484741 453.7744751  455.65084839
  458.378479   467.52331543 472.23822021 476.19229126 478.13818359
  484.18719482 486.16845703 486.77883911 489.05963135 489.67272949
  492.92462158 493.81793213 496.46759033 497.13018799 497.74926758
  507.72186279 510.63189697 513.6138916  516.83544922 517.0880127
  517.14404297 518.45123291 518.82098389 521.14959717 522.30664062]
 [288.92617798 303.25177002 311.87545776 315.74237061 326.10980225
  353.10250854 356.06030273 358.80621338 366.42849731 370.61157227
  380.0295105  380.60748291 382.93206787 384.07525635 384.93734741
  400.94064331 401.01824951 402.27267456 403.62796021 406.55175781
  421.16351318 429.89056396 440.13882446 441.16619873 441.60870361
  442.05722046 454.10693359 460.55255127 469.7633667  473.57763672
  473.68051147 474.63342285 475.14819336 476.97567749 478.29534912
  479.29492188 479.66159058 481.45983887 481.78707886 484.78030396
  486.76098633 490.34408569 492.84521484 497.19308472 498.90603638
  500.00073242 500.00335693 501.71655273 503.57049561 504.86853027]
 [  5.91777706 267.89468384 290.00802612 292.70584106 341.68200684
  346.60940552 353.05700684 364.84802246 366.24520874 367.36682129
  377.81716919 390.90930176 391.08435059 391.44207764 408.6862793
  412.52035522 417.24938965 418.00360107 422.01400757 423.40100098
  429.24777222 438.7749939  443.62484741 453.7744751  455.65084839
  458.378479   467.52331543 472.23822021 476.19229126 478.13818359
  484.18719482 486.16845703 486.77883911 489.05963135 489.67272949
  492.92462158 493.81793213 496.46759033 497.13018799 497.74926758
  507.72186279 510.63189697 513.6138916  516.83544922 517.0880127
  517.14404297 518.45123291 518.82098389 521.14959717 522.30664062]], indices=[[190756   7816 549390 338219 214192 321557 270066 433204 291634 174482
  273551  70774 177934 441586 499622 181542 579902  44590 462756 245448
   55022 572956 136715 228436 226417  98287 194875 467511 343561 394199
  142324 578792 507037 141671 388258 226662   8211 523957 275392 488385
  395180 349860 184324 146667 192607 513580 345027 299887 144333 574297]
 [145620 102331 210299 102411 455624 571264 491213 291791 491090 259690
  224051  48924 179765 184611 538364 343934  18737 185472 114770 472623
   78748 524108 424162 190676 492937 297147 356169 365642 297022 476119
  414510 204186  48555 205289 389532 140420 263299 581357  50145 172935
   20553 373315 404249 560880 471023 419408 232646 220764 148508 573094]
 [190756   7816 549390 338219 214192 321557 270066 433204 291634 174482
  273551  70774 177934 441586 499622 181542 579902  44590 462756 245448
   55022 572956 136715 228436 226417  98287 194875 467511 343561 394199
  142324 578792 507037 141671 388258 226662   8211 523957 275392 488385
  395180 349860 184324 146667 192607 513580 345027 299887 144333 574297]
 [145620 102331 210299 102411 455624 571264 491213 291791 491090 259690
  224051  48924 179765 184611 538364 343934  18737 185472 114770 472623
   78748 524108 424162 190676 492937 297147 356169 365642 297022 476119
  414510 204186  48555 205289 389532 140420 263299 581357  50145 172935
   20553 373315 404249 560880 471023 419408 232646 220764 148508 573094]]
2025-03-23 19:43:43,211 - __main__ - DEBUG - Search results: distances shape=(4, 50), indices shape=(4, 50)
2025-03-23 19:43:43,211 - __main__ - DEBUG - Returning search results: 4 items
2025-03-23 19:43:43,211 - werkzeug - INFO - 127.0.0.1 - - [23/Mar/2025 19:43:43] "POST /search HTTP/1.1" 200 -
2025-03-23 19:43:43,213 - __main__ - DEBUG - Received search request with query_vector shape=(1, 512), k=50
2025-03-23 19:43:43,213 - __main__ - DEBUG - Calling coordinator.search
2025-03-23 19:43:43,213 - coordinator - DEBUG - Starting search with query_vector shape=(1, 512), k=50
2025-03-23 19:43:43,213 - root - DEBUG - Getting candidate shards for query vector with shape (1, 512)
2025-03-23 19:43:43,214 - root - DEBUG - Table 0 hash value shape: (1, 4)
2025-03-23 19:43:43,214 - root - DEBUG - Table 1 hash value shape: (1, 4)
2025-03-23 19:43:43,214 - root - DEBUG - Table 2 hash value shape: (1, 4)
2025-03-23 19:43:43,214 - root - DEBUG - Assigned vector to shard 1
2025-03-23 19:43:43,214 - root - DEBUG - Table 0 hash value shape: (1, 4)
2025-03-23 19:43:43,214 - root - DEBUG - Table 1 hash value shape: (1, 4)
2025-03-23 19:43:43,214 - root - DEBUG - Table 2 hash value shape: (1, 4)
2025-03-23 19:43:43,214 - root - DEBUG - Selected candidate shards: [1, 2]
2025-03-23 19:43:43,214 - coordinator - DEBUG - Candidate shards: [1, 2]
2025-03-23 19:43:43,214 - coordinator - DEBUG - Mapping shard_id 1 to node_idx 1 (out of 3 nodes)
2025-03-23 19:43:43,214 - coordinator - DEBUG - Submitting search to shard 1 at localhost:6002
2025-03-23 19:43:43,214 - coordinator - DEBUG - Sending search request to http://localhost:6002/search
2025-03-23 19:43:43,214 - coordinator - DEBUG - Mapping shard_id 2 to node_idx 2 (out of 3 nodes)
2025-03-23 19:43:43,215 - coordinator - DEBUG - Submitting search to shard 2 at localhost:6003
2025-03-23 19:43:43,215 - coordinator - DEBUG - Sending search request to http://localhost:6003/search
2025-03-23 19:43:43,216 - urllib3.connectionpool - DEBUG - Starting new HTTP connection (1): localhost:6003
2025-03-23 19:43:43,216 - urllib3.connectionpool - DEBUG - Starting new HTTP connection (1): localhost:6002
2025-03-23 19:43:43,218 - urllib3.connectionpool - DEBUG - http://localhost:6002 "POST /search HTTP/1.1" 200 1291
2025-03-23 19:43:43,218 - coordinator - DEBUG - Received response from http://localhost:6002/search: {'distances': [[8.292370796203613, 282.02337646484375, 304.1513977050781, 342.9234619140625, 347.66815185546875, 351.9064636230469, 352.5394287109375, 356.6254577636719, 358.4598388671875, 359.13525390625, 365.88653564453125, 368.7115173339844, 378.20330810546875, 382.0311584472656, 382.28839111328125, 383.3297424316406, 384.97686767578125, 387.92340087890625, 390.2117004394531, 390.2825927734375, 390.9720458984375, 392.13446044921875, 393.4568176269531, 393.51544189453125, 394.7735900878906, 397.19635009765625, 400.04443359375, 400.2133483886719, 401.7021179199219, 401.859375, 402.05963134765625, 403.357421875, 404.262451171875, 404.39044189453125, 406.861083984375, 407.1865539550781, 408.62384033203125, 410.2304382324219, 411.843017578125, 412.742919921875, 414.94964599609375, 415.6800537109375, 415.85113525390625, 416.4372253417969, 417.26727294921875, 417.4504699707031, 418.3973693847656, 419.6868896484375, 420.70770263671875, 423.27471923828125]], 'indices': [[58350, 383838, 18150, 513283, 11051, 389381, 294831, 356498, 334417, 245026, 66706, 226130, 279769, 413395, 117908, 18193, 378605, 331817, 108253, 164602, 402346, 202001, 527784, 357430, 40757, 321214, 483667, 255912, 19402, 557916, 248400, 572388, 397354, 256916, 554735, 237118, 236412, 350679, 91500, 475572, 369370, 289415, 304984, 449190, 337498, 420281, 341973, 292024, 67315, 206027]], 'status': 'success'}
2025-03-23 19:43:43,218 - coordinator - DEBUG - Valid results from http://localhost:6002/search: distances shape=(1, 50), indices shape=(1, 50)
2025-03-23 19:43:43,218 - coordinator - DEBUG - Received search results: distances shape=(1, 50), indices shape=(1, 50)
2025-03-23 19:43:43,218 - urllib3.connectionpool - DEBUG - http://localhost:6003 "POST /search HTTP/1.1" 200 1293
2025-03-23 19:43:43,219 - coordinator - DEBUG - Received response from http://localhost:6003/search: {'distances': [[309.370849609375, 322.09503173828125, 331.71026611328125, 335.06781005859375, 340.92828369140625, 345.37030029296875, 354.1963806152344, 357.0580139160156, 363.3660888671875, 364.5304260253906, 371.66094970703125, 374.250732421875, 376.6846618652344, 377.09002685546875, 379.5774230957031, 383.0712585449219, 383.1722106933594, 383.3017578125, 384.4615478515625, 388.7703857421875, 388.77960205078125, 390.629638671875, 394.5751647949219, 394.8923034667969, 394.929931640625, 396.709228515625, 398.892333984375, 400.8304748535156, 401.888427734375, 402.07293701171875, 403.88812255859375, 406.93426513671875, 407.65496826171875, 407.8341979980469, 408.0448913574219, 408.3983459472656, 409.27716064453125, 411.5125732421875, 413.77764892578125, 413.9791259765625, 415.15496826171875, 415.6949462890625, 417.6828308105469, 418.3048095703125, 418.50225830078125, 418.6821594238281, 419.4212951660156, 419.58392333984375, 421.9004211425781, 425.025390625]], 'indices': [[45550, 473237, 312552, 70739, 148662, 474167, 394940, 201646, 489611, 173008, 170595, 43581, 93353, 113720, 183965, 300341, 296222, 209753, 36936, 73533, 423123, 223747, 388927, 389315, 3845, 166426, 342186, 413552, 120853, 276285, 170191, 455301, 284106, 468954, 520871, 66817, 170670, 571893, 89670, 430056, 306700, 417608, 50811, 547336, 429623, 434996, 497344, 229216, 498747, 424349]], 'status': 'success'}
2025-03-23 19:43:43,219 - coordinator - DEBUG - Valid results from http://localhost:6003/search: distances shape=(1, 50), indices shape=(1, 50)
2025-03-23 19:43:43,219 - coordinator - DEBUG - Received search results: distances shape=(1, 50), indices shape=(1, 50)
2025-03-23 19:43:43,219 - coordinator - DEBUG - All distances: [array([  8.2923708 , 282.02337646, 304.15139771, 342.92346191,
       347.66815186, 351.90646362, 352.53942871, 356.62545776,
       358.45983887, 359.13525391, 365.88653564, 368.71151733,
       378.20330811, 382.03115845, 382.28839111, 383.32974243,
       384.97686768, 387.92340088, 390.21170044, 390.28259277,
       390.9720459 , 392.13446045, 393.45681763, 393.51544189,
       394.77359009, 397.1963501 , 400.04443359, 400.21334839,
       401.70211792, 401.859375  , 402.05963135, 403.35742188,
       404.26245117, 404.39044189, 406.86108398, 407.18655396,
       408.62384033, 410.23043823, 411.84301758, 412.74291992,
       414.949646  , 415.68005371, 415.85113525, 416.43722534,
       417.26727295, 417.45046997, 418.39736938, 419.68688965,
       420.70770264, 423.27471924]), array([309.37084961, 322.09503174, 331.71026611, 335.06781006,
       340.92828369, 345.37030029, 354.19638062, 357.05801392,
       363.36608887, 364.53042603, 371.66094971, 374.25073242,
       376.68466187, 377.09002686, 379.5774231 , 383.07125854,
       383.17221069, 383.30175781, 384.46154785, 388.77038574,
       388.77960205, 390.62963867, 394.57516479, 394.89230347,
       394.92993164, 396.70922852, 398.89233398, 400.83047485,
       401.88842773, 402.07293701, 403.88812256, 406.93426514,
       407.65496826, 407.834198  , 408.04489136, 408.39834595,
       409.27716064, 411.51257324, 413.77764893, 413.97912598,
       415.15496826, 415.69494629, 417.68283081, 418.30480957,
       418.5022583 , 418.68215942, 419.42129517, 419.58392334,
       421.90042114, 425.02539062])]
2025-03-23 19:43:43,219 - coordinator - DEBUG - All indices: [array([ 58350, 383838,  18150, 513283,  11051, 389381, 294831, 356498,
       334417, 245026,  66706, 226130, 279769, 413395, 117908,  18193,
       378605, 331817, 108253, 164602, 402346, 202001, 527784, 357430,
        40757, 321214, 483667, 255912,  19402, 557916, 248400, 572388,
       397354, 256916, 554735, 237118, 236412, 350679,  91500, 475572,
       369370, 289415, 304984, 449190, 337498, 420281, 341973, 292024,
        67315, 206027]), array([ 45550, 473237, 312552,  70739, 148662, 474167, 394940, 201646,
       489611, 173008, 170595,  43581,  93353, 113720, 183965, 300341,
       296222, 209753,  36936,  73533, 423123, 223747, 388927, 389315,
         3845, 166426, 342186, 413552, 120853, 276285, 170191, 455301,
       284106, 468954, 520871,  66817, 170670, 571893,  89670, 430056,
       306700, 417608,  50811, 547336, 429623, 434996, 497344, 229216,
       498747, 424349])]
2025-03-23 19:43:43,219 - coordinator - DEBUG - all_distances shape: (2, 50), all_indices shape: (2, 50)
2025-03-23 19:43:43,219 - coordinator - DEBUG - Using k=2 for sorting
2025-03-23 19:43:43,219 - coordinator - DEBUG - sorted_idx: [[ 0  1  2  3  4  5  6  7  8  9 10 11 12 13 14 15 16 17 18 19 20 21 22 23
  24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47
  48 49]
 [ 0  1  2  3  4  5  6  7  8  9 10 11 12 13 14 15 16 17 18 19 20 21 22 23
  24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47
  48 49]]
2025-03-23 19:43:43,219 - coordinator - ERROR - Index out of bounds: max sorted_idx=49, len(all_distances)=2
2025-03-23 19:43:43,220 - coordinator - DEBUG - Returning results: distances=[[  8.2923708  282.02337646 304.15139771 342.92346191 347.66815186
  351.90646362 352.53942871 356.62545776 358.45983887 359.13525391
  365.88653564 368.71151733 378.20330811 382.03115845 382.28839111
  383.32974243 384.97686768 387.92340088 390.21170044 390.28259277
  390.9720459  392.13446045 393.45681763 393.51544189 394.77359009
  397.1963501  400.04443359 400.21334839 401.70211792 401.859375
  402.05963135 403.35742188 404.26245117 404.39044189 406.86108398
  407.18655396 408.62384033 410.23043823 411.84301758 412.74291992
  414.949646   415.68005371 415.85113525 416.43722534 417.26727295
  417.45046997 418.39736938 419.68688965 420.70770264 423.27471924]
 [309.37084961 322.09503174 331.71026611 335.06781006 340.92828369
  345.37030029 354.19638062 357.05801392 363.36608887 364.53042603
  371.66094971 374.25073242 376.68466187 377.09002686 379.5774231
  383.07125854 383.17221069 383.30175781 384.46154785 388.77038574
  388.77960205 390.62963867 394.57516479 394.89230347 394.92993164
  396.70922852 398.89233398 400.83047485 401.88842773 402.07293701
  403.88812256 406.93426514 407.65496826 407.834198   408.04489136
  408.39834595 409.27716064 411.51257324 413.77764893 413.97912598
  415.15496826 415.69494629 417.68283081 418.30480957 418.5022583
  418.68215942 419.42129517 419.58392334 421.90042114 425.02539062]
 [  8.2923708  282.02337646 304.15139771 342.92346191 347.66815186
  351.90646362 352.53942871 356.62545776 358.45983887 359.13525391
  365.88653564 368.71151733 378.20330811 382.03115845 382.28839111
  383.32974243 384.97686768 387.92340088 390.21170044 390.28259277
  390.9720459  392.13446045 393.45681763 393.51544189 394.77359009
  397.1963501  400.04443359 400.21334839 401.70211792 401.859375
  402.05963135 403.35742188 404.26245117 404.39044189 406.86108398
  407.18655396 408.62384033 410.23043823 411.84301758 412.74291992
  414.949646   415.68005371 415.85113525 416.43722534 417.26727295
  417.45046997 418.39736938 419.68688965 420.70770264 423.27471924]
 [309.37084961 322.09503174 331.71026611 335.06781006 340.92828369
  345.37030029 354.19638062 357.05801392 363.36608887 364.53042603
  371.66094971 374.25073242 376.68466187 377.09002686 379.5774231
  383.07125854 383.17221069 383.30175781 384.46154785 388.77038574
  388.77960205 390.62963867 394.57516479 394.89230347 394.92993164
  396.70922852 398.89233398 400.83047485 401.88842773 402.07293701
  403.88812256 406.93426514 407.65496826 407.834198   408.04489136
  408.39834595 409.27716064 411.51257324 413.77764893 413.97912598
  415.15496826 415.69494629 417.68283081 418.30480957 418.5022583
  418.68215942 419.42129517 419.58392334 421.90042114 425.02539062]], indices=[[ 58350 383838  18150 513283  11051 389381 294831 356498 334417 245026
   66706 226130 279769 413395 117908  18193 378605 331817 108253 164602
  402346 202001 527784 357430  40757 321214 483667 255912  19402 557916
  248400 572388 397354 256916 554735 237118 236412 350679  91500 475572
  369370 289415 304984 449190 337498 420281 341973 292024  67315 206027]
 [ 45550 473237 312552  70739 148662 474167 394940 201646 489611 173008
  170595  43581  93353 113720 183965 300341 296222 209753  36936  73533
  423123 223747 388927 389315   3845 166426 342186 413552 120853 276285
  170191 455301 284106 468954 520871  66817 170670 571893  89670 430056
  306700 417608  50811 547336 429623 434996 497344 229216 498747 424349]
 [ 58350 383838  18150 513283  11051 389381 294831 356498 334417 245026
   66706 226130 279769 413395 117908  18193 378605 331817 108253 164602
  402346 202001 527784 357430  40757 321214 483667 255912  19402 557916
  248400 572388 397354 256916 554735 237118 236412 350679  91500 475572
  369370 289415 304984 449190 337498 420281 341973 292024  67315 206027]
 [ 45550 473237 312552  70739 148662 474167 394940 201646 489611 173008
  170595  43581  93353 113720 183965 300341 296222 209753  36936  73533
  423123 223747 388927 389315   3845 166426 342186 413552 120853 276285
  170191 455301 284106 468954 520871  66817 170670 571893  89670 430056
  306700 417608  50811 547336 429623 434996 497344 229216 498747 424349]]
2025-03-23 19:43:43,220 - __main__ - DEBUG - Search results: distances shape=(4, 50), indices shape=(4, 50)
2025-03-23 19:43:43,220 - __main__ - DEBUG - Returning search results: 4 items
2025-03-23 19:43:43,220 - werkzeug - INFO - 127.0.0.1 - - [23/Mar/2025 19:43:43] "POST /search HTTP/1.1" 200 -
2025-03-23 19:43:43,223 - __main__ - DEBUG - Received search request with query_vector shape=(1, 512), k=50
2025-03-23 19:43:43,223 - __main__ - DEBUG - Calling coordinator.search
2025-03-23 19:43:43,223 - coordinator - DEBUG - Starting search with query_vector shape=(1, 512), k=50
2025-03-23 19:43:43,223 - root - DEBUG - Getting candidate shards for query vector with shape (1, 512)
2025-03-23 19:43:43,223 - root - DEBUG - Table 0 hash value shape: (1, 4)
2025-03-23 19:43:43,223 - root - DEBUG - Table 1 hash value shape: (1, 4)
2025-03-23 19:43:43,223 - root - DEBUG - Table 2 hash value shape: (1, 4)
2025-03-23 19:43:43,223 - root - DEBUG - Assigned vector to shard 1
2025-03-23 19:43:43,223 - root - DEBUG - Table 0 hash value shape: (1, 4)
2025-03-23 19:43:43,223 - root - DEBUG - Table 1 hash value shape: (1, 4)
2025-03-23 19:43:43,223 - root - DEBUG - Table 2 hash value shape: (1, 4)
2025-03-23 19:43:43,223 - root - DEBUG - Selected candidate shards: [0, 1]
2025-03-23 19:43:43,223 - coordinator - DEBUG - Candidate shards: [0, 1]
2025-03-23 19:43:43,223 - coordinator - DEBUG - Mapping shard_id 0 to node_idx 0 (out of 3 nodes)
2025-03-23 19:43:43,223 - coordinator - DEBUG - Submitting search to shard 0 at localhost:6001
2025-03-23 19:43:43,223 - coordinator - DEBUG - Sending search request to http://localhost:6001/search
2025-03-23 19:43:43,224 - coordinator - DEBUG - Mapping shard_id 1 to node_idx 1 (out of 3 nodes)
2025-03-23 19:43:43,224 - coordinator - DEBUG - Submitting search to shard 1 at localhost:6002
2025-03-23 19:43:43,224 - coordinator - DEBUG - Sending search request to http://localhost:6002/search
2025-03-23 19:43:43,225 - urllib3.connectionpool - DEBUG - Starting new HTTP connection (1): localhost:6002
2025-03-23 19:43:43,225 - urllib3.connectionpool - DEBUG - Starting new HTTP connection (1): localhost:6001
2025-03-23 19:43:43,228 - urllib3.connectionpool - DEBUG - http://localhost:6002 "POST /search HTTP/1.1" 200 1268
2025-03-23 19:43:43,228 - coordinator - DEBUG - Received response from http://localhost:6002/search: {'distances': [[16.840970993041992, 413.3643798828125, 483.1694641113281, 493.7472229003906, 506.23394775390625, 519.689208984375, 542.630859375, 566.206787109375, 574.3439331054688, 606.5430297851562, 608.8685302734375, 617.4274291992188, 627.3995361328125, 631.4707641601562, 632.234619140625, 632.32958984375, 638.689208984375, 643.2981567382812, 644.4735107421875, 647.5115966796875, 648.7286376953125, 652.1658325195312, 652.59326171875, 657.4586181640625, 663.2174682617188, 667.1727294921875, 671.0540771484375, 671.4797973632812, 671.7745361328125, 673.2149658203125, 675.851806640625, 676.171142578125, 677.8912353515625, 678.9453125, 682.1682739257812, 682.9429931640625, 683.40478515625, 685.1649169921875, 690.7417602539062, 691.1364135742188, 692.2954711914062, 692.8870239257812, 694.8446044921875, 697.1434326171875, 698.39990234375, 700.004150390625, 701.2769775390625, 703.0847778320312, 704.0072021484375, 705.8710327148438]], 'indices': [[194506, 203546, 418959, 490171, 560266, 186422, 127955, 475904, 307658, 132622, 235057, 160772, 190140, 361180, 217948, 395903, 63154, 360325, 378116, 19042, 85911, 214753, 262587, 23230, 278973, 458223, 513484, 549055, 485071, 498286, 515025, 372819, 246883, 5992, 361571, 288685, 372349, 142971, 380711, 32570, 532493, 214703, 292908, 14888, 182805, 252701, 49269, 81988, 410612, 205834]], 'status': 'success'}
2025-03-23 19:43:43,228 - coordinator - DEBUG - Valid results from http://localhost:6002/search: distances shape=(1, 50), indices shape=(1, 50)
2025-03-23 19:43:43,228 - urllib3.connectionpool - DEBUG - http://localhost:6001 "POST /search HTTP/1.1" 200 1268
2025-03-23 19:43:43,228 - coordinator - DEBUG - Received response from http://localhost:6001/search: {'distances': [[552.5786743164062, 553.4232177734375, 571.69140625, 572.9830322265625, 585.572998046875, 593.6044921875, 594.8322143554688, 596.0274658203125, 598.8050537109375, 612.6243896484375, 622.05322265625, 622.6206665039062, 624.906494140625, 634.0850219726562, 638.0795288085938, 642.4202880859375, 645.1840209960938, 651.7906494140625, 656.2398071289062, 657.0089111328125, 658.0010986328125, 660.9420166015625, 663.699462890625, 664.6149291992188, 665.3942260742188, 667.435546875, 669.2582397460938, 680.858642578125, 681.4298095703125, 685.7575073242188, 688.296630859375, 691.1370239257812, 691.6370849609375, 691.8592529296875, 696.7086181640625, 698.8778686523438, 702.8540649414062, 703.8599853515625, 706.0446166992188, 708.1591186523438, 711.1136474609375, 711.777587890625, 712.885009765625, 718.1565551757812, 722.6549072265625, 723.639892578125, 725.8280029296875, 729.0947875976562, 731.4262084960938, 732.0154418945312]], 'indices': [[269196, 20247, 523033, 471756, 404805, 2261, 209829, 191672, 482735, 119088, 377575, 12062, 330396, 572517, 547519, 205776, 148739, 236914, 516318, 50638, 43435, 402992, 437331, 460927, 270122, 465180, 220584, 248334, 308476, 331075, 417465, 82715, 577959, 561223, 441286, 272148, 108503, 232692, 29984, 248810, 364322, 396863, 220858, 14831, 556765, 314294, 45090, 341196, 230166, 32887]], 'status': 'success'}
2025-03-23 19:43:43,228 - coordinator - DEBUG - Valid results from http://localhost:6001/search: distances shape=(1, 50), indices shape=(1, 50)
2025-03-23 19:43:43,228 - coordinator - DEBUG - Received search results: distances shape=(1, 50), indices shape=(1, 50)
2025-03-23 19:43:43,228 - coordinator - DEBUG - Received search results: distances shape=(1, 50), indices shape=(1, 50)
2025-03-23 19:43:43,229 - coordinator - DEBUG - All distances: [array([ 16.84097099, 413.36437988, 483.16946411, 493.7472229 ,
       506.23394775, 519.68920898, 542.63085938, 566.20678711,
       574.34393311, 606.54302979, 608.86853027, 617.4274292 ,
       627.39953613, 631.47076416, 632.23461914, 632.32958984,
       638.68920898, 643.29815674, 644.47351074, 647.51159668,
       648.7286377 , 652.16583252, 652.59326172, 657.45861816,
       663.21746826, 667.17272949, 671.05407715, 671.47979736,
       671.77453613, 673.21496582, 675.85180664, 676.17114258,
       677.89123535, 678.9453125 , 682.16827393, 682.94299316,
       683.40478516, 685.16491699, 690.74176025, 691.13641357,
       692.29547119, 692.88702393, 694.84460449, 697.14343262,
       698.39990234, 700.00415039, 701.27697754, 703.08477783,
       704.00720215, 705.87103271]), array([552.57867432, 553.42321777, 571.69140625, 572.98303223,
       585.57299805, 593.60449219, 594.83221436, 596.02746582,
       598.80505371, 612.62438965, 622.05322266, 622.6206665 ,
       624.90649414, 634.08502197, 638.07952881, 642.42028809,
       645.184021  , 651.79064941, 656.23980713, 657.00891113,
       658.00109863, 660.9420166 , 663.69946289, 664.6149292 ,
       665.39422607, 667.43554688, 669.25823975, 680.85864258,
       681.42980957, 685.75750732, 688.29663086, 691.13702393,
       691.63708496, 691.85925293, 696.70861816, 698.87786865,
       702.85406494, 703.85998535, 706.0446167 , 708.15911865,
       711.11364746, 711.77758789, 712.88500977, 718.15655518,
       722.65490723, 723.63989258, 725.82800293, 729.0947876 ,
       731.4262085 , 732.01544189])]
2025-03-23 19:43:43,229 - coordinator - DEBUG - All indices: [array([194506, 203546, 418959, 490171, 560266, 186422, 127955, 475904,
       307658, 132622, 235057, 160772, 190140, 361180, 217948, 395903,
        63154, 360325, 378116,  19042,  85911, 214753, 262587,  23230,
       278973, 458223, 513484, 549055, 485071, 498286, 515025, 372819,
       246883,   5992, 361571, 288685, 372349, 142971, 380711,  32570,
       532493, 214703, 292908,  14888, 182805, 252701,  49269,  81988,
       410612, 205834]), array([269196,  20247, 523033, 471756, 404805,   2261, 209829, 191672,
       482735, 119088, 377575,  12062, 330396, 572517, 547519, 205776,
       148739, 236914, 516318,  50638,  43435, 402992, 437331, 460927,
       270122, 465180, 220584, 248334, 308476, 331075, 417465,  82715,
       577959, 561223, 441286, 272148, 108503, 232692,  29984, 248810,
       364322, 396863, 220858,  14831, 556765, 314294,  45090, 341196,
       230166,  32887])]
2025-03-23 19:43:43,229 - coordinator - DEBUG - all_distances shape: (2, 50), all_indices shape: (2, 50)
2025-03-23 19:43:43,229 - coordinator - DEBUG - Using k=2 for sorting
2025-03-23 19:43:43,229 - coordinator - DEBUG - sorted_idx: [[ 0  1  2  3  4  5  6  7  8  9 10 11 12 13 14 15 16 17 18 19 20 21 22 23
  24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47
  48 49]
 [ 0  1  2  3  4  5  6  7  8  9 10 11 12 13 14 15 16 17 18 19 20 21 22 23
  24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47
  48 49]]
2025-03-23 19:43:43,229 - coordinator - ERROR - Index out of bounds: max sorted_idx=49, len(all_distances)=2
2025-03-23 19:43:43,230 - coordinator - DEBUG - Returning results: distances=[[ 16.84097099 413.36437988 483.16946411 493.7472229  506.23394775
  519.68920898 542.63085938 566.20678711 574.34393311 606.54302979
  608.86853027 617.4274292  627.39953613 631.47076416 632.23461914
  632.32958984 638.68920898 643.29815674 644.47351074 647.51159668
  648.7286377  652.16583252 652.59326172 657.45861816 663.21746826
  667.17272949 671.05407715 671.47979736 671.77453613 673.21496582
  675.85180664 676.17114258 677.89123535 678.9453125  682.16827393
  682.94299316 683.40478516 685.16491699 690.74176025 691.13641357
  692.29547119 692.88702393 694.84460449 697.14343262 698.39990234
  700.00415039 701.27697754 703.08477783 704.00720215 705.87103271]
 [552.57867432 553.42321777 571.69140625 572.98303223 585.57299805
  593.60449219 594.83221436 596.02746582 598.80505371 612.62438965
  622.05322266 622.6206665  624.90649414 634.08502197 638.07952881
  642.42028809 645.184021   651.79064941 656.23980713 657.00891113
  658.00109863 660.9420166  663.69946289 664.6149292  665.39422607
  667.43554688 669.25823975 680.85864258 681.42980957 685.75750732
  688.29663086 691.13702393 691.63708496 691.85925293 696.70861816
  698.87786865 702.85406494 703.85998535 706.0446167  708.15911865
  711.11364746 711.77758789 712.88500977 718.15655518 722.65490723
  723.63989258 725.82800293 729.0947876  731.4262085  732.01544189]
 [ 16.84097099 413.36437988 483.16946411 493.7472229  506.23394775
  519.68920898 542.63085938 566.20678711 574.34393311 606.54302979
  608.86853027 617.4274292  627.39953613 631.47076416 632.23461914
  632.32958984 638.68920898 643.29815674 644.47351074 647.51159668
  648.7286377  652.16583252 652.59326172 657.45861816 663.21746826
  667.17272949 671.05407715 671.47979736 671.77453613 673.21496582
  675.85180664 676.17114258 677.89123535 678.9453125  682.16827393
  682.94299316 683.40478516 685.16491699 690.74176025 691.13641357
  692.29547119 692.88702393 694.84460449 697.14343262 698.39990234
  700.00415039 701.27697754 703.08477783 704.00720215 705.87103271]
 [552.57867432 553.42321777 571.69140625 572.98303223 585.57299805
  593.60449219 594.83221436 596.02746582 598.80505371 612.62438965
  622.05322266 622.6206665  624.90649414 634.08502197 638.07952881
  642.42028809 645.184021   651.79064941 656.23980713 657.00891113
  658.00109863 660.9420166  663.69946289 664.6149292  665.39422607
  667.43554688 669.25823975 680.85864258 681.42980957 685.75750732
  688.29663086 691.13702393 691.63708496 691.85925293 696.70861816
  698.87786865 702.85406494 703.85998535 706.0446167  708.15911865
  711.11364746 711.77758789 712.88500977 718.15655518 722.65490723
  723.63989258 725.82800293 729.0947876  731.4262085  732.01544189]], indices=[[194506 203546 418959 490171 560266 186422 127955 475904 307658 132622
  235057 160772 190140 361180 217948 395903  63154 360325 378116  19042
   85911 214753 262587  23230 278973 458223 513484 549055 485071 498286
  515025 372819 246883   5992 361571 288685 372349 142971 380711  32570
  532493 214703 292908  14888 182805 252701  49269  81988 410612 205834]
 [269196  20247 523033 471756 404805   2261 209829 191672 482735 119088
  377575  12062 330396 572517 547519 205776 148739 236914 516318  50638
   43435 402992 437331 460927 270122 465180 220584 248334 308476 331075
  417465  82715 577959 561223 441286 272148 108503 232692  29984 248810
  364322 396863 220858  14831 556765 314294  45090 341196 230166  32887]
 [194506 203546 418959 490171 560266 186422 127955 475904 307658 132622
  235057 160772 190140 361180 217948 395903  63154 360325 378116  19042
   85911 214753 262587  23230 278973 458223 513484 549055 485071 498286
  515025 372819 246883   5992 361571 288685 372349 142971 380711  32570
  532493 214703 292908  14888 182805 252701  49269  81988 410612 205834]
 [269196  20247 523033 471756 404805   2261 209829 191672 482735 119088
  377575  12062 330396 572517 547519 205776 148739 236914 516318  50638
   43435 402992 437331 460927 270122 465180 220584 248334 308476 331075
  417465  82715 577959 561223 441286 272148 108503 232692  29984 248810
  364322 396863 220858  14831 556765 314294  45090 341196 230166  32887]]
2025-03-23 19:43:43,230 - __main__ - DEBUG - Search results: distances shape=(4, 50), indices shape=(4, 50)
2025-03-23 19:43:43,230 - __main__ - DEBUG - Returning search results: 4 items
2025-03-23 19:43:43,230 - werkzeug - INFO - 127.0.0.1 - - [23/Mar/2025 19:43:43] "POST /search HTTP/1.1" 200 -
2025-03-23 19:43:43,232 - __main__ - DEBUG - Received search request with query_vector shape=(1, 512), k=50
2025-03-23 19:43:43,232 - __main__ - DEBUG - Calling coordinator.search
2025-03-23 19:43:43,232 - coordinator - DEBUG - Starting search with query_vector shape=(1, 512), k=50
2025-03-23 19:43:43,232 - root - DEBUG - Getting candidate shards for query vector with shape (1, 512)
2025-03-23 19:43:43,232 - root - DEBUG - Table 0 hash value shape: (1, 4)
2025-03-23 19:43:43,233 - root - DEBUG - Table 1 hash value shape: (1, 4)
2025-03-23 19:43:43,233 - root - DEBUG - Table 2 hash value shape: (1, 4)
2025-03-23 19:43:43,233 - root - DEBUG - Assigned vector to shard 1
2025-03-23 19:43:43,233 - root - DEBUG - Table 0 hash value shape: (1, 4)
2025-03-23 19:43:43,233 - root - DEBUG - Table 1 hash value shape: (1, 4)
2025-03-23 19:43:43,233 - root - DEBUG - Table 2 hash value shape: (1, 4)
2025-03-23 19:43:43,233 - root - DEBUG - Selected candidate shards: [0, 1]
2025-03-23 19:43:43,233 - coordinator - DEBUG - Candidate shards: [0, 1]
2025-03-23 19:43:43,233 - coordinator - DEBUG - Mapping shard_id 0 to node_idx 0 (out of 3 nodes)
2025-03-23 19:43:43,233 - coordinator - DEBUG - Submitting search to shard 0 at localhost:6001
2025-03-23 19:43:43,233 - coordinator - DEBUG - Sending search request to http://localhost:6001/search
2025-03-23 19:43:43,233 - coordinator - DEBUG - Mapping shard_id 1 to node_idx 1 (out of 3 nodes)
2025-03-23 19:43:43,233 - coordinator - DEBUG - Submitting search to shard 1 at localhost:6002
2025-03-23 19:43:43,233 - coordinator - DEBUG - Sending search request to http://localhost:6002/search
2025-03-23 19:43:43,234 - urllib3.connectionpool - DEBUG - Starting new HTTP connection (1): localhost:6001
2025-03-23 19:43:43,235 - urllib3.connectionpool - DEBUG - Starting new HTTP connection (1): localhost:6002
2025-03-23 19:43:43,237 - urllib3.connectionpool - DEBUG - http://localhost:6002 "POST /search HTTP/1.1" 200 1291
2025-03-23 19:43:43,238 - coordinator - DEBUG - Received response from http://localhost:6002/search: {'distances': [[10.470561027526855, 183.81088256835938, 190.28012084960938, 192.55322265625, 199.662841796875, 214.04718017578125, 236.26507568359375, 242.81317138671875, 242.8248291015625, 247.85531616210938, 254.98904418945312, 257.8063659667969, 263.5331115722656, 267.7431335449219, 268.6251220703125, 272.5681457519531, 290.2749328613281, 313.46319580078125, 339.33746337890625, 349.4792785644531, 354.4400634765625, 354.5458068847656, 361.3283996582031, 362.1207275390625, 400.2736511230469, 410.6094055175781, 415.58709716796875, 458.10321044921875, 477.4178466796875, 486.51800537109375, 540.6011962890625, 576.6490478515625, 581.607421875, 584.0753784179688, 629.189208984375, 631.4795532226562, 646.551025390625, 658.0592041015625, 660.635986328125, 661.0700073242188, 661.9409790039062, 663.14013671875, 663.6141357421875, 668.4470825195312, 668.7338256835938, 668.7709350585938, 669.3317260742188, 679.2265014648438, 685.1669921875, 688.7613525390625]], 'indices': [[545129, 124975, 325306, 172977, 493019, 364166, 552902, 290833, 250758, 236730, 473974, 447313, 64499, 244592, 70158, 449406, 185409, 113354, 317024, 508586, 504635, 148783, 60770, 93965, 504439, 545730, 110211, 509735, 163290, 49761, 486046, 259625, 417876, 221281, 382088, 344059, 106757, 6894, 126216, 79565, 337987, 462904, 270402, 263966, 301981, 289659, 118515, 166642, 448448, 475150]], 'status': 'success'}
2025-03-23 19:43:43,238 - coordinator - DEBUG - Valid results from http://localhost:6002/search: distances shape=(1, 50), indices shape=(1, 50)
2025-03-23 19:43:43,238 - urllib3.connectionpool - DEBUG - http://localhost:6001 "POST /search HTTP/1.1" 200 1282
2025-03-23 19:43:43,238 - coordinator - DEBUG - Received response from http://localhost:6001/search: {'distances': [[174.93800354003906, 177.30520629882812, 216.1268310546875, 221.31491088867188, 233.08541870117188, 261.701904296875, 262.1899108886719, 262.27606201171875, 269.3204345703125, 292.8341064453125, 294.8072509765625, 298.2437744140625, 309.1837463378906, 317.4807434082031, 322.1290283203125, 334.9607238769531, 338.32122802734375, 348.18145751953125, 354.47015380859375, 376.1211242675781, 430.7450256347656, 433.34619140625, 436.1806640625, 512.3353881835938, 562.98876953125, 573.7252197265625, 606.9073486328125, 610.5836181640625, 616.6947021484375, 618.6112060546875, 627.952880859375, 628.0227661132812, 641.1585693359375, 641.8284301757812, 643.9364624023438, 647.478759765625, 650.9100341796875, 658.8660278320312, 662.1173095703125, 665.6736450195312, 667.3264770507812, 671.1395263671875, 673.91064453125, 676.3482666015625, 676.81689453125, 678.1864013671875, 687.8329467773438, 691.7130737304688, 699.8323364257812, 704.4605712890625]], 'indices': [[577149, 501243, 54123, 159311, 484296, 125211, 201676, 378453, 320632, 52462, 31269, 516316, 122969, 20059, 38825, 509656, 491613, 215245, 25139, 11760, 1818, 116589, 377497, 159977, 222235, 248810, 7108, 359781, 445675, 166664, 162543, 259382, 237864, 396863, 155571, 314294, 369037, 289741, 112634, 356261, 134689, 480842, 514797, 88250, 519208, 158945, 80274, 329447, 375763, 207306]], 'status': 'success'}
2025-03-23 19:43:43,238 - coordinator - DEBUG - Valid results from http://localhost:6001/search: distances shape=(1, 50), indices shape=(1, 50)
2025-03-23 19:43:43,238 - coordinator - DEBUG - Received search results: distances shape=(1, 50), indices shape=(1, 50)
2025-03-23 19:43:43,238 - coordinator - DEBUG - Received search results: distances shape=(1, 50), indices shape=(1, 50)
2025-03-23 19:43:43,238 - coordinator - DEBUG - All distances: [array([ 10.47056103, 183.81088257, 190.28012085, 192.55322266,
       199.6628418 , 214.04718018, 236.26507568, 242.81317139,
       242.8248291 , 247.85531616, 254.98904419, 257.80636597,
       263.53311157, 267.74313354, 268.62512207, 272.56814575,
       290.27493286, 313.4631958 , 339.33746338, 349.47927856,
       354.44006348, 354.54580688, 361.32839966, 362.12072754,
       400.27365112, 410.60940552, 415.58709717, 458.10321045,
       477.41784668, 486.51800537, 540.60119629, 576.64904785,
       581.60742188, 584.07537842, 629.18920898, 631.47955322,
       646.55102539, 658.0592041 , 660.63598633, 661.07000732,
       661.940979  , 663.14013672, 663.61413574, 668.44708252,
       668.73382568, 668.77093506, 669.33172607, 679.22650146,
       685.16699219, 688.76135254]), array([174.93800354, 177.3052063 , 216.12683105, 221.31491089,
       233.0854187 , 261.7019043 , 262.18991089, 262.27606201,
       269.32043457, 292.83410645, 294.80725098, 298.24377441,
       309.18374634, 317.48074341, 322.12902832, 334.96072388,
       338.32122803, 348.18145752, 354.47015381, 376.12112427,
       430.74502563, 433.34619141, 436.18066406, 512.33538818,
       562.98876953, 573.72521973, 606.90734863, 610.58361816,
       616.69470215, 618.61120605, 627.95288086, 628.02276611,
       641.15856934, 641.82843018, 643.9364624 , 647.47875977,
       650.91003418, 658.86602783, 662.11730957, 665.67364502,
       667.32647705, 671.13952637, 673.91064453, 676.3482666 ,
       676.81689453, 678.18640137, 687.83294678, 691.71307373,
       699.83233643, 704.46057129])]
2025-03-23 19:43:43,238 - coordinator - DEBUG - All indices: [array([545129, 124975, 325306, 172977, 493019, 364166, 552902, 290833,
       250758, 236730, 473974, 447313,  64499, 244592,  70158, 449406,
       185409, 113354, 317024, 508586, 504635, 148783,  60770,  93965,
       504439, 545730, 110211, 509735, 163290,  49761, 486046, 259625,
       417876, 221281, 382088, 344059, 106757,   6894, 126216,  79565,
       337987, 462904, 270402, 263966, 301981, 289659, 118515, 166642,
       448448, 475150]), array([577149, 501243,  54123, 159311, 484296, 125211, 201676, 378453,
       320632,  52462,  31269, 516316, 122969,  20059,  38825, 509656,
       491613, 215245,  25139,  11760,   1818, 116589, 377497, 159977,
       222235, 248810,   7108, 359781, 445675, 166664, 162543, 259382,
       237864, 396863, 155571, 314294, 369037, 289741, 112634, 356261,
       134689, 480842, 514797,  88250, 519208, 158945,  80274, 329447,
       375763, 207306])]
2025-03-23 19:43:43,239 - coordinator - DEBUG - all_distances shape: (2, 50), all_indices shape: (2, 50)
2025-03-23 19:43:43,239 - coordinator - DEBUG - Using k=2 for sorting
2025-03-23 19:43:43,239 - coordinator - DEBUG - sorted_idx: [[ 0  1  2  3  4  5  6  7  8  9 10 11 12 13 14 15 16 17 18 19 20 21 22 23
  24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47
  48 49]
 [ 0  1  2  3  4  5  6  7  8  9 10 11 12 13 14 15 16 17 18 19 20 21 22 23
  24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47
  48 49]]
2025-03-23 19:43:43,239 - coordinator - ERROR - Index out of bounds: max sorted_idx=49, len(all_distances)=2
2025-03-23 19:43:43,239 - coordinator - DEBUG - Returning results: distances=[[ 10.47056103 183.81088257 190.28012085 192.55322266 199.6628418
  214.04718018 236.26507568 242.81317139 242.8248291  247.85531616
  254.98904419 257.80636597 263.53311157 267.74313354 268.62512207
  272.56814575 290.27493286 313.4631958  339.33746338 349.47927856
  354.44006348 354.54580688 361.32839966 362.12072754 400.27365112
  410.60940552 415.58709717 458.10321045 477.41784668 486.51800537
  540.60119629 576.64904785 581.60742188 584.07537842 629.18920898
  631.47955322 646.55102539 658.0592041  660.63598633 661.07000732
  661.940979   663.14013672 663.61413574 668.44708252 668.73382568
  668.77093506 669.33172607 679.22650146 685.16699219 688.76135254]
 [174.93800354 177.3052063  216.12683105 221.31491089 233.0854187
  261.7019043  262.18991089 262.27606201 269.32043457 292.83410645
  294.80725098 298.24377441 309.18374634 317.48074341 322.12902832
  334.96072388 338.32122803 348.18145752 354.47015381 376.12112427
  430.74502563 433.34619141 436.18066406 512.33538818 562.98876953
  573.72521973 606.90734863 610.58361816 616.69470215 618.61120605
  627.95288086 628.02276611 641.15856934 641.82843018 643.9364624
  647.47875977 650.91003418 658.86602783 662.11730957 665.67364502
  667.32647705 671.13952637 673.91064453 676.3482666  676.81689453
  678.18640137 687.83294678 691.71307373 699.83233643 704.46057129]
 [ 10.47056103 183.81088257 190.28012085 192.55322266 199.6628418
  214.04718018 236.26507568 242.81317139 242.8248291  247.85531616
  254.98904419 257.80636597 263.53311157 267.74313354 268.62512207
  272.56814575 290.27493286 313.4631958  339.33746338 349.47927856
  354.44006348 354.54580688 361.32839966 362.12072754 400.27365112
  410.60940552 415.58709717 458.10321045 477.41784668 486.51800537
  540.60119629 576.64904785 581.60742188 584.07537842 629.18920898
  631.47955322 646.55102539 658.0592041  660.63598633 661.07000732
  661.940979   663.14013672 663.61413574 668.44708252 668.73382568
  668.77093506 669.33172607 679.22650146 685.16699219 688.76135254]
 [174.93800354 177.3052063  216.12683105 221.31491089 233.0854187
  261.7019043  262.18991089 262.27606201 269.32043457 292.83410645
  294.80725098 298.24377441 309.18374634 317.48074341 322.12902832
  334.96072388 338.32122803 348.18145752 354.47015381 376.12112427
  430.74502563 433.34619141 436.18066406 512.33538818 562.98876953
  573.72521973 606.90734863 610.58361816 616.69470215 618.61120605
  627.95288086 628.02276611 641.15856934 641.82843018 643.9364624
  647.47875977 650.91003418 658.86602783 662.11730957 665.67364502
  667.32647705 671.13952637 673.91064453 676.3482666  676.81689453
  678.18640137 687.83294678 691.71307373 699.83233643 704.46057129]], indices=[[545129 124975 325306 172977 493019 364166 552902 290833 250758 236730
  473974 447313  64499 244592  70158 449406 185409 113354 317024 508586
  504635 148783  60770  93965 504439 545730 110211 509735 163290  49761
  486046 259625 417876 221281 382088 344059 106757   6894 126216  79565
  337987 462904 270402 263966 301981 289659 118515 166642 448448 475150]
 [577149 501243  54123 159311 484296 125211 201676 378453 320632  52462
   31269 516316 122969  20059  38825 509656 491613 215245  25139  11760
    1818 116589 377497 159977 222235 248810   7108 359781 445675 166664
  162543 259382 237864 396863 155571 314294 369037 289741 112634 356261
  134689 480842 514797  88250 519208 158945  80274 329447 375763 207306]
 [545129 124975 325306 172977 493019 364166 552902 290833 250758 236730
  473974 447313  64499 244592  70158 449406 185409 113354 317024 508586
  504635 148783  60770  93965 504439 545730 110211 509735 163290  49761
  486046 259625 417876 221281 382088 344059 106757   6894 126216  79565
  337987 462904 270402 263966 301981 289659 118515 166642 448448 475150]
 [577149 501243  54123 159311 484296 125211 201676 378453 320632  52462
   31269 516316 122969  20059  38825 509656 491613 215245  25139  11760
    1818 116589 377497 159977 222235 248810   7108 359781 445675 166664
  162543 259382 237864 396863 155571 314294 369037 289741 112634 356261
  134689 480842 514797  88250 519208 158945  80274 329447 375763 207306]]
2025-03-23 19:43:43,239 - __main__ - DEBUG - Search results: distances shape=(4, 50), indices shape=(4, 50)
2025-03-23 19:43:43,239 - __main__ - DEBUG - Returning search results: 4 items
2025-03-23 19:43:43,240 - werkzeug - INFO - 127.0.0.1 - - [23/Mar/2025 19:43:43] "POST /search HTTP/1.1" 200 -
2025-03-23 19:43:43,242 - __main__ - DEBUG - Received search request with query_vector shape=(1, 512), k=100
2025-03-23 19:43:43,242 - __main__ - DEBUG - Calling coordinator.search
2025-03-23 19:43:43,242 - coordinator - DEBUG - Starting search with query_vector shape=(1, 512), k=100
2025-03-23 19:43:43,242 - root - DEBUG - Getting candidate shards for query vector with shape (1, 512)
2025-03-23 19:43:43,242 - root - DEBUG - Table 0 hash value shape: (1, 4)
2025-03-23 19:43:43,242 - root - DEBUG - Table 1 hash value shape: (1, 4)
2025-03-23 19:43:43,242 - root - DEBUG - Table 2 hash value shape: (1, 4)
2025-03-23 19:43:43,242 - root - DEBUG - Assigned vector to shard 2
2025-03-23 19:43:43,243 - root - DEBUG - Table 0 hash value shape: (1, 4)
2025-03-23 19:43:43,243 - root - DEBUG - Table 1 hash value shape: (1, 4)
2025-03-23 19:43:43,243 - root - DEBUG - Table 2 hash value shape: (1, 4)
2025-03-23 19:43:43,243 - root - DEBUG - Selected candidate shards: [0, 2]
2025-03-23 19:43:43,243 - coordinator - DEBUG - Candidate shards: [0, 2]
2025-03-23 19:43:43,243 - coordinator - DEBUG - Mapping shard_id 0 to node_idx 0 (out of 3 nodes)
2025-03-23 19:43:43,243 - coordinator - DEBUG - Submitting search to shard 0 at localhost:6001
2025-03-23 19:43:43,243 - coordinator - DEBUG - Sending search request to http://localhost:6001/search
2025-03-23 19:43:43,243 - coordinator - DEBUG - Mapping shard_id 2 to node_idx 2 (out of 3 nodes)
2025-03-23 19:43:43,243 - coordinator - DEBUG - Submitting search to shard 2 at localhost:6003
2025-03-23 19:43:43,243 - coordinator - DEBUG - Sending search request to http://localhost:6003/search
2025-03-23 19:43:43,244 - urllib3.connectionpool - DEBUG - Starting new HTTP connection (1): localhost:6003
2025-03-23 19:43:43,245 - urllib3.connectionpool - DEBUG - Starting new HTTP connection (1): localhost:6001
2025-03-23 19:43:43,248 - urllib3.connectionpool - DEBUG - http://localhost:6003 "POST /search HTTP/1.1" 200 2552
2025-03-23 19:43:43,248 - urllib3.connectionpool - DEBUG - http://localhost:6001 "POST /search HTTP/1.1" 200 2524
2025-03-23 19:43:43,249 - coordinator - DEBUG - Received response from http://localhost:6003/search: {'distances': [[223.68067932128906, 261.1363220214844, 264.6928405761719, 268.89154052734375, 270.8614196777344, 271.2298889160156, 280.7435302734375, 285.25506591796875, 293.28814697265625, 294.4590759277344, 298.4531555175781, 302.074462890625, 310.91162109375, 316.76007080078125, 320.2503967285156, 336.86834716796875, 338.4091491699219, 344.02020263671875, 345.87548828125, 346.639404296875, 350.7432861328125, 353.98773193359375, 356.8609924316406, 358.2466125488281, 358.8722229003906, 361.87933349609375, 363.3062744140625, 366.0379638671875, 371.9473571777344, 379.4862060546875, 381.3715515136719, 383.8329162597656, 384.0146789550781, 384.55670166015625, 388.66961669921875, 391.22381591796875, 391.79425048828125, 392.451416015625, 396.4420166015625, 399.48272705078125, 402.5003662109375, 402.840087890625, 403.5804443359375, 404.62640380859375, 408.8249816894531, 412.0340576171875, 413.0330810546875, 413.6707458496094, 413.83319091796875, 414.55841064453125, 415.0129089355469, 417.74346923828125, 421.46173095703125, 424.3564758300781, 424.79559326171875, 426.52972412109375, 427.55462646484375, 428.2110595703125, 429.0107727050781, 430.78656005859375, 431.8663635253906, 433.2917175292969, 434.72216796875, 434.8919677734375, 436.9892272949219, 437.7248229980469, 438.27386474609375, 438.6728820800781, 440.98724365234375, 442.37493896484375, 444.2797546386719, 445.5971374511719, 447.7373046875, 448.428955078125, 449.26177978515625, 453.8072814941406, 455.05987548828125, 455.9235534667969, 457.63653564453125, 457.9619140625, 458.8741455078125, 459.079345703125, 459.0990905761719, 460.2377624511719, 461.32666015625, 461.69525146484375, 461.9542236328125, 463.32012939453125, 463.5067138671875, 463.63775634765625, 467.0182800292969, 468.6232604980469, 469.6459045410156, 470.3802185058594, 470.51959228515625, 470.8634033203125, 472.07196044921875, 472.713623046875, 472.83404541015625, 475.80267333984375]], 'indices': [[572555, 70254, 270297, 295420, 416269, 311883, 155443, 508917, 135902, 511999, 478474, 185472, 307598, 344816, 546659, 347544, 539445, 478286, 55167, 338986, 187144, 475387, 315450, 155341, 184321, 128372, 469246, 66135, 423229, 26204, 6723, 275791, 122606, 423519, 443498, 442456, 17207, 249643, 574425, 423617, 306893, 415536, 221754, 15338, 426372, 306136, 392722, 314251, 446206, 206487, 301376, 110784, 258793, 274272, 42563, 277005, 123131, 174004, 186624, 519039, 263299, 476491, 356169, 496722, 467848, 389684, 563653, 135670, 189226, 196754, 329614, 211674, 27768, 210394, 148508, 404534, 249219, 463647, 147745, 455085, 505638, 476704, 162858, 303818, 412531, 401862, 460967, 292997, 272049, 39484, 441553, 43737, 88462, 553339, 400367, 205289, 45596, 405205, 221213, 453584]], 'status': 'success'}
2025-03-23 19:43:43,249 - coordinator - DEBUG - Received response from http://localhost:6001/search: {'distances': [[6.050220012664795, 182.7266845703125, 197.43667602539062, 203.05563354492188, 213.77268981933594, 224.72149658203125, 231.47866821289062, 246.13876342773438, 246.6099853515625, 252.28125, 252.76806640625, 252.86325073242188, 254.14694213867188, 255.91751098632812, 259.0876159667969, 259.6744384765625, 261.52484130859375, 267.11639404296875, 269.86163330078125, 276.9520263671875, 277.20269775390625, 283.43927001953125, 283.455810546875, 294.4888916015625, 297.879638671875, 298.8684997558594, 304.7881164550781, 309.724853515625, 311.57867431640625, 313.5284118652344, 314.1706848144531, 316.9643249511719, 318.3319091796875, 327.8151550292969, 328.31329345703125, 328.78125, 331.5523376464844, 333.74871826171875, 335.8971252441406, 338.8893737792969, 339.1814880371094, 341.83734130859375, 342.09405517578125, 343.8394775390625, 347.00103759765625, 353.07244873046875, 356.53570556640625, 358.2470703125, 359.8987731933594, 364.48785400390625, 364.950927734375, 367.63330078125, 372.06683349609375, 376.8166198730469, 378.5319519042969, 380.892822265625, 384.06536865234375, 385.114990234375, 386.7766418457031, 392.10369873046875, 392.1958312988281, 394.51580810546875, 394.6031494140625, 397.6619873046875, 397.94134521484375, 398.8655700683594, 399.647216796875, 399.96063232421875, 400.79168701171875, 404.44378662109375, 408.8438720703125, 410.2329406738281, 412.31298828125, 413.86328125, 423.6315002441406, 426.6759033203125, 428.32958984375, 428.4379577636719, 430.35540771484375, 430.50433349609375, 431.62750244140625, 435.13934326171875, 439.6925048828125, 440.4480285644531, 441.10491943359375, 442.8746337890625, 443.7320556640625, 445.4758605957031, 447.3991394042969, 447.51080322265625, 448.25390625, 450.0494384765625, 450.1488037109375, 450.1878662109375, 451.75592041015625, 452.0020751953125, 453.0536804199219, 454.5198974609375, 456.283203125, 457.9975280761719]], 'indices': [[379800, 30675, 133567, 493566, 477623, 439593, 241297, 256195, 60090, 440508, 206994, 33109, 90155, 566524, 368038, 482585, 519338, 225946, 431896, 539143, 419096, 201148, 134722, 275727, 200162, 39670, 217400, 448410, 146825, 232538, 323751, 115118, 128051, 180188, 558421, 440617, 151857, 579818, 52007, 303863, 363072, 177893, 82085, 287874, 494863, 311909, 231169, 578967, 90208, 572303, 479030, 159684, 499775, 17627, 542856, 276720, 296224, 436738, 578093, 124798, 89556, 458109, 531036, 396338, 130566, 184400, 82846, 338625, 133000, 359937, 566758, 512564, 147725, 543043, 393093, 500423, 287291, 76547, 165039, 393226, 482978, 534673, 14473, 395801, 203294, 372317, 280710, 323828, 226802, 50165, 183246, 1584, 336232, 530466, 569565, 86220, 227399, 213605, 133819, 553776]], 'status': 'success'}
2025-03-23 19:43:43,249 - coordinator - DEBUG - Valid results from http://localhost:6003/search: distances shape=(1, 100), indices shape=(1, 100)
2025-03-23 19:43:43,249 - coordinator - DEBUG - Valid results from http://localhost:6001/search: distances shape=(1, 100), indices shape=(1, 100)
2025-03-23 19:43:43,249 - coordinator - DEBUG - Received search results: distances shape=(1, 100), indices shape=(1, 100)
2025-03-23 19:43:43,249 - coordinator - DEBUG - Received search results: distances shape=(1, 100), indices shape=(1, 100)
2025-03-23 19:43:43,250 - coordinator - DEBUG - All distances: [array([223.68067932, 261.13632202, 264.69284058, 268.89154053,
       270.86141968, 271.22988892, 280.74353027, 285.25506592,
       293.28814697, 294.45907593, 298.45315552, 302.07446289,
       310.91162109, 316.7600708 , 320.25039673, 336.86834717,
       338.40914917, 344.02020264, 345.87548828, 346.6394043 ,
       350.74328613, 353.98773193, 356.86099243, 358.24661255,
       358.8722229 , 361.8793335 , 363.30627441, 366.03796387,
       371.94735718, 379.48620605, 381.37155151, 383.83291626,
       384.01467896, 384.55670166, 388.6696167 , 391.22381592,
       391.79425049, 392.45141602, 396.4420166 , 399.48272705,
       402.50036621, 402.84008789, 403.58044434, 404.62640381,
       408.82498169, 412.03405762, 413.03308105, 413.67074585,
       413.83319092, 414.55841064, 415.01290894, 417.74346924,
       421.46173096, 424.35647583, 424.79559326, 426.52972412,
       427.55462646, 428.21105957, 429.01077271, 430.78656006,
       431.86636353, 433.29171753, 434.72216797, 434.89196777,
       436.98922729, 437.724823  , 438.27386475, 438.67288208,
       440.98724365, 442.37493896, 444.27975464, 445.59713745,
       447.73730469, 448.42895508, 449.26177979, 453.80728149,
       455.05987549, 455.92355347, 457.63653564, 457.96191406,
       458.87414551, 459.0793457 , 459.09909058, 460.23776245,
       461.32666016, 461.69525146, 461.95422363, 463.32012939,
       463.50671387, 463.63775635, 467.01828003, 468.6232605 ,
       469.64590454, 470.38021851, 470.51959229, 470.86340332,
       472.07196045, 472.71362305, 472.83404541, 475.80267334]), array([  6.05022001, 182.72668457, 197.43667603, 203.05563354,
       213.77268982, 224.72149658, 231.47866821, 246.13876343,
       246.60998535, 252.28125   , 252.76806641, 252.86325073,
       254.14694214, 255.91751099, 259.08761597, 259.67443848,
       261.52484131, 267.11639404, 269.8616333 , 276.95202637,
       277.20269775, 283.43927002, 283.45581055, 294.4888916 ,
       297.87963867, 298.86849976, 304.78811646, 309.72485352,
       311.57867432, 313.52841187, 314.17068481, 316.96432495,
       318.33190918, 327.81515503, 328.31329346, 328.78125   ,
       331.55233765, 333.74871826, 335.89712524, 338.88937378,
       339.18148804, 341.83734131, 342.09405518, 343.83947754,
       347.0010376 , 353.07244873, 356.53570557, 358.24707031,
       359.89877319, 364.487854  , 364.95092773, 367.63330078,
       372.0668335 , 376.81661987, 378.5319519 , 380.89282227,
       384.06536865, 385.11499023, 386.77664185, 392.10369873,
       392.1958313 , 394.51580811, 394.60314941, 397.6619873 ,
       397.94134521, 398.86557007, 399.6472168 , 399.96063232,
       400.79168701, 404.44378662, 408.84387207, 410.23294067,
       412.31298828, 413.86328125, 423.63150024, 426.67590332,
       428.32958984, 428.43795776, 430.35540771, 430.5043335 ,
       431.62750244, 435.13934326, 439.69250488, 440.44802856,
       441.10491943, 442.87463379, 443.73205566, 445.4758606 ,
       447.3991394 , 447.51080322, 448.25390625, 450.04943848,
       450.14880371, 450.18786621, 451.75592041, 452.0020752 ,
       453.05368042, 454.51989746, 456.28320312, 457.99752808])]
2025-03-23 19:43:43,250 - coordinator - DEBUG - All indices: [array([572555,  70254, 270297, 295420, 416269, 311883, 155443, 508917,
       135902, 511999, 478474, 185472, 307598, 344816, 546659, 347544,
       539445, 478286,  55167, 338986, 187144, 475387, 315450, 155341,
       184321, 128372, 469246,  66135, 423229,  26204,   6723, 275791,
       122606, 423519, 443498, 442456,  17207, 249643, 574425, 423617,
       306893, 415536, 221754,  15338, 426372, 306136, 392722, 314251,
       446206, 206487, 301376, 110784, 258793, 274272,  42563, 277005,
       123131, 174004, 186624, 519039, 263299, 476491, 356169, 496722,
       467848, 389684, 563653, 135670, 189226, 196754, 329614, 211674,
        27768, 210394, 148508, 404534, 249219, 463647, 147745, 455085,
       505638, 476704, 162858, 303818, 412531, 401862, 460967, 292997,
       272049,  39484, 441553,  43737,  88462, 553339, 400367, 205289,
        45596, 405205, 221213, 453584]), array([379800,  30675, 133567, 493566, 477623, 439593, 241297, 256195,
        60090, 440508, 206994,  33109,  90155, 566524, 368038, 482585,
       519338, 225946, 431896, 539143, 419096, 201148, 134722, 275727,
       200162,  39670, 217400, 448410, 146825, 232538, 323751, 115118,
       128051, 180188, 558421, 440617, 151857, 579818,  52007, 303863,
       363072, 177893,  82085, 287874, 494863, 311909, 231169, 578967,
        90208, 572303, 479030, 159684, 499775,  17627, 542856, 276720,
       296224, 436738, 578093, 124798,  89556, 458109, 531036, 396338,
       130566, 184400,  82846, 338625, 133000, 359937, 566758, 512564,
       147725, 543043, 393093, 500423, 287291,  76547, 165039, 393226,
       482978, 534673,  14473, 395801, 203294, 372317, 280710, 323828,
       226802,  50165, 183246,   1584, 336232, 530466, 569565,  86220,
       227399, 213605, 133819, 553776])]
2025-03-23 19:43:43,250 - coordinator - DEBUG - all_distances shape: (2, 100), all_indices shape: (2, 100)
2025-03-23 19:43:43,250 - coordinator - DEBUG - Using k=2 for sorting
2025-03-23 19:43:43,250 - coordinator - DEBUG - sorted_idx: [[ 0  1  2  3  4  5  6  7  8  9 10 11 12 13 14 15 16 17 18 19 20 21 22 23
  24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47
  48 49 50 51 52 53 54 55 56 57 58 59 60 61 62 63 64 65 66 67 68 69 70 71
  72 73 74 75 76 77 78 79 80 81 82 83 84 85 86 87 88 89 90 91 92 93 94 95
  96 97 98 99]
 [ 0  1  2  3  4  5  6  7  8  9 10 11 12 13 14 15 16 17 18 19 20 21 22 23
  24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47
  48 49 50 51 52 53 54 55 56 57 58 59 60 61 62 63 64 65 66 67 68 69 70 71
  72 73 74 75 76 77 78 79 80 81 82 83 84 85 86 87 88 89 90 91 92 93 94 95
  96 97 98 99]]
2025-03-23 19:43:43,250 - coordinator - ERROR - Index out of bounds: max sorted_idx=99, len(all_distances)=2
2025-03-23 19:43:43,251 - coordinator - DEBUG - Returning results: distances=[[223.68067932 261.13632202 264.69284058 268.89154053 270.86141968
  271.22988892 280.74353027 285.25506592 293.28814697 294.45907593
  298.45315552 302.07446289 310.91162109 316.7600708  320.25039673
  336.86834717 338.40914917 344.02020264 345.87548828 346.6394043
  350.74328613 353.98773193 356.86099243 358.24661255 358.8722229
  361.8793335  363.30627441 366.03796387 371.94735718 379.48620605
  381.37155151 383.83291626 384.01467896 384.55670166 388.6696167
  391.22381592 391.79425049 392.45141602 396.4420166  399.48272705
  402.50036621 402.84008789 403.58044434 404.62640381 408.82498169
  412.03405762 413.03308105 413.67074585 413.83319092 414.55841064
  415.01290894 417.74346924 421.46173096 424.35647583 424.79559326
  426.52972412 427.55462646 428.21105957 429.01077271 430.78656006
  431.86636353 433.29171753 434.72216797 434.89196777 436.98922729
  437.724823   438.27386475 438.67288208 440.98724365 442.37493896
  444.27975464 445.59713745 447.73730469 448.42895508 449.26177979
  453.80728149 455.05987549 455.92355347 457.63653564 457.96191406
  458.87414551 459.0793457  459.09909058 460.23776245 461.32666016
  461.69525146 461.95422363 463.32012939 463.50671387 463.63775635
  467.01828003 468.6232605  469.64590454 470.38021851 470.51959229
  470.86340332 472.07196045 472.71362305 472.83404541 475.80267334]
 [  6.05022001 182.72668457 197.43667603 203.05563354 213.77268982
  224.72149658 231.47866821 246.13876343 246.60998535 252.28125
  252.76806641 252.86325073 254.14694214 255.91751099 259.08761597
  259.67443848 261.52484131 267.11639404 269.8616333  276.95202637
  277.20269775 283.43927002 283.45581055 294.4888916  297.87963867
  298.86849976 304.78811646 309.72485352 311.57867432 313.52841187
  314.17068481 316.96432495 318.33190918 327.81515503 328.31329346
  328.78125    331.55233765 333.74871826 335.89712524 338.88937378
  339.18148804 341.83734131 342.09405518 343.83947754 347.0010376
  353.07244873 356.53570557 358.24707031 359.89877319 364.487854
  364.95092773 367.63330078 372.0668335  376.81661987 378.5319519
  380.89282227 384.06536865 385.11499023 386.77664185 392.10369873
  392.1958313  394.51580811 394.60314941 397.6619873  397.94134521
  398.86557007 399.6472168  399.96063232 400.79168701 404.44378662
  408.84387207 410.23294067 412.31298828 413.86328125 423.63150024
  426.67590332 428.32958984 428.43795776 430.35540771 430.5043335
  431.62750244 435.13934326 439.69250488 440.44802856 441.10491943
  442.87463379 443.73205566 445.4758606  447.3991394  447.51080322
  448.25390625 450.04943848 450.14880371 450.18786621 451.75592041
  452.0020752  453.05368042 454.51989746 456.28320312 457.99752808]
 [223.68067932 261.13632202 264.69284058 268.89154053 270.86141968
  271.22988892 280.74353027 285.25506592 293.28814697 294.45907593
  298.45315552 302.07446289 310.91162109 316.7600708  320.25039673
  336.86834717 338.40914917 344.02020264 345.87548828 346.6394043
  350.74328613 353.98773193 356.86099243 358.24661255 358.8722229
  361.8793335  363.30627441 366.03796387 371.94735718 379.48620605
  381.37155151 383.83291626 384.01467896 384.55670166 388.6696167
  391.22381592 391.79425049 392.45141602 396.4420166  399.48272705
  402.50036621 402.84008789 403.58044434 404.62640381 408.82498169
  412.03405762 413.03308105 413.67074585 413.83319092 414.55841064
  415.01290894 417.74346924 421.46173096 424.35647583 424.79559326
  426.52972412 427.55462646 428.21105957 429.01077271 430.78656006
  431.86636353 433.29171753 434.72216797 434.89196777 436.98922729
  437.724823   438.27386475 438.67288208 440.98724365 442.37493896
  444.27975464 445.59713745 447.73730469 448.42895508 449.26177979
  453.80728149 455.05987549 455.92355347 457.63653564 457.96191406
  458.87414551 459.0793457  459.09909058 460.23776245 461.32666016
  461.69525146 461.95422363 463.32012939 463.50671387 463.63775635
  467.01828003 468.6232605  469.64590454 470.38021851 470.51959229
  470.86340332 472.07196045 472.71362305 472.83404541 475.80267334]
 [  6.05022001 182.72668457 197.43667603 203.05563354 213.77268982
  224.72149658 231.47866821 246.13876343 246.60998535 252.28125
  252.76806641 252.86325073 254.14694214 255.91751099 259.08761597
  259.67443848 261.52484131 267.11639404 269.8616333  276.95202637
  277.20269775 283.43927002 283.45581055 294.4888916  297.87963867
  298.86849976 304.78811646 309.72485352 311.57867432 313.52841187
  314.17068481 316.96432495 318.33190918 327.81515503 328.31329346
  328.78125    331.55233765 333.74871826 335.89712524 338.88937378
  339.18148804 341.83734131 342.09405518 343.83947754 347.0010376
  353.07244873 356.53570557 358.24707031 359.89877319 364.487854
  364.95092773 367.63330078 372.0668335  376.81661987 378.5319519
  380.89282227 384.06536865 385.11499023 386.77664185 392.10369873
  392.1958313  394.51580811 394.60314941 397.6619873  397.94134521
  398.86557007 399.6472168  399.96063232 400.79168701 404.44378662
  408.84387207 410.23294067 412.31298828 413.86328125 423.63150024
  426.67590332 428.32958984 428.43795776 430.35540771 430.5043335
  431.62750244 435.13934326 439.69250488 440.44802856 441.10491943
  442.87463379 443.73205566 445.4758606  447.3991394  447.51080322
  448.25390625 450.04943848 450.14880371 450.18786621 451.75592041
  452.0020752  453.05368042 454.51989746 456.28320312 457.99752808]], indices=[[572555  70254 270297 295420 416269 311883 155443 508917 135902 511999
  478474 185472 307598 344816 546659 347544 539445 478286  55167 338986
  187144 475387 315450 155341 184321 128372 469246  66135 423229  26204
    6723 275791 122606 423519 443498 442456  17207 249643 574425 423617
  306893 415536 221754  15338 426372 306136 392722 314251 446206 206487
  301376 110784 258793 274272  42563 277005 123131 174004 186624 519039
  263299 476491 356169 496722 467848 389684 563653 135670 189226 196754
  329614 211674  27768 210394 148508 404534 249219 463647 147745 455085
  505638 476704 162858 303818 412531 401862 460967 292997 272049  39484
  441553  43737  88462 553339 400367 205289  45596 405205 221213 453584]
 [379800  30675 133567 493566 477623 439593 241297 256195  60090 440508
  206994  33109  90155 566524 368038 482585 519338 225946 431896 539143
  419096 201148 134722 275727 200162  39670 217400 448410 146825 232538
  323751 115118 128051 180188 558421 440617 151857 579818  52007 303863
  363072 177893  82085 287874 494863 311909 231169 578967  90208 572303
  479030 159684 499775  17627 542856 276720 296224 436738 578093 124798
   89556 458109 531036 396338 130566 184400  82846 338625 133000 359937
  566758 512564 147725 543043 393093 500423 287291  76547 165039 393226
  482978 534673  14473 395801 203294 372317 280710 323828 226802  50165
  183246   1584 336232 530466 569565  86220 227399 213605 133819 553776]
 [572555  70254 270297 295420 416269 311883 155443 508917 135902 511999
  478474 185472 307598 344816 546659 347544 539445 478286  55167 338986
  187144 475387 315450 155341 184321 128372 469246  66135 423229  26204
    6723 275791 122606 423519 443498 442456  17207 249643 574425 423617
  306893 415536 221754  15338 426372 306136 392722 314251 446206 206487
  301376 110784 258793 274272  42563 277005 123131 174004 186624 519039
  263299 476491 356169 496722 467848 389684 563653 135670 189226 196754
  329614 211674  27768 210394 148508 404534 249219 463647 147745 455085
  505638 476704 162858 303818 412531 401862 460967 292997 272049  39484
  441553  43737  88462 553339 400367 205289  45596 405205 221213 453584]
 [379800  30675 133567 493566 477623 439593 241297 256195  60090 440508
  206994  33109  90155 566524 368038 482585 519338 225946 431896 539143
  419096 201148 134722 275727 200162  39670 217400 448410 146825 232538
  323751 115118 128051 180188 558421 440617 151857 579818  52007 303863
  363072 177893  82085 287874 494863 311909 231169 578967  90208 572303
  479030 159684 499775  17627 542856 276720 296224 436738 578093 124798
   89556 458109 531036 396338 130566 184400  82846 338625 133000 359937
  566758 512564 147725 543043 393093 500423 287291  76547 165039 393226
  482978 534673  14473 395801 203294 372317 280710 323828 226802  50165
  183246   1584 336232 530466 569565  86220 227399 213605 133819 553776]]
2025-03-23 19:43:43,251 - __main__ - DEBUG - Search results: distances shape=(4, 100), indices shape=(4, 100)
2025-03-23 19:43:43,251 - __main__ - DEBUG - Returning search results: 4 items
2025-03-23 19:43:43,252 - werkzeug - INFO - 127.0.0.1 - - [23/Mar/2025 19:43:43] "POST /search HTTP/1.1" 200 -
2025-03-23 19:43:43,255 - __main__ - DEBUG - Received search request with query_vector shape=(1, 512), k=100
2025-03-23 19:43:43,255 - __main__ - DEBUG - Calling coordinator.search
2025-03-23 19:43:43,255 - coordinator - DEBUG - Starting search with query_vector shape=(1, 512), k=100
2025-03-23 19:43:43,255 - root - DEBUG - Getting candidate shards for query vector with shape (1, 512)
2025-03-23 19:43:43,255 - root - DEBUG - Table 0 hash value shape: (1, 4)
2025-03-23 19:43:43,255 - root - DEBUG - Table 1 hash value shape: (1, 4)
2025-03-23 19:43:43,255 - root - DEBUG - Table 2 hash value shape: (1, 4)
2025-03-23 19:43:43,255 - root - DEBUG - Assigned vector to shard 2
2025-03-23 19:43:43,255 - root - DEBUG - Table 0 hash value shape: (1, 4)
2025-03-23 19:43:43,255 - root - DEBUG - Table 1 hash value shape: (1, 4)
2025-03-23 19:43:43,255 - root - DEBUG - Table 2 hash value shape: (1, 4)
2025-03-23 19:43:43,255 - root - DEBUG - Selected candidate shards: [1, 2]
2025-03-23 19:43:43,255 - coordinator - DEBUG - Candidate shards: [1, 2]
2025-03-23 19:43:43,255 - coordinator - DEBUG - Mapping shard_id 1 to node_idx 1 (out of 3 nodes)
2025-03-23 19:43:43,255 - coordinator - DEBUG - Submitting search to shard 1 at localhost:6002
2025-03-23 19:43:43,255 - coordinator - DEBUG - Sending search request to http://localhost:6002/search
2025-03-23 19:43:43,256 - coordinator - DEBUG - Mapping shard_id 2 to node_idx 2 (out of 3 nodes)
2025-03-23 19:43:43,256 - coordinator - DEBUG - Submitting search to shard 2 at localhost:6003
2025-03-23 19:43:43,256 - coordinator - DEBUG - Sending search request to http://localhost:6003/search
2025-03-23 19:43:43,257 - urllib3.connectionpool - DEBUG - Starting new HTTP connection (1): localhost:6003
2025-03-23 19:43:43,257 - urllib3.connectionpool - DEBUG - Starting new HTTP connection (1): localhost:6002
2025-03-23 19:43:43,260 - urllib3.connectionpool - DEBUG - http://localhost:6003 "POST /search HTTP/1.1" 200 2488
2025-03-23 19:43:43,260 - coordinator - DEBUG - Received response from http://localhost:6003/search: {'distances': [[5.917777061462402, 267.8946838378906, 290.0080261230469, 292.7058410644531, 341.6820068359375, 346.6094055175781, 353.0570068359375, 364.8480224609375, 366.2452087402344, 367.3668212890625, 377.8171691894531, 390.9093017578125, 391.0843505859375, 391.44207763671875, 408.686279296875, 412.5203552246094, 417.2493896484375, 418.00360107421875, 422.0140075683594, 423.4010009765625, 429.2477722167969, 438.7749938964844, 443.6248474121094, 453.77447509765625, 455.6508483886719, 458.37847900390625, 467.5233154296875, 472.23822021484375, 476.1922912597656, 478.13818359375, 484.18719482421875, 486.16845703125, 486.7788391113281, 489.05963134765625, 489.6727294921875, 492.92462158203125, 493.81793212890625, 496.46759033203125, 497.13018798828125, 497.749267578125, 507.72186279296875, 510.63189697265625, 513.6138916015625, 516.83544921875, 517.0880126953125, 517.14404296875, 518.4512329101562, 518.8209838867188, 521.1495971679688, 522.306640625, 523.840087890625, 527.3265380859375, 527.4942626953125, 528.55419921875, 532.3410034179688, 533.3392944335938, 533.755126953125, 534.12060546875, 537.5064697265625, 539.3782348632812, 540.2076416015625, 541.0563354492188, 542.3839111328125, 542.9072875976562, 543.2884521484375, 544.0086059570312, 544.5380859375, 546.0107421875, 546.55322265625, 546.6076049804688, 546.679931640625, 547.0494995117188, 547.1943969726562, 548.6203002929688, 548.792236328125, 549.8189697265625, 551.8255615234375, 552.5112915039062, 552.74755859375, 552.9217529296875, 552.998046875, 553.118408203125, 553.146240234375, 553.6087646484375, 554.2355346679688, 554.732177734375, 555.9736328125, 557.5892944335938, 557.813720703125, 558.1943359375, 558.6082763671875, 559.2018432617188, 560.2987670898438, 560.40283203125, 562.5093994140625, 563.2979125976562, 564.746337890625, 565.8828125, 566.79345703125, 567.1338500976562]], 'indices': [[145620, 102331, 210299, 102411, 455624, 571264, 491213, 291791, 491090, 259690, 224051, 48924, 179765, 184611, 538364, 343934, 18737, 185472, 114770, 472623, 78748, 524108, 424162, 190676, 492937, 297147, 356169, 365642, 297022, 476119, 414510, 204186, 48555, 205289, 389532, 140420, 263299, 581357, 50145, 172935, 20553, 373315, 404249, 560880, 471023, 419408, 232646, 220764, 148508, 573094, 289343, 442463, 435206, 29187, 370208, 465675, 329614, 438955, 426166, 13546, 563470, 364102, 37751, 476258, 206487, 270244, 74058, 124442, 33854, 296649, 132587, 101762, 256192, 423798, 463647, 473118, 38829, 9769, 44195, 346232, 407650, 314251, 97679, 145665, 404534, 469192, 297698, 427160, 258793, 196442, 172617, 157365, 374545, 91619, 392722, 50943, 23126, 282046, 327617, 558213]], 'status': 'success'}
2025-03-23 19:43:43,260 - coordinator - DEBUG - Valid results from http://localhost:6003/search: distances shape=(1, 100), indices shape=(1, 100)
2025-03-23 19:43:43,260 - urllib3.connectionpool - DEBUG - http://localhost:6002 "POST /search HTTP/1.1" 200 2503
2025-03-23 19:43:43,261 - coordinator - DEBUG - Received response from http://localhost:6002/search: {'distances': [[288.9261779785156, 303.25177001953125, 311.8754577636719, 315.74237060546875, 326.10980224609375, 353.1025085449219, 356.060302734375, 358.80621337890625, 366.4284973144531, 370.611572265625, 380.0295104980469, 380.60748291015625, 382.93206787109375, 384.07525634765625, 384.9373474121094, 400.9406433105469, 401.01824951171875, 402.2726745605469, 403.6279602050781, 406.5517578125, 421.16351318359375, 429.89056396484375, 440.1388244628906, 441.16619873046875, 441.60870361328125, 442.0572204589844, 454.10693359375, 460.55255126953125, 469.76336669921875, 473.57763671875, 473.6805114746094, 474.6334228515625, 475.148193359375, 476.9756774902344, 478.29534912109375, 479.294921875, 479.6615905761719, 481.4598388671875, 481.7870788574219, 484.7803039550781, 486.760986328125, 490.3440856933594, 492.84521484375, 497.1930847167969, 498.9060363769531, 500.000732421875, 500.00335693359375, 501.716552734375, 503.57049560546875, 504.8685302734375, 505.2132263183594, 507.7581787109375, 510.2955322265625, 510.4507751464844, 511.88250732421875, 512.9508056640625, 515.5878295898438, 515.6124877929688, 520.7101440429688, 523.22802734375, 525.77587890625, 526.2805786132812, 529.2330932617188, 529.2987060546875, 530.1031494140625, 532.9287109375, 535.03662109375, 536.869873046875, 536.8776245117188, 539.4202880859375, 542.696533203125, 544.1213989257812, 545.3006591796875, 548.662109375, 549.9934692382812, 550.046630859375, 550.3997802734375, 550.5643920898438, 551.6075439453125, 551.8394165039062, 552.2371826171875, 552.8047485351562, 554.1549072265625, 555.47021484375, 556.1983032226562, 557.0911865234375, 558.0966796875, 559.0824584960938, 560.0465087890625, 560.57568359375, 560.652099609375, 564.410888671875, 564.50537109375, 565.3312377929688, 565.3382568359375, 570.31005859375, 570.856689453125, 572.2682495117188, 573.3544921875, 573.8201904296875]], 'indices': [[190756, 7816, 549390, 338219, 214192, 321557, 270066, 433204, 291634, 174482, 273551, 70774, 177934, 441586, 499622, 181542, 579902, 44590, 462756, 245448, 55022, 572956, 136715, 228436, 226417, 98287, 194875, 467511, 343561, 394199, 142324, 578792, 507037, 141671, 388258, 226662, 8211, 523957, 275392, 488385, 395180, 349860, 184324, 146667, 192607, 513580, 345027, 299887, 144333, 574297, 476215, 576955, 87244, 186042, 122745, 439715, 538067, 507975, 222094, 338718, 577932, 185950, 510095, 350405, 326542, 50326, 455716, 203389, 400815, 266400, 561958, 23034, 101884, 447187, 137950, 512648, 122166, 72852, 154425, 450559, 290248, 440336, 49269, 238039, 253835, 52591, 457848, 253819, 490936, 308545, 278749, 338560, 178618, 295231, 190923, 128112, 377113, 580757, 267537, 576566]], 'status': 'success'}
2025-03-23 19:43:43,261 - coordinator - DEBUG - Valid results from http://localhost:6002/search: distances shape=(1, 100), indices shape=(1, 100)
2025-03-23 19:43:43,261 - coordinator - DEBUG - Received search results: distances shape=(1, 100), indices shape=(1, 100)
2025-03-23 19:43:43,261 - coordinator - DEBUG - Received search results: distances shape=(1, 100), indices shape=(1, 100)
2025-03-23 19:43:43,262 - coordinator - DEBUG - All distances: [array([  5.91777706, 267.89468384, 290.00802612, 292.70584106,
       341.68200684, 346.60940552, 353.05700684, 364.84802246,
       366.24520874, 367.36682129, 377.81716919, 390.90930176,
       391.08435059, 391.44207764, 408.6862793 , 412.52035522,
       417.24938965, 418.00360107, 422.01400757, 423.40100098,
       429.24777222, 438.7749939 , 443.62484741, 453.7744751 ,
       455.65084839, 458.378479  , 467.52331543, 472.23822021,
       476.19229126, 478.13818359, 484.18719482, 486.16845703,
       486.77883911, 489.05963135, 489.67272949, 492.92462158,
       493.81793213, 496.46759033, 497.13018799, 497.74926758,
       507.72186279, 510.63189697, 513.6138916 , 516.83544922,
       517.0880127 , 517.14404297, 518.45123291, 518.82098389,
       521.14959717, 522.30664062, 523.84008789, 527.32653809,
       527.4942627 , 528.55419922, 532.34100342, 533.33929443,
       533.75512695, 534.12060547, 537.50646973, 539.37823486,
       540.2076416 , 541.05633545, 542.38391113, 542.9072876 ,
       543.28845215, 544.00860596, 544.53808594, 546.01074219,
       546.55322266, 546.60760498, 546.67993164, 547.04949951,
       547.19439697, 548.62030029, 548.79223633, 549.81896973,
       551.82556152, 552.5112915 , 552.74755859, 552.92175293,
       552.99804688, 553.1184082 , 553.14624023, 553.60876465,
       554.23553467, 554.73217773, 555.97363281, 557.58929443,
       557.8137207 , 558.19433594, 558.60827637, 559.20184326,
       560.29876709, 560.40283203, 562.50939941, 563.2979126 ,
       564.74633789, 565.8828125 , 566.79345703, 567.1338501 ]), array([288.92617798, 303.25177002, 311.87545776, 315.74237061,
       326.10980225, 353.10250854, 356.06030273, 358.80621338,
       366.42849731, 370.61157227, 380.0295105 , 380.60748291,
       382.93206787, 384.07525635, 384.93734741, 400.94064331,
       401.01824951, 402.27267456, 403.62796021, 406.55175781,
       421.16351318, 429.89056396, 440.13882446, 441.16619873,
       441.60870361, 442.05722046, 454.10693359, 460.55255127,
       469.7633667 , 473.57763672, 473.68051147, 474.63342285,
       475.14819336, 476.97567749, 478.29534912, 479.29492188,
       479.66159058, 481.45983887, 481.78707886, 484.78030396,
       486.76098633, 490.34408569, 492.84521484, 497.19308472,
       498.90603638, 500.00073242, 500.00335693, 501.71655273,
       503.57049561, 504.86853027, 505.21322632, 507.75817871,
       510.29553223, 510.45077515, 511.88250732, 512.95080566,
       515.58782959, 515.61248779, 520.71014404, 523.22802734,
       525.77587891, 526.28057861, 529.23309326, 529.29870605,
       530.10314941, 532.92871094, 535.03662109, 536.86987305,
       536.87762451, 539.42028809, 542.6965332 , 544.12139893,
       545.30065918, 548.66210938, 549.99346924, 550.04663086,
       550.39978027, 550.56439209, 551.60754395, 551.8394165 ,
       552.23718262, 552.80474854, 554.15490723, 555.47021484,
       556.19830322, 557.09118652, 558.09667969, 559.0824585 ,
       560.04650879, 560.57568359, 560.65209961, 564.41088867,
       564.50537109, 565.33123779, 565.33825684, 570.31005859,
       570.85668945, 572.26824951, 573.35449219, 573.82019043])]
2025-03-23 19:43:43,262 - coordinator - DEBUG - All indices: [array([145620, 102331, 210299, 102411, 455624, 571264, 491213, 291791,
       491090, 259690, 224051,  48924, 179765, 184611, 538364, 343934,
        18737, 185472, 114770, 472623,  78748, 524108, 424162, 190676,
       492937, 297147, 356169, 365642, 297022, 476119, 414510, 204186,
        48555, 205289, 389532, 140420, 263299, 581357,  50145, 172935,
        20553, 373315, 404249, 560880, 471023, 419408, 232646, 220764,
       148508, 573094, 289343, 442463, 435206,  29187, 370208, 465675,
       329614, 438955, 426166,  13546, 563470, 364102,  37751, 476258,
       206487, 270244,  74058, 124442,  33854, 296649, 132587, 101762,
       256192, 423798, 463647, 473118,  38829,   9769,  44195, 346232,
       407650, 314251,  97679, 145665, 404534, 469192, 297698, 427160,
       258793, 196442, 172617, 157365, 374545,  91619, 392722,  50943,
        23126, 282046, 327617, 558213]), array([190756,   7816, 549390, 338219, 214192, 321557, 270066, 433204,
       291634, 174482, 273551,  70774, 177934, 441586, 499622, 181542,
       579902,  44590, 462756, 245448,  55022, 572956, 136715, 228436,
       226417,  98287, 194875, 467511, 343561, 394199, 142324, 578792,
       507037, 141671, 388258, 226662,   8211, 523957, 275392, 488385,
       395180, 349860, 184324, 146667, 192607, 513580, 345027, 299887,
       144333, 574297, 476215, 576955,  87244, 186042, 122745, 439715,
       538067, 507975, 222094, 338718, 577932, 185950, 510095, 350405,
       326542,  50326, 455716, 203389, 400815, 266400, 561958,  23034,
       101884, 447187, 137950, 512648, 122166,  72852, 154425, 450559,
       290248, 440336,  49269, 238039, 253835,  52591, 457848, 253819,
       490936, 308545, 278749, 338560, 178618, 295231, 190923, 128112,
       377113, 580757, 267537, 576566])]
2025-03-23 19:43:43,262 - coordinator - DEBUG - all_distances shape: (2, 100), all_indices shape: (2, 100)
2025-03-23 19:43:43,262 - coordinator - DEBUG - Using k=2 for sorting
2025-03-23 19:43:43,262 - coordinator - DEBUG - sorted_idx: [[ 0  1  2  3  4  5  6  7  8  9 10 11 12 13 14 15 16 17 18 19 20 21 22 23
  24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47
  48 49 50 51 52 53 54 55 56 57 58 59 60 61 62 63 64 65 66 67 68 69 70 71
  72 73 74 75 76 77 78 79 80 81 82 83 84 85 86 87 88 89 90 91 92 93 94 95
  96 97 98 99]
 [ 0  1  2  3  4  5  6  7  8  9 10 11 12 13 14 15 16 17 18 19 20 21 22 23
  24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47
  48 49 50 51 52 53 54 55 56 57 58 59 60 61 62 63 64 65 66 67 68 69 70 71
  72 73 74 75 76 77 78 79 80 81 82 83 84 85 86 87 88 89 90 91 92 93 94 95
  96 97 98 99]]
2025-03-23 19:43:43,262 - coordinator - ERROR - Index out of bounds: max sorted_idx=99, len(all_distances)=2
2025-03-23 19:43:43,264 - coordinator - DEBUG - Returning results: distances=[[  5.91777706 267.89468384 290.00802612 292.70584106 341.68200684
  346.60940552 353.05700684 364.84802246 366.24520874 367.36682129
  377.81716919 390.90930176 391.08435059 391.44207764 408.6862793
  412.52035522 417.24938965 418.00360107 422.01400757 423.40100098
  429.24777222 438.7749939  443.62484741 453.7744751  455.65084839
  458.378479   467.52331543 472.23822021 476.19229126 478.13818359
  484.18719482 486.16845703 486.77883911 489.05963135 489.67272949
  492.92462158 493.81793213 496.46759033 497.13018799 497.74926758
  507.72186279 510.63189697 513.6138916  516.83544922 517.0880127
  517.14404297 518.45123291 518.82098389 521.14959717 522.30664062
  523.84008789 527.32653809 527.4942627  528.55419922 532.34100342
  533.33929443 533.75512695 534.12060547 537.50646973 539.37823486
  540.2076416  541.05633545 542.38391113 542.9072876  543.28845215
  544.00860596 544.53808594 546.01074219 546.55322266 546.60760498
  546.67993164 547.04949951 547.19439697 548.62030029 548.79223633
  549.81896973 551.82556152 552.5112915  552.74755859 552.92175293
  552.99804688 553.1184082  553.14624023 553.60876465 554.23553467
  554.73217773 555.97363281 557.58929443 557.8137207  558.19433594
  558.60827637 559.20184326 560.29876709 560.40283203 562.50939941
  563.2979126  564.74633789 565.8828125  566.79345703 567.1338501 ]
 [288.92617798 303.25177002 311.87545776 315.74237061 326.10980225
  353.10250854 356.06030273 358.80621338 366.42849731 370.61157227
  380.0295105  380.60748291 382.93206787 384.07525635 384.93734741
  400.94064331 401.01824951 402.27267456 403.62796021 406.55175781
  421.16351318 429.89056396 440.13882446 441.16619873 441.60870361
  442.05722046 454.10693359 460.55255127 469.7633667  473.57763672
  473.68051147 474.63342285 475.14819336 476.97567749 478.29534912
  479.29492188 479.66159058 481.45983887 481.78707886 484.78030396
  486.76098633 490.34408569 492.84521484 497.19308472 498.90603638
  500.00073242 500.00335693 501.71655273 503.57049561 504.86853027
  505.21322632 507.75817871 510.29553223 510.45077515 511.88250732
  512.95080566 515.58782959 515.61248779 520.71014404 523.22802734
  525.77587891 526.28057861 529.23309326 529.29870605 530.10314941
  532.92871094 535.03662109 536.86987305 536.87762451 539.42028809
  542.6965332  544.12139893 545.30065918 548.66210938 549.99346924
  550.04663086 550.39978027 550.56439209 551.60754395 551.8394165
  552.23718262 552.80474854 554.15490723 555.47021484 556.19830322
  557.09118652 558.09667969 559.0824585  560.04650879 560.57568359
  560.65209961 564.41088867 564.50537109 565.33123779 565.33825684
  570.31005859 570.85668945 572.26824951 573.35449219 573.82019043]
 [  5.91777706 267.89468384 290.00802612 292.70584106 341.68200684
  346.60940552 353.05700684 364.84802246 366.24520874 367.36682129
  377.81716919 390.90930176 391.08435059 391.44207764 408.6862793
  412.52035522 417.24938965 418.00360107 422.01400757 423.40100098
  429.24777222 438.7749939  443.62484741 453.7744751  455.65084839
  458.378479   467.52331543 472.23822021 476.19229126 478.13818359
  484.18719482 486.16845703 486.77883911 489.05963135 489.67272949
  492.92462158 493.81793213 496.46759033 497.13018799 497.74926758
  507.72186279 510.63189697 513.6138916  516.83544922 517.0880127
  517.14404297 518.45123291 518.82098389 521.14959717 522.30664062
  523.84008789 527.32653809 527.4942627  528.55419922 532.34100342
  533.33929443 533.75512695 534.12060547 537.50646973 539.37823486
  540.2076416  541.05633545 542.38391113 542.9072876  543.28845215
  544.00860596 544.53808594 546.01074219 546.55322266 546.60760498
  546.67993164 547.04949951 547.19439697 548.62030029 548.79223633
  549.81896973 551.82556152 552.5112915  552.74755859 552.92175293
  552.99804688 553.1184082  553.14624023 553.60876465 554.23553467
  554.73217773 555.97363281 557.58929443 557.8137207  558.19433594
  558.60827637 559.20184326 560.29876709 560.40283203 562.50939941
  563.2979126  564.74633789 565.8828125  566.79345703 567.1338501 ]
 [288.92617798 303.25177002 311.87545776 315.74237061 326.10980225
  353.10250854 356.06030273 358.80621338 366.42849731 370.61157227
  380.0295105  380.60748291 382.93206787 384.07525635 384.93734741
  400.94064331 401.01824951 402.27267456 403.62796021 406.55175781
  421.16351318 429.89056396 440.13882446 441.16619873 441.60870361
  442.05722046 454.10693359 460.55255127 469.7633667  473.57763672
  473.68051147 474.63342285 475.14819336 476.97567749 478.29534912
  479.29492188 479.66159058 481.45983887 481.78707886 484.78030396
  486.76098633 490.34408569 492.84521484 497.19308472 498.90603638
  500.00073242 500.00335693 501.71655273 503.57049561 504.86853027
  505.21322632 507.75817871 510.29553223 510.45077515 511.88250732
  512.95080566 515.58782959 515.61248779 520.71014404 523.22802734
  525.77587891 526.28057861 529.23309326 529.29870605 530.10314941
  532.92871094 535.03662109 536.86987305 536.87762451 539.42028809
  542.6965332  544.12139893 545.30065918 548.66210938 549.99346924
  550.04663086 550.39978027 550.56439209 551.60754395 551.8394165
  552.23718262 552.80474854 554.15490723 555.47021484 556.19830322
  557.09118652 558.09667969 559.0824585  560.04650879 560.57568359
  560.65209961 564.41088867 564.50537109 565.33123779 565.33825684
  570.31005859 570.85668945 572.26824951 573.35449219 573.82019043]], indices=[[145620 102331 210299 102411 455624 571264 491213 291791 491090 259690
  224051  48924 179765 184611 538364 343934  18737 185472 114770 472623
   78748 524108 424162 190676 492937 297147 356169 365642 297022 476119
  414510 204186  48555 205289 389532 140420 263299 581357  50145 172935
   20553 373315 404249 560880 471023 419408 232646 220764 148508 573094
  289343 442463 435206  29187 370208 465675 329614 438955 426166  13546
  563470 364102  37751 476258 206487 270244  74058 124442  33854 296649
  132587 101762 256192 423798 463647 473118  38829   9769  44195 346232
  407650 314251  97679 145665 404534 469192 297698 427160 258793 196442
  172617 157365 374545  91619 392722  50943  23126 282046 327617 558213]
 [190756   7816 549390 338219 214192 321557 270066 433204 291634 174482
  273551  70774 177934 441586 499622 181542 579902  44590 462756 245448
   55022 572956 136715 228436 226417  98287 194875 467511 343561 394199
  142324 578792 507037 141671 388258 226662   8211 523957 275392 488385
  395180 349860 184324 146667 192607 513580 345027 299887 144333 574297
  476215 576955  87244 186042 122745 439715 538067 507975 222094 338718
  577932 185950 510095 350405 326542  50326 455716 203389 400815 266400
  561958  23034 101884 447187 137950 512648 122166  72852 154425 450559
  290248 440336  49269 238039 253835  52591 457848 253819 490936 308545
  278749 338560 178618 295231 190923 128112 377113 580757 267537 576566]
 [145620 102331 210299 102411 455624 571264 491213 291791 491090 259690
  224051  48924 179765 184611 538364 343934  18737 185472 114770 472623
   78748 524108 424162 190676 492937 297147 356169 365642 297022 476119
  414510 204186  48555 205289 389532 140420 263299 581357  50145 172935
   20553 373315 404249 560880 471023 419408 232646 220764 148508 573094
  289343 442463 435206  29187 370208 465675 329614 438955 426166  13546
  563470 364102  37751 476258 206487 270244  74058 124442  33854 296649
  132587 101762 256192 423798 463647 473118  38829   9769  44195 346232
  407650 314251  97679 145665 404534 469192 297698 427160 258793 196442
  172617 157365 374545  91619 392722  50943  23126 282046 327617 558213]
 [190756   7816 549390 338219 214192 321557 270066 433204 291634 174482
  273551  70774 177934 441586 499622 181542 579902  44590 462756 245448
   55022 572956 136715 228436 226417  98287 194875 467511 343561 394199
  142324 578792 507037 141671 388258 226662   8211 523957 275392 488385
  395180 349860 184324 146667 192607 513580 345027 299887 144333 574297
  476215 576955  87244 186042 122745 439715 538067 507975 222094 338718
  577932 185950 510095 350405 326542  50326 455716 203389 400815 266400
  561958  23034 101884 447187 137950 512648 122166  72852 154425 450559
  290248 440336  49269 238039 253835  52591 457848 253819 490936 308545
  278749 338560 178618 295231 190923 128112 377113 580757 267537 576566]]
2025-03-23 19:43:43,264 - __main__ - DEBUG - Search results: distances shape=(4, 100), indices shape=(4, 100)
2025-03-23 19:43:43,264 - __main__ - DEBUG - Returning search results: 4 items
2025-03-23 19:43:43,264 - werkzeug - INFO - 127.0.0.1 - - [23/Mar/2025 19:43:43] "POST /search HTTP/1.1" 200 -
2025-03-23 19:43:43,267 - __main__ - DEBUG - Received search request with query_vector shape=(1, 512), k=100
2025-03-23 19:43:43,267 - __main__ - DEBUG - Calling coordinator.search
2025-03-23 19:43:43,267 - coordinator - DEBUG - Starting search with query_vector shape=(1, 512), k=100
2025-03-23 19:43:43,267 - root - DEBUG - Getting candidate shards for query vector with shape (1, 512)
2025-03-23 19:43:43,267 - root - DEBUG - Table 0 hash value shape: (1, 4)
2025-03-23 19:43:43,267 - root - DEBUG - Table 1 hash value shape: (1, 4)
2025-03-23 19:43:43,267 - root - DEBUG - Table 2 hash value shape: (1, 4)
2025-03-23 19:43:43,267 - root - DEBUG - Assigned vector to shard 1
2025-03-23 19:43:43,267 - root - DEBUG - Table 0 hash value shape: (1, 4)
2025-03-23 19:43:43,267 - root - DEBUG - Table 1 hash value shape: (1, 4)
2025-03-23 19:43:43,267 - root - DEBUG - Table 2 hash value shape: (1, 4)
2025-03-23 19:43:43,267 - root - DEBUG - Selected candidate shards: [1, 2]
2025-03-23 19:43:43,267 - coordinator - DEBUG - Candidate shards: [1, 2]
2025-03-23 19:43:43,267 - coordinator - DEBUG - Mapping shard_id 1 to node_idx 1 (out of 3 nodes)
2025-03-23 19:43:43,268 - coordinator - DEBUG - Submitting search to shard 1 at localhost:6002
2025-03-23 19:43:43,268 - coordinator - DEBUG - Sending search request to http://localhost:6002/search
2025-03-23 19:43:43,268 - coordinator - DEBUG - Mapping shard_id 2 to node_idx 2 (out of 3 nodes)
2025-03-23 19:43:43,268 - coordinator - DEBUG - Submitting search to shard 2 at localhost:6003
2025-03-23 19:43:43,268 - coordinator - DEBUG - Sending search request to http://localhost:6003/search
2025-03-23 19:43:43,269 - urllib3.connectionpool - DEBUG - Starting new HTTP connection (1): localhost:6002
2025-03-23 19:43:43,269 - urllib3.connectionpool - DEBUG - Starting new HTTP connection (1): localhost:6003
2025-03-23 19:43:43,272 - urllib3.connectionpool - DEBUG - http://localhost:6002 "POST /search HTTP/1.1" 200 2528
2025-03-23 19:43:43,273 - coordinator - DEBUG - Received response from http://localhost:6002/search: {'distances': [[8.292370796203613, 282.02337646484375, 304.1513977050781, 342.9234619140625, 347.66815185546875, 351.9064636230469, 352.5394287109375, 356.6254577636719, 358.4598388671875, 359.13525390625, 365.88653564453125, 368.7115173339844, 378.20330810546875, 382.0311584472656, 382.28839111328125, 383.3297424316406, 384.97686767578125, 387.92340087890625, 390.2117004394531, 390.2825927734375, 390.9720458984375, 392.13446044921875, 393.4568176269531, 393.51544189453125, 394.7735900878906, 397.19635009765625, 400.04443359375, 400.2133483886719, 401.7021179199219, 401.859375, 402.05963134765625, 403.357421875, 404.262451171875, 404.39044189453125, 406.861083984375, 407.1865539550781, 408.62384033203125, 410.2304382324219, 411.843017578125, 412.742919921875, 414.94964599609375, 415.6800537109375, 415.85113525390625, 416.4372253417969, 417.26727294921875, 417.4504699707031, 418.3973693847656, 419.6868896484375, 420.70770263671875, 423.27471923828125, 423.3169250488281, 424.5072021484375, 424.5848083496094, 425.1310119628906, 425.98492431640625, 426.417724609375, 426.5191650390625, 427.9580078125, 431.3218994140625, 431.3819580078125, 432.3134765625, 432.3821716308594, 432.71417236328125, 433.49310302734375, 433.623779296875, 433.6632080078125, 433.89093017578125, 434.7177734375, 435.0596618652344, 436.19677734375, 437.31085205078125, 437.6279602050781, 438.9207763671875, 439.0890808105469, 439.1343994140625, 439.6341552734375, 440.24371337890625, 440.84954833984375, 441.60784912109375, 441.7812194824219, 442.07470703125, 442.3394470214844, 442.87628173828125, 442.923095703125, 444.0108337402344, 444.25238037109375, 446.0292663574219, 446.1261901855469, 446.69476318359375, 447.42340087890625, 447.72064208984375, 447.73370361328125, 447.96392822265625, 449.4914855957031, 450.0252685546875, 450.6883544921875, 451.8959655761719, 452.22210693359375, 452.57403564453125, 452.6072692871094]], 'indices': [[58350, 383838, 18150, 513283, 11051, 389381, 294831, 356498, 334417, 245026, 66706, 226130, 279769, 413395, 117908, 18193, 378605, 331817, 108253, 164602, 402346, 202001, 527784, 357430, 40757, 321214, 483667, 255912, 19402, 557916, 248400, 572388, 397354, 256916, 554735, 237118, 236412, 350679, 91500, 475572, 369370, 289415, 304984, 449190, 337498, 420281, 341973, 292024, 67315, 206027, 25394, 63602, 512476, 457262, 309678, 438226, 179112, 356531, 559513, 7991, 86582, 400794, 357888, 568814, 78426, 579655, 260105, 331799, 27186, 574315, 292446, 226058, 111609, 143998, 399655, 262048, 434297, 533958, 513041, 186929, 500716, 17714, 327592, 463527, 9914, 4134, 192904, 79014, 157767, 488710, 478136, 32901, 520531, 113403, 244181, 479732, 579900, 105014, 460841, 231822]], 'status': 'success'}
2025-03-23 19:43:43,273 - urllib3.connectionpool - DEBUG - http://localhost:6003 "POST /search HTTP/1.1" 200 2542
2025-03-23 19:43:43,273 - coordinator - DEBUG - Valid results from http://localhost:6002/search: distances shape=(1, 100), indices shape=(1, 100)
2025-03-23 19:43:43,273 - coordinator - DEBUG - Received search results: distances shape=(1, 100), indices shape=(1, 100)
2025-03-23 19:43:43,273 - coordinator - DEBUG - Received response from http://localhost:6003/search: {'distances': [[309.370849609375, 322.09503173828125, 331.71026611328125, 335.06781005859375, 340.92828369140625, 345.37030029296875, 354.1963806152344, 357.0580139160156, 363.3660888671875, 364.5304260253906, 371.66094970703125, 374.250732421875, 376.6846618652344, 377.09002685546875, 379.5774230957031, 383.0712585449219, 383.1722106933594, 383.3017578125, 384.4615478515625, 388.7703857421875, 388.77960205078125, 390.629638671875, 394.5751647949219, 394.8923034667969, 394.929931640625, 396.709228515625, 398.892333984375, 400.8304748535156, 401.888427734375, 402.07293701171875, 403.88812255859375, 406.93426513671875, 407.65496826171875, 407.8341979980469, 408.0448913574219, 408.3983459472656, 409.27716064453125, 411.5125732421875, 413.77764892578125, 413.9791259765625, 415.15496826171875, 415.6949462890625, 417.6828308105469, 418.3048095703125, 418.50225830078125, 418.6821594238281, 419.4212951660156, 419.58392333984375, 421.9004211425781, 425.025390625, 425.0753479003906, 425.14923095703125, 425.20843505859375, 426.3664855957031, 427.20416259765625, 427.6583251953125, 429.5278015136719, 429.6528015136719, 429.78375244140625, 430.3828430175781, 431.1718444824219, 432.4752502441406, 432.5085144042969, 432.78436279296875, 434.32379150390625, 435.259521484375, 435.70416259765625, 435.8604736328125, 436.0145263671875, 436.2032470703125, 437.0014953613281, 437.403076171875, 437.7100830078125, 439.3236389160156, 439.50384521484375, 441.0049133300781, 441.30987548828125, 441.55426025390625, 441.83026123046875, 441.8567810058594, 442.0711975097656, 442.57733154296875, 442.95233154296875, 443.0249938964844, 444.0648498535156, 445.6746826171875, 446.57025146484375, 446.6356506347656, 447.11865234375, 447.2060546875, 447.44793701171875, 448.83447265625, 449.5645446777344, 449.88897705078125, 450.5616149902344, 451.8031311035156, 451.80682373046875, 452.3796691894531, 452.5138854980469, 452.6011962890625]], 'indices': [[45550, 473237, 312552, 70739, 148662, 474167, 394940, 201646, 489611, 173008, 170595, 43581, 93353, 113720, 183965, 300341, 296222, 209753, 36936, 73533, 423123, 223747, 388927, 389315, 3845, 166426, 342186, 413552, 120853, 276285, 170191, 455301, 284106, 468954, 520871, 66817, 170670, 571893, 89670, 430056, 306700, 417608, 50811, 547336, 429623, 434996, 497344, 229216, 498747, 424349, 418062, 46463, 449312, 530854, 541773, 105335, 218249, 6763, 47112, 567825, 393014, 530146, 195165, 144984, 137106, 365385, 497599, 8532, 391722, 170099, 443426, 290081, 21503, 476415, 355325, 271728, 562243, 293858, 123480, 350148, 237517, 285047, 347335, 217219, 224337, 441247, 256518, 512403, 128658, 546626, 262895, 359219, 375278, 191580, 518770, 243199, 89045, 323151, 179214, 88269]], 'status': 'success'}
2025-03-23 19:43:43,273 - coordinator - DEBUG - Valid results from http://localhost:6003/search: distances shape=(1, 100), indices shape=(1, 100)
2025-03-23 19:43:43,273 - coordinator - DEBUG - Received search results: distances shape=(1, 100), indices shape=(1, 100)
2025-03-23 19:43:43,274 - coordinator - DEBUG - All distances: [array([  8.2923708 , 282.02337646, 304.15139771, 342.92346191,
       347.66815186, 351.90646362, 352.53942871, 356.62545776,
       358.45983887, 359.13525391, 365.88653564, 368.71151733,
       378.20330811, 382.03115845, 382.28839111, 383.32974243,
       384.97686768, 387.92340088, 390.21170044, 390.28259277,
       390.9720459 , 392.13446045, 393.45681763, 393.51544189,
       394.77359009, 397.1963501 , 400.04443359, 400.21334839,
       401.70211792, 401.859375  , 402.05963135, 403.35742188,
       404.26245117, 404.39044189, 406.86108398, 407.18655396,
       408.62384033, 410.23043823, 411.84301758, 412.74291992,
       414.949646  , 415.68005371, 415.85113525, 416.43722534,
       417.26727295, 417.45046997, 418.39736938, 419.68688965,
       420.70770264, 423.27471924, 423.31692505, 424.50720215,
       424.58480835, 425.13101196, 425.98492432, 426.41772461,
       426.51916504, 427.95800781, 431.32189941, 431.38195801,
       432.31347656, 432.38217163, 432.71417236, 433.49310303,
       433.6237793 , 433.66320801, 433.89093018, 434.71777344,
       435.05966187, 436.19677734, 437.31085205, 437.62796021,
       438.92077637, 439.08908081, 439.13439941, 439.63415527,
       440.24371338, 440.84954834, 441.60784912, 441.78121948,
       442.07470703, 442.33944702, 442.87628174, 442.9230957 ,
       444.01083374, 444.25238037, 446.02926636, 446.12619019,
       446.69476318, 447.42340088, 447.72064209, 447.73370361,
       447.96392822, 449.4914856 , 450.02526855, 450.68835449,
       451.89596558, 452.22210693, 452.57403564, 452.60726929]), array([309.37084961, 322.09503174, 331.71026611, 335.06781006,
       340.92828369, 345.37030029, 354.19638062, 357.05801392,
       363.36608887, 364.53042603, 371.66094971, 374.25073242,
       376.68466187, 377.09002686, 379.5774231 , 383.07125854,
       383.17221069, 383.30175781, 384.46154785, 388.77038574,
       388.77960205, 390.62963867, 394.57516479, 394.89230347,
       394.92993164, 396.70922852, 398.89233398, 400.83047485,
       401.88842773, 402.07293701, 403.88812256, 406.93426514,
       407.65496826, 407.834198  , 408.04489136, 408.39834595,
       409.27716064, 411.51257324, 413.77764893, 413.97912598,
       415.15496826, 415.69494629, 417.68283081, 418.30480957,
       418.5022583 , 418.68215942, 419.42129517, 419.58392334,
       421.90042114, 425.02539062, 425.0753479 , 425.14923096,
       425.20843506, 426.3664856 , 427.2041626 , 427.6583252 ,
       429.52780151, 429.65280151, 429.78375244, 430.38284302,
       431.17184448, 432.47525024, 432.5085144 , 432.78436279,
       434.3237915 , 435.25952148, 435.7041626 , 435.86047363,
       436.01452637, 436.20324707, 437.00149536, 437.40307617,
       437.71008301, 439.32363892, 439.50384521, 441.00491333,
       441.30987549, 441.55426025, 441.83026123, 441.85678101,
       442.07119751, 442.57733154, 442.95233154, 443.0249939 ,
       444.06484985, 445.67468262, 446.57025146, 446.63565063,
       447.11865234, 447.20605469, 447.44793701, 448.83447266,
       449.56454468, 449.88897705, 450.56161499, 451.8031311 ,
       451.80682373, 452.37966919, 452.5138855 , 452.60119629])]
2025-03-23 19:43:43,274 - coordinator - DEBUG - All indices: [array([ 58350, 383838,  18150, 513283,  11051, 389381, 294831, 356498,
       334417, 245026,  66706, 226130, 279769, 413395, 117908,  18193,
       378605, 331817, 108253, 164602, 402346, 202001, 527784, 357430,
        40757, 321214, 483667, 255912,  19402, 557916, 248400, 572388,
       397354, 256916, 554735, 237118, 236412, 350679,  91500, 475572,
       369370, 289415, 304984, 449190, 337498, 420281, 341973, 292024,
        67315, 206027,  25394,  63602, 512476, 457262, 309678, 438226,
       179112, 356531, 559513,   7991,  86582, 400794, 357888, 568814,
        78426, 579655, 260105, 331799,  27186, 574315, 292446, 226058,
       111609, 143998, 399655, 262048, 434297, 533958, 513041, 186929,
       500716,  17714, 327592, 463527,   9914,   4134, 192904,  79014,
       157767, 488710, 478136,  32901, 520531, 113403, 244181, 479732,
       579900, 105014, 460841, 231822]), array([ 45550, 473237, 312552,  70739, 148662, 474167, 394940, 201646,
       489611, 173008, 170595,  43581,  93353, 113720, 183965, 300341,
       296222, 209753,  36936,  73533, 423123, 223747, 388927, 389315,
         3845, 166426, 342186, 413552, 120853, 276285, 170191, 455301,
       284106, 468954, 520871,  66817, 170670, 571893,  89670, 430056,
       306700, 417608,  50811, 547336, 429623, 434996, 497344, 229216,
       498747, 424349, 418062,  46463, 449312, 530854, 541773, 105335,
       218249,   6763,  47112, 567825, 393014, 530146, 195165, 144984,
       137106, 365385, 497599,   8532, 391722, 170099, 443426, 290081,
        21503, 476415, 355325, 271728, 562243, 293858, 123480, 350148,
       237517, 285047, 347335, 217219, 224337, 441247, 256518, 512403,
       128658, 546626, 262895, 359219, 375278, 191580, 518770, 243199,
        89045, 323151, 179214,  88269])]
2025-03-23 19:43:43,274 - coordinator - DEBUG - all_distances shape: (2, 100), all_indices shape: (2, 100)
2025-03-23 19:43:43,274 - coordinator - DEBUG - Using k=2 for sorting
2025-03-23 19:43:43,275 - coordinator - DEBUG - sorted_idx: [[ 0  1  2  3  4  5  6  7  8  9 10 11 12 13 14 15 16 17 18 19 20 21 22 23
  24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47
  48 49 50 51 52 53 54 55 56 57 58 59 60 61 62 63 64 65 66 67 68 69 70 71
  72 73 74 75 76 77 78 79 80 81 82 83 84 85 86 87 88 89 90 91 92 93 94 95
  96 97 98 99]
 [ 0  1  2  3  4  5  6  7  8  9 10 11 12 13 14 15 16 17 18 19 20 21 22 23
  24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47
  48 49 50 51 52 53 54 55 56 57 58 59 60 61 62 63 64 65 66 67 68 69 70 71
  72 73 74 75 76 77 78 79 80 81 82 83 84 85 86 87 88 89 90 91 92 93 94 95
  96 97 98 99]]
2025-03-23 19:43:43,275 - coordinator - ERROR - Index out of bounds: max sorted_idx=99, len(all_distances)=2
2025-03-23 19:43:43,277 - coordinator - DEBUG - Returning results: distances=[[  8.2923708  282.02337646 304.15139771 342.92346191 347.66815186
  351.90646362 352.53942871 356.62545776 358.45983887 359.13525391
  365.88653564 368.71151733 378.20330811 382.03115845 382.28839111
  383.32974243 384.97686768 387.92340088 390.21170044 390.28259277
  390.9720459  392.13446045 393.45681763 393.51544189 394.77359009
  397.1963501  400.04443359 400.21334839 401.70211792 401.859375
  402.05963135 403.35742188 404.26245117 404.39044189 406.86108398
  407.18655396 408.62384033 410.23043823 411.84301758 412.74291992
  414.949646   415.68005371 415.85113525 416.43722534 417.26727295
  417.45046997 418.39736938 419.68688965 420.70770264 423.27471924
  423.31692505 424.50720215 424.58480835 425.13101196 425.98492432
  426.41772461 426.51916504 427.95800781 431.32189941 431.38195801
  432.31347656 432.38217163 432.71417236 433.49310303 433.6237793
  433.66320801 433.89093018 434.71777344 435.05966187 436.19677734
  437.31085205 437.62796021 438.92077637 439.08908081 439.13439941
  439.63415527 440.24371338 440.84954834 441.60784912 441.78121948
  442.07470703 442.33944702 442.87628174 442.9230957  444.01083374
  444.25238037 446.02926636 446.12619019 446.69476318 447.42340088
  447.72064209 447.73370361 447.96392822 449.4914856  450.02526855
  450.68835449 451.89596558 452.22210693 452.57403564 452.60726929]
 [309.37084961 322.09503174 331.71026611 335.06781006 340.92828369
  345.37030029 354.19638062 357.05801392 363.36608887 364.53042603
  371.66094971 374.25073242 376.68466187 377.09002686 379.5774231
  383.07125854 383.17221069 383.30175781 384.46154785 388.77038574
  388.77960205 390.62963867 394.57516479 394.89230347 394.92993164
  396.70922852 398.89233398 400.83047485 401.88842773 402.07293701
  403.88812256 406.93426514 407.65496826 407.834198   408.04489136
  408.39834595 409.27716064 411.51257324 413.77764893 413.97912598
  415.15496826 415.69494629 417.68283081 418.30480957 418.5022583
  418.68215942 419.42129517 419.58392334 421.90042114 425.02539062
  425.0753479  425.14923096 425.20843506 426.3664856  427.2041626
  427.6583252  429.52780151 429.65280151 429.78375244 430.38284302
  431.17184448 432.47525024 432.5085144  432.78436279 434.3237915
  435.25952148 435.7041626  435.86047363 436.01452637 436.20324707
  437.00149536 437.40307617 437.71008301 439.32363892 439.50384521
  441.00491333 441.30987549 441.55426025 441.83026123 441.85678101
  442.07119751 442.57733154 442.95233154 443.0249939  444.06484985
  445.67468262 446.57025146 446.63565063 447.11865234 447.20605469
  447.44793701 448.83447266 449.56454468 449.88897705 450.56161499
  451.8031311  451.80682373 452.37966919 452.5138855  452.60119629]
 [  8.2923708  282.02337646 304.15139771 342.92346191 347.66815186
  351.90646362 352.53942871 356.62545776 358.45983887 359.13525391
  365.88653564 368.71151733 378.20330811 382.03115845 382.28839111
  383.32974243 384.97686768 387.92340088 390.21170044 390.28259277
  390.9720459  392.13446045 393.45681763 393.51544189 394.77359009
  397.1963501  400.04443359 400.21334839 401.70211792 401.859375
  402.05963135 403.35742188 404.26245117 404.39044189 406.86108398
  407.18655396 408.62384033 410.23043823 411.84301758 412.74291992
  414.949646   415.68005371 415.85113525 416.43722534 417.26727295
  417.45046997 418.39736938 419.68688965 420.70770264 423.27471924
  423.31692505 424.50720215 424.58480835 425.13101196 425.98492432
  426.41772461 426.51916504 427.95800781 431.32189941 431.38195801
  432.31347656 432.38217163 432.71417236 433.49310303 433.6237793
  433.66320801 433.89093018 434.71777344 435.05966187 436.19677734
  437.31085205 437.62796021 438.92077637 439.08908081 439.13439941
  439.63415527 440.24371338 440.84954834 441.60784912 441.78121948
  442.07470703 442.33944702 442.87628174 442.9230957  444.01083374
  444.25238037 446.02926636 446.12619019 446.69476318 447.42340088
  447.72064209 447.73370361 447.96392822 449.4914856  450.02526855
  450.68835449 451.89596558 452.22210693 452.57403564 452.60726929]
 [309.37084961 322.09503174 331.71026611 335.06781006 340.92828369
  345.37030029 354.19638062 357.05801392 363.36608887 364.53042603
  371.66094971 374.25073242 376.68466187 377.09002686 379.5774231
  383.07125854 383.17221069 383.30175781 384.46154785 388.77038574
  388.77960205 390.62963867 394.57516479 394.89230347 394.92993164
  396.70922852 398.89233398 400.83047485 401.88842773 402.07293701
  403.88812256 406.93426514 407.65496826 407.834198   408.04489136
  408.39834595 409.27716064 411.51257324 413.77764893 413.97912598
  415.15496826 415.69494629 417.68283081 418.30480957 418.5022583
  418.68215942 419.42129517 419.58392334 421.90042114 425.02539062
  425.0753479  425.14923096 425.20843506 426.3664856  427.2041626
  427.6583252  429.52780151 429.65280151 429.78375244 430.38284302
  431.17184448 432.47525024 432.5085144  432.78436279 434.3237915
  435.25952148 435.7041626  435.86047363 436.01452637 436.20324707
  437.00149536 437.40307617 437.71008301 439.32363892 439.50384521
  441.00491333 441.30987549 441.55426025 441.83026123 441.85678101
  442.07119751 442.57733154 442.95233154 443.0249939  444.06484985
  445.67468262 446.57025146 446.63565063 447.11865234 447.20605469
  447.44793701 448.83447266 449.56454468 449.88897705 450.56161499
  451.8031311  451.80682373 452.37966919 452.5138855  452.60119629]], indices=[[ 58350 383838  18150 513283  11051 389381 294831 356498 334417 245026
   66706 226130 279769 413395 117908  18193 378605 331817 108253 164602
  402346 202001 527784 357430  40757 321214 483667 255912  19402 557916
  248400 572388 397354 256916 554735 237118 236412 350679  91500 475572
  369370 289415 304984 449190 337498 420281 341973 292024  67315 206027
   25394  63602 512476 457262 309678 438226 179112 356531 559513   7991
   86582 400794 357888 568814  78426 579655 260105 331799  27186 574315
  292446 226058 111609 143998 399655 262048 434297 533958 513041 186929
  500716  17714 327592 463527   9914   4134 192904  79014 157767 488710
  478136  32901 520531 113403 244181 479732 579900 105014 460841 231822]
 [ 45550 473237 312552  70739 148662 474167 394940 201646 489611 173008
  170595  43581  93353 113720 183965 300341 296222 209753  36936  73533
  423123 223747 388927 389315   3845 166426 342186 413552 120853 276285
  170191 455301 284106 468954 520871  66817 170670 571893  89670 430056
  306700 417608  50811 547336 429623 434996 497344 229216 498747 424349
  418062  46463 449312 530854 541773 105335 218249   6763  47112 567825
  393014 530146 195165 144984 137106 365385 497599   8532 391722 170099
  443426 290081  21503 476415 355325 271728 562243 293858 123480 350148
  237517 285047 347335 217219 224337 441247 256518 512403 128658 546626
  262895 359219 375278 191580 518770 243199  89045 323151 179214  88269]
 [ 58350 383838  18150 513283  11051 389381 294831 356498 334417 245026
   66706 226130 279769 413395 117908  18193 378605 331817 108253 164602
  402346 202001 527784 357430  40757 321214 483667 255912  19402 557916
  248400 572388 397354 256916 554735 237118 236412 350679  91500 475572
  369370 289415 304984 449190 337498 420281 341973 292024  67315 206027
   25394  63602 512476 457262 309678 438226 179112 356531 559513   7991
   86582 400794 357888 568814  78426 579655 260105 331799  27186 574315
  292446 226058 111609 143998 399655 262048 434297 533958 513041 186929
  500716  17714 327592 463527   9914   4134 192904  79014 157767 488710
  478136  32901 520531 113403 244181 479732 579900 105014 460841 231822]
 [ 45550 473237 312552  70739 148662 474167 394940 201646 489611 173008
  170595  43581  93353 113720 183965 300341 296222 209753  36936  73533
  423123 223747 388927 389315   3845 166426 342186 413552 120853 276285
  170191 455301 284106 468954 520871  66817 170670 571893  89670 430056
  306700 417608  50811 547336 429623 434996 497344 229216 498747 424349
  418062  46463 449312 530854 541773 105335 218249   6763  47112 567825
  393014 530146 195165 144984 137106 365385 497599   8532 391722 170099
  443426 290081  21503 476415 355325 271728 562243 293858 123480 350148
  237517 285047 347335 217219 224337 441247 256518 512403 128658 546626
  262895 359219 375278 191580 518770 243199  89045 323151 179214  88269]]
2025-03-23 19:43:43,277 - __main__ - DEBUG - Search results: distances shape=(4, 100), indices shape=(4, 100)
2025-03-23 19:43:43,277 - __main__ - DEBUG - Returning search results: 4 items
2025-03-23 19:43:43,278 - werkzeug - INFO - 127.0.0.1 - - [23/Mar/2025 19:43:43] "POST /search HTTP/1.1" 200 -
2025-03-23 19:43:43,284 - __main__ - DEBUG - Received search request with query_vector shape=(1, 512), k=100
2025-03-23 19:43:43,284 - __main__ - DEBUG - Calling coordinator.search
2025-03-23 19:43:43,284 - coordinator - DEBUG - Starting search with query_vector shape=(1, 512), k=100
2025-03-23 19:43:43,284 - root - DEBUG - Getting candidate shards for query vector with shape (1, 512)
2025-03-23 19:43:43,285 - root - DEBUG - Table 0 hash value shape: (1, 4)
2025-03-23 19:43:43,285 - root - DEBUG - Table 1 hash value shape: (1, 4)
2025-03-23 19:43:43,285 - root - DEBUG - Table 2 hash value shape: (1, 4)
2025-03-23 19:43:43,285 - root - DEBUG - Assigned vector to shard 1
2025-03-23 19:43:43,285 - root - DEBUG - Table 0 hash value shape: (1, 4)
2025-03-23 19:43:43,285 - root - DEBUG - Table 1 hash value shape: (1, 4)
2025-03-23 19:43:43,285 - root - DEBUG - Table 2 hash value shape: (1, 4)
2025-03-23 19:43:43,285 - root - DEBUG - Selected candidate shards: [0, 1]
2025-03-23 19:43:43,285 - coordinator - DEBUG - Candidate shards: [0, 1]
2025-03-23 19:43:43,285 - coordinator - DEBUG - Mapping shard_id 0 to node_idx 0 (out of 3 nodes)
2025-03-23 19:43:43,285 - coordinator - DEBUG - Submitting search to shard 0 at localhost:6001
2025-03-23 19:43:43,285 - coordinator - DEBUG - Sending search request to http://localhost:6001/search
2025-03-23 19:43:43,286 - coordinator - DEBUG - Mapping shard_id 1 to node_idx 1 (out of 3 nodes)
2025-03-23 19:43:43,286 - coordinator - DEBUG - Submitting search to shard 1 at localhost:6002
2025-03-23 19:43:43,287 - coordinator - DEBUG - Sending search request to http://localhost:6002/search
2025-03-23 19:43:43,288 - urllib3.connectionpool - DEBUG - Starting new HTTP connection (1): localhost:6002
2025-03-23 19:43:43,289 - urllib3.connectionpool - DEBUG - Starting new HTTP connection (1): localhost:6001
2025-03-23 19:43:43,294 - urllib3.connectionpool - DEBUG - http://localhost:6001 "POST /search HTTP/1.1" 200 2481
2025-03-23 19:43:43,295 - coordinator - DEBUG - Received response from http://localhost:6001/search: {'distances': [[552.5786743164062, 553.4232177734375, 571.69140625, 572.9830322265625, 585.572998046875, 593.6044921875, 594.8322143554688, 596.0274658203125, 598.8050537109375, 612.6243896484375, 622.05322265625, 622.6206665039062, 624.906494140625, 634.0850219726562, 638.0795288085938, 642.4202880859375, 645.1840209960938, 651.7906494140625, 656.2398071289062, 657.0089111328125, 658.0010986328125, 660.9420166015625, 663.699462890625, 664.6149291992188, 665.3942260742188, 667.435546875, 669.2582397460938, 680.858642578125, 681.4298095703125, 685.7575073242188, 688.296630859375, 691.1370239257812, 691.6370849609375, 691.8592529296875, 696.7086181640625, 698.8778686523438, 702.8540649414062, 703.8599853515625, 706.0446166992188, 708.1591186523438, 711.1136474609375, 711.777587890625, 712.885009765625, 718.1565551757812, 722.6549072265625, 723.639892578125, 725.8280029296875, 729.0947875976562, 731.4262084960938, 732.0154418945312, 732.29296875, 733.9329833984375, 736.3909301757812, 738.8810424804688, 739.9561767578125, 741.12158203125, 741.9615478515625, 742.6798095703125, 743.4613037109375, 743.4845581054688, 745.097900390625, 745.6666259765625, 747.0731201171875, 748.5128173828125, 748.5580444335938, 748.9129028320312, 750.9642333984375, 752.5288696289062, 753.9630126953125, 755.4729614257812, 756.3988647460938, 756.628173828125, 757.797119140625, 758.529296875, 758.5899658203125, 759.6956787109375, 760.47021484375, 762.4522094726562, 762.9842529296875, 764.8521728515625, 765.1490478515625, 766.162109375, 766.8909301757812, 768.1134033203125, 768.6734008789062, 769.1675415039062, 769.2476806640625, 769.8717041015625, 770.3364868164062, 771.50439453125, 771.997802734375, 772.12158203125, 772.1292724609375, 774.4617919921875, 775.0138549804688, 775.8388671875, 776.6248779296875, 777.2675170898438, 778.3013305664062, 779.44384765625]], 'indices': [[269196, 20247, 523033, 471756, 404805, 2261, 209829, 191672, 482735, 119088, 377575, 12062, 330396, 572517, 547519, 205776, 148739, 236914, 516318, 50638, 43435, 402992, 437331, 460927, 270122, 465180, 220584, 248334, 308476, 331075, 417465, 82715, 577959, 561223, 441286, 272148, 108503, 232692, 29984, 248810, 364322, 396863, 220858, 14831, 556765, 314294, 45090, 341196, 230166, 32887, 576052, 155571, 525155, 72813, 579307, 185292, 519688, 534673, 364636, 451090, 125405, 207585, 22589, 355677, 335450, 272364, 278353, 528705, 427649, 125072, 460160, 173033, 224222, 206831, 338304, 7108, 234757, 326174, 11760, 459437, 296224, 445675, 499768, 233567, 87875, 313783, 321887, 547383, 493864, 367195, 322844, 530624, 573391, 452891, 252216, 82180, 366611, 291664, 224664, 255664]], 'status': 'success'}
2025-03-23 19:43:43,295 - coordinator - DEBUG - Valid results from http://localhost:6001/search: distances shape=(1, 100), indices shape=(1, 100)
2025-03-23 19:43:43,295 - coordinator - DEBUG - Received search results: distances shape=(1, 100), indices shape=(1, 100)
2025-03-23 19:43:43,295 - urllib3.connectionpool - DEBUG - http://localhost:6002 "POST /search HTTP/1.1" 200 2480
2025-03-23 19:43:43,295 - coordinator - DEBUG - Received response from http://localhost:6002/search: {'distances': [[16.840970993041992, 413.3643798828125, 483.1694641113281, 493.7472229003906, 506.23394775390625, 519.689208984375, 542.630859375, 566.206787109375, 574.3439331054688, 606.5430297851562, 608.8685302734375, 617.4274291992188, 627.3995361328125, 631.4707641601562, 632.234619140625, 632.32958984375, 638.689208984375, 643.2981567382812, 644.4735107421875, 647.5115966796875, 648.7286376953125, 652.1658325195312, 652.59326171875, 657.4586181640625, 663.2174682617188, 667.1727294921875, 671.0540771484375, 671.4797973632812, 671.7745361328125, 673.2149658203125, 675.851806640625, 676.171142578125, 677.8912353515625, 678.9453125, 682.1682739257812, 682.9429931640625, 683.40478515625, 685.1649169921875, 690.7417602539062, 691.1364135742188, 692.2954711914062, 692.8870239257812, 694.8446044921875, 697.1434326171875, 698.39990234375, 700.004150390625, 701.2769775390625, 703.0847778320312, 704.0072021484375, 705.8710327148438, 706.0031127929688, 706.743408203125, 707.6458129882812, 708.4739990234375, 709.1544189453125, 711.5970458984375, 711.9269409179688, 713.1964111328125, 713.68017578125, 717.2359619140625, 717.656494140625, 720.72705078125, 722.7928466796875, 725.435302734375, 727.47216796875, 727.7222290039062, 728.0714111328125, 729.96337890625, 731.820068359375, 733.5516357421875, 733.6505737304688, 735.240234375, 735.6014404296875, 737.1553344726562, 739.4608154296875, 740.58984375, 741.3595581054688, 743.284912109375, 743.363037109375, 743.6954956054688, 745.2769775390625, 745.295166015625, 745.3449096679688, 745.5037231445312, 747.4668579101562, 753.0077514648438, 753.4429931640625, 753.5794677734375, 753.762939453125, 755.634765625, 756.0787963867188, 756.237060546875, 756.4426879882812, 757.7325439453125, 761.3759155273438, 764.008544921875, 764.4285278320312, 764.5009155273438, 765.6009521484375, 769.504638671875]], 'indices': [[194506, 203546, 418959, 490171, 560266, 186422, 127955, 475904, 307658, 132622, 235057, 160772, 190140, 361180, 217948, 395903, 63154, 360325, 378116, 19042, 85911, 214753, 262587, 23230, 278973, 458223, 513484, 549055, 485071, 498286, 515025, 372819, 246883, 5992, 361571, 288685, 372349, 142971, 380711, 32570, 532493, 214703, 292908, 14888, 182805, 252701, 49269, 81988, 410612, 205834, 187362, 21879, 52507, 250205, 486046, 332351, 580418, 122672, 221017, 251572, 238039, 512648, 534270, 528524, 353518, 49810, 182441, 212559, 548524, 570448, 274066, 190307, 138492, 44068, 396580, 573626, 335081, 166642, 151662, 324158, 568981, 461405, 567011, 226058, 311518, 175443, 521231, 121673, 57672, 171611, 270402, 492284, 263966, 474039, 515350, 319369, 456015, 82807, 498807, 449603]], 'status': 'success'}
2025-03-23 19:43:43,295 - coordinator - DEBUG - Valid results from http://localhost:6002/search: distances shape=(1, 100), indices shape=(1, 100)
2025-03-23 19:43:43,295 - coordinator - DEBUG - Received search results: distances shape=(1, 100), indices shape=(1, 100)
2025-03-23 19:43:43,296 - coordinator - DEBUG - All distances: [array([552.57867432, 553.42321777, 571.69140625, 572.98303223,
       585.57299805, 593.60449219, 594.83221436, 596.02746582,
       598.80505371, 612.62438965, 622.05322266, 622.6206665 ,
       624.90649414, 634.08502197, 638.07952881, 642.42028809,
       645.184021  , 651.79064941, 656.23980713, 657.00891113,
       658.00109863, 660.9420166 , 663.69946289, 664.6149292 ,
       665.39422607, 667.43554688, 669.25823975, 680.85864258,
       681.42980957, 685.75750732, 688.29663086, 691.13702393,
       691.63708496, 691.85925293, 696.70861816, 698.87786865,
       702.85406494, 703.85998535, 706.0446167 , 708.15911865,
       711.11364746, 711.77758789, 712.88500977, 718.15655518,
       722.65490723, 723.63989258, 725.82800293, 729.0947876 ,
       731.4262085 , 732.01544189, 732.29296875, 733.9329834 ,
       736.39093018, 738.88104248, 739.95617676, 741.12158203,
       741.96154785, 742.67980957, 743.46130371, 743.48455811,
       745.09790039, 745.66662598, 747.07312012, 748.51281738,
       748.55804443, 748.91290283, 750.9642334 , 752.52886963,
       753.9630127 , 755.47296143, 756.39886475, 756.62817383,
       757.79711914, 758.52929688, 758.58996582, 759.69567871,
       760.47021484, 762.45220947, 762.98425293, 764.85217285,
       765.14904785, 766.16210938, 766.89093018, 768.11340332,
       768.67340088, 769.1675415 , 769.24768066, 769.8717041 ,
       770.33648682, 771.50439453, 771.99780273, 772.12158203,
       772.12927246, 774.46179199, 775.01385498, 775.83886719,
       776.62487793, 777.26751709, 778.30133057, 779.44384766]), array([ 16.84097099, 413.36437988, 483.16946411, 493.7472229 ,
       506.23394775, 519.68920898, 542.63085938, 566.20678711,
       574.34393311, 606.54302979, 608.86853027, 617.4274292 ,
       627.39953613, 631.47076416, 632.23461914, 632.32958984,
       638.68920898, 643.29815674, 644.47351074, 647.51159668,
       648.7286377 , 652.16583252, 652.59326172, 657.45861816,
       663.21746826, 667.17272949, 671.05407715, 671.47979736,
       671.77453613, 673.21496582, 675.85180664, 676.17114258,
       677.89123535, 678.9453125 , 682.16827393, 682.94299316,
       683.40478516, 685.16491699, 690.74176025, 691.13641357,
       692.29547119, 692.88702393, 694.84460449, 697.14343262,
       698.39990234, 700.00415039, 701.27697754, 703.08477783,
       704.00720215, 705.87103271, 706.00311279, 706.7434082 ,
       707.64581299, 708.47399902, 709.15441895, 711.5970459 ,
       711.92694092, 713.19641113, 713.68017578, 717.23596191,
       717.65649414, 720.72705078, 722.79284668, 725.43530273,
       727.47216797, 727.722229  , 728.07141113, 729.96337891,
       731.82006836, 733.55163574, 733.65057373, 735.24023438,
       735.60144043, 737.15533447, 739.46081543, 740.58984375,
       741.35955811, 743.28491211, 743.36303711, 743.69549561,
       745.27697754, 745.29516602, 745.34490967, 745.50372314,
       747.46685791, 753.00775146, 753.44299316, 753.57946777,
       753.76293945, 755.63476562, 756.07879639, 756.23706055,
       756.44268799, 757.73254395, 761.37591553, 764.00854492,
       764.42852783, 764.50091553, 765.60095215, 769.50463867])]
2025-03-23 19:43:43,296 - coordinator - DEBUG - All indices: [array([269196,  20247, 523033, 471756, 404805,   2261, 209829, 191672,
       482735, 119088, 377575,  12062, 330396, 572517, 547519, 205776,
       148739, 236914, 516318,  50638,  43435, 402992, 437331, 460927,
       270122, 465180, 220584, 248334, 308476, 331075, 417465,  82715,
       577959, 561223, 441286, 272148, 108503, 232692,  29984, 248810,
       364322, 396863, 220858,  14831, 556765, 314294,  45090, 341196,
       230166,  32887, 576052, 155571, 525155,  72813, 579307, 185292,
       519688, 534673, 364636, 451090, 125405, 207585,  22589, 355677,
       335450, 272364, 278353, 528705, 427649, 125072, 460160, 173033,
       224222, 206831, 338304,   7108, 234757, 326174,  11760, 459437,
       296224, 445675, 499768, 233567,  87875, 313783, 321887, 547383,
       493864, 367195, 322844, 530624, 573391, 452891, 252216,  82180,
       366611, 291664, 224664, 255664]), array([194506, 203546, 418959, 490171, 560266, 186422, 127955, 475904,
       307658, 132622, 235057, 160772, 190140, 361180, 217948, 395903,
        63154, 360325, 378116,  19042,  85911, 214753, 262587,  23230,
       278973, 458223, 513484, 549055, 485071, 498286, 515025, 372819,
       246883,   5992, 361571, 288685, 372349, 142971, 380711,  32570,
       532493, 214703, 292908,  14888, 182805, 252701,  49269,  81988,
       410612, 205834, 187362,  21879,  52507, 250205, 486046, 332351,
       580418, 122672, 221017, 251572, 238039, 512648, 534270, 528524,
       353518,  49810, 182441, 212559, 548524, 570448, 274066, 190307,
       138492,  44068, 396580, 573626, 335081, 166642, 151662, 324158,
       568981, 461405, 567011, 226058, 311518, 175443, 521231, 121673,
        57672, 171611, 270402, 492284, 263966, 474039, 515350, 319369,
       456015,  82807, 498807, 449603])]
2025-03-23 19:43:43,296 - coordinator - DEBUG - all_distances shape: (2, 100), all_indices shape: (2, 100)
2025-03-23 19:43:43,297 - coordinator - DEBUG - Using k=2 for sorting
2025-03-23 19:43:43,297 - coordinator - DEBUG - sorted_idx: [[ 0  1  2  3  4  5  6  7  8  9 10 11 12 13 14 15 16 17 18 19 20 21 22 23
  24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47
  48 49 50 51 52 53 54 55 56 57 58 59 60 61 62 63 64 65 66 67 68 69 70 71
  72 73 74 75 76 77 78 79 80 81 82 83 84 85 86 87 88 89 90 91 92 93 94 95
  96 97 98 99]
 [ 0  1  2  3  4  5  6  7  8  9 10 11 12 13 14 15 16 17 18 19 20 21 22 23
  24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47
  48 49 50 51 52 53 54 55 56 57 58 59 60 61 62 63 64 65 66 67 68 69 70 71
  72 73 74 75 76 77 78 79 80 81 82 83 84 85 86 87 88 89 90 91 92 93 94 95
  96 97 98 99]]
2025-03-23 19:43:43,297 - coordinator - ERROR - Index out of bounds: max sorted_idx=99, len(all_distances)=2
2025-03-23 19:43:43,298 - coordinator - DEBUG - Returning results: distances=[[552.57867432 553.42321777 571.69140625 572.98303223 585.57299805
  593.60449219 594.83221436 596.02746582 598.80505371 612.62438965
  622.05322266 622.6206665  624.90649414 634.08502197 638.07952881
  642.42028809 645.184021   651.79064941 656.23980713 657.00891113
  658.00109863 660.9420166  663.69946289 664.6149292  665.39422607
  667.43554688 669.25823975 680.85864258 681.42980957 685.75750732
  688.29663086 691.13702393 691.63708496 691.85925293 696.70861816
  698.87786865 702.85406494 703.85998535 706.0446167  708.15911865
  711.11364746 711.77758789 712.88500977 718.15655518 722.65490723
  723.63989258 725.82800293 729.0947876  731.4262085  732.01544189
  732.29296875 733.9329834  736.39093018 738.88104248 739.95617676
  741.12158203 741.96154785 742.67980957 743.46130371 743.48455811
  745.09790039 745.66662598 747.07312012 748.51281738 748.55804443
  748.91290283 750.9642334  752.52886963 753.9630127  755.47296143
  756.39886475 756.62817383 757.79711914 758.52929688 758.58996582
  759.69567871 760.47021484 762.45220947 762.98425293 764.85217285
  765.14904785 766.16210938 766.89093018 768.11340332 768.67340088
  769.1675415  769.24768066 769.8717041  770.33648682 771.50439453
  771.99780273 772.12158203 772.12927246 774.46179199 775.01385498
  775.83886719 776.62487793 777.26751709 778.30133057 779.44384766]
 [ 16.84097099 413.36437988 483.16946411 493.7472229  506.23394775
  519.68920898 542.63085938 566.20678711 574.34393311 606.54302979
  608.86853027 617.4274292  627.39953613 631.47076416 632.23461914
  632.32958984 638.68920898 643.29815674 644.47351074 647.51159668
  648.7286377  652.16583252 652.59326172 657.45861816 663.21746826
  667.17272949 671.05407715 671.47979736 671.77453613 673.21496582
  675.85180664 676.17114258 677.89123535 678.9453125  682.16827393
  682.94299316 683.40478516 685.16491699 690.74176025 691.13641357
  692.29547119 692.88702393 694.84460449 697.14343262 698.39990234
  700.00415039 701.27697754 703.08477783 704.00720215 705.87103271
  706.00311279 706.7434082  707.64581299 708.47399902 709.15441895
  711.5970459  711.92694092 713.19641113 713.68017578 717.23596191
  717.65649414 720.72705078 722.79284668 725.43530273 727.47216797
  727.722229   728.07141113 729.96337891 731.82006836 733.55163574
  733.65057373 735.24023438 735.60144043 737.15533447 739.46081543
  740.58984375 741.35955811 743.28491211 743.36303711 743.69549561
  745.27697754 745.29516602 745.34490967 745.50372314 747.46685791
  753.00775146 753.44299316 753.57946777 753.76293945 755.63476562
  756.07879639 756.23706055 756.44268799 757.73254395 761.37591553
  764.00854492 764.42852783 764.50091553 765.60095215 769.50463867]
 [552.57867432 553.42321777 571.69140625 572.98303223 585.57299805
  593.60449219 594.83221436 596.02746582 598.80505371 612.62438965
  622.05322266 622.6206665  624.90649414 634.08502197 638.07952881
  642.42028809 645.184021   651.79064941 656.23980713 657.00891113
  658.00109863 660.9420166  663.69946289 664.6149292  665.39422607
  667.43554688 669.25823975 680.85864258 681.42980957 685.75750732
  688.29663086 691.13702393 691.63708496 691.85925293 696.70861816
  698.87786865 702.85406494 703.85998535 706.0446167  708.15911865
  711.11364746 711.77758789 712.88500977 718.15655518 722.65490723
  723.63989258 725.82800293 729.0947876  731.4262085  732.01544189
  732.29296875 733.9329834  736.39093018 738.88104248 739.95617676
  741.12158203 741.96154785 742.67980957 743.46130371 743.48455811
  745.09790039 745.66662598 747.07312012 748.51281738 748.55804443
  748.91290283 750.9642334  752.52886963 753.9630127  755.47296143
  756.39886475 756.62817383 757.79711914 758.52929688 758.58996582
  759.69567871 760.47021484 762.45220947 762.98425293 764.85217285
  765.14904785 766.16210938 766.89093018 768.11340332 768.67340088
  769.1675415  769.24768066 769.8717041  770.33648682 771.50439453
  771.99780273 772.12158203 772.12927246 774.46179199 775.01385498
  775.83886719 776.62487793 777.26751709 778.30133057 779.44384766]
 [ 16.84097099 413.36437988 483.16946411 493.7472229  506.23394775
  519.68920898 542.63085938 566.20678711 574.34393311 606.54302979
  608.86853027 617.4274292  627.39953613 631.47076416 632.23461914
  632.32958984 638.68920898 643.29815674 644.47351074 647.51159668
  648.7286377  652.16583252 652.59326172 657.45861816 663.21746826
  667.17272949 671.05407715 671.47979736 671.77453613 673.21496582
  675.85180664 676.17114258 677.89123535 678.9453125  682.16827393
  682.94299316 683.40478516 685.16491699 690.74176025 691.13641357
  692.29547119 692.88702393 694.84460449 697.14343262 698.39990234
  700.00415039 701.27697754 703.08477783 704.00720215 705.87103271
  706.00311279 706.7434082  707.64581299 708.47399902 709.15441895
  711.5970459  711.92694092 713.19641113 713.68017578 717.23596191
  717.65649414 720.72705078 722.79284668 725.43530273 727.47216797
  727.722229   728.07141113 729.96337891 731.82006836 733.55163574
  733.65057373 735.24023438 735.60144043 737.15533447 739.46081543
  740.58984375 741.35955811 743.28491211 743.36303711 743.69549561
  745.27697754 745.29516602 745.34490967 745.50372314 747.46685791
  753.00775146 753.44299316 753.57946777 753.76293945 755.63476562
  756.07879639 756.23706055 756.44268799 757.73254395 761.37591553
  764.00854492 764.42852783 764.50091553 765.60095215 769.50463867]], indices=[[269196  20247 523033 471756 404805   2261 209829 191672 482735 119088
  377575  12062 330396 572517 547519 205776 148739 236914 516318  50638
   43435 402992 437331 460927 270122 465180 220584 248334 308476 331075
  417465  82715 577959 561223 441286 272148 108503 232692  29984 248810
  364322 396863 220858  14831 556765 314294  45090 341196 230166  32887
  576052 155571 525155  72813 579307 185292 519688 534673 364636 451090
  125405 207585  22589 355677 335450 272364 278353 528705 427649 125072
  460160 173033 224222 206831 338304   7108 234757 326174  11760 459437
  296224 445675 499768 233567  87875 313783 321887 547383 493864 367195
  322844 530624 573391 452891 252216  82180 366611 291664 224664 255664]
 [194506 203546 418959 490171 560266 186422 127955 475904 307658 132622
  235057 160772 190140 361180 217948 395903  63154 360325 378116  19042
   85911 214753 262587  23230 278973 458223 513484 549055 485071 498286
  515025 372819 246883   5992 361571 288685 372349 142971 380711  32570
  532493 214703 292908  14888 182805 252701  49269  81988 410612 205834
  187362  21879  52507 250205 486046 332351 580418 122672 221017 251572
  238039 512648 534270 528524 353518  49810 182441 212559 548524 570448
  274066 190307 138492  44068 396580 573626 335081 166642 151662 324158
  568981 461405 567011 226058 311518 175443 521231 121673  57672 171611
  270402 492284 263966 474039 515350 319369 456015  82807 498807 449603]
 [269196  20247 523033 471756 404805   2261 209829 191672 482735 119088
  377575  12062 330396 572517 547519 205776 148739 236914 516318  50638
   43435 402992 437331 460927 270122 465180 220584 248334 308476 331075
  417465  82715 577959 561223 441286 272148 108503 232692  29984 248810
  364322 396863 220858  14831 556765 314294  45090 341196 230166  32887
  576052 155571 525155  72813 579307 185292 519688 534673 364636 451090
  125405 207585  22589 355677 335450 272364 278353 528705 427649 125072
  460160 173033 224222 206831 338304   7108 234757 326174  11760 459437
  296224 445675 499768 233567  87875 313783 321887 547383 493864 367195
  322844 530624 573391 452891 252216  82180 366611 291664 224664 255664]
 [194506 203546 418959 490171 560266 186422 127955 475904 307658 132622
  235057 160772 190140 361180 217948 395903  63154 360325 378116  19042
   85911 214753 262587  23230 278973 458223 513484 549055 485071 498286
  515025 372819 246883   5992 361571 288685 372349 142971 380711  32570
  532493 214703 292908  14888 182805 252701  49269  81988 410612 205834
  187362  21879  52507 250205 486046 332351 580418 122672 221017 251572
  238039 512648 534270 528524 353518  49810 182441 212559 548524 570448
  274066 190307 138492  44068 396580 573626 335081 166642 151662 324158
  568981 461405 567011 226058 311518 175443 521231 121673  57672 171611
  270402 492284 263966 474039 515350 319369 456015  82807 498807 449603]]
2025-03-23 19:43:43,299 - __main__ - DEBUG - Search results: distances shape=(4, 100), indices shape=(4, 100)
2025-03-23 19:43:43,299 - __main__ - DEBUG - Returning search results: 4 items
2025-03-23 19:43:43,300 - werkzeug - INFO - 127.0.0.1 - - [23/Mar/2025 19:43:43] "POST /search HTTP/1.1" 200 -
2025-03-23 19:43:43,307 - __main__ - DEBUG - Received search request with query_vector shape=(1, 512), k=100
2025-03-23 19:43:43,307 - __main__ - DEBUG - Calling coordinator.search
2025-03-23 19:43:43,307 - coordinator - DEBUG - Starting search with query_vector shape=(1, 512), k=100
2025-03-23 19:43:43,307 - root - DEBUG - Getting candidate shards for query vector with shape (1, 512)
2025-03-23 19:43:43,308 - root - DEBUG - Table 0 hash value shape: (1, 4)
2025-03-23 19:43:43,308 - root - DEBUG - Table 1 hash value shape: (1, 4)
2025-03-23 19:43:43,308 - root - DEBUG - Table 2 hash value shape: (1, 4)
2025-03-23 19:43:43,308 - root - DEBUG - Assigned vector to shard 1
2025-03-23 19:43:43,308 - root - DEBUG - Table 0 hash value shape: (1, 4)
2025-03-23 19:43:43,308 - root - DEBUG - Table 1 hash value shape: (1, 4)
2025-03-23 19:43:43,308 - root - DEBUG - Table 2 hash value shape: (1, 4)
2025-03-23 19:43:43,308 - root - DEBUG - Selected candidate shards: [0, 1]
2025-03-23 19:43:43,308 - coordinator - DEBUG - Candidate shards: [0, 1]
2025-03-23 19:43:43,308 - coordinator - DEBUG - Mapping shard_id 0 to node_idx 0 (out of 3 nodes)
2025-03-23 19:43:43,308 - coordinator - DEBUG - Submitting search to shard 0 at localhost:6001
2025-03-23 19:43:43,308 - coordinator - DEBUG - Sending search request to http://localhost:6001/search
2025-03-23 19:43:43,309 - coordinator - DEBUG - Mapping shard_id 1 to node_idx 1 (out of 3 nodes)
2025-03-23 19:43:43,310 - coordinator - DEBUG - Submitting search to shard 1 at localhost:6002
2025-03-23 19:43:43,310 - coordinator - DEBUG - Sending search request to http://localhost:6002/search
2025-03-23 19:43:43,312 - urllib3.connectionpool - DEBUG - Starting new HTTP connection (1): localhost:6001
2025-03-23 19:43:43,313 - urllib3.connectionpool - DEBUG - Starting new HTTP connection (1): localhost:6002
2025-03-23 19:43:43,318 - urllib3.connectionpool - DEBUG - http://localhost:6001 "POST /search HTTP/1.1" 200 2489
2025-03-23 19:43:43,318 - urllib3.connectionpool - DEBUG - http://localhost:6002 "POST /search HTTP/1.1" 200 2507
2025-03-23 19:43:43,319 - coordinator - DEBUG - Received response from http://localhost:6001/search: {'distances': [[174.93800354003906, 177.30520629882812, 216.1268310546875, 221.31491088867188, 233.08541870117188, 261.701904296875, 262.1899108886719, 262.27606201171875, 269.3204345703125, 292.8341064453125, 294.8072509765625, 298.2437744140625, 309.1837463378906, 317.4807434082031, 322.1290283203125, 334.9607238769531, 338.32122802734375, 348.18145751953125, 354.47015380859375, 376.1211242675781, 430.7450256347656, 433.34619140625, 436.1806640625, 512.3353881835938, 562.98876953125, 573.7252197265625, 606.9073486328125, 610.5836181640625, 616.6947021484375, 618.6112060546875, 627.952880859375, 628.0227661132812, 641.1585693359375, 641.8284301757812, 643.9364624023438, 647.478759765625, 650.9100341796875, 658.8660278320312, 662.1173095703125, 665.6736450195312, 667.3264770507812, 671.1395263671875, 673.91064453125, 676.3482666015625, 676.81689453125, 678.1864013671875, 687.8329467773438, 691.7130737304688, 699.8323364257812, 704.4605712890625, 708.4171142578125, 714.3092041015625, 715.6985473632812, 715.77392578125, 717.8372802734375, 720.8828125, 721.073486328125, 722.0407104492188, 722.667724609375, 723.1541137695312, 724.320556640625, 724.4823608398438, 724.8392333984375, 726.9494018554688, 729.9615478515625, 731.1001586914062, 731.486328125, 732.5111694335938, 735.5361938476562, 737.328125, 737.6207275390625, 739.1134033203125, 742.7491455078125, 743.0499877929688, 743.9497680664062, 745.7630004882812, 750.349365234375, 751.1903076171875, 752.8633422851562, 753.030029296875, 753.1314697265625, 753.7840576171875, 754.439208984375, 754.5061645507812, 754.699462890625, 755.4445190429688, 755.5142211914062, 755.7798461914062, 756.0354614257812, 756.04248046875, 756.156982421875, 756.812255859375, 757.215576171875, 758.39501953125, 758.7086181640625, 759.02734375, 759.6759033203125, 759.9293823242188, 760.1729125976562, 760.8104248046875]], 'indices': [[577149, 501243, 54123, 159311, 484296, 125211, 201676, 378453, 320632, 52462, 31269, 516316, 122969, 20059, 38825, 509656, 491613, 215245, 25139, 11760, 1818, 116589, 377497, 159977, 222235, 248810, 7108, 359781, 445675, 166664, 162543, 259382, 237864, 396863, 155571, 314294, 369037, 289741, 112634, 356261, 134689, 480842, 514797, 88250, 519208, 158945, 80274, 329447, 375763, 207306, 528862, 335450, 534673, 572517, 86220, 286994, 485895, 239857, 293245, 227399, 543043, 287545, 460160, 20247, 481573, 420230, 211069, 233567, 334719, 252216, 41633, 278353, 129054, 171050, 118209, 331075, 481480, 402992, 288584, 543300, 526392, 174371, 416758, 454978, 17031, 212895, 450758, 377575, 506656, 549738, 559099, 551350, 158744, 469652, 272364, 338532, 87742, 404922, 267940, 152870]], 'status': 'success'}
2025-03-23 19:43:43,319 - coordinator - DEBUG - Valid results from http://localhost:6001/search: distances shape=(1, 100), indices shape=(1, 100)
2025-03-23 19:43:43,320 - coordinator - DEBUG - Received response from http://localhost:6002/search: {'distances': [[10.470561027526855, 183.81088256835938, 190.28012084960938, 192.55322265625, 199.662841796875, 214.04718017578125, 236.26507568359375, 242.81317138671875, 242.8248291015625, 247.85531616210938, 254.98904418945312, 257.8063659667969, 263.5331115722656, 267.7431335449219, 268.6251220703125, 272.5681457519531, 290.2749328613281, 313.46319580078125, 339.33746337890625, 349.4792785644531, 354.4400634765625, 354.5458068847656, 361.3283996582031, 362.1207275390625, 400.2736511230469, 410.6094055175781, 415.58709716796875, 458.10321044921875, 477.4178466796875, 486.51800537109375, 540.6011962890625, 576.6490478515625, 581.607421875, 584.0753784179688, 629.189208984375, 631.4795532226562, 646.551025390625, 658.0592041015625, 660.635986328125, 661.0700073242188, 661.9409790039062, 663.14013671875, 663.6141357421875, 668.4470825195312, 668.7338256835938, 668.7709350585938, 669.3317260742188, 679.2265014648438, 685.1669921875, 688.7613525390625, 694.518310546875, 705.306640625, 706.0090942382812, 707.0716552734375, 709.0653076171875, 710.6373291015625, 713.2939453125, 714.1690673828125, 714.6737060546875, 717.1124877929688, 718.0023193359375, 718.249267578125, 718.6597900390625, 719.1871337890625, 719.7168579101562, 722.0466918945312, 722.3511962890625, 725.4933471679688, 726.416748046875, 726.5652465820312, 726.6072387695312, 727.9056396484375, 728.544189453125, 730.1600952148438, 734.503173828125, 734.633056640625, 736.80517578125, 738.7294311523438, 740.7564697265625, 741.1685180664062, 742.020751953125, 742.5936279296875, 743.1744384765625, 745.363525390625, 746.392578125, 747.0584716796875, 748.1036987304688, 749.2315063476562, 749.809814453125, 752.753662109375, 752.94384765625, 753.8443603515625, 755.1141357421875, 757.2239990234375, 758.210205078125, 758.8616333007812, 759.5643310546875, 759.5825805664062, 759.7803955078125, 759.8705444335938]], 'indices': [[545129, 124975, 325306, 172977, 493019, 364166, 552902, 290833, 250758, 236730, 473974, 447313, 64499, 244592, 70158, 449406, 185409, 113354, 317024, 508586, 504635, 148783, 60770, 93965, 504439, 545730, 110211, 509735, 163290, 49761, 486046, 259625, 417876, 221281, 382088, 344059, 106757, 6894, 126216, 79565, 337987, 462904, 270402, 263966, 301981, 289659, 118515, 166642, 448448, 475150, 350607, 133631, 16010, 492282, 235057, 97230, 51309, 261712, 130599, 165336, 369081, 356968, 14888, 574297, 439715, 104619, 345027, 377486, 221017, 456015, 580757, 315187, 331280, 442661, 167128, 275392, 319721, 286503, 360325, 344888, 41888, 250205, 311295, 288882, 286849, 389316, 301867, 530099, 378139, 49269, 105923, 214753, 147498, 566042, 455872, 288685, 62353, 397639, 48504, 458223]], 'status': 'success'}
2025-03-23 19:43:43,320 - coordinator - DEBUG - Received search results: distances shape=(1, 100), indices shape=(1, 100)
2025-03-23 19:43:43,320 - coordinator - DEBUG - Valid results from http://localhost:6002/search: distances shape=(1, 100), indices shape=(1, 100)
2025-03-23 19:43:43,320 - coordinator - DEBUG - Received search results: distances shape=(1, 100), indices shape=(1, 100)
2025-03-23 19:43:43,321 - coordinator - DEBUG - All distances: [array([174.93800354, 177.3052063 , 216.12683105, 221.31491089,
       233.0854187 , 261.7019043 , 262.18991089, 262.27606201,
       269.32043457, 292.83410645, 294.80725098, 298.24377441,
       309.18374634, 317.48074341, 322.12902832, 334.96072388,
       338.32122803, 348.18145752, 354.47015381, 376.12112427,
       430.74502563, 433.34619141, 436.18066406, 512.33538818,
       562.98876953, 573.72521973, 606.90734863, 610.58361816,
       616.69470215, 618.61120605, 627.95288086, 628.02276611,
       641.15856934, 641.82843018, 643.9364624 , 647.47875977,
       650.91003418, 658.86602783, 662.11730957, 665.67364502,
       667.32647705, 671.13952637, 673.91064453, 676.3482666 ,
       676.81689453, 678.18640137, 687.83294678, 691.71307373,
       699.83233643, 704.46057129, 708.41711426, 714.3092041 ,
       715.69854736, 715.77392578, 717.83728027, 720.8828125 ,
       721.07348633, 722.04071045, 722.66772461, 723.15411377,
       724.32055664, 724.48236084, 724.8392334 , 726.94940186,
       729.96154785, 731.10015869, 731.48632812, 732.51116943,
       735.53619385, 737.328125  , 737.62072754, 739.11340332,
       742.74914551, 743.04998779, 743.94976807, 745.76300049,
       750.34936523, 751.19030762, 752.86334229, 753.0300293 ,
       753.13146973, 753.78405762, 754.43920898, 754.50616455,
       754.69946289, 755.44451904, 755.51422119, 755.77984619,
       756.03546143, 756.04248047, 756.15698242, 756.81225586,
       757.21557617, 758.39501953, 758.70861816, 759.02734375,
       759.67590332, 759.92938232, 760.1729126 , 760.8104248 ]), array([ 10.47056103, 183.81088257, 190.28012085, 192.55322266,
       199.6628418 , 214.04718018, 236.26507568, 242.81317139,
       242.8248291 , 247.85531616, 254.98904419, 257.80636597,
       263.53311157, 267.74313354, 268.62512207, 272.56814575,
       290.27493286, 313.4631958 , 339.33746338, 349.47927856,
       354.44006348, 354.54580688, 361.32839966, 362.12072754,
       400.27365112, 410.60940552, 415.58709717, 458.10321045,
       477.41784668, 486.51800537, 540.60119629, 576.64904785,
       581.60742188, 584.07537842, 629.18920898, 631.47955322,
       646.55102539, 658.0592041 , 660.63598633, 661.07000732,
       661.940979  , 663.14013672, 663.61413574, 668.44708252,
       668.73382568, 668.77093506, 669.33172607, 679.22650146,
       685.16699219, 688.76135254, 694.51831055, 705.30664062,
       706.00909424, 707.07165527, 709.06530762, 710.6373291 ,
       713.29394531, 714.16906738, 714.67370605, 717.11248779,
       718.00231934, 718.24926758, 718.65979004, 719.18713379,
       719.71685791, 722.04669189, 722.35119629, 725.49334717,
       726.41674805, 726.56524658, 726.60723877, 727.90563965,
       728.54418945, 730.16009521, 734.50317383, 734.63305664,
       736.80517578, 738.72943115, 740.75646973, 741.16851807,
       742.02075195, 742.59362793, 743.17443848, 745.36352539,
       746.39257812, 747.05847168, 748.10369873, 749.23150635,
       749.80981445, 752.75366211, 752.94384766, 753.84436035,
       755.11413574, 757.22399902, 758.21020508, 758.8616333 ,
       759.56433105, 759.58258057, 759.78039551, 759.87054443])]
2025-03-23 19:43:43,321 - coordinator - DEBUG - All indices: [array([577149, 501243,  54123, 159311, 484296, 125211, 201676, 378453,
       320632,  52462,  31269, 516316, 122969,  20059,  38825, 509656,
       491613, 215245,  25139,  11760,   1818, 116589, 377497, 159977,
       222235, 248810,   7108, 359781, 445675, 166664, 162543, 259382,
       237864, 396863, 155571, 314294, 369037, 289741, 112634, 356261,
       134689, 480842, 514797,  88250, 519208, 158945,  80274, 329447,
       375763, 207306, 528862, 335450, 534673, 572517,  86220, 286994,
       485895, 239857, 293245, 227399, 543043, 287545, 460160,  20247,
       481573, 420230, 211069, 233567, 334719, 252216,  41633, 278353,
       129054, 171050, 118209, 331075, 481480, 402992, 288584, 543300,
       526392, 174371, 416758, 454978,  17031, 212895, 450758, 377575,
       506656, 549738, 559099, 551350, 158744, 469652, 272364, 338532,
        87742, 404922, 267940, 152870]), array([545129, 124975, 325306, 172977, 493019, 364166, 552902, 290833,
       250758, 236730, 473974, 447313,  64499, 244592,  70158, 449406,
       185409, 113354, 317024, 508586, 504635, 148783,  60770,  93965,
       504439, 545730, 110211, 509735, 163290,  49761, 486046, 259625,
       417876, 221281, 382088, 344059, 106757,   6894, 126216,  79565,
       337987, 462904, 270402, 263966, 301981, 289659, 118515, 166642,
       448448, 475150, 350607, 133631,  16010, 492282, 235057,  97230,
        51309, 261712, 130599, 165336, 369081, 356968,  14888, 574297,
       439715, 104619, 345027, 377486, 221017, 456015, 580757, 315187,
       331280, 442661, 167128, 275392, 319721, 286503, 360325, 344888,
        41888, 250205, 311295, 288882, 286849, 389316, 301867, 530099,
       378139,  49269, 105923, 214753, 147498, 566042, 455872, 288685,
        62353, 397639,  48504, 458223])]
2025-03-23 19:43:43,321 - coordinator - DEBUG - all_distances shape: (2, 100), all_indices shape: (2, 100)
2025-03-23 19:43:43,322 - coordinator - DEBUG - Using k=2 for sorting
2025-03-23 19:43:43,322 - coordinator - DEBUG - sorted_idx: [[ 0  1  2  3  4  5  6  7  8  9 10 11 12 13 14 15 16 17 18 19 20 21 22 23
  24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47
  48 49 50 51 52 53 54 55 56 57 58 59 60 61 62 63 64 65 66 67 68 69 70 71
  72 73 74 75 76 77 78 79 80 81 82 83 84 85 86 87 88 89 90 91 92 93 94 95
  96 97 98 99]
 [ 0  1  2  3  4  5  6  7  8  9 10 11 12 13 14 15 16 17 18 19 20 21 22 23
  24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47
  48 49 50 51 52 53 54 55 56 57 58 59 60 61 62 63 64 65 66 67 68 69 70 71
  72 73 74 75 76 77 78 79 80 81 82 83 84 85 86 87 88 89 90 91 92 93 94 95
  96 97 98 99]]
2025-03-23 19:43:43,322 - coordinator - ERROR - Index out of bounds: max sorted_idx=99, len(all_distances)=2
2025-03-23 19:43:43,324 - coordinator - DEBUG - Returning results: distances=[[174.93800354 177.3052063  216.12683105 221.31491089 233.0854187
  261.7019043  262.18991089 262.27606201 269.32043457 292.83410645
  294.80725098 298.24377441 309.18374634 317.48074341 322.12902832
  334.96072388 338.32122803 348.18145752 354.47015381 376.12112427
  430.74502563 433.34619141 436.18066406 512.33538818 562.98876953
  573.72521973 606.90734863 610.58361816 616.69470215 618.61120605
  627.95288086 628.02276611 641.15856934 641.82843018 643.9364624
  647.47875977 650.91003418 658.86602783 662.11730957 665.67364502
  667.32647705 671.13952637 673.91064453 676.3482666  676.81689453
  678.18640137 687.83294678 691.71307373 699.83233643 704.46057129
  708.41711426 714.3092041  715.69854736 715.77392578 717.83728027
  720.8828125  721.07348633 722.04071045 722.66772461 723.15411377
  724.32055664 724.48236084 724.8392334  726.94940186 729.96154785
  731.10015869 731.48632812 732.51116943 735.53619385 737.328125
  737.62072754 739.11340332 742.74914551 743.04998779 743.94976807
  745.76300049 750.34936523 751.19030762 752.86334229 753.0300293
  753.13146973 753.78405762 754.43920898 754.50616455 754.69946289
  755.44451904 755.51422119 755.77984619 756.03546143 756.04248047
  756.15698242 756.81225586 757.21557617 758.39501953 758.70861816
  759.02734375 759.67590332 759.92938232 760.1729126  760.8104248 ]
 [ 10.47056103 183.81088257 190.28012085 192.55322266 199.6628418
  214.04718018 236.26507568 242.81317139 242.8248291  247.85531616
  254.98904419 257.80636597 263.53311157 267.74313354 268.62512207
  272.56814575 290.27493286 313.4631958  339.33746338 349.47927856
  354.44006348 354.54580688 361.32839966 362.12072754 400.27365112
  410.60940552 415.58709717 458.10321045 477.41784668 486.51800537
  540.60119629 576.64904785 581.60742188 584.07537842 629.18920898
  631.47955322 646.55102539 658.0592041  660.63598633 661.07000732
  661.940979   663.14013672 663.61413574 668.44708252 668.73382568
  668.77093506 669.33172607 679.22650146 685.16699219 688.76135254
  694.51831055 705.30664062 706.00909424 707.07165527 709.06530762
  710.6373291  713.29394531 714.16906738 714.67370605 717.11248779
  718.00231934 718.24926758 718.65979004 719.18713379 719.71685791
  722.04669189 722.35119629 725.49334717 726.41674805 726.56524658
  726.60723877 727.90563965 728.54418945 730.16009521 734.50317383
  734.63305664 736.80517578 738.72943115 740.75646973 741.16851807
  742.02075195 742.59362793 743.17443848 745.36352539 746.39257812
  747.05847168 748.10369873 749.23150635 749.80981445 752.75366211
  752.94384766 753.84436035 755.11413574 757.22399902 758.21020508
  758.8616333  759.56433105 759.58258057 759.78039551 759.87054443]
 [174.93800354 177.3052063  216.12683105 221.31491089 233.0854187
  261.7019043  262.18991089 262.27606201 269.32043457 292.83410645
  294.80725098 298.24377441 309.18374634 317.48074341 322.12902832
  334.96072388 338.32122803 348.18145752 354.47015381 376.12112427
  430.74502563 433.34619141 436.18066406 512.33538818 562.98876953
  573.72521973 606.90734863 610.58361816 616.69470215 618.61120605
  627.95288086 628.02276611 641.15856934 641.82843018 643.9364624
  647.47875977 650.91003418 658.86602783 662.11730957 665.67364502
  667.32647705 671.13952637 673.91064453 676.3482666  676.81689453
  678.18640137 687.83294678 691.71307373 699.83233643 704.46057129
  708.41711426 714.3092041  715.69854736 715.77392578 717.83728027
  720.8828125  721.07348633 722.04071045 722.66772461 723.15411377
  724.32055664 724.48236084 724.8392334  726.94940186 729.96154785
  731.10015869 731.48632812 732.51116943 735.53619385 737.328125
  737.62072754 739.11340332 742.74914551 743.04998779 743.94976807
  745.76300049 750.34936523 751.19030762 752.86334229 753.0300293
  753.13146973 753.78405762 754.43920898 754.50616455 754.69946289
  755.44451904 755.51422119 755.77984619 756.03546143 756.04248047
  756.15698242 756.81225586 757.21557617 758.39501953 758.70861816
  759.02734375 759.67590332 759.92938232 760.1729126  760.8104248 ]
 [ 10.47056103 183.81088257 190.28012085 192.55322266 199.6628418
  214.04718018 236.26507568 242.81317139 242.8248291  247.85531616
  254.98904419 257.80636597 263.53311157 267.74313354 268.62512207
  272.56814575 290.27493286 313.4631958  339.33746338 349.47927856
  354.44006348 354.54580688 361.32839966 362.12072754 400.27365112
  410.60940552 415.58709717 458.10321045 477.41784668 486.51800537
  540.60119629 576.64904785 581.60742188 584.07537842 629.18920898
  631.47955322 646.55102539 658.0592041  660.63598633 661.07000732
  661.940979   663.14013672 663.61413574 668.44708252 668.73382568
  668.77093506 669.33172607 679.22650146 685.16699219 688.76135254
  694.51831055 705.30664062 706.00909424 707.07165527 709.06530762
  710.6373291  713.29394531 714.16906738 714.67370605 717.11248779
  718.00231934 718.24926758 718.65979004 719.18713379 719.71685791
  722.04669189 722.35119629 725.49334717 726.41674805 726.56524658
  726.60723877 727.90563965 728.54418945 730.16009521 734.50317383
  734.63305664 736.80517578 738.72943115 740.75646973 741.16851807
  742.02075195 742.59362793 743.17443848 745.36352539 746.39257812
  747.05847168 748.10369873 749.23150635 749.80981445 752.75366211
  752.94384766 753.84436035 755.11413574 757.22399902 758.21020508
  758.8616333  759.56433105 759.58258057 759.78039551 759.87054443]], indices=[[577149 501243  54123 159311 484296 125211 201676 378453 320632  52462
   31269 516316 122969  20059  38825 509656 491613 215245  25139  11760
    1818 116589 377497 159977 222235 248810   7108 359781 445675 166664
  162543 259382 237864 396863 155571 314294 369037 289741 112634 356261
  134689 480842 514797  88250 519208 158945  80274 329447 375763 207306
  528862 335450 534673 572517  86220 286994 485895 239857 293245 227399
  543043 287545 460160  20247 481573 420230 211069 233567 334719 252216
   41633 278353 129054 171050 118209 331075 481480 402992 288584 543300
  526392 174371 416758 454978  17031 212895 450758 377575 506656 549738
  559099 551350 158744 469652 272364 338532  87742 404922 267940 152870]
 [545129 124975 325306 172977 493019 364166 552902 290833 250758 236730
  473974 447313  64499 244592  70158 449406 185409 113354 317024 508586
  504635 148783  60770  93965 504439 545730 110211 509735 163290  49761
  486046 259625 417876 221281 382088 344059 106757   6894 126216  79565
  337987 462904 270402 263966 301981 289659 118515 166642 448448 475150
  350607 133631  16010 492282 235057  97230  51309 261712 130599 165336
  369081 356968  14888 574297 439715 104619 345027 377486 221017 456015
  580757 315187 331280 442661 167128 275392 319721 286503 360325 344888
   41888 250205 311295 288882 286849 389316 301867 530099 378139  49269
  105923 214753 147498 566042 455872 288685  62353 397639  48504 458223]
 [577149 501243  54123 159311 484296 125211 201676 378453 320632  52462
   31269 516316 122969  20059  38825 509656 491613 215245  25139  11760
    1818 116589 377497 159977 222235 248810   7108 359781 445675 166664
  162543 259382 237864 396863 155571 314294 369037 289741 112634 356261
  134689 480842 514797  88250 519208 158945  80274 329447 375763 207306
  528862 335450 534673 572517  86220 286994 485895 239857 293245 227399
  543043 287545 460160  20247 481573 420230 211069 233567 334719 252216
   41633 278353 129054 171050 118209 331075 481480 402992 288584 543300
  526392 174371 416758 454978  17031 212895 450758 377575 506656 549738
  559099 551350 158744 469652 272364 338532  87742 404922 267940 152870]
 [545129 124975 325306 172977 493019 364166 552902 290833 250758 236730
  473974 447313  64499 244592  70158 449406 185409 113354 317024 508586
  504635 148783  60770  93965 504439 545730 110211 509735 163290  49761
  486046 259625 417876 221281 382088 344059 106757   6894 126216  79565
  337987 462904 270402 263966 301981 289659 118515 166642 448448 475150
  350607 133631  16010 492282 235057  97230  51309 261712 130599 165336
  369081 356968  14888 574297 439715 104619 345027 377486 221017 456015
  580757 315187 331280 442661 167128 275392 319721 286503 360325 344888
   41888 250205 311295 288882 286849 389316 301867 530099 378139  49269
  105923 214753 147498 566042 455872 288685  62353 397639  48504 458223]]
2025-03-23 19:43:43,324 - __main__ - DEBUG - Search results: distances shape=(4, 100), indices shape=(4, 100)
2025-03-23 19:43:43,324 - __main__ - DEBUG - Returning search results: 4 items
2025-03-23 19:43:43,324 - werkzeug - INFO - 127.0.0.1 - - [23/Mar/2025 19:43:43] "POST /search HTTP/1.1" 200 -
2025-03-23 19:49:57,909 - __main__ - DEBUG - Received search request with query_vector shape=(1, 512), k=5
2025-03-23 19:49:57,910 - __main__ - DEBUG - Calling coordinator.search
2025-03-23 19:49:57,910 - coordinator - DEBUG - Starting search with query_vector shape=(1, 512), k=5
2025-03-23 19:49:57,910 - root - DEBUG - Getting candidate shards for query vector with shape (1, 512)
2025-03-23 19:49:57,911 - root - DEBUG - Table 0 hash value shape: (1, 4)
2025-03-23 19:49:57,911 - root - DEBUG - Table 1 hash value shape: (1, 4)
2025-03-23 19:49:57,911 - root - DEBUG - Table 2 hash value shape: (1, 4)
2025-03-23 19:49:57,911 - root - DEBUG - Assigned vector to shard 0
2025-03-23 19:49:57,912 - root - DEBUG - Table 0 hash value shape: (1, 4)
2025-03-23 19:49:57,912 - root - DEBUG - Table 1 hash value shape: (1, 4)
2025-03-23 19:49:57,912 - root - DEBUG - Table 2 hash value shape: (1, 4)
2025-03-23 19:49:57,912 - root - DEBUG - Selected candidate shards: [0, 2]
2025-03-23 19:49:57,912 - coordinator - DEBUG - Candidate shards: [0, 2]
2025-03-23 19:49:57,912 - coordinator - DEBUG - Mapping shard_id 0 to node_idx 0 (out of 3 nodes)
2025-03-23 19:49:57,912 - coordinator - DEBUG - Submitting search to shard 0 at localhost:6001
2025-03-23 19:49:57,913 - coordinator - DEBUG - Sending search request to http://localhost:6001/search
2025-03-23 19:49:57,913 - coordinator - DEBUG - Mapping shard_id 2 to node_idx 2 (out of 3 nodes)
2025-03-23 19:49:57,915 - coordinator - DEBUG - Submitting search to shard 2 at localhost:6003
2025-03-23 19:49:57,915 - coordinator - DEBUG - Sending search request to http://localhost:6003/search
2025-03-23 19:49:57,918 - urllib3.connectionpool - DEBUG - Starting new HTTP connection (1): localhost:6001
2025-03-23 19:49:57,919 - urllib3.connectionpool - DEBUG - Starting new HTTP connection (1): localhost:6003
2025-03-23 19:49:57,937 - urllib3.connectionpool - DEBUG - http://localhost:6003 "POST /search HTTP/1.1" 200 176
2025-03-23 19:49:57,937 - urllib3.connectionpool - DEBUG - http://localhost:6001 "POST /search HTTP/1.1" 200 175
2025-03-23 19:49:57,938 - coordinator - DEBUG - Received response from http://localhost:6003/search: {'distances': [[188.59539794921875, 192.8320770263672, 228.01296997070312, 246.8553466796875, 257.1581726074219]], 'indices': [[47769, 441247, 543047, 16958, 525083]], 'status': 'success'}
2025-03-23 19:49:57,938 - coordinator - DEBUG - Received response from http://localhost:6001/search: {'distances': [[8.146596908569336, 159.9815673828125, 200.69960021972656, 219.9654998779297, 253.79266357421875]], 'indices': [[139, 221708, 575970, 326082, 189310]], 'status': 'success'}
2025-03-23 19:49:57,938 - coordinator - DEBUG - Valid results from http://localhost:6003/search: distances shape=(1, 5), indices shape=(1, 5)
2025-03-23 19:49:57,938 - coordinator - DEBUG - Valid results from http://localhost:6001/search: distances shape=(1, 5), indices shape=(1, 5)
2025-03-23 19:49:57,939 - coordinator - DEBUG - Received search results: distances shape=(1, 5), indices shape=(1, 5)
2025-03-23 19:49:57,939 - coordinator - DEBUG - Received search results: distances shape=(1, 5), indices shape=(1, 5)
2025-03-23 19:49:57,939 - coordinator - DEBUG - All distances: [array([188.59539795, 192.83207703, 228.01296997, 246.85534668,
       257.15817261]), array([  8.14659691, 159.98156738, 200.69960022, 219.96549988,
       253.79266357])]
2025-03-23 19:49:57,939 - coordinator - DEBUG - All indices: [array([ 47769, 441247, 543047,  16958, 525083]), array([   139, 221708, 575970, 326082, 189310])]
2025-03-23 19:49:57,939 - coordinator - DEBUG - all_distances shape: (2, 5), all_indices shape: (2, 5)
2025-03-23 19:49:57,939 - coordinator - DEBUG - Using k=2 for sorting
2025-03-23 19:49:57,939 - coordinator - DEBUG - sorted_idx: [[0 1 2 3 4]
 [0 1 2 3 4]]
2025-03-23 19:49:57,939 - coordinator - ERROR - Index out of bounds: max sorted_idx=4, len(all_distances)=2
2025-03-23 19:49:57,940 - coordinator - DEBUG - Returning results: distances=[[188.59539795 192.83207703 228.01296997 246.85534668 257.15817261]
 [  8.14659691 159.98156738 200.69960022 219.96549988 253.79266357]
 [188.59539795 192.83207703 228.01296997 246.85534668 257.15817261]
 [  8.14659691 159.98156738 200.69960022 219.96549988 253.79266357]], indices=[[ 47769 441247 543047  16958 525083]
 [   139 221708 575970 326082 189310]
 [ 47769 441247 543047  16958 525083]
 [   139 221708 575970 326082 189310]]
2025-03-23 19:49:57,940 - __main__ - DEBUG - Search results: distances shape=(4, 5), indices shape=(4, 5)
2025-03-23 19:49:57,940 - __main__ - DEBUG - Returning search results: 4 items
2025-03-23 19:49:57,940 - werkzeug - INFO - 127.0.0.1 - - [23/Mar/2025 19:49:57] "POST /search HTTP/1.1" 200 -
